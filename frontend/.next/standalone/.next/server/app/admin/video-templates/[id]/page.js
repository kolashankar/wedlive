(()=>{var e={};e.id=2609,e.ids=[2609],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},86996:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),a(33140),a(73603),a(35866);var i=a(23191),n=a(88716),s=a(37922),l=a.n(s),r=a(95231),o={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>r[e]);a.d(t,o);let d=["",{children:["admin",{children:["video-templates",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,33140)),"/app/frontend/app/admin/video-templates/[id]/page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,73603)),"/app/frontend/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/frontend/app/admin/video-templates/[id]/page.js"],u="/admin/video-templates/[id]/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/video-templates/[id]/page",pathname:"/admin/video-templates/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},37292:(e,t,a)=>{Promise.resolve().then(a.bind(a,92724))},92724:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>X});var i=a(10326),n=a(17577),s=a(35047),l=a(94464),r=a(84554),o=a.n(r),d=a(50560),c=a(18729),u=a(240),p=a(6917),h=a(99597),m=a(20835),y=a(79349),x=a(38705),f=a(64745),g=a(63096),v=a(1572),b=a(31215);let j=[{value:"bride_name",label:"Bride's Name"},{value:"groom_name",label:"Groom's Name"},{value:"bride_first_name",label:"Bride's First Name"},{value:"groom_first_name",label:"Groom's First Name"},{value:"couple_names",label:"Couple Names"},{value:"event_date",label:"Event Date (Day)"},{value:"event_date_full",label:"Event Date (Full)"},{value:"event_month",label:"Event Month"},{value:"event_year",label:"Event Year"},{value:"event_day",label:"Event Day"},{value:"event_time",label:"Event Time"},{value:"venue",label:"Venue"},{value:"venue_address",label:"Venue Address"},{value:"city",label:"City"},{value:"welcome_message",label:"Welcome Message"},{value:"description",label:"Description"},{value:"countdown_days",label:"Countdown Days"},{value:"custom_text_1",label:"Custom Text 1"},{value:"custom_text_2",label:"Custom Text 2"},{value:"custom_text_3",label:"Custom Text 3"},{value:"custom_text_4",label:"Custom Text 4"},{value:"custom_text_5",label:"Custom Text 5"}],w=[{value:"fade-in",label:"Fade In"},{value:"fade-out",label:"Fade Out"},{value:"slide-up",label:"Slide Up"},{value:"slide-down",label:"Slide Down"},{value:"slide-left",label:"Slide Left"},{value:"slide-right",label:"Slide Right"},{value:"scale-up",label:"Scale Up"},{value:"scale-down",label:"Scale Down"},{value:"zoom-in",label:"Zoom In"},{value:"bounce-in",label:"Bounce In"},{value:"bounce-out",label:"Bounce Out"},{value:"rotate-in",label:"Rotate In"},{value:"spin",label:"Spin"},{value:"typewriter",label:"Typewriter"},{value:"blur-in",label:"Blur In"},{value:"blur-out",label:"Blur Out"},{value:"fade-slide-up",label:"Fade + Slide Up"},{value:"scale-fade",label:"Scale + Fade"}],_=["Playfair Display","Montserrat","Roboto","Open Sans","Lato","Arial","Helvetica","Times New Roman","Georgia","Courier New","Verdana","Trebuchet MS","Palatino","Garamond","Impact"],P=[{value:"normal",label:"Normal"},{value:"bold",label:"Bold"},{value:"100",label:"Thin"},{value:"300",label:"Light"},{value:"500",label:"Medium"},{value:"700",label:"Bold"},{value:"900",label:"Black"}],k=[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}],N=[{value:"ease-in-out",label:"Ease In-Out"},{value:"ease-in",label:"Ease In"},{value:"ease-out",label:"Ease Out"},{value:"linear",label:"Linear"},{value:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",label:"Bounce"}];function S({overlay:e,duration:t,currentTime:a,onUpdate:s,onSeek:l}){let[r,o]=(0,n.useState)({endpoint_key:e?.endpoint_key??"couple_names",label:e?.label??"Couple Names",placeholder_text:e?.placeholder_text??"Sample Text",position:e?.position??{x:50,y:50,alignment:"center",anchor_point:"center",unit:"percent"},dimensions:e?.dimensions??{width:50,height:null,unit:"percent"},timing:e?.timing??{start_time:0,end_time:t||10},styling:{font_family:e?.styling?.font_family??"Playfair Display",font_size:e?.styling?.font_size??72,font_weight:e?.styling?.font_weight??"bold",color:e?.styling?.color??"#ffffff",text_align:e?.styling?.text_align??"center",letter_spacing:e?.styling?.letter_spacing??2,line_height:e?.styling?.line_height??1.2,text_shadow:e?.styling?.text_shadow??"0 2px 4px rgba(0,0,0,0.3)",stroke:e?.styling?.stroke??{enabled:!1,color:"#000000",width:2}},animation:{type:e?.animation?.type??"fade-in",duration:e?.animation?.duration??1,easing:e?.animation?.easing??"ease-in-out",entrance:e?.animation?.entrance??{type:"fade-in",duration:1,easing:"ease-in-out"},exit:e?.animation?.exit??{type:"fade-out",duration:1,easing:"ease-in-out"}},responsive:e?.responsive??{mobile_font_size:48,mobile_position:{x:50,y:30,unit:"percent"}}}),[d,m]=(0,n.useState)({}),S=(0,n.useRef)(!1),C=e?.template?.reference_resolution||{width:1920,height:1080},T=e=>(e/(C.height||1080)*100).toFixed(2),M=(e,t)=>t&&0!==t?(e/t).toFixed(3):0,E=(e,t)=>t&&0!==t?(e/t).toFixed(3):0,A=(e,t)=>{o(a=>{let i={...a},n=e.split("."),s=i;for(let e=0;e<n.length-1;e++)s[n[e]]?s[n[e]]={...s[n[e]]}:s[n[e]]={},s=s[n[e]];return s[n[n.length-1]]=t,i}),m(a=>{let i={...a},n=e.split("."),s=i;for(let e=0;e<n.length-1;e++)s[n[e]]||(s[n[e]]={}),s=s[n[e]];return s[n[n.length-1]]=t,i}),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{D()},100)},z=(0,n.useRef)(null),D=async()=>{if(0===Object.keys(d).length)return;S.current=!0;let e={};void 0!==d.endpoint_key&&(e.endpoint_key=r.endpoint_key),void 0!==d.label&&(e.label=r.label),void 0!==d.placeholder_text&&(e.placeholder_text=r.placeholder_text),d.position&&(e.position=r.position),d.dimensions&&(e.dimensions=r.dimensions),d.timing&&(e.timing=r.timing),d.responsive&&(e.responsive=r.responsive),void 0!==d.layer_index&&(e.layer_index=r.layer_index),d.styling&&(e.styling={font_family:r.styling.font_family,font_size:r.styling.font_size,font_weight:r.styling.font_weight,color:r.styling.color,text_align:r.styling.text_align,letter_spacing:r.styling.letter_spacing,line_height:r.styling.line_height,text_shadow:r.styling.text_shadow,stroke:{enabled:r.styling.stroke.enabled,color:r.styling.stroke.color,width:r.styling.stroke.width}}),d.animation&&(e.animation={type:r.animation.type,duration:r.animation.duration,easing:r.animation.easing,entrance:{type:r.animation.entrance.type,duration:r.animation.entrance.duration,easing:r.animation.entrance.easing},exit:{type:r.animation.exit.type,duration:r.animation.exit.duration,easing:r.animation.exit.easing}}),console.log("Saving overlay update with changes:",e);try{await s(e),m({})}finally{setTimeout(()=>{S.current=!1},100)}};return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[i.jsx(v.Z,{className:"w-4 h-4 text-blue-500"}),"Configure Overlay"]}),i.jsx(c.z,{size:"sm",onClick:D,"data-testid":"save-overlay-btn",children:i.jsx(b.Z,{className:"w-4 h-4"})})]}),(0,i.jsxs)("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[i.jsx("p",{className:"text-xs font-semibold text-blue-900 mb-1",children:"\uD83D\uDCA1 Interactive Controls"}),(0,i.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,i.jsxs)("li",{children:["• ",i.jsx("strong",{children:"Drag"})," the overlay on the video to reposition"]}),(0,i.jsxs)("li",{children:["• ",i.jsx("strong",{children:"Resize"})," using the corner/edge handles"]}),(0,i.jsxs)("li",{children:["• Hold ",i.jsx("strong",{children:"Shift"})," while resizing for proportional scaling"]})]})]}),i.jsx(h.x,{className:"h-[calc(100vh-280px)]",children:(0,i.jsxs)(p.mQ,{defaultValue:"content",className:"w-full",children:[(0,i.jsxs)(p.dr,{className:"grid w-full grid-cols-4",children:[i.jsx(p.SP,{value:"content",children:"Content"}),i.jsx(p.SP,{value:"style",children:"Style"}),i.jsx(p.SP,{value:"timing",children:"Timing"}),i.jsx(p.SP,{value:"animation",children:"Animation"})]}),(0,i.jsxs)(p.nU,{value:"content",className:"space-y-4 mt-4",children:[(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Data Source"}),(0,i.jsxs)(u.Ph,{value:r.endpoint_key,onValueChange:e=>{A("endpoint_key",e);let t=j.find(t=>t.value===e);t&&A("label",t.label)},children:[i.jsx(u.i4,{className:"mt-1","data-testid":"endpoint-select",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:j.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Preview Text"}),i.jsx(x.I,{value:r.placeholder_text,onChange:e=>A("placeholder_text",e.target.value),placeholder:"Sample text for preview",className:"mt-1","data-testid":"placeholder-text-input"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This text will be shown in preview. Real wedding data will populate automatically."})]}),(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Position (Drag on video or use inputs)"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[(0,i.jsxs)("div",{children:[i.jsx(y._,{className:"text-xs",children:"X (%)"}),i.jsx(x.I,{type:"number",min:"0",max:"100",step:"0.1",value:r.position.x,onChange:e=>A("position.x",parseFloat(e.target.value)||0),className:"mt-1","data-testid":"position-x-input"})]}),(0,i.jsxs)("div",{children:[i.jsx(y._,{className:"text-xs",children:"Y (%)"}),i.jsx(x.I,{type:"number",min:"0",max:"100",step:"0.1",value:r.position.y,onChange:e=>A("position.y",parseFloat(e.target.value)||0),className:"mt-1","data-testid":"position-y-input"})]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Percentage-based positioning (0-100%). Center: (50%, 50%)"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(y._,{children:["Text Box Width: ",r.dimensions?.width||"Auto","%"]}),i.jsx(f.i,{value:[r.dimensions?.width||50],onValueChange:([e])=>A("dimensions.width",e),min:10,max:100,step:1,className:"mt-2","data-testid":"textbox-width-slider"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Controls text wrapping width. Text will automatically wrap to new lines when it exceeds this width."})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(y._,{children:["Text Box Height: ",r.dimensions?.height?`${r.dimensions.height}%`:"Auto"]}),i.jsx(f.i,{value:[r.dimensions?.height||20],onValueChange:([e])=>A("dimensions.height",e),min:5,max:100,step:1,className:"mt-2","data-testid":"textbox-height-slider"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Controls text box height. Set to control vertical space for text. Text will wrap within this box."})]})]}),(0,i.jsxs)(p.nU,{value:"style",className:"space-y-4 mt-4",children:[(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Font Family"}),(0,i.jsxs)(u.Ph,{value:r.styling.font_family,onValueChange:e=>A("styling.font_family",e),children:[i.jsx(u.i4,{className:"mt-1","data-testid":"font-family-select",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:_.map(e=>i.jsx(u.Ql,{value:e,children:i.jsx("span",{style:{fontFamily:e},children:e})},e))})]}),(0,i.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md border",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Preview:"}),i.jsx("p",{className:"text-2xl font-medium",style:{fontFamily:r.styling.font_family},children:e?.placeholder_text||r.placeholder_text||"Sample Text"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(y._,{children:["Font Size: ",r.styling.font_size,"px (",T(r.styling.font_size),"% of video height)"]}),i.jsx(f.i,{value:[r.styling.font_size],onValueChange:([e])=>A("styling.font_size",e),min:12,max:200,step:1,className:"mt-2","data-testid":"font-size-slider"}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Font will automatically scale on all devices. ",T(r.styling.font_size),"% = ",r.styling.font_size,"px on ",C.height,"px video"]})]}),(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Font Weight"}),(0,i.jsxs)(u.Ph,{value:r.styling.font_weight,onValueChange:e=>A("styling.font_weight",e),children:[i.jsx(u.i4,{className:"mt-1",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:P.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Text Color"}),(0,i.jsxs)("div",{className:"flex gap-2 mt-1",children:[i.jsx(x.I,{type:"color",value:r.styling.color,onChange:e=>{A("styling.color",e.target.value),setTimeout(()=>D(),10)},onInput:e=>{A("styling.color",e.target.value)},className:"w-20 h-10 p-1","data-testid":"text-color-input"}),i.jsx(x.I,{type:"text",value:r.styling.color,onChange:e=>{A("styling.color",e.target.value)},onBlur:()=>{D()},placeholder:"#ffffff",className:"flex-1"})]})]}),(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Text Alignment"}),(0,i.jsxs)(u.Ph,{value:r.styling.text_align,onValueChange:e=>A("styling.text_align",e),children:[i.jsx(u.i4,{className:"mt-1",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:k.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(y._,{children:["Letter Spacing: ",r.styling.letter_spacing,"px (",M(r.styling.letter_spacing,r.styling.font_size),"em)"]}),i.jsx(f.i,{value:[r.styling.letter_spacing],onValueChange:([e])=>A("styling.letter_spacing",e),min:0,max:20,step:1,className:"mt-2"}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Responsive unit: ",M(r.styling.letter_spacing,r.styling.font_size),"em scales automatically with font size"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(y._,{children:["Line Height: ",r.styling.line_height]}),i.jsx(f.i,{value:[r.styling.line_height],onValueChange:([e])=>A("styling.line_height",e),min:.8,max:3,step:.1,className:"mt-2"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Already using responsive ratio (1.0 = normal, 1.5 = 1.5x spacing). Scales automatically with all screen sizes."})]}),(0,i.jsxs)("div",{className:"border-t pt-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(y._,{children:"Text Stroke/Outline"}),i.jsx(g.r,{checked:r.styling.stroke.enabled,onCheckedChange:e=>A("styling.stroke.enabled",e),"data-testid":"stroke-enabled-switch"})]}),r.styling.stroke.enabled&&(0,i.jsxs)("div",{className:"space-y-3 pl-4 border-l-2 border-blue-200",children:[(0,i.jsxs)("div",{children:[i.jsx(y._,{className:"text-xs",children:"Stroke Color"}),(0,i.jsxs)("div",{className:"flex gap-2 mt-1",children:[i.jsx(x.I,{type:"color",value:r.styling.stroke.color,onChange:e=>A("styling.stroke.color",e.target.value),className:"w-16 h-8 p-1"}),i.jsx(x.I,{type:"text",value:r.styling.stroke.color,onChange:e=>A("styling.stroke.color",e.target.value),className:"flex-1"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(y._,{className:"text-xs",children:["Stroke Width: ",r.styling.stroke.width,"px (",E(r.styling.stroke.width,r.styling.font_size),"em)"]}),i.jsx(f.i,{value:[r.styling.stroke.width],onValueChange:([e])=>A("styling.stroke.width",e),min:1,max:10,step:1,className:"mt-2"}),(0,i.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[E(r.styling.stroke.width,r.styling.font_size),"em scales proportionally with font size"]})]})]})]})]}),(0,i.jsxs)(p.nU,{value:"timing",className:"space-y-4 mt-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(y._,{children:["Start Time: ",O(r.timing.start_time)]}),i.jsx(f.i,{value:[r.timing.start_time],onValueChange:([e])=>A("timing.start_time",e),max:t||100,step:.1,className:"mt-2","data-testid":"start-time-slider"}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>{A("timing.start_time",a),l(a)},className:"mt-2 w-full",children:["Set to Current Time (",O(a),")"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(y._,{children:["End Time: ",O(r.timing.end_time)]}),i.jsx(f.i,{value:[r.timing.end_time],onValueChange:([e])=>A("timing.end_time",e),max:t||100,step:.1,className:"mt-2","data-testid":"end-time-slider"}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>{A("timing.end_time",a),l(a)},className:"mt-2 w-full",children:["Set to Current Time (",O(a),")"]})]}),i.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,i.jsxs)("p",{className:"text-xs text-blue-900",children:[i.jsx("strong",{children:"Duration:"})," ",O(r.timing.end_time-r.timing.start_time)]})})]}),(0,i.jsxs)(p.nU,{value:"animation",className:"space-y-4 mt-4",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-medium text-sm",children:"Entrance Animation"}),(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Animation Type"}),(0,i.jsxs)(u.Ph,{value:r.animation.entrance.type,onValueChange:e=>A("animation.entrance.type",e),children:[i.jsx(u.i4,{className:"mt-1","data-testid":"entrance-animation-select",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:w.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(y._,{children:["Duration: ",r.animation.entrance.duration,"s"]}),i.jsx(f.i,{value:[r.animation.entrance.duration],onValueChange:([e])=>A("animation.entrance.duration",e),min:.1,max:5,step:.1,className:"mt-2"})]}),(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Easing"}),(0,i.jsxs)(u.Ph,{value:r.animation.entrance.easing,onValueChange:e=>A("animation.entrance.easing",e),children:[i.jsx(u.i4,{className:"mt-1",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:N.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,i.jsxs)("div",{className:"border-t pt-4 space-y-4",children:[i.jsx("h4",{className:"font-medium text-sm",children:"Exit Animation"}),(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Animation Type"}),(0,i.jsxs)(u.Ph,{value:r.animation.exit.type,onValueChange:e=>A("animation.exit.type",e),children:[i.jsx(u.i4,{className:"mt-1","data-testid":"exit-animation-select",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:w.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(y._,{children:["Duration: ",r.animation.exit.duration,"s"]}),i.jsx(f.i,{value:[r.animation.exit.duration],onValueChange:([e])=>A("animation.exit.duration",e),min:.1,max:5,step:.1,className:"mt-2"})]}),(0,i.jsxs)("div",{children:[i.jsx(y._,{children:"Easing"}),(0,i.jsxs)(u.Ph,{value:r.animation.exit.easing,onValueChange:e=>A("animation.exit.easing",e),children:[i.jsx(u.i4,{className:"mt-1",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:N.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),i.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:(0,i.jsxs)("p",{className:"text-xs text-purple-900",children:[i.jsx("strong",{children:"Tip:"})," Entrance plays when text appears, exit when it disappears"]})})]})]})})]})}function O(e){return!e||isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}var C=a(62881);let T=(0,C.Z)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var M=a(98091);let E=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#14b8a6","#f97316","#6366f1","#84cc16"];function A({overlays:e,duration:t,currentTime:a,selectedOverlay:s,onSelectOverlay:l,onUpdateOverlay:r,onDeleteOverlay:o,onReorder:d,onSeek:u}){let p=(0,n.useRef)(null),[h,y]=(0,n.useState)(!1),[x,f]=(0,n.useState)(null),[g,v]=(0,n.useState)(null),b=(e,t)=>{t.stopPropagation(),l(e)},j=(e,t,a)=>{a.stopPropagation(),y(!0),f(e),v(t)},w=e=>E[e%E.length],_=e=>!e||isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{ref:p,className:"relative bg-gray-100 rounded-lg p-4 min-h-[300px] cursor-pointer",onClick:e=>{if(h)return;let a=e.currentTarget.getBoundingClientRect();u((e.clientX-a.left)/a.width*t)},"data-testid":"timeline-canvas",children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-between text-xs text-gray-500 px-4 py-2",children:Array.from({length:11},(e,a)=>i.jsx("span",{children:_(t/10*a)},a))}),i.jsx("div",{className:"absolute top-8 bottom-0 w-0.5 bg-red-500 z-20",style:{left:`${a/t*100}%`},children:i.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-red-500 rounded-full"})}),i.jsx("div",{className:"mt-12 space-y-3",children:0===e.length?i.jsx("div",{className:"text-center py-12 text-gray-500",children:'No overlays yet. Click "Add Overlay" to get started.'}):e.map((e,a)=>{let n=(e.timing?.start_time||0)/t*100,l=(e.timing?.end_time||t)/t*100,r=w(a),d=s?.id===e.id;return(0,i.jsxs)("div",{className:"relative h-12","data-testid":`timeline-overlay-${a}`,children:[i.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded"}),(0,i.jsxs)("div",{className:`absolute h-full rounded cursor-move transition-all ${d?"ring-2 ring-offset-2 ring-blue-500":""}`,style:{left:`${n}%`,width:`${l-n}%`,backgroundColor:r,opacity:d?1:.8},onClick:t=>b(e,t),onMouseDown:t=>j(e,"move",t),children:[i.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-black bg-opacity-30 cursor-ew-resize hover:bg-opacity-50",onMouseDown:t=>j(e,"start",t),onClick:e=>e.stopPropagation()}),(0,i.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between h-full",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-white text-sm font-medium truncate",children:[i.jsx(T,{className:"w-3 h-3 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:e.label||e.endpoint_key})]}),i.jsx(c.z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-white hover:bg-white hover:bg-opacity-20",onClick:t=>{t.stopPropagation(),o(e.id)},children:i.jsx(M.Z,{className:"w-3 h-3"})})]}),i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-2 bg-black bg-opacity-30 cursor-ew-resize hover:bg-opacity-50",onMouseDown:t=>j(e,"end",t),onClick:e=>e.stopPropagation()})]}),i.jsx("div",{className:"absolute -bottom-5 left-0 text-xs text-gray-500",children:_(e.timing?.start_time||0)}),i.jsx("div",{className:"absolute -bottom-5 right-0 text-xs text-gray-500",children:_(e.timing?.end_time||0)})]},e.id||a)})})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((e,t)=>i.jsx(m.C,{className:"cursor-pointer",style:{backgroundColor:w(t)},onClick:()=>l(e),"data-testid":`overlay-badge-${t}`,children:e.label||e.endpoint_key},e.id||t))}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 bg-blue-50 border border-blue-200 rounded p-3",children:[i.jsx("p",{className:"font-medium mb-1",children:"Timeline Controls:"}),(0,i.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Click on timeline to seek to that position"}),i.jsx("li",{children:"Drag overlay bars to move them"}),i.jsx("li",{children:"Drag edges to adjust start/end times"}),i.jsx("li",{children:"Click overlay to select and edit details"})]})]})]})}function z({overlays:e=[],currentTime:t,duration:a,selectedOverlay:s,showOverlays:l=!0,onSelectOverlay:r,onUpdateOverlay:o,containerRef:d,videoResolution:c=null}){let u=c?.width||1920,p=c?.height||1080,h=(0,n.useRef)(null),[m,y]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),[g,v]=(0,n.useState)(null),[b,j]=(0,n.useState)({x:0,y:0}),[w,_]=(0,n.useState)({x:0,y:0}),[P,k]=(0,n.useState)(null),[N,S]=(0,n.useState)({}),[O,C]=(0,n.useState)(!1),[T,M]=(0,n.useState)([]),[E,A]=(0,n.useState)(-1),[z,D]=(0,n.useState)(!1),I=(0,n.useCallback)(e=>({x:(void 0!==e.x?e.x:50)/100*u,y:(void 0!==e.y?e.y:50)/100*p}),[u,p]),R=(0,n.useCallback)(e=>({x:Math.round(e.x/u*1e4)/100,y:Math.round(e.y/p*1e4)/100,unit:"percent"}),[u,p]),L=(0,n.useCallback)((e,t,a,i)=>[{x:e,y:t,cursor:"nw-resize",position:"nw"},{x:e+a/2,y:t,cursor:"n-resize",position:"n"},{x:e+a,y:t,cursor:"ne-resize",position:"ne"},{x:e+a,y:t+i/2,cursor:"e-resize",position:"e"},{x:e+a,y:t+i,cursor:"se-resize",position:"se"},{x:e+a/2,y:t+i,cursor:"s-resize",position:"s"},{x:e,y:t+i,cursor:"sw-resize",position:"sw"},{x:e,y:t+i/2,cursor:"w-resize",position:"w"}],[]);(0,n.useCallback)(()=>{E>0&&A(E-1)},[E]),(0,n.useCallback)(()=>{E<T.length-1&&A(E+1)},[E,T.length]),(0,n.useCallback)((e,t,a,i=0)=>{let n=t.split(" "),s=[],l="";for(let t=0;t<n.length;t++){let r=l?l+" "+n[t]:n[t],o=e.measureText(r).width;i>0&&(o+=i*(r.length-1)),o>a&&l?(s.push(l),l=n[t]):l=r}return l&&s.push(l),s.length>0?s:[t]},[]);let U=(0,n.useCallback)((e,t,a,i,n,s)=>{let l=t.split(""),r=a,o=l.reduce((t,a)=>t+e.measureText(a).width+n,-n);"center"===e.textAlign?r=a-o/2:"right"===e.textAlign&&(r=a-o),l.forEach(t=>{s?e.strokeText(t,r,i):e.fillText(t,r,i),r+=e.measureText(t).width+n})},[]),$=(0,n.useCallback)((e,t)=>{switch(t){case"linear":default:return e;case"ease-in":return e*e;case"ease-out":return e*(2-e);case"ease-in-out":return e<.5?2*e*e:-1+(4-2*e)*e;case"cubic-bezier(0.68, -0.55, 0.265, 1.55)":return(1-e)*(1-e)*(1-e)*0+-(3*(1-e)*(1-e)*e*.55)+3*(1-e)*e*e*1.55+e*e*e*1}},[]),V=(0,n.useCallback)((e,t,a)=>{let i={opacity:1,scale:1,rotation:0,translateX:0,translateY:0},n=1-t,s=a?t:n;switch(e){case"fade-in":case"fade-out":default:i.opacity=s;break;case"slide-up":i.opacity=s,i.translateY=a?-(100*n):100*t;break;case"slide-down":i.opacity=s,i.translateY=a?100*n:-(100*t);break;case"slide-left":i.opacity=s,i.translateX=a?-(100*n):100*t;break;case"slide-right":i.opacity=s,i.translateX=a?100*n:-(100*t);break;case"scale-up":i.opacity=s,i.scale=a?.5+.5*t:.5+.5*n;break;case"scale-down":i.opacity=s,i.scale=a?1.5-.5*t:1.5-.5*n;break;case"zoom-in":i.opacity=s,i.scale=a?t:n;break;case"bounce-in":case"bounce-out":i.opacity=s;let l=a?t:n;i.scale=1+.1*Math.sin(l*Math.PI*3)*(1-l);break;case"rotate-in":i.opacity=s,i.rotation=a?2*Math.PI*n:2*Math.PI*t,i.scale=s;break;case"spin":i.opacity=s,i.rotation=a?4*Math.PI*n:4*Math.PI*t;break;case"blur-in":case"blur-out":i.opacity=s,i.scale=1-.05*n;break;case"fade-slide-up":i.opacity=s,i.translateY=a?-(50*n):50*t;break;case"scale-fade":i.opacity=s,i.scale=a?.8+.2*t:.8+.2*n;break;case"typewriter":i.opacity=1}return i},[]),F=(0,n.useCallback)((e,t)=>{let i=e.timing?.start_time||0,n=e.timing?.end_time||a,s=e.animation?.entrance||{type:"fade-in",duration:1,easing:"ease-in-out"},l=e.animation?.exit||{type:"fade-out",duration:1,easing:"ease-in-out"},r={opacity:1,scale:1,rotation:0,translateX:0,translateY:0};if(t<i+s.duration){let e=$(Math.min(1,(t-i)/s.duration),s.easing);r=V(s.type,e,!0)}else if(t>n-l.duration){let e=$(Math.min(1,(t-(n-l.duration))/l.duration),l.easing);r=V(l.type,e,!1)}return r},[a,$,V]),B=(0,n.useCallback)((e,a)=>{let i=a.placeholder_text||a.endpoint_key||"Sample Text",n=a.position||{x:50,y:50,unit:"percent"},s=a.styling||{},l=N[a.id],r=I(n),o=s.font_size||48,d=s.font_weight||"normal",c=s.font_family||"Arial",u=s.letter_spacing||0,p=s.line_height||1.2,h=s.text_align||"center",m=c.includes(" ")?`"${c}"`:c;e.font=`${d} ${o}px ${m}`,e.fillStyle=s.color||"#ffffff",e.textAlign=h,e.textBaseline="middle";let y=F(a,t),x=l?.lines||[i],f=l?.height||o*p,g=o*p;e.save(),e.translate(r.x,r.y),e.globalAlpha=y.opacity,e.scale(y.scale,y.scale),e.rotate(y.rotation),e.translate(y.translateX,y.translateY);let v=-(f/2)+g/2;x.forEach((t,a)=>{let i=v+a*g;s.stroke?.enabled&&(e.strokeStyle=s.stroke.color||"#000000",e.lineWidth=s.stroke.width||2,u>0?U(e,t,0,i,u,!0):e.strokeText(t,0,i)),s.text_shadow&&(e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=4,e.shadowOffsetX=0,e.shadowOffsetY=2),u>0?U(e,t,0,i,u,!1):e.fillText(t,0,i)}),e.restore()},[t,F,U,I,N]),Z=(0,n.useCallback)((e,t)=>{let a=N[t.id];if(!a)return;let i=t.position||{x:50,y:50,unit:"percent"},n=I(i),s=n.x-a.width/2-10,l=n.y-a.height/2-10,r=a.width+20,o=a.height+20;e.fillStyle="rgba(59, 130, 246, 0.1)",e.fillRect(s,l,r,o),e.strokeStyle="#3b82f6",e.lineWidth=2,e.setLineDash([5,5]),e.strokeRect(s,l,r,o),e.setLineDash([]),L(s,l,r,o).forEach(t=>{e.fillStyle="#ffffff",e.fillRect(t.x-6,t.y-6,12,12),e.strokeStyle="#3b82f6",e.lineWidth=2,e.strokeRect(t.x-6,t.y-6,12,12)});let d=t.dimensions||{},c=d.width?d.width.toFixed(1):"auto";e.fillStyle="rgba(59, 130, 246, 0.9)",e.fillRect(s,l-25,180,20),e.fillStyle="#ffffff",e.font="12px Arial",e.textAlign="left",e.textBaseline="top",e.fillText(`(${i.x?.toFixed(1)}%, ${i.y?.toFixed(1)}%) W:${c}%`,s+5,l-23)},[N,L,I]),Q=(0,n.useCallback)((e,t)=>{let a=N[t.id];if(!a)return;let i=I(t.position||{x:50,y:50,unit:"percent"}),n=i.x-a.width/2-10,s=i.y-a.height/2-10,l=a.width+20,r=a.height+20;e.strokeStyle="#60a5fa",e.lineWidth=1,e.setLineDash([3,3]),e.strokeRect(n,s,l,r),e.setLineDash([])},[N,I]);(0,n.useCallback)(()=>{let i=h.current;if(!i)return;let n=i.getContext("2d");n.clearRect(0,0,i.width,i.height);let l=e.filter(e=>{let i=e.timing?.start_time||0,n=e.timing?.end_time||a;return t>=i-.016&&t<=n+.016});l.sort((e,t)=>(e.layer_index||0)-(t.layer_index||0)),l.forEach(e=>{B(n,e)}),s&&N[s.id]&&Z(n,s),P&&P.id!==s?.id&&N[P.id]&&Q(n,P)},[t,e,a,s,P,N,B,Z,Q]);let H=e=>{let t=h.current;if(!t)return{x:0,y:0};let a=t.getBoundingClientRect(),i=u/a.width,n=p/a.height;return{x:(e.clientX-a.left)*i,y:(e.clientY-a.top)*n}},q=(i,n)=>{for(let s of e.filter(e=>{let i=e.timing?.start_time||0,n=e.timing?.end_time||a;return t>=i-.016&&t<=n+.016}).sort((e,t)=>(t.layer_index||0)-(e.layer_index||0))){let e=N[s.id];if(!e)continue;let t=I(s.position||{x:50,y:50,unit:"percent"}),a=t.x-e.width/2-10,l=t.y-e.height/2-10,r=e.width+20,o=e.height+20;if(i>=a&&i<=a+r&&n>=l&&n<=l+o)return s}return null},W=(e,t,a)=>{let i=N[a.id];if(!i)return null;let n=I(a.position||{x:50,y:50,unit:"percent"}),s=n.x-i.width/2-10;for(let a of L(s,n.y-i.height/2-10,i.width+20,i.height+20))if(12>=Math.sqrt(Math.pow(e-a.x,2)+Math.pow(t-a.y,2)))return a;return null},X=()=>{y(!1),f(!1),v(null)};return i.jsx("canvas",{ref:h,width:u,height:p,className:"absolute top-0 left-0 w-full h-full cursor-default",style:{display:l?"block":"none"},onMouseDown:e=>{let t=H(e);if(s){let e=W(t.x,t.y,s);if(e){let a=I(s.position),i=N[s.id],n=s.dimensions||{};f(!0),v(e),j(t),_({x:a.x,y:a.y,fontSize:s.styling?.font_size||48,width:i?.width||200,height:i?.height||100,widthPercent:n.width||(i?.width||200)/u*100,heightPercent:n.height||(i?.height||100)/p*100,percentX:s.position.x,percentY:s.position.y});return}}let a=q(t.x,t.y);if(a){r(a);let e=I(a.position);y(!0),j(t),_({x:e.x,y:e.y,percentX:a.position.x,percentY:a.position.y})}else r(null)},onMouseMove:e=>{let t=H(e),a=h.current;if(!a)return;if(x&&s&&g){let e=t.x-b.x,i=t.y-b.y;if(!N[s.id])return;let n=g.position,l=w.width,r=w.height;if(O){let t=(e+i)/2;l=Math.max(50,w.width+t),r=Math.max(20,w.height+t)}else n.includes("e")?l=Math.max(50,w.width+e):n.includes("w")&&(l=Math.max(50,w.width-e)),n.includes("s")?r=Math.max(20,w.height+i):n.includes("n")&&(r=Math.max(20,w.height-i));let d=l/u*100,c=r/p*100;o(s.id,{dimensions:{width:Math.round(100*d)/100,height:Math.round(100*c)/100,unit:"percent"}}),a.style.cursor=g.cursor;return}if(m&&s){let e=t.x-b.x,i=t.y-b.y,n=R({x:Math.max(0,Math.min(u,w.x+e)),y:Math.max(0,Math.min(p,w.y+i))});o(s.id,{position:{...s.position,...n}}),a.style.cursor="move";return}if(s){let e=W(t.x,t.y,s);if(e){a.style.cursor=e.cursor;return}}let i=q(t.x,t.y);k(i),a.style.cursor=i?"move":"default"},onMouseUp:X,onMouseLeave:X,"data-testid":"interactive-overlay-canvas"})}var D=a(9015);let I=(0,C.Z)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var R=a(43810);let L=(0,C.Z)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);var U=a(12714),$=a(91216),V=a(71059),F=a(94893),B=a(83855),Z=a(78364);let Q=(0,a(61358).bR)();function H({template:e,onSave:t}){let{toast:a}=(0,Z.pm)(),s=(0,n.useRef)(null);(0,n.useRef)(null);let r=(0,n.useRef)(null),[p,y]=(0,n.useState)(!1),[x,f]=(0,n.useState)(0),[g,v]=(0,n.useState)(0),[j,w]=(0,n.useState)(e?.text_overlays||[]),[_,P]=(0,n.useState)(null),[k,N]=(0,n.useState)(!0),[O,C]=(0,n.useState)(!1),[T,E]=(0,n.useState)("timeline"),[H,W]=(0,n.useState)(new Set),[X,Y]=(0,n.useState)(!1),[G,K]=(0,n.useState)("couple_names"),[J,ee]=(0,n.useState)(e?.video_data?.aspect_ratio||"16:9"),et=async()=>{let t={bride_name:{label:"Bride's Name",placeholder:"Sarah"},groom_name:{label:"Groom's Name",placeholder:"Michael"},bride_first_name:{label:"Bride's First Name",placeholder:"Sarah"},groom_first_name:{label:"Groom's First Name",placeholder:"Michael"},couple_names:{label:"Couple Names",placeholder:"John & Jane"},event_date:{label:"Event Date (Day)",placeholder:"15"},event_date_full:{label:"Event Date (Full)",placeholder:"June 15, 2025"},event_month:{label:"Event Month",placeholder:"June"},event_year:{label:"Event Year",placeholder:"2025"},event_day:{label:"Event Day",placeholder:"Monday"},event_time:{label:"Event Time",placeholder:"3:00 PM"},venue:{label:"Venue",placeholder:"Grand Hotel"},venue_address:{label:"Venue Address",placeholder:"123 Main St"},city:{label:"City",placeholder:"New York"},welcome_message:{label:"Welcome Message",placeholder:"Welcome to Our Wedding"},description:{label:"Description",placeholder:"Join us for our special day"},countdown_days:{label:"Countdown Days",placeholder:"30 Days"},custom_text_1:{label:"Custom Text 1",placeholder:"Custom Text"},custom_text_2:{label:"Custom Text 2",placeholder:"Custom Text"},custom_text_3:{label:"Custom Text 3",placeholder:"Custom Text"},custom_text_4:{label:"Custom Text 4",placeholder:"Custom Text"},custom_text_5:{label:"Custom Text 5",placeholder:"Custom Text"}},i=t[G]||t.couple_names,n={endpoint_key:G,label:i.label,placeholder_text:i.placeholder,position:{x:50,y:50,alignment:"center",anchor_point:"center",unit:"percent"},dimensions:{width:50,height:null,unit:"percent"},timing:{start_time:0,end_time:g||10},styling:{font_family:"Playfair Display",font_size:72,font_weight:"bold",color:"#ffffff",text_align:"center",letter_spacing:2,line_height:1.2,text_shadow:"0 2px 4px rgba(0,0,0,0.3)",stroke:{enabled:!1,color:"#000000",width:2}},animation:{type:"fade-in",duration:1,easing:"ease-in-out",entrance:{type:"fade-in",duration:1,easing:"ease-in-out"},exit:{type:"fade-out",duration:1,easing:"ease-in-out"}},responsive:{mobile_font_size:48,mobile_position:{x:50,y:30,unit:"percent"}},layer_index:j.length};try{let t=localStorage.getItem("token"),s=await l.Z.post(`${Q}/api/admin/video-templates/${e.id}/overlays`,n,{headers:{Authorization:`Bearer ${t}`}});w(s.data.text_overlays),a({title:"Success",description:`${i.label} overlay added successfully`})}catch(e){console.error("Failed to add overlay:",e),a({title:"Error",description:e.response?.data?.detail||"Failed to add overlay",variant:"destructive"})}},ea=async(t,i)=>{if(H.has(t)){a({title:"Overlay Locked",description:"Unlock the overlay to make changes",variant:"destructive"});return}try{console.log("Updating overlay:",t,"with updates:",i),w(e=>e.map(e=>{if(e.id===t){let t={...e};return i.styling&&(t.styling={...e.styling,...i.styling,stroke:i.styling.stroke?{...e.styling?.stroke,...i.styling.stroke}:e.styling?.stroke}),i.animation&&(t.animation={...e.animation,...i.animation,entrance:i.animation.entrance?{...e.animation?.entrance,...i.animation.entrance}:e.animation?.entrance,exit:i.animation.exit?{...e.animation?.exit,...i.animation.exit}:e.animation?.exit}),i.position&&(t.position={...e.position,...i.position}),i.dimensions&&(t.dimensions={...e.dimensions,...i.dimensions}),i.timing&&(t.timing={...e.timing,...i.timing}),Object.keys(i).forEach(e=>{["styling","animation","position","dimensions","timing"].includes(e)||(t[e]=i[e])}),t}return e})),_?.id===t&&P(e=>{let t={...e};return i.styling&&(t.styling={...e.styling,...i.styling,stroke:i.styling.stroke?{...e.styling?.stroke,...i.styling.stroke}:e.styling?.stroke}),i.animation&&(t.animation={...e.animation,...i.animation,entrance:i.animation.entrance?{...e.animation?.entrance,...i.animation.entrance}:e.animation?.entrance,exit:i.animation.exit?{...e.animation?.exit,...i.animation.exit}:e.animation?.exit}),i.position&&(t.position={...e.position,...i.position}),i.dimensions&&(t.dimensions={...e.dimensions,...i.dimensions}),i.timing&&(t.timing={...e.timing,...i.timing}),Object.keys(i).forEach(e=>{["styling","animation","position","dimensions","timing"].includes(e)||(t[e]=i[e])}),t});let n=localStorage.getItem("token"),s=await l.Z.put(`${Q}/api/admin/video-templates/${e.id}/overlays/${t}`,i,{headers:{Authorization:`Bearer ${n}`}});console.log("Update response:",s.data),console.log("Returned overlays:",s.data.text_overlays);let r=s.data.text_overlays;if(w(r),_?.id===t){let e=r.find(e=>e.id===t);e&&(console.log("Updated overlay data from server:",JSON.stringify(e.styling,null,2)),console.log("Updated overlay animation from server:",JSON.stringify(e.animation,null,2)),P(e))}(!i.position||Object.keys(i).length>1)&&a({title:"Success",description:"Overlay updated successfully"})}catch(i){if(console.error("Failed to update overlay:",i),console.error("Error details:",i.response?.data),w(e?.text_overlays||[]),_?.id===t){let a=e?.text_overlays?.find(e=>e.id===t);a&&P(a)}throw a({title:"Error",description:i.response?.data?.detail||"Failed to update overlay",variant:"destructive"}),i}},ei=async t=>{if(confirm("Are you sure you want to delete this overlay?"))try{let i=localStorage.getItem("token"),n=await l.Z.delete(`${Q}/api/admin/video-templates/${e.id}/overlays/${t}`,{headers:{Authorization:`Bearer ${i}`}});w(n.data.text_overlays),P(null),a({title:"Success",description:"Overlay deleted"})}catch(e){console.error("Failed to delete overlay:",e),a({title:"Error",description:"Failed to delete overlay",variant:"destructive"})}},en=async t=>{try{let a=localStorage.getItem("token");await l.Z.put(`${Q}/api/admin/video-templates/${e.id}/overlays/reorder`,t,{headers:{Authorization:`Bearer ${a}`}});let i=t.map(e=>j.find(t=>t.id===e)).filter(Boolean);w(i)}catch(e){console.error("Failed to reorder overlays:",e)}},es=async()=>{C(!0);try{t&&await t(),a({title:"Success",description:"Template saved successfully"})}catch(e){a({title:"Error",description:"Failed to save template",variant:"destructive"})}finally{C(!1)}},el=async()=>{if(!_)return;let t={..._,position:{..._.position,x:_.position.x+50,y:_.position.y+50},label:`${_.label} (Copy)`,layer_index:j.length};delete t.id;try{let i=localStorage.getItem("token"),n=await l.Z.post(`${Q}/api/admin/video-templates/${e.id}/overlays`,t,{headers:{Authorization:`Bearer ${i}`}});w(n.data.text_overlays),a({title:"Success",description:"Overlay duplicated successfully"})}catch(e){console.error("Failed to duplicate overlay:",e),a({title:"Error",description:"Failed to duplicate overlay",variant:"destructive"})}},er=async t=>{if(confirm(`Changing aspect ratio from ${J} to ${t} may affect overlay positioning. Continue?`))try{let i=localStorage.getItem("token");await l.Z.put(`${Q}/api/admin/video-templates/${e.id}/aspect-ratio`,{aspect_ratio:t},{headers:{Authorization:`Bearer ${i}`}}),ee(t),a({title:"Success",description:`Aspect ratio changed to ${t}. Please review overlay positions.`}),window.location.reload()}catch(e){console.error("Failed to change aspect ratio:",e),a({title:"Error",description:e.response?.data?.detail||"Failed to change aspect ratio",variant:"destructive"})}};return(0,i.jsxs)("div",{className:"space-y-6",children:[i.jsx(d.Zb,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),i.jsx(m.C,{className:"ml-2",variant:"default",children:"In Progress"})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:j.length})," overlays configured"]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 pl-4 border-l",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Aspect Ratio:"}),(0,i.jsxs)(u.Ph,{value:J,onValueChange:er,children:[i.jsx(u.i4,{className:"w-[120px]","data-testid":"aspect-ratio-select",children:i.jsx(u.ki,{})}),(0,i.jsxs)(u.Bw,{children:[i.jsx(u.Ql,{value:"16:9",children:"16:9 (Landscape)"}),i.jsx(u.Ql,{value:"9:16",children:"9:16 (Portrait)"})]})]})]}),_&&(0,i.jsxs)("div",{className:"flex items-center gap-2 ml-4 pl-4 border-l",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Selected:"}),i.jsx(m.C,{variant:"secondary",children:_.label||_.endpoint_key}),(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>{_&&W(e=>{let t=new Set(e);return t.has(_.id)?(t.delete(_.id),a({title:"Overlay Unlocked",description:"You can now edit this overlay"})):(t.add(_.id),a({title:"Overlay Locked",description:"This overlay is now protected from changes"})),t})},"data-testid":"toggle-lock-btn",children:[H.has(_.id)?i.jsx(D.Z,{className:"w-4 h-4 mr-1"}):i.jsx(I,{className:"w-4 h-4 mr-1"}),H.has(_.id)?"Unlock":"Lock"]}),(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:el,"data-testid":"duplicate-overlay-btn",children:[i.jsx(R.Z,{className:"w-4 h-4 mr-1"}),"Duplicate"]}),(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>{_&&ei(_.id)},className:"text-red-600 hover:text-red-700","data-testid":"delete-selected-btn",children:[i.jsx(M.Z,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),i.jsx("div",{className:"flex gap-2",children:(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>E("timeline"===T?"list":"timeline"),"data-testid":"toggle-editor-mode-btn",children:[i.jsx(L,{className:"w-4 h-4 mr-2"}),"timeline"===T?"List View":"Timeline View"]})})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,i.jsxs)(d.Zb,{className:"p-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-semibold",children:"Video Preview"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>Y(!X),"data-testid":"toggle-grid-snap-btn",className:X?"bg-blue-100":"",children:["Grid Snap ",X?"ON":"OFF"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>N(!k),"data-testid":"toggle-overlays-btn",children:[k?i.jsx(U.Z,{className:"w-4 h-4 mr-1"}):i.jsx($.Z,{className:"w-4 h-4 mr-1"}),k?"Hide":"Show"," Overlays"]}),(0,i.jsxs)(c.z,{size:"sm",onClick:()=>y(!p),"data-testid":"play-pause-btn",children:[p?i.jsx(V.Z,{className:"w-4 h-4 mr-1"}):i.jsx(F.Z,{className:"w-4 h-4 mr-1"}),p?"Pause":"Play"]})]})]}),(0,i.jsxs)("div",{className:`relative bg-black rounded-lg overflow-hidden ${"9:16"===J?"aspect-[9/16] max-w-md mx-auto":"aspect-video"}`,ref:r,children:[i.jsx(o(),{ref:s,url:e?.video_data?.original_url,playing:p,controls:!1,width:"100%",height:"100%",onProgress:({playedSeconds:e})=>f(e),onDuration:v,onPlay:()=>y(!0),onPause:()=>y(!1),config:{file:{attributes:{controlsList:"nodownload",disablePictureInPicture:!0}}}}),i.jsx(z,{overlays:j,currentTime:x,duration:g,selectedOverlay:_,showOverlays:k,onSelectOverlay:P,onUpdateOverlay:ea,containerRef:r,videoResolution:{width:e?.video_data?.width||1920,height:e?.video_data?.height||1080}})]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[i.jsx("span",{children:q(x)}),i.jsx("span",{children:q(g)})]}),i.jsx("input",{type:"range",min:0,max:g||100,value:x,onChange:e=>{let t=parseFloat(e.target.value);f(t),s.current&&s.current.seekTo(t)},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer","data-testid":"timeline-slider"})]})]}),(0,i.jsxs)(d.Zb,{className:"p-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-wrap gap-2",children:[(0,i.jsxs)("h3",{className:"font-semibold",children:["Text Overlays (",j.length,")"]}),(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsxs)(u.Ph,{value:G,onValueChange:K,children:[i.jsx(u.i4,{className:"w-[180px]","data-testid":"overlay-type-select",children:i.jsx(u.ki,{placeholder:"Select overlay type"})}),(0,i.jsxs)(u.Bw,{children:[i.jsx(u.Ql,{value:"bride_name",children:"Bride's Name"}),i.jsx(u.Ql,{value:"groom_name",children:"Groom's Name"}),i.jsx(u.Ql,{value:"bride_first_name",children:"Bride's First Name"}),i.jsx(u.Ql,{value:"groom_first_name",children:"Groom's First Name"}),i.jsx(u.Ql,{value:"couple_names",children:"Couple Names"}),i.jsx(u.Ql,{value:"event_date",children:"Event Date (Day)"}),i.jsx(u.Ql,{value:"event_date_full",children:"Event Date (Full)"}),i.jsx(u.Ql,{value:"event_month",children:"Event Month"}),i.jsx(u.Ql,{value:"event_year",children:"Event Year"}),i.jsx(u.Ql,{value:"event_day",children:"Event Day"}),i.jsx(u.Ql,{value:"event_time",children:"Event Time"}),i.jsx(u.Ql,{value:"venue",children:"Venue"}),i.jsx(u.Ql,{value:"venue_address",children:"Venue Address"}),i.jsx(u.Ql,{value:"city",children:"City"}),i.jsx(u.Ql,{value:"welcome_message",children:"Welcome Message"}),i.jsx(u.Ql,{value:"description",children:"Description"}),i.jsx(u.Ql,{value:"countdown_days",children:"Countdown Days"}),i.jsx(u.Ql,{value:"custom_text_1",children:"Custom Text 1"}),i.jsx(u.Ql,{value:"custom_text_2",children:"Custom Text 2"}),i.jsx(u.Ql,{value:"custom_text_3",children:"Custom Text 3"}),i.jsx(u.Ql,{value:"custom_text_4",children:"Custom Text 4"}),i.jsx(u.Ql,{value:"custom_text_5",children:"Custom Text 5"})]})]}),(0,i.jsxs)(c.z,{size:"sm",onClick:et,"data-testid":"add-overlay-btn",children:[i.jsx(B.Z,{className:"w-4 h-4 mr-1"}),"Add Overlay"]})]})]}),"timeline"===T?i.jsx(A,{overlays:j,duration:g,currentTime:x,selectedOverlay:_,onSelectOverlay:P,onUpdateOverlay:ea,onDeleteOverlay:ei,onReorder:en,onSeek:e=>{f(e),s.current&&s.current.seekTo(e)}}):i.jsx(h.x,{className:"h-64",children:0===j.length?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No overlays added yet"}):i.jsx("div",{className:"space-y-2",children:j.map((e,t)=>i.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${_?.id===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>P(e),"data-testid":`overlay-item-${t}`,children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm",children:e.label||e.endpoint_key}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[q(e.timing?.start_time||0)," - ",q(e.timing?.end_time||0)]})]}),i.jsx(c.z,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),ei(e.id)},className:"text-red-600 hover:text-red-700",children:i.jsx(M.Z,{className:"w-4 h-4"})})]})},e.id||t))})})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx(d.Zb,{className:"p-4 sticky top-6",children:_?i.jsx(S,{overlay:_,duration:g,currentTime:x,onUpdate:e=>ea(_.id,e),onSeek:e=>{f(e),s.current&&s.current.seekTo(e)}}):i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-500",children:"Select an overlay to configure"})})})})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)(d.Zb,{className:"p-4 flex-1 mr-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Keyboard Shortcuts"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Delete"})," - Delete selected overlay"]}),(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Ctrl/Cmd + D"})," - Duplicate overlay"]}),(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Arrow Keys"})," - Move overlay (1px)"]}),(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Shift + Arrow"})," - Move overlay (10px)"]}),(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Ctrl/Cmd + L"})," - Lock/Unlock overlay"]}),(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Shift + Drag"})," - Proportional resize"]})]})]}),(0,i.jsxs)(c.z,{onClick:es,disabled:O,size:"lg","data-testid":"save-template-btn",children:[i.jsx(b.Z,{className:"w-4 h-4 mr-2"}),O?"Saving...":"Save Template"]})]})]})}function q(e){return!e||isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}var W=a(86333);function X(){let e=(0,s.useRouter)();(0,s.useParams)();let{toast:t}=(0,Z.pm)(),[a,l]=(0,n.useState)(null),[r,o]=(0,n.useState)(!0),d=async()=>{try{t({title:"Success",description:"Template saved successfully"}),await new Promise(e=>setTimeout(e,500)),e.push("/admin/video-templates")}catch(e){console.error("Error during save:",e),t({title:"Error",description:"Failed to save template",variant:"destructive"})}};return r?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Loading template..."})]})}):a?(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"border-b bg-white px-6 py-4",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsxs)(c.z,{variant:"ghost",onClick:()=>e.push("/admin/video-templates"),className:"mb-2","data-testid":"back-to-templates-btn",children:[i.jsx(W.Z,{className:"w-4 h-4 mr-2"}),"Back to Templates"]}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.name}),i.jsx("p",{className:"text-gray-600 text-sm mt-1",children:a.description})]})}),i.jsx("div",{className:"max-w-7xl mx-auto p-6",children:i.jsx(H,{template:a,onSave:d})})]}):null}a(89420)},99597:(e,t,a)=>{"use strict";a.d(t,{B:()=>o,x:()=>r});var i=a(10326),n=a(17577),s=a(16999),l=a(46084);let r=n.forwardRef(({className:e,children:t,...a},n)=>(0,i.jsxs)(s.fC,{ref:n,className:(0,l.cn)("relative overflow-hidden",e),...a,children:[i.jsx(s.l_,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(o,{}),i.jsx(s.Ns,{})]}));r.displayName=s.fC.displayName;let o=n.forwardRef(({className:e,orientation:t="vertical",...a},n)=>i.jsx(s.gb,{ref:n,orientation:t,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:i.jsx(s.q4,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=s.gb.displayName},64745:(e,t,a)=>{"use strict";a.d(t,{i:()=>r});var i=a(10326),n=a(17577),s=a(87131),l=a(46084);let r=n.forwardRef(({className:e,...t},a)=>(0,i.jsxs)(s.fC,{ref:a,className:(0,l.cn)("relative flex w-full touch-none select-none items-center",e),...t,children:[i.jsx(s.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:i.jsx(s.e6,{className:"absolute h-full bg-primary"})}),i.jsx(s.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));r.displayName=s.fC.displayName},78364:(e,t,a)=>{"use strict";a.d(t,{pm:()=>p});var i=a(17577);let n=0,s=new Map,l=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},r=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=r(d,e),o.forEach(e=>{e(d)})}function u({...e}){let t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,t]=i.useState(d);return i.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},10909:e=>{"use strict";var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==a},a="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?r(Array.isArray(e)?[]:{},e,t):e}function n(e,t,a){return e.concat(t).map(function(e){return i(e,a)})}function s(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function l(e,t){try{return t in e}catch(e){return!1}}function r(e,a,o){(o=o||{}).arrayMerge=o.arrayMerge||n,o.isMergeableObject=o.isMergeableObject||t,o.cloneUnlessOtherwiseSpecified=i;var d,c,u=Array.isArray(a);return u!==Array.isArray(e)?i(a,o):u?o.arrayMerge(e,a,o):(c={},(d=o).isMergeableObject(e)&&s(e).forEach(function(t){c[t]=i(e[t],d)}),s(a).forEach(function(t){(!l(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(l(e,t)&&d.isMergeableObject(a[t])?c[t]=(function(e,t){if(!t.customMerge)return r;var a=t.customMerge(e);return"function"==typeof a?a:r})(t,d)(e[t],a[t],d):c[t]=i(a[t],d))}),c)}r.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,a){return r(e,a,t)},{})},e.exports=r},20812:e=>{function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(Error("Failed to load "+this.src),e)}}e.exports=function(e,a,i){var n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");"function"==typeof a&&(i=a,a={}),a=a||{},i=i||function(){},s.type=a.type||"text/javascript",s.charset=a.charset||"utf8",s.async=!("async"in a)||!!a.async,s.src=e,a.attrs&&function(e,t){for(var a in t)e.setAttribute(a,t[a])}(s,a.attrs),a.text&&(s.text=""+a.text),("onload"in s?t:function(e,t){e.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&(this.onreadystatechange=null,t(null,e))}})(s,i),s.onload||t(s,i),n.appendChild(s)}},94893:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(0,a(62881).Z)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},1572:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(0,a(62881).Z)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},39542:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var i=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function n(e,t){if(e.length!==t.length)return!1;for(var a,n,s=0;s<e.length;s++)if(!((a=e[s])===(n=t[s])||i(a)&&i(n)))return!1;return!0}let s=function(e,t){void 0===t&&(t=n);var a,i,s=[],l=!1;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return l&&a===this&&t(n,s)||(i=e.apply(this,n),l=!0,a=this,s=n),i}}},99899:(e,t,a)=>{"use strict";var i=a(56715);function n(){}function s(){}s.resetWarningCache=n,e.exports=function(){function e(e,t,a,n,s,l){if(l!==i){var r=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:n};return a.PropTypes=a,a}},78439:(e,t,a)=>{e.exports=a(99899)()},56715:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},86725:e=>{var t="undefined"!=typeof Element,a="function"==typeof Map,i="function"==typeof Set,n="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;e.exports=function(e,s){try{return function e(s,l){if(s===l)return!0;if(s&&l&&"object"==typeof s&&"object"==typeof l){var r,o,d,c;if(s.constructor!==l.constructor)return!1;if(Array.isArray(s)){if((r=s.length)!=l.length)return!1;for(o=r;0!=o--;)if(!e(s[o],l[o]))return!1;return!0}if(a&&s instanceof Map&&l instanceof Map){if(s.size!==l.size)return!1;for(c=s.entries();!(o=c.next()).done;)if(!l.has(o.value[0]))return!1;for(c=s.entries();!(o=c.next()).done;)if(!e(o.value[1],l.get(o.value[0])))return!1;return!0}if(i&&s instanceof Set&&l instanceof Set){if(s.size!==l.size)return!1;for(c=s.entries();!(o=c.next()).done;)if(!l.has(o.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(l)){if((r=s.length)!=l.length)return!1;for(o=r;0!=o--;)if(s[o]!==l[o])return!1;return!0}if(s.constructor===RegExp)return s.source===l.source&&s.flags===l.flags;if(s.valueOf!==Object.prototype.valueOf&&"function"==typeof s.valueOf&&"function"==typeof l.valueOf)return s.valueOf()===l.valueOf();if(s.toString!==Object.prototype.toString&&"function"==typeof s.toString&&"function"==typeof l.toString)return s.toString()===l.toString();if((r=(d=Object.keys(s)).length)!==Object.keys(l).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(l,d[o]))return!1;if(t&&s instanceof Element)return!1;for(o=r;0!=o--;)if(("_owner"!==d[o]&&"__v"!==d[o]&&"__o"!==d[o]||!s.$$typeof)&&!e(s[d[o]],l[d[o]]))return!1;return!0}return s!=s&&l!=l}(e,s)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},52495:(e,t,a)=>{var i=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,r=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,d=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of l(t))o.call(e,r)||r===a||n(e,r,{get:()=>t[r],enumerable:!(i=s(t,r))||i.enumerable});return e},u=(e,t,a)=>(a=null!=e?i(r(e)):{},c(!t&&e&&e.__esModule?a:n(a,"default",{value:e,enumerable:!0}),e)),p=(e,t,a)=>(d(e,"symbol"!=typeof t?t+"":t,a),a),h={};((e,t)=>{for(var a in t)n(e,a,{get:t[a],enumerable:!0})})(h,{default:()=>g}),e.exports=c(n({},"__esModule",{value:!0}),h);var m=u(a(17577)),y=u(a(86725)),x=a(16969),f=a(33948);class g extends m.Component{constructor(){super(...arguments),p(this,"mounted",!1),p(this,"isReady",!1),p(this,"isPlaying",!1),p(this,"isLoading",!0),p(this,"loadOnReady",null),p(this,"startOnPlay",!0),p(this,"seekOnPlay",null),p(this,"onDurationCalled",!1),p(this,"handlePlayerMount",e=>{if(this.player){this.progress();return}this.player=e,this.player.load(this.props.url),this.progress()}),p(this,"getInternalPlayer",e=>this.player?this.player[e]:null),p(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){let e=this.getCurrentTime()||0,t=this.getSecondsLoaded(),a=this.getDuration();if(a){let i={playedSeconds:e,played:e/a};null!==t&&(i.loadedSeconds=t,i.loaded=t/a),(i.playedSeconds!==this.prevPlayed||i.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(i),this.prevPlayed=i.playedSeconds,this.prevLoaded=i.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),p(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;let{onReady:e,playing:t,volume:a,muted:i}=this.props;e(),i||null===a||this.player.setVolume(a),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):t&&this.player.play(),this.handleDurationCheck()}),p(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;let{onStart:e,onPlay:t,playbackRate:a}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&1!==a&&this.player.setPlaybackRate(a),e(),this.startOnPlay=!1),t(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),p(this,"handlePause",e=>{this.isPlaying=!1,this.isLoading||this.props.onPause(e)}),p(this,"handleEnded",()=>{let{activePlayer:e,loop:t,onEnded:a}=this.props;e.loopOnEnded&&t&&this.seekTo(0),t||(this.isPlaying=!1,a())}),p(this,"handleError",(...e)=>{this.isLoading=!1,this.props.onError(...e)}),p(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);let e=this.getDuration();e?this.onDurationCalled||(this.props.onDuration(e),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),p(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(e){if(!this.player)return;let{url:t,playing:a,volume:i,muted:n,playbackRate:s,pip:l,loop:r,activePlayer:o,disableDeferredLoading:d}=this.props;if(!(0,y.default)(e.url,t)){if(this.isLoading&&!o.forceLoad&&!d&&!(0,f.isMediaStream)(t)){console.warn(`ReactPlayer: the attempt to load ${t} is being deferred until the player has loaded`),this.loadOnReady=t;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(t,this.isReady)}e.playing||!a||this.isPlaying||this.player.play(),e.playing&&!a&&this.isPlaying&&this.player.pause(),!e.pip&&l&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!l&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==i&&null!==i&&this.player.setVolume(i),e.muted!==n&&(n?this.player.mute():(this.player.unmute(),null!==i&&setTimeout(()=>this.player.setVolume(i)))),e.playbackRate!==s&&this.player.setPlaybackRate&&this.player.setPlaybackRate(s),e.loop!==r&&this.player.setLoop&&this.player.setLoop(r)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(e,t,a){if(!this.isReady){0!==e&&(this.seekOnPlay=e,setTimeout(()=>{this.seekOnPlay=null},5e3));return}if(t?"fraction"===t:e>0&&e<1){let t=this.player.getDuration();if(!t){console.warn("ReactPlayer: could not seek using fraction –\xa0duration not yet available");return}this.player.seekTo(t*e,a);return}this.player.seekTo(e,a)}render(){let e=this.props.activePlayer;return e?m.default.createElement(e,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}p(g,"displayName","Player"),p(g,"propTypes",x.propTypes),p(g,"defaultProps",x.defaultProps)},15642:(e,t,a)=>{var i=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,r=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,d=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of l(t))o.call(e,r)||r===a||n(e,r,{get:()=>t[r],enumerable:!(i=s(t,r))||i.enumerable});return e},u=(e,t,a)=>(a=null!=e?i(r(e)):{},c(!t&&e&&e.__esModule?a:n(a,"default",{value:e,enumerable:!0}),e)),p=(e,t,a)=>(d(e,"symbol"!=typeof t?t+"":t,a),a),h={};((e,t)=>{for(var a in t)n(e,a,{get:t[a],enumerable:!0})})(h,{createReactPlayer:()=>S}),e.exports=c(n({},"__esModule",{value:!0}),h);var m=u(a(17577)),y=u(a(10909)),x=u(a(39542)),f=u(a(86725)),g=a(16969),v=a(33948),b=u(a(52495));let j=(0,v.lazy)(()=>a.e(7664).then(a.t.bind(a,67770,23))),w="undefined"!=typeof window&&window.document&&"undefined"!=typeof document,_="undefined"!=typeof global&&global.window&&global.window.document,P=Object.keys(g.propTypes),k=w||_?m.Suspense:()=>null,N=[],S=(e,t)=>{var a;return a=class extends m.Component{constructor(){super(...arguments),p(this,"state",{showPreview:!!this.props.light}),p(this,"references",{wrapper:e=>{this.wrapper=e},player:e=>{this.player=e}}),p(this,"handleClickPreview",e=>{this.setState({showPreview:!1}),this.props.onClickPreview(e)}),p(this,"showPreview",()=>{this.setState({showPreview:!0})}),p(this,"getDuration",()=>this.player?this.player.getDuration():null),p(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),p(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),p(this,"getInternalPlayer",(e="player")=>this.player?this.player.getInternalPlayer(e):null),p(this,"seekTo",(e,t,a)=>{if(!this.player)return null;this.player.seekTo(e,t,a)}),p(this,"handleReady",()=>{this.props.onReady(this)}),p(this,"getActivePlayer",(0,x.default)(a=>{for(let t of[...N,...e])if(t.canPlay(a))return t;return t||null})),p(this,"getConfig",(0,x.default)((e,t)=>{let{config:a}=this.props;return y.default.all([g.defaultProps.config,g.defaultProps.config[t]||{},a,a[t]||{}])})),p(this,"getAttributes",(0,x.default)(e=>(0,v.omit)(this.props,P))),p(this,"renderActivePlayer",e=>{if(!e)return null;let t=this.getActivePlayer(e);if(!t)return null;let a=this.getConfig(e,t.key);return m.default.createElement(b.default,{...this.props,key:t.key,ref:this.references.player,config:a,activePlayer:t.lazyPlayer||t,onReady:this.handleReady})})}shouldComponentUpdate(e,t){return!(0,f.default)(this.props,e)||!(0,f.default)(this.state,t)}componentDidUpdate(e){let{light:t}=this.props;!e.light&&t&&this.setState({showPreview:!0}),e.light&&!t&&this.setState({showPreview:!1})}renderPreview(e){if(!e)return null;let{light:t,playIcon:a,previewTabIndex:i,oEmbedUrl:n,previewAriaLabel:s}=this.props;return m.default.createElement(j,{url:e,light:t,playIcon:a,previewTabIndex:i,previewAriaLabel:s,oEmbedUrl:n,onClick:this.handleClickPreview})}render(){let{url:e,style:t,width:a,height:i,fallback:n,wrapper:s}=this.props,{showPreview:l}=this.state,r=this.getAttributes(e),o="string"==typeof s?this.references.wrapper:void 0;return m.default.createElement(s,{ref:o,style:{...t,width:a,height:i},...r},m.default.createElement(k,{fallback:n},l?this.renderPreview(e):this.renderActivePlayer(e)))}},p(a,"displayName","ReactPlayer"),p(a,"propTypes",g.propTypes),p(a,"defaultProps",g.defaultProps),p(a,"addCustomPlayer",e=>{N.push(e)}),p(a,"removeCustomPlayers",()=>{N.length=0}),p(a,"canPlay",t=>{for(let a of[...N,...e])if(a.canPlay(t))return!0;return!1}),p(a,"canEnablePIP",t=>{for(let a of[...N,...e])if(a.canEnablePIP&&a.canEnablePIP(t))return!0;return!1}),a}},84554:(e,t,a)=>{let i,n,s;var l=Object.create,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,c=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,p=(e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of d(t))u.call(e,n)||n===a||r(e,n,{get:()=>t[n],enumerable:!(i=o(t,n))||i.enumerable});return e},h={};((e,t)=>{for(var a in t)r(e,a,{get:t[a],enumerable:!0})})(h,{default:()=>f}),e.exports=p(r({},"__esModule",{value:!0}),h);var m=(s=null!=(i=a(61424))?l(c(i)):{},p(!n&&i&&i.__esModule?s:r(s,"default",{value:i,enumerable:!0}),i)),y=a(15642);let x=m.default[m.default.length-1];var f=(0,y.createReactPlayer)(m.default,x)},8613:(e,t,a)=>{var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,r={};((e,t)=>{for(var a in t)i(e,a,{get:t[a],enumerable:!0})})(r,{AUDIO_EXTENSIONS:()=>_,DASH_EXTENSIONS:()=>N,FLV_EXTENSIONS:()=>S,HLS_EXTENSIONS:()=>k,MATCH_URL_DAILYMOTION:()=>v,MATCH_URL_FACEBOOK:()=>h,MATCH_URL_FACEBOOK_WATCH:()=>m,MATCH_URL_KALTURA:()=>w,MATCH_URL_MIXCLOUD:()=>b,MATCH_URL_MUX:()=>p,MATCH_URL_SOUNDCLOUD:()=>c,MATCH_URL_STREAMABLE:()=>y,MATCH_URL_TWITCH_CHANNEL:()=>g,MATCH_URL_TWITCH_VIDEO:()=>f,MATCH_URL_VIDYARD:()=>j,MATCH_URL_VIMEO:()=>u,MATCH_URL_WISTIA:()=>x,MATCH_URL_YOUTUBE:()=>d,VIDEO_EXTENSIONS:()=>P,canPlay:()=>C}),e.exports=((e,t,a,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of s(t))l.call(e,o)||o===a||i(e,o,{get:()=>t[o],enumerable:!(r=n(t,o))||r.enumerable});return e})(i({},"__esModule",{value:!0}),r);var o=a(33948);let d=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,c=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,u=/vimeo\.com\/(?!progressive_redirect).+/,p=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,h=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,m=/^https?:\/\/fb\.watch\/.+$/,y=/streamable\.com\/([a-z0-9]+)$/,x=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,f=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,g=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,v=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,b=/mixcloud\.com\/([^/]+\/[^/]+)/,j=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,w=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,_=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,P=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,k=/\.(m3u8)($|\?)/i,N=/\.(mpd)($|\?)/i,S=/\.(flv)($|\?)/i,O=e=>{if(e instanceof Array){for(let t of e)if("string"==typeof t&&O(t)||O(t.src))return!0;return!1}return!!((0,o.isMediaStream)(e)||(0,o.isBlobUrl)(e))||_.test(e)||P.test(e)||k.test(e)||N.test(e)||S.test(e)},C={youtube:e=>e instanceof Array?e.every(e=>d.test(e)):d.test(e),soundcloud:e=>c.test(e)&&!_.test(e),vimeo:e=>u.test(e)&&!P.test(e)&&!k.test(e),mux:e=>p.test(e),facebook:e=>h.test(e)||m.test(e),streamable:e=>y.test(e),wistia:e=>x.test(e),twitch:e=>f.test(e)||g.test(e),dailymotion:e=>v.test(e),mixcloud:e=>b.test(e),vidyard:e=>j.test(e),kaltura:e=>w.test(e),file:O}},61424:(e,t,a)=>{Object.create;var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,l=(Object.getPrototypeOf,Object.prototype.hasOwnProperty),r={};((e,t)=>{for(var a in t)i(e,a,{get:t[a],enumerable:!0})})(r,{default:()=>c}),e.exports=((e,t,a,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of s(t))l.call(e,o)||o===a||i(e,o,{get:()=>t[o],enumerable:!(r=n(t,o))||r.enumerable});return e})(i({},"__esModule",{value:!0}),r);var o=a(33948),d=a(8613),c=[{key:"youtube",name:"YouTube",canPlay:d.canPlay.youtube,lazyPlayer:(0,o.lazy)(()=>a.e(4439).then(a.t.bind(a,91247,23)))},{key:"soundcloud",name:"SoundCloud",canPlay:d.canPlay.soundcloud,lazyPlayer:(0,o.lazy)(()=>a.e(6125).then(a.t.bind(a,98890,23)))},{key:"vimeo",name:"Vimeo",canPlay:d.canPlay.vimeo,lazyPlayer:(0,o.lazy)(()=>a.e(3743).then(a.t.bind(a,10225,23)))},{key:"mux",name:"Mux",canPlay:d.canPlay.mux,lazyPlayer:(0,o.lazy)(()=>a.e(4258).then(a.t.bind(a,3699,23)))},{key:"facebook",name:"Facebook",canPlay:d.canPlay.facebook,lazyPlayer:(0,o.lazy)(()=>a.e(2121).then(a.t.bind(a,76750,23)))},{key:"streamable",name:"Streamable",canPlay:d.canPlay.streamable,lazyPlayer:(0,o.lazy)(()=>a.e(2546).then(a.t.bind(a,42013,23)))},{key:"wistia",name:"Wistia",canPlay:d.canPlay.wistia,lazyPlayer:(0,o.lazy)(()=>a.e(8055).then(a.t.bind(a,26904,23)))},{key:"twitch",name:"Twitch",canPlay:d.canPlay.twitch,lazyPlayer:(0,o.lazy)(()=>a.e(6216).then(a.t.bind(a,75851,23)))},{key:"dailymotion",name:"DailyMotion",canPlay:d.canPlay.dailymotion,lazyPlayer:(0,o.lazy)(()=>a.e(7596).then(a.t.bind(a,76499,23)))},{key:"mixcloud",name:"Mixcloud",canPlay:d.canPlay.mixcloud,lazyPlayer:(0,o.lazy)(()=>a.e(4667).then(a.t.bind(a,8515,23)))},{key:"vidyard",name:"Vidyard",canPlay:d.canPlay.vidyard,lazyPlayer:(0,o.lazy)(()=>a.e(8888).then(a.t.bind(a,61033,23)))},{key:"kaltura",name:"Kaltura",canPlay:d.canPlay.kaltura,lazyPlayer:(0,o.lazy)(()=>a.e(261).then(a.t.bind(a,60011,23)))},{key:"file",name:"FilePlayer",canPlay:d.canPlay.file,canEnablePIP:e=>d.canPlay.file(e)&&(document.pictureInPictureEnabled||(0,o.supportsWebKitPresentationMode)())&&!d.AUDIO_EXTENSIONS.test(e),lazyPlayer:(0,o.lazy)(()=>a.e(6011).then(a.t.bind(a,43758,23)))}]},16969:(e,t,a)=>{let i,n,s;var l=Object.create,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,c=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,p=(e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of d(t))u.call(e,n)||n===a||r(e,n,{get:()=>t[n],enumerable:!(i=o(t,n))||i.enumerable});return e},h={};((e,t)=>{for(var a in t)r(e,a,{get:t[a],enumerable:!0})})(h,{defaultProps:()=>k,propTypes:()=>_}),e.exports=p(r({},"__esModule",{value:!0}),h);let{string:m,bool:y,number:x,array:f,oneOfType:g,shape:v,object:b,func:j,node:w}=(s=null!=(i=a(78439))?l(c(i)):{},p(!n&&i&&i.__esModule?s:r(s,"default",{value:i,enumerable:!0}),i)).default,_={url:g([m,f,b]),playing:y,loop:y,controls:y,volume:x,muted:y,playbackRate:x,width:g([m,x]),height:g([m,x]),style:b,progressInterval:x,playsinline:y,pip:y,stopOnUnmount:y,light:g([y,m,b]),playIcon:w,previewTabIndex:x,previewAriaLabel:m,fallback:w,oEmbedUrl:m,wrapper:g([m,j,v({render:j.isRequired})]),config:v({soundcloud:v({options:b}),youtube:v({playerVars:b,embedOptions:b,onUnstarted:j}),facebook:v({appId:m,version:m,playerId:m,attributes:b}),dailymotion:v({params:b}),vimeo:v({playerOptions:b,title:m}),mux:v({attributes:b,version:m}),file:v({attributes:b,tracks:f,forceVideo:y,forceAudio:y,forceHLS:y,forceSafariHLS:y,forceDisableHls:y,forceDASH:y,forceFLV:y,hlsOptions:b,hlsVersion:m,dashVersion:m,flvVersion:m}),wistia:v({options:b,playerId:m,customControls:f}),mixcloud:v({options:b}),twitch:v({options:b,playerId:m}),vidyard:v({options:b})}),onReady:j,onStart:j,onPlay:j,onPause:j,onBuffer:j,onBufferEnd:j,onEnded:j,onError:j,onDuration:j,onSeek:j,onPlaybackRateChange:j,onPlaybackQualityChange:j,onProgress:j,onClickPreview:j,onEnablePIP:j,onDisablePIP:j},P=()=>{},k={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:P},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:P,onStart:P,onPlay:P,onPause:P,onBuffer:P,onBufferEnd:P,onEnded:P,onError:P,onDuration:P,onSeek:P,onPlaybackRateChange:P,onPlaybackQualityChange:P,onProgress:P,onClickPreview:P,onEnablePIP:P,onDisablePIP:P}},33948:(e,t,a)=>{var i=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,r=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,d=(e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of l(t))o.call(e,r)||r===a||n(e,r,{get:()=>t[r],enumerable:!(i=s(t,r))||i.enumerable});return e},c=(e,t,a)=>(a=null!=e?i(r(e)):{},d(!t&&e&&e.__esModule?a:n(a,"default",{value:e,enumerable:!0}),e)),u={};((e,t)=>{for(var a in t)n(e,a,{get:t[a],enumerable:!0})})(u,{callPlayer:()=>T,getConfig:()=>O,getSDK:()=>S,isBlobUrl:()=>E,isMediaStream:()=>M,lazy:()=>y,omit:()=>C,parseEndTime:()=>w,parseStartTime:()=>j,queryString:()=>P,randomString:()=>_,supportsWebKitPresentationMode:()=>A}),e.exports=d(n({},"__esModule",{value:!0}),u);var p=c(a(17577)),h=c(a(20812)),m=c(a(10909));let y=e=>p.default.lazy(async()=>{let t=await e();return"function"==typeof t.default?t:t.default}),x=/[?&#](?:start|t)=([0-9hms]+)/,f=/[?&#]end=([0-9hms]+)/,g=/(\d+)(h|m|s)/g,v=/^\d+$/;function b(e,t){if(e instanceof Array)return;let a=e.match(t);if(a){let e=a[1];if(e.match(g))return function(e){let t=0,a=g.exec(e);for(;null!==a;){let[,i,n]=a;"h"===n&&(t+=3600*parseInt(i,10)),"m"===n&&(t+=60*parseInt(i,10)),"s"===n&&(t+=parseInt(i,10)),a=g.exec(e)}return t}(e);if(v.test(e))return parseInt(e)}}function j(e){return b(e,x)}function w(e){return b(e,f)}function _(){return Math.random().toString(36).substr(2,5)}function P(e){return Object.keys(e).map(t=>`${t}=${e[t]}`).join("&")}function k(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}let N={},S=function(e,t,a=null,i=()=>!0,n=h.default){let s=k(t);return s&&i(s)?Promise.resolve(s):new Promise((i,s)=>{if(N[e]){N[e].push({resolve:i,reject:s});return}N[e]=[{resolve:i,reject:s}];let l=t=>{N[e].forEach(e=>e.resolve(t))};if(a){let e=window[a];window[a]=function(){e&&e(),l(k(t))}}n(e,i=>{i?(N[e].forEach(e=>e.reject(i)),N[e]=null):a||l(k(t))})})};function O(e,t){return(0,m.default)(t.config,e.config)}function C(e,...t){let a=[].concat(...t),i={};for(let t of Object.keys(e))-1===a.indexOf(t)&&(i[t]=e[t]);return i}function T(e,...t){if(!this.player||!this.player[e]){let t=`ReactPlayer: ${this.constructor.displayName} player could not call %c${e}%c \u2013 `;return this.player?this.player[e]||(t+="The method was not available"):t+="The player was not available",console.warn(t,"font-weight: bold",""),null}return this.player[e](...t)}function M(e){return"undefined"!=typeof window&&void 0!==window.MediaStream&&e instanceof window.MediaStream}function E(e){return/^blob:/.test(e)}function A(e=document.createElement("video")){let t=!1===/iPhone|iPod/.test(navigator.userAgent);return e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode&&t}},33140:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>s,default:()=>r});var i=a(68570);let n=(0,i.createProxy)(String.raw`/app/frontend/app/admin/video-templates/[id]/page.js`),{__esModule:s,$$typeof:l}=n;n.default;let r=(0,i.createProxy)(String.raw`/app/frontend/app/admin/video-templates/[id]/page.js#default`)},9815:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var i=a(17577),n=a(48051),s=a(65819),l=e=>{let{present:t,children:a}=e,l=function(e){var t,a;let[n,l]=i.useState(),o=i.useRef(null),d=i.useRef(e),c=i.useRef("none"),[u,p]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},i.useReducer((e,t)=>a[e][t]??e,t));return i.useEffect(()=>{let e=r(o.current);c.current="mounted"===u?e:"none"},[u]),(0,s.b)(()=>{let t=o.current,a=d.current;if(a!==e){let i=c.current,n=r(t);e?p("MOUNT"):"none"===n||t?.display==="none"?p("UNMOUNT"):a&&i!==n?p("ANIMATION_OUT"):p("UNMOUNT"),d.current=e}},[e,p]),(0,s.b)(()=>{if(n){let e;let t=n.ownerDocument.defaultView??window,a=a=>{let i=r(o.current).includes(CSS.escape(a.animationName));if(a.target===n&&i&&(p("ANIMATION_END"),!d.current)){let a=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=a)})}},i=e=>{e.target===n&&(c.current=r(o.current))};return n.addEventListener("animationstart",i),n.addEventListener("animationcancel",a),n.addEventListener("animationend",a),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",i),n.removeEventListener("animationcancel",a),n.removeEventListener("animationend",a)}}p("ANIMATION_END")},[n,p]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:i.useCallback(e=>{o.current=e?getComputedStyle(e):null,l(e)},[])}}(t),o="function"==typeof a?a({present:l.isPresent}):i.Children.only(a),d=(0,n.e)(l.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(a=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(o));return"function"==typeof a||l.isPresent?i.cloneElement(o,{ref:d}):null};function r(e){return e?.animationName||"none"}l.displayName="Presence"}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[8948,168,1961,6451,3789,4596,7131,9622,4342,370],()=>a(86996));module.exports=i})();