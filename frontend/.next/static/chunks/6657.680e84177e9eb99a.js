"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6657],{6657:function(e,o,r){r.r(o);var n=r(38472),t=r(78614);(0,t.ww)(),console.log("API Base URL:",(0,t.bR)());let i=n.Z.create({baseURL:(0,t.bR)(),headers:{"Content-Type":"application/json"},timeout:t.ZP.API.TIMEOUT});i.interceptors.request.use(e=>{let o=localStorage.getItem("token");return o&&(e.headers.Authorization="Bearer ".concat(o)),e}),i.interceptors.response.use(e=>e,async e=>{var o,r,n,s,l,a,c;let u=e.config;if(console.error("API Error:",e),"ECONNABORTED"===e.code||"Network Error"===e.message){if(u.__retryCount||(u.__retryCount=0),u.__retryCount<t.ZP.API.RETRY_ATTEMPTS)return u.__retryCount+=1,console.warn("Retrying request (".concat(u.__retryCount,"/").concat(t.ZP.API.RETRY_ATTEMPTS,")...")),await new Promise(e=>setTimeout(e,t.ZP.API.RETRY_DELAY*u.__retryCount)),i(u);console.error("Request timeout after retries - API might be down")}if((null===(o=e.response)||void 0===o?void 0:o.status)===401&&(console.error("❌ Authentication failed - token expired or invalid"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(s=window.toast)||void 0===s||s.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true"),(null===(r=e.response)||void 0===r?void 0:r.status)===403){console.error("❌ Access forbidden - you may not have permission or your session expired");let o=(null===(a=e.response)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.detail)||"";(o.toLowerCase().includes("not authorized")||o.toLowerCase().includes("permission"))&&(console.warn("⚠️ Token may be expired - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(c=window.toast)||void 0===c||c.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true")}return(null===(n=e.response)||void 0===n?void 0:n.status)===404&&console.error("Resource not found - check API endpoint"),Promise.reject(e)}),o.default=i},78614:function(e,o,r){r.d(o,{bR:function(){return s},ww:function(){return l}});var n=r(20357);let t=()=>{{let e=window.location.hostname;return e.includes("vercel.app")||e.includes("wedlive.vercel.app")}},i={API:{BASE_URL:(()=>{let e=n.env.NEXT_PUBLIC_BACKEND_URL||n.env.REACT_APP_BACKEND_URL||n.env.NEXT_PUBLIC_API_URL;if(e)return e;{let e=window.location.hostname;if(e.includes("emergentagent.com")||e.includes("preview.emergentagent.com"))return window.location.origin;if(e.includes("vercel.app")||e.includes("wedlive.vercel.app"))return"https://wedlive.onrender.com";e.includes("localhost")||e.includes("127.0.0.1")}return"http://localhost:8001"})(),TIMEOUT:3e5,RETRY_ATTEMPTS:2,RETRY_DELAY:1e3},MEDIA:{PROXY_ENDPOINT:"/api/media/telegram-proxy/photos/",SUPPORTED_FORMATS:["jpg","jpeg","png","webp"],MAX_FILE_SIZE:10485760},IMAGE:{MAX_RETRIES:2,RETRY_DELAY:1e3,FALLBACK_TIMEOUT:5e3,LOADING_PLACEHOLDER:"/images/placeholder.jpg"}},s=()=>i.API.BASE_URL,l=()=>{let e=s(),o=e.includes("localhost"),r=t();return console.log("\uD83D\uDD27 Configuration Validation:",{apiBaseUrl:e,environment:r?"production":"development",isLocal:o,mediaProxy:i.MEDIA.PROXY_ENDPOINT}),r&&o&&(console.error("❌ ERROR: Production frontend using localhost backend URL!"),console.error("Update NEXT_PUBLIC_API_URL in Vercel environment variables to: https://wedlive.onrender.com")),e.includes("8000")&&console.warn("⚠️ WARNING: API base URL is using port 8000, expected 8001 for local or 443 for production"),!0};o.ZP=i}}]);