(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4559,6657],{86139:function(e,t,s){Promise.resolve().then(s.bind(s,82788))},82788:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var r=s(57437),a=s(2265),n=s(16463),i=s(10273),l=s(56360),o=s(65236),d=s(79004),c=s(92404),u=s(95137),m=s(58184),f=s(86244),x=s(54817),p=s(14504),h=s(98094),g=s(48496),v=s(10883),j=s(27776),N=s(6657),y=s(10464),b=s(46260),w=s(74697),_=s(92940),C=s(3274);function A(e){let{open:t,onClose:s,category:n,folders:o,onUploadSuccess:d}=e,[u,f]=(0,a.useState)(!1),[x,p]=(0,a.useState)(0),[h,g]=(0,a.useState)({file:null,title:"",artist:"",folder_id:"",tags:"",is_public:!0});if(!t)return null;let v=async()=>{if(!h.file){j.toast.error("Please select an audio file");return}if(!h.title.trim()){j.toast.error("Please enter a title");return}f(!0),p(0);let e=new FormData;e.append("file",h.file),e.append("title",h.title),e.append("category",n),h.artist&&e.append("artist",h.artist),h.folder_id&&e.append("folder_id",h.folder_id),h.tags&&e.append("tags",h.tags),e.append("is_public",h.is_public);try{await N.default.post("/api/admin/music/upload",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{let t=Math.round(100*e.loaded/e.total);p(t)}}),j.toast.success("Audio file uploaded successfully!"),g({file:null,title:"",artist:"",folder_id:"",tags:"",is_public:!0}),d()}catch(e){var t,s;console.error("Upload failed:",e),j.toast.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.detail)||"Failed to upload audio file")}finally{f(!1),p(0)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)(i.Zb,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.ll,{children:"Upload Audio File"}),(0,r.jsxs)(i.SZ,{children:["Upload ",{background_music:"Background Music",sound_effect:"Sound Effect",transition:"Transition Sound",emotion:"Emotion Sound"}[n]||n," to the music library"]})]}),(0,r.jsx)(l.z,{variant:"ghost",size:"sm",onClick:s,disabled:u,children:(0,r.jsx)(w.Z,{className:"w-4 h-4"})})]})}),(0,r.jsxs)(i.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y._,{children:"Audio File *"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("input",{type:"file",accept:".mp3,.wav,.aac,.ogg,.m4a,audio/*",onChange:e=>{let t=e.target.files[0];if(t){if(!["audio/mpeg","audio/wav","audio/aac","audio/ogg","audio/mp4","audio/x-m4a"].includes(t.type)&&!t.name.match(/\.(mp3|wav|aac|ogg|m4a)$/i)){j.toast.error("Invalid file type. Please upload MP3, WAV, AAC, OGG, or M4A files.");return}if(t.size>52428800){j.toast.error("File size exceeds 50MB limit");return}g(e=>({...e,file:t,title:e.title||t.name.replace(/\.[^/.]+$/,"")}))}},disabled:u,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-rose-50 file:text-rose-700 hover:file:bg-rose-100 disabled:opacity-50"}),h.file&&(0,r.jsxs)("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-md flex items-center gap-2",children:[(0,r.jsx)(_.Z,{className:"w-4 h-4 text-green-600"}),(0,r.jsx)("span",{className:"text-sm text-green-700",children:h.file.name}),(0,r.jsxs)("span",{className:"text-xs text-green-600 ml-auto",children:[(h.file.size/1048576).toFixed(2)," MB"]})]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Supported formats: MP3, WAV, AAC, OGG, M4A (Max 50MB)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y._,{htmlFor:"title",children:"Title *"}),(0,r.jsx)(c.I,{id:"title",value:h.title,onChange:e=>g(t=>({...t,title:e.target.value})),placeholder:"e.g., Wedding March",disabled:u,className:"mt-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y._,{htmlFor:"artist",children:"Artist"}),(0,r.jsx)(c.I,{id:"artist",value:h.artist,onChange:e=>g(t=>({...t,artist:e.target.value})),placeholder:"e.g., Classical Orchestra",disabled:u,className:"mt-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y._,{htmlFor:"folder",children:"Folder (Optional)"}),(0,r.jsxs)(b.Ph,{value:h.folder_id||"none",onValueChange:e=>g(t=>({...t,folder_id:"none"===e?null:e})),disabled:u,children:[(0,r.jsx)(b.i4,{className:"mt-2",children:(0,r.jsx)(b.ki,{placeholder:"Select a folder"})}),(0,r.jsxs)(b.Bw,{children:[(0,r.jsx)(b.Ql,{value:"none",children:"No folder (root)"}),o.map(e=>(0,r.jsxs)(b.Ql,{value:e.id,children:[e.icon," ",e.name]},e.id))]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y._,{htmlFor:"tags",children:"Tags (Optional)"}),(0,r.jsx)(c.I,{id:"tags",value:h.tags,onChange:e=>g(t=>({...t,tags:e.target.value})),placeholder:"e.g., romantic, classical, ceremony (comma-separated)",disabled:u,className:"mt-2"})]}),u&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{children:"Uploading..."}),(0,r.jsxs)("span",{children:[x,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-rose-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(x,"%")}})})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[(0,r.jsx)(l.z,{variant:"outline",onClick:s,disabled:u,children:"Cancel"}),(0,r.jsx)(l.z,{onClick:v,disabled:u||!h.file||!h.title,className:"bg-gradient-to-r from-rose-500 to-purple-500",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Upload Audio"]})})]})]})]})})}var k=s(42421),R=s(87592);function S(e){let{folders:t,selectedFolder:s,onSelectFolder:n,onDeleteFolder:i}=e,[o,d]=(0,a.useState)(new Set),c=e=>{let t=new Set(o);t.has(e)?t.delete(e):t.add(e),d(t)},u=t.filter(e=>!e.parent_folder_id),m=e=>t.filter(t=>t.parent_folder_id===e),f=e=>{let{folder:t,level:a=0}=e,d=m(t.id).length>0,u=o.has(t.id),x=s===t.id,p=m(t.id);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 py-2 px-3 rounded-md cursor-pointer transition-colors ".concat(x?"bg-rose-100 text-rose-700":"hover:bg-gray-100"),style:{paddingLeft:"".concat(16*a+12,"px")},children:[d&&(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),c(t.id)},className:"p-0 hover:bg-gray-200 rounded",children:u?(0,r.jsx)(k.Z,{className:"w-4 h-4"}):(0,r.jsx)(R.Z,{className:"w-4 h-4"})}),!d&&(0,r.jsx)("div",{className:"w-4"}),(0,r.jsx)(g.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"flex-1 text-sm font-medium truncate",onClick:()=>n(t.id),children:t.name}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:t.file_count}),(0,r.jsx)(l.z,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),i(t.id)},className:"p-1 h-auto opacity-0 group-hover:opacity-100",children:(0,r.jsx)(v.Z,{className:"w-3 h-3 text-red-500"})})]}),d&&u&&(0,r.jsx)("div",{children:p.map(e=>(0,r.jsx)(f,{folder:e,level:a+1},e.id))})]})};return(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 py-2 px-3 rounded-md cursor-pointer transition-colors ".concat(s?"hover:bg-gray-100":"bg-rose-100 text-rose-700"),onClick:()=>n(null),children:[(0,r.jsx)(g.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"flex-1 text-sm font-medium",children:"All Files"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:t.reduce((e,t)=>e+t.file_count,0)})]}),0===u.length?(0,r.jsx)("div",{className:"text-center py-4 text-sm text-gray-500",children:"No folders created yet"}):u.map(e=>(0,r.jsx)("div",{className:"group",children:(0,r.jsx)(f,{folder:e})},e.id))]})}var P=s(24841),E=s(23395),Z=s(38733);function T(e){var t;let{track:s,onClose:n}=e,[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(0),[m,f]=(0,a.useState)(.7),[x,p]=(0,a.useState)(!1),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{g.current&&(g.current.volume=m)},[m]),(0,a.useEffect)(()=>()=>{g.current&&g.current.pause()},[]);let v=e=>!e||isNaN(e)?"0:00":"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0")),j=(null===(t=g.current)||void 0===t?void 0:t.duration)?c/g.current.duration*100:0;return(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,r.jsx)(i.Zb,{className:"w-96 shadow-2xl",children:(0,r.jsxs)(i.aY,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-semibold truncate",children:s.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500 truncate",children:s.artist||"Unknown Artist"})]}),(0,r.jsx)(l.z,{size:"sm",variant:"ghost",onClick:n,children:(0,r.jsx)(w.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full cursor-pointer mb-3",onClick:e=>{if(g.current){let t=e.currentTarget.getBoundingClientRect(),s=(e.clientX-t.left)/t.width;g.current.currentTime=s*g.current.duration}},children:(0,r.jsx)("div",{className:"h-full bg-rose-500 rounded-full transition-all",style:{width:"".concat(j,"%")}})}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[(0,r.jsx)("span",{children:v(c)}),(0,r.jsx)("span",{children:v(s.duration)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(l.z,{size:"sm",onClick:()=>{g.current&&(o?g.current.pause():g.current.play(),d(!o))},className:"bg-rose-500 hover:bg-rose-600",children:o?(0,r.jsx)(P.Z,{className:"w-4 h-4"}):(0,r.jsx)(h.Z,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>{g.current&&(g.current.muted=!x,p(!x))},children:x?(0,r.jsx)(E.Z,{className:"w-4 h-4"}):(0,r.jsx)(Z.Z,{className:"w-4 h-4"})}),(0,r.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:m,onChange:e=>f(parseFloat(e.target.value)),className:"w-20"})]})]}),(0,r.jsx)("audio",{ref:g,src:s.file_url,onTimeUpdate:()=>{g.current&&u(g.current.currentTime)},onEnded:()=>d(!1)})]})})})}function F(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(!0),[y,b]=(0,a.useState)("background_music"),[w,_]=(0,a.useState)([]),[C,k]=(0,a.useState)([]),[R,P]=(0,a.useState)(null),[E,Z]=(0,a.useState)(""),[F,z]=(0,a.useState)(!1),[I,U]=(0,a.useState)(!1),[D,L]=(0,a.useState)(""),[M,O]=(0,a.useState)(""),[B,Y]=(0,a.useState)(null);(0,a.useEffect)(()=>{V(),G()},[y]);let V=async()=>{try{let t=await N.default.get("/api/auth/me");"admin"!==t.data.role&&(j.toast.error("Access denied. Admin privileges required."),e.push("/dashboard"))}catch(t){console.error("Auth check failed:",t),e.push("/login")}},G=async()=>{try{s(!0);let[e,t]=await Promise.all([N.default.get("/api/admin/music/library?category=".concat(y,"&limit=100")),N.default.get("/api/admin/music/folders?category=".concat(y))]);_(e.data),k(t.data)}catch(e){console.error("Failed to load music data:",e),j.toast.error("Failed to load music library")}finally{s(!1)}},X=async()=>{if(!D.trim()){j.toast.error("Folder name is required");return}try{await N.default.post("/api/admin/music/folders",{name:D,description:M,category:y,parent_folder_id:R,icon:"\uD83C\uDFB5"}),j.toast.success("Folder created successfully"),L(""),O(""),U(!1),G()}catch(s){var e,t;console.error("Failed to create folder:",s),j.toast.error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Failed to create folder")}},W=async e=>{if(confirm("Are you sure you want to delete this audio file?"))try{await N.default.delete("/api/admin/music/library/".concat(e)),j.toast.success("Audio file deleted successfully"),G()}catch(e){var t,s;console.error("Failed to delete music:",e),j.toast.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.detail)||"Failed to delete audio file")}},q=async e=>{if(confirm("Are you sure you want to delete this folder? It must be empty."))try{await N.default.delete("/api/admin/music/folders/".concat(e)),j.toast.success("Folder deleted successfully"),G()}catch(e){var t,s;console.error("Failed to delete folder:",e),j.toast.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.detail)||"Failed to delete folder")}},Q=e=>({background_music:"Background Music",sound_effect:"Sound Effects",transition:"Transition Sounds",emotion:"Emotion Sounds"})[e]||e,$=e=>({background_music:"\uD83C\uDFB5",sound_effect:"\uD83C\uDFAD",transition:"⚡",emotion:"\uD83D\uDC96"})[e]||"\uD83C\uDFB5",K=w.filter(e=>{var t;let s=""===E||e.title.toLowerCase().includes(E.toLowerCase())||(null===(t=e.artist)||void 0===t?void 0:t.toLowerCase().includes(E.toLowerCase())),r=!R||e.folder_id===R;return s&&r}),H=e=>e?"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")):"Unknown",J=e=>{if(!e)return"Unknown";let t=(e/1048576).toFixed(2);return"".concat(t," MB")};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(l.z,{variant:"ghost",onClick:()=>e.push("/admin"),className:"gap-2",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),"Back to Admin"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Music Library Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Manage audio assets for weddings"})]})]}),(0,r.jsxs)(l.z,{onClick:()=>z(!0),className:"bg-gradient-to-r from-rose-500 to-purple-500",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Upload Audio"]})]})})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)(o.mQ,{value:y,onValueChange:b,className:"w-full",children:[(0,r.jsxs)(o.dr,{className:"grid w-full grid-cols-4 mb-6",children:[(0,r.jsxs)(o.SP,{value:"background_music",className:"gap-2",children:[(0,r.jsx)("span",{children:$("background_music")}),"Background Music"]}),(0,r.jsxs)(o.SP,{value:"sound_effect",className:"gap-2",children:[(0,r.jsx)("span",{children:$("sound_effect")}),"Sound Effects"]}),(0,r.jsxs)(o.SP,{value:"transition",className:"gap-2",children:[(0,r.jsx)("span",{children:$("transition")}),"Transitions"]}),(0,r.jsxs)(o.SP,{value:"emotion",className:"gap-2",children:[(0,r.jsx)("span",{children:$("emotion")}),"Emotions"]})]}),["background_music","sound_effect","transition","emotion"].map(e=>{var s;return(0,r.jsx)(o.nU,{value:e,className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)(i.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(i.ll,{className:"text-lg",children:"Folders"}),(0,r.jsx)(l.z,{size:"sm",variant:"outline",onClick:()=>U(!0),children:(0,r.jsx)(f.Z,{className:"w-4 h-4"})})]})}),(0,r.jsx)(i.aY,{children:(0,r.jsx)(S,{folders:C,selectedFolder:R,onSelectFolder:P,onDeleteFolder:q})})]})}),(0,r.jsxs)("div",{className:"lg:col-span-3 space-y-4",children:[(0,r.jsx)("div",{className:"flex gap-4",children:(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)(c.I,{type:"text",placeholder:"Search by title or artist...",value:E,onChange:e=>Z(e.target.value),className:"pl-10"})]})}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsxs)(i.ll,{children:[Q(e)," Library",(0,r.jsxs)(d.C,{className:"ml-2",children:[K.length," files"]})]}),(0,r.jsx)(i.SZ,{children:R?"Files in ".concat((null===(s=C.find(e=>e.id===R))||void 0===s?void 0:s.name)||"folder"):"All files in this category"})]}),(0,r.jsx)(i.aY,{children:t?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Loading..."})}):0===K.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(p.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No audio files found"}),(0,r.jsxs)(l.z,{onClick:()=>z(!0),className:"mt-4",variant:"outline",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Upload First File"]})]}):(0,r.jsx)("div",{className:"space-y-2",children:K.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,r.jsx)(l.z,{size:"sm",variant:"outline",onClick:()=>Y(e),className:"shrink-0",children:(0,r.jsx)(h.Z,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.artist||"Unknown Artist"}),e.folder_name&&(0,r.jsxs)(d.C,{variant:"outline",className:"mt-1",children:[(0,r.jsx)(g.Z,{className:"w-3 h-3 mr-1"}),e.folder_name]})]}),(0,r.jsxs)("div",{className:"text-right shrink-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:H(e.duration)}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:J(e.file_size)}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:e.format.toUpperCase()})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2 ml-4",children:(0,r.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>W(e.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:(0,r.jsx)(v.Z,{className:"w-4 h-4"})})})]},e.id))})})]})]})]})},e)})]})}),(0,r.jsx)(A,{open:F,onClose:()=>z(!1),category:y,folders:C,onUploadSuccess:()=>{G(),z(!1)}}),I&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)(i.Zb,{className:"w-full max-w-md",children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Create New Folder"}),(0,r.jsxs)(i.SZ,{children:["Create a folder to organize your ",Q(y).toLowerCase()]})]}),(0,r.jsxs)(i.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Folder Name"}),(0,r.jsx)(c.I,{value:D,onChange:e=>L(e.target.value),placeholder:"e.g., Wedding Classics",className:"mt-1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Description (Optional)"}),(0,r.jsx)(c.I,{value:M,onChange:e=>O(e.target.value),placeholder:"e.g., Classic wedding ceremony music",className:"mt-1"})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,r.jsx)(l.z,{variant:"outline",onClick:()=>{U(!1),L(""),O("")},children:"Cancel"}),(0,r.jsx)(l.z,{onClick:X,children:"Create Folder"})]})]})]})}),B&&(0,r.jsx)(T,{track:B,onClose:()=>Y(null)})]})}},79004:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var r=s(57437);s(2265);var a=s(13027),n=s(77700);let i=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},56360:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(57437),a=s(2265),n=s(71538),i=s(13027),l=s(77700);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...c})});d.displayName="Button"},10273:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var r=s(57437),a=s(2265),n=s(77700);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},92404:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(57437),a=s(2265),n=s(77700);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},10464:function(e,t,s){"use strict";s.d(t,{_:function(){return d}});var r=s(57437),a=s(2265),n=s(38837),i=s(13027),l=s(77700);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),s),...a})});d.displayName=n.f.displayName},46260:function(e,t,s){"use strict";s.d(t,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return h},i4:function(){return m},ki:function(){return u}});var r=s(57437),a=s(2265),n=s(89363),i=s(42421),l=s(14392),o=s(22468),d=s(77700);let c=n.fC;n.ZA;let u=n.B4,m=a.forwardRef((e,t)=>{let{className:s,children:a,...l}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap bg-transparent px-0 py-0 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-0 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 [&>span]:border-none [&>span]:outline-none [&>span]:focus:border-none [&>span]:focus:outline-none [&>span]:focus:ring-0 [&>span]:focus:ring-offset-0 [&>span]:!border-0 [&>span]:!outline-none [&>span]:!ring-0",s),...l,children:[a,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(i.Z,{className:"h-4 w-4 opacity-50 ml-1"})})]})});m.displayName=n.xz.displayName;let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});f.displayName=n.u_.displayName;let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let p=a.forwardRef((e,t)=>{let{className:s,children:a,position:i="popper",...l}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,r.jsx)(f,{}),(0,r.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(x,{})]})})});p.displayName=n.VY.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",s),...a})}).displayName=n.__.displayName;let h=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none border-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>span]:border-none [&>span]:outline-none [&>span]:!border-0 [&>span]:!outline-none",s),...i,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:a})]})});h.displayName=n.ck.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=n.Z0.displayName},65236:function(e,t,s){"use strict";s.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return l},nU:function(){return c}});var r=s(57437),a=s(2265),n=s(62447),i=s(77700);let l=n.fC,o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...a})});o.displayName=n.aV.displayName;let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...a})});d.displayName=n.xz.displayName;let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});c.displayName=n.VY.displayName},6657:function(e,t,s){"use strict";s.r(t);var r=s(38472),a=s(78614);(0,a.ww)(),console.log("API Base URL:",(0,a.bR)());let n=r.Z.create({baseURL:(0,a.bR)(),headers:{"Content-Type":"application/json"},timeout:a.ZP.API.TIMEOUT});n.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),n.interceptors.response.use(e=>e,async e=>{var t,s,r,i,l,o,d;let c=e.config;if(console.error("API Error:",e),"ECONNABORTED"===e.code||"Network Error"===e.message){if(c.__retryCount||(c.__retryCount=0),c.__retryCount<a.ZP.API.RETRY_ATTEMPTS)return c.__retryCount+=1,console.warn("Retrying request (".concat(c.__retryCount,"/").concat(a.ZP.API.RETRY_ATTEMPTS,")...")),await new Promise(e=>setTimeout(e,a.ZP.API.RETRY_DELAY*c.__retryCount)),n(c);console.error("Request timeout after retries - API might be down")}if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&(console.error("❌ Authentication failed - token expired or invalid"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(i=window.toast)||void 0===i||i.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true"),(null===(s=e.response)||void 0===s?void 0:s.status)===403){console.error("❌ Access forbidden - you may not have permission or your session expired");let t=(null===(o=e.response)||void 0===o?void 0:null===(l=o.data)||void 0===l?void 0:l.detail)||"";(t.toLowerCase().includes("not authorized")||t.toLowerCase().includes("permission"))&&(console.warn("⚠️ Token may be expired - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(d=window.toast)||void 0===d||d.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true")}return(null===(r=e.response)||void 0===r?void 0:r.status)===404&&console.error("Resource not found - check API endpoint"),Promise.reject(e)}),t.default=n},78614:function(e,t,s){"use strict";s.d(t,{bR:function(){return i},ww:function(){return l}});var r=s(20357);let a=()=>{{let e=window.location.hostname;return e.includes("vercel.app")||e.includes("wedlive.vercel.app")}},n={API:{BASE_URL:(()=>{let e=r.env.NEXT_PUBLIC_BACKEND_URL||r.env.REACT_APP_BACKEND_URL||r.env.NEXT_PUBLIC_API_URL;if(e)return e;{let e=window.location.hostname;if(e.includes("emergentagent.com")||e.includes("preview.emergentagent.com"))return window.location.origin;if(e.includes("vercel.app")||e.includes("wedlive.vercel.app"))return"https://wedlive.onrender.com";e.includes("localhost")||e.includes("127.0.0.1")}return"http://localhost:8001"})(),TIMEOUT:3e5,RETRY_ATTEMPTS:2,RETRY_DELAY:1e3},MEDIA:{PROXY_ENDPOINT:"/api/media/telegram-proxy/photos/",SUPPORTED_FORMATS:["jpg","jpeg","png","webp"],MAX_FILE_SIZE:10485760},IMAGE:{MAX_RETRIES:2,RETRY_DELAY:1e3,FALLBACK_TIMEOUT:5e3,LOADING_PLACEHOLDER:"/images/placeholder.jpg"}},i=()=>n.API.BASE_URL,l=()=>{let e=i(),t=e.includes("localhost"),s=a();return console.log("\uD83D\uDD27 Configuration Validation:",{apiBaseUrl:e,environment:s?"production":"development",isLocal:t,mediaProxy:n.MEDIA.PROXY_ENDPOINT}),s&&t&&(console.error("❌ ERROR: Production frontend using localhost backend URL!"),console.error("Update NEXT_PUBLIC_API_URL in Vercel environment variables to: https://wedlive.onrender.com")),e.includes("8000")&&console.warn("⚠️ WARNING: API base URL is using port 8000, expected 8001 for local or 443 for production"),!0};t.ZP=n},77700:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(44839),a=s(96164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[9767,4868,7776,2889,2151,7662,40,2719,2971,7023,1744],function(){return e(e.s=86139)}),_N_E=e.O()}]);