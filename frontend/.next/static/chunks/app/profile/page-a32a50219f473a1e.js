(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{66835:function(e,s,a){Promise.resolve().then(a.bind(a,85054))},85054:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return I}});var t=a(57437),l=a(2265),r=a(15730),i=a(16463),n=a(10273),d=a(56360),o=a(92404),c=a(10464),u=a(95640),m=a(79004),h=a(17953),x=a(68639),p=a(3274),f=a(95137),g=a(957),j=a(52022),v=a(58184),N=a(4086),b=a(89832),y=a(74232),w=a(92513),_=a(4436),S=a(49321),C=a(6649),Z=a(10883),F=a(27776),z=a(6657),E=a(87138);function I(){var e,s;let{user:a,loading:I}=(0,r.a)(),P=(0,i.useRouter)(),[k,A]=(0,l.useState)(!0),[U,R]=(0,l.useState)(!1),[D,M]=(0,l.useState)(null),[Y,q]=(0,l.useState)([]),[B,O]=(0,l.useState)({full_name:"",phone:""}),[W,G]=(0,l.useState)(!1),[T,$]=(0,l.useState)(null),[L,Q]=(0,l.useState)({name:"",logo_url:"",website:"",email:"",phone:"",address:""}),[J,K]=(0,l.useState)(null),[V,H]=(0,l.useState)(null),[X,ee]=(0,l.useState)(!1);(0,l.useEffect)(()=>{I||a?a&&es():P.push("/login")},[a,I,P]);let es=async()=>{try{let e=await z.default.get("/api/profile/me");M(e.data),O({full_name:e.data.full_name||"",phone:e.data.phone||""}),q(e.data.studios||[])}catch(e){console.error("Error loading profile:",e),F.toast.error("Failed to load profile")}finally{A(!1)}},ea=async e=>{e.preventDefault(),R(!0);try{await z.default.put("/api/profile/update",B),F.toast.success("Profile updated successfully!"),es()}catch(e){console.error("Error updating profile:",e),F.toast.error("Failed to update profile")}finally{R(!1)}},et=async e=>{let s=e.target.files[0];if(s){if(!s.type.startsWith("image/")){F.toast.error("Please select an image file");return}if(s.size>5242880){F.toast.error("Image must be less than 5MB");return}ee(!0);try{let e=new FormData;e.append("file",s),await z.default.post("/api/profile/avatar",e,{headers:{"Content-Type":"multipart/form-data"}}),F.toast.success("Avatar updated successfully!"),es()}catch(e){console.error("Error uploading avatar:",e),F.toast.error("Failed to upload avatar")}finally{ee(!1)}}},el=async e=>{e.preventDefault(),R(!0);try{let e=null==T?void 0:T.id;if(T?(await z.default.put("/api/profile/studios/".concat(T.id),L),F.toast.success("Studio updated successfully!")):(e=(await z.default.post("/api/profile/studios",L)).data.id,F.toast.success("Studio created successfully!")),J&&e){let s=new FormData;s.append("file",J);try{await z.default.post("/api/profile/studios/".concat(e,"/logo"),s,{headers:{"Content-Type":"multipart/form-data"}}),F.toast.success("Studio image uploaded!")}catch(e){console.error("Error uploading studio image:",e),F.toast.error("Studio saved but image upload failed")}}G(!1),$(null),Q({name:"",logo_url:"",website:"",email:"",phone:"",address:""}),K(null),H(null),es()}catch(e){var s;console.error("Error saving studio:",e),(null===(s=e.response)||void 0===s?void 0:s.status)===403?F.toast.error("Studio management is only available for Premium users"):F.toast.error("Failed to save studio")}finally{R(!1)}},er=async e=>{if(confirm("Are you sure you want to delete this studio?"))try{await z.default.delete("/api/profile/studios/".concat(e)),F.toast.success("Studio deleted successfully!"),es()}catch(e){console.error("Error deleting studio:",e),F.toast.error("Failed to delete studio")}},ei=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?($(e),Q({name:e.name,logo_url:e.logo_url||"",website:e.website||"",email:e.email||"",phone:e.phone||"",address:e.address||""}),H(e.logo_url||null)):($(null),Q({name:"",logo_url:"",website:"",email:"",phone:"",address:""}),H(null)),K(null),G(!0)};return I||k?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,t.jsx)(p.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50",children:[(0,t.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsx)(E.default,{href:"/dashboard",children:(0,t.jsxs)(d.z,{variant:"ghost",size:"sm",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})})}),(0,t.jsx)(E.default,{href:"/settings",children:(0,t.jsx)(d.z,{variant:"outline",size:"sm",children:"Settings"})})]})})}),(0,t.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Profile"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your personal information and studio details"})]}),(0,t.jsx)(n.Zb,{className:"mb-6",children:(0,t.jsx)(n.aY,{className:"py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"p-3 bg-gradient-to-br from-rose-500 to-purple-600 rounded-lg",children:(0,t.jsx)(g.Z,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Current Plan"}),(0,t.jsx)("p",{className:"text-2xl font-bold capitalize",children:(null==D?void 0:D.subscription_plan)||"free"})]})]}),(null==D?void 0:D.subscription_plan)==="free"&&(0,t.jsx)(E.default,{href:"/pricing",children:(0,t.jsx)(d.z,{className:"bg-gradient-to-r from-rose-500 to-purple-600 text-white",children:"Upgrade to Premium"})})]})})}),(0,t.jsxs)(n.Zb,{className:"mb-6",children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"w-5 h-5"}),"Personal Information"]}),(0,t.jsx)(n.SZ,{children:"Update your profile photo and personal details"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsxs)("form",{onSubmit:ea,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsxs)(u.qE,{className:"h-24 w-24 ring-4 ring-offset-2 ring-rose-500/20",children:[(0,t.jsx)(u.F$,{src:null==D?void 0:D.avatar_url,alt:null==D?void 0:D.full_name}),(0,t.jsx)(u.Q5,{className:"bg-gradient-to-br from-rose-500 to-purple-600 text-white text-2xl",children:(e=null==D?void 0:D.full_name)?e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):(null==a?void 0:null===(s=a.email)||void 0===s?void 0:s.charAt(0).toUpperCase())||"U"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(c._,{htmlFor:"avatar-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:[X?(0,t.jsx)(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),X?"Uploading...":"Change Avatar"]}),(0,t.jsx)("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:et,className:"hidden",disabled:X}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"JPG, PNG or GIF (max 5MB)"})]})]}),(0,t.jsx)(h.Z,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"full_name",children:"Full Name"}),(0,t.jsx)(o.I,{id:"full_name",value:B.full_name,onChange:e=>O({...B,full_name:e.target.value}),placeholder:"Enter your full name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"email",children:"Email Address"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.I,{id:"email",value:null==D?void 0:D.email,disabled:!0,className:"bg-gray-50"}),(0,t.jsx)(N.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Email cannot be changed"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"phone",children:"Phone Number"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.I,{id:"phone",value:B.phone,onChange:e=>O({...B,phone:e.target.value}),placeholder:"+1 (555) 000-0000"}),(0,t.jsx)(b.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),(0,t.jsx)(d.z,{type:"submit",disabled:U,className:"w-full bg-gradient-to-r from-rose-500 to-purple-600 text-white",children:U?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(y.Z,{className:"w-5 h-5"}),"Studio Partners",(null==D?void 0:D.subscription_plan)==="free"&&(0,t.jsx)(m.C,{variant:"secondary",className:"ml-2",children:"Premium"})]}),(0,t.jsx)(n.SZ,{children:"Manage your studio branding for wedding themes"})]}),(0,t.jsxs)(d.z,{onClick:()=>ei(),size:"sm",className:"bg-gradient-to-r from-rose-500 to-purple-600 text-white",disabled:(null==D?void 0:D.subscription_plan)==="free",children:[(0,t.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"Add Studio"]})]})}),(0,t.jsx)(n.aY,{children:0===Y.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(y.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),(0,t.jsx)("p",{children:"No studios added yet"}),(null==D?void 0:D.subscription_plan)==="free"&&(0,t.jsx)("p",{className:"text-sm mt-2",children:"Upgrade to Premium to add studio partners"})]}):(0,t.jsx)("div",{className:"space-y-4",children:Y.map(e=>(0,t.jsx)(n.Zb,{className:"bg-gray-50",children:(0,t.jsx)(n.aY,{className:"py-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[e.logo_url?(0,t.jsx)("img",{src:e.logo_url,alt:e.name,className:"w-16 h-16 rounded-lg object-cover border-2 border-white shadow"}):(0,t.jsx)("div",{className:"w-16 h-16 rounded-lg bg-gradient-to-br from-rose-500 to-purple-600 flex items-center justify-center text-white text-xl font-bold",children:e.name.charAt(0)}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),e.website&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600 mt-1",children:[(0,t.jsx)(_.Z,{className:"w-3 h-3"}),(0,t.jsx)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"hover:text-rose-600",children:e.website})]}),e.email&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600 mt-1",children:[(0,t.jsx)(N.Z,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.email})]}),e.phone&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600 mt-1",children:[(0,t.jsx)(b.Z,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.phone})]}),e.address&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600 mt-1",children:[(0,t.jsx)(S.Z,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.address})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(d.z,{size:"sm",variant:"outline",onClick:()=>ei(e),children:(0,t.jsx)(C.Z,{className:"w-3 h-3"})}),(0,t.jsx)(d.z,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50",onClick:()=>er(e.id),children:(0,t.jsx)(Z.Z,{className:"w-3 h-3"})})]})]})})},e.id))})})]})]}),(0,t.jsx)(x.Vq,{open:W,onOpenChange:G,children:(0,t.jsxs)(x.cZ,{children:[(0,t.jsxs)(x.fK,{children:[(0,t.jsx)(x.$N,{children:T?"Edit Studio":"Add New Studio"}),(0,t.jsx)(x.Be,{children:"Add your studio branding to display on wedding themes"})]}),(0,t.jsxs)("form",{onSubmit:el,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"studio_name",children:"Studio Name *"}),(0,t.jsx)(o.I,{id:"studio_name",value:L.name,onChange:e=>Q({...L,name:e.target.value}),placeholder:"e.g., DreamWeddings Studio",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"studio_photo",children:"Studio Image"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[V&&(0,t.jsx)("div",{className:"relative w-20 h-20 rounded-lg overflow-hidden border-2 border-gray-200",children:(0,t.jsx)("img",{src:V,alt:"Studio preview",className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(c._,{htmlFor:"studio_photo_upload",className:"cursor-pointer inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),V?"Change Image":"Upload Image"]}),(0,t.jsx)("input",{id:"studio_photo_upload",type:"file",accept:"image/*",onChange:e=>{let s=e.target.files[0];if(!s)return;if(!s.type.startsWith("image/")){F.toast.error("Please select an image file");return}if(s.size>5242880){F.toast.error("Image must be less than 5MB");return}K(s);let a=new FileReader;a.onloadend=()=>{H(a.result)},a.readAsDataURL(s)},className:"hidden"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This image will be displayed in wedding layouts"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"studio_website",children:"Website URL"}),(0,t.jsx)(o.I,{id:"studio_website",value:L.website,onChange:e=>Q({...L,website:e.target.value}),placeholder:"https://yourwebsite.com",type:"url"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"studio_email",children:"Studio Email"}),(0,t.jsx)(o.I,{id:"studio_email",value:L.email,onChange:e=>Q({...L,email:e.target.value}),placeholder:"studio@example.com",type:"email"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"studio_phone",children:"Studio Phone"}),(0,t.jsx)(o.I,{id:"studio_phone",value:L.phone,onChange:e=>Q({...L,phone:e.target.value}),placeholder:"+1 (555) 000-0000"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"studio_address",children:"Studio Address"}),(0,t.jsx)(o.I,{id:"studio_address",value:L.address,onChange:e=>Q({...L,address:e.target.value}),placeholder:"123 Main Street, City, State"})]}),(0,t.jsxs)(x.cN,{children:[(0,t.jsx)(d.z,{type:"button",variant:"outline",onClick:()=>G(!1),children:"Cancel"}),(0,t.jsx)(d.z,{type:"submit",disabled:U,className:"bg-gradient-to-r from-rose-500 to-purple-600 text-white",children:U?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):T?"Update Studio":"Create Studio"})]})]})]})})]})}},95640:function(e,s,a){"use strict";a.d(s,{F$:function(){return d},Q5:function(){return o},qE:function(){return n}});var t=a(57437),l=a(2265),r=a(93269),i=a(77700);let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.fC,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...l})});n.displayName=r.fC.displayName;let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.Ee,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",a),...l})});d.displayName=r.Ee.displayName;let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.NY,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...l})});o.displayName=r.NY.displayName},92404:function(e,s,a){"use strict";a.d(s,{I:function(){return i}});var t=a(57437),l=a(2265),r=a(77700);let i=l.forwardRef((e,s)=>{let{className:a,type:l,...i}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});i.displayName="Input"},10464:function(e,s,a){"use strict";a.d(s,{_:function(){return o}});var t=a(57437),l=a(2265),r=a(38837),i=a(13027),n=a(77700);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.f,{ref:s,className:(0,n.cn)(d(),a),...l})});o.displayName=r.f.displayName},17953:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(57437),l=a(2265),r=a(70325),i=a(77700);let n=l.forwardRef((e,s)=>{let{className:a,orientation:l="horizontal",decorative:n=!0,...d}=e;return(0,t.jsx)(r.f,{ref:s,decorative:n,orientation:l,className:(0,i.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...d})});n.displayName=r.f.displayName}},function(e){e.O(0,[9767,4868,7776,7515,2889,7999,3951,6046,2971,7023,1744],function(){return e(e.s=66835)}),_N_E=e.O()}]);