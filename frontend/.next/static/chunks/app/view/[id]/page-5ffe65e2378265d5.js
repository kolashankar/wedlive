(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3950,6657],{79204:function(e,t,r){Promise.resolve().then(r.bind(r,37488))},37488:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return q}});var l=r(57437),a=r(2265),i=r(16463),s=r(56360),o=r(10273),n=r(79004),d=r(65236),c=r(3274),u=r(74453),m=r(95137),h=r(64042),x=r(71510),v=r(68954),p=r(98094),g=r(18604),b=r(37164),f=r(11240),j=r(80233),w=r(27776),y=r(6657),_=r(87138),N=r(74414),k=r(67783),R=r(19178);r(208);var T=r(52064),E=r(71229),S=r(77700);function P(e){let{src:t,alt:r="Photo",borderUrl:a,className:i,imgClassName:s,aspectRatio:o="aspect-[3/4]",enableZoom:n=!0}=e;return(0,l.jsxs)("div",{className:(0,S.cn)("relative overflow-hidden group",o,i),children:[(0,l.jsx)("img",{src:t||"/placeholder.jpg",alt:r,className:(0,S.cn)("w-full h-full object-cover transition-transform duration-700 w-full",n&&"group-hover:scale-110",s)}),a&&(0,l.jsx)("div",{className:"absolute inset-0 z-20 pointer-events-none",children:(0,l.jsx)("img",{src:a,alt:"Border",className:"w-full h-full object-fill"})})]})}var I=r(76780),C=r(38358);function z(e){var t;let{videoTemplate:r,className:i=""}=e,[s,o]=(0,a.useState)(!1),[n,d]=(0,a.useState)(0),[u,m]=(0,a.useState)(0),[h,x]=(0,a.useState)({width:0,height:0}),[v,g]=(0,a.useState)(null),[b,f]=(0,a.useState)({width:0,height:0}),[j,w]=(0,a.useState)({width:0,height:0,offsetX:0,offsetY:0}),[y,_]=(0,a.useState)(!1),[N,k]=(0,a.useState)(null),[R,T]=(0,a.useState)(!0),E=(0,a.useRef)(null),S=(0,a.useRef)(null),P=(0,a.useRef)(null);if(console.log("[VideoTemplatePlayer] Rendering with:",{hasVideoTemplate:!!r,video_url:null==r?void 0:r.video_url,overlaysCount:(null==r?void 0:null===(t=r.text_overlays)||void 0===t?void 0:t.length)||0,referenceResolution:null==r?void 0:r.reference_resolution}),!r||!r.video_url)return console.log("[VideoTemplatePlayer] No video template or URL - rendering null"),null;let z=r.text_overlays||[],L=useMemo(()=>{var e,t,l,a,i;if(r.resolution){let[e,t]=r.resolution.split("x").map(Number);if(e&&t)return{width:e,height:t}}return(null===(e=r.reference_resolution)||void 0===e?void 0:e.width)?r.reference_resolution:(null===(l=r.video_data)||void 0===l?void 0:null===(t=l.reference_resolution)||void 0===t?void 0:t.width)?r.video_data.reference_resolution:r.width&&r.height?{width:r.width,height:r.height}:(null===(a=r.video_data)||void 0===a?void 0:a.width)&&(null===(i=r.video_data)||void 0===i?void 0:i.height)?{width:r.video_data.width,height:r.video_data.height}:h.width>0&&h.height>0?{width:h.width,height:h.height}:{width:1920,height:1080}},[r,h]),U=L.width/L.height,A=(0,a.useCallback)(()=>{if(!b.width||!b.height)return{width:0,height:0,offsetX:0,offsetY:0};let e=h.width||L.width,t=h.height||L.height,r=b.width/b.height,l=e/t,a,i,s=0,o=0;return l>r?(a=b.width,i=b.width/l,o=(b.height-i)/2):(i=b.height,a=b.height*l,s=(b.width-a)/2),{width:a,height:i,offsetX:s,offsetY:o}},[b,h,L]),Z=(0,a.useCallback)(()=>{let e=E.current;!e||e.paused||e.ended||(d(e.currentTime),P.current=requestAnimationFrame(Z))},[]);(0,a.useEffect)(()=>{let e=E.current;if(!e)return;let t=()=>{console.log("[VideoTemplatePlayer] Video load started"),T(!0),k(null)},r=()=>{console.log("[VideoTemplatePlayer] Video data loaded"),T(!1)},l=()=>{let t=e.videoWidth,r=e.videoHeight;if(x({width:t,height:r}),m(e.duration),_(!0),T(!1),t&&r){let l=t/r;g(l),console.log("[VideoTemplatePlayer] Video metadata loaded:",{width:t,height:r,aspectRatio:l.toFixed(3),duration:e.duration})}},a=()=>{console.log("[VideoTemplatePlayer] Video can play"),_(!0),T(!1)},i=()=>{o(!0),P.current=requestAnimationFrame(Z)},s=()=>{o(!1),P.current&&(cancelAnimationFrame(P.current),P.current=null),d(e.currentTime)},n=()=>{(e.paused||e.ended)&&d(e.currentTime)},c=()=>{o(!1),d(0),e.currentTime=0},u=t=>{console.error("[VideoTemplatePlayer] Video error:",t),console.error("[VideoTemplatePlayer] Error details:",{error:e.error,networkState:e.networkState,readyState:e.readyState,src:e.src}),k("Failed to load video (networkState: ".concat(e.networkState,", readyState: ").concat(e.readyState,")")),T(!1)};return e.addEventListener("loadstart",t),e.addEventListener("loadeddata",r),e.addEventListener("loadedmetadata",l),e.addEventListener("canplay",a),e.addEventListener("play",i),e.addEventListener("pause",s),e.addEventListener("timeupdate",n),e.addEventListener("ended",c),e.addEventListener("error",u),e.readyState>=1&&e.videoWidth>0&&l(),()=>{P.current&&cancelAnimationFrame(P.current),e.removeEventListener("loadstart",t),e.removeEventListener("loadeddata",r),e.removeEventListener("loadedmetadata",l),e.removeEventListener("canplay",a),e.removeEventListener("play",i),e.removeEventListener("pause",s),e.removeEventListener("timeupdate",n),e.removeEventListener("ended",c),e.removeEventListener("error",u)}},[Z,null==r?void 0:r.video_url]),(0,a.useEffect)(()=>{let e=()=>{if(S.current){let e=S.current.getBoundingClientRect();f({width:e.width,height:e.height}),console.log("[VideoTemplatePlayer] Container size updated:",{width:e.width,height:e.height})}};e();let t=new ResizeObserver(e);return S.current&&t.observe(S.current),window.addEventListener("resize",e),()=>{t.disconnect(),window.removeEventListener("resize",e)}},[]),(0,a.useEffect)(()=>{let e=A();w(e),console.log("[VideoTemplatePlayer] Rendered video size calculated:",e)},[b,h,A]);let M=()=>{let e=E.current;e&&(s?e.pause():e.play().catch(e=>{console.error("[VideoTemplatePlayer] Play failed:",e)}))},Y=[...z.filter(e=>{var t,r,l,a;let i=null!==(l=null===(t=e.timing)||void 0===t?void 0:t.start_time)&&void 0!==l?l:0,s=null!==(a=null===(r=e.timing)||void 0===r?void 0:r.end_time)&&void 0!==a?a:u,o=n>=i-.2&&n<=s+.2,d=!1!==e.is_active,c=o&&d;if(!c&&e.id){let t=d?n<i-.2?"Before start time":"After end time":"Inactive";console.log("[VideoTemplatePlayer] Overlay filtered out:",{id:e.id,label:e.label||e.endpoint_key,text:e.text_value||e.placeholder_text,currentTime:n.toFixed(3),startTime:i.toFixed(3),endTime:s.toFixed(3),reason:t})}return c})].sort((e,t)=>(e.layer_index||0)-(t.layer_index||0));console.log("[VideoTemplatePlayer] Overlay state:",{totalOverlays:z.length,visibleOverlays:Y.length,currentTime:n.toFixed(3),duration:u.toFixed(3),videoLoaded:y,renderedVideoSize:j,containerSize:b,effectiveContainerSize:O,overlayTimings:z.map(e=>{var t,r,l,a;return{id:e.id,label:e.label||e.endpoint_key,start:null===(r=e.timing)||void 0===r?void 0:null===(t=r.start_time)||void 0===t?void 0:t.toFixed(3),end:null===(a=e.timing)||void 0===a?void 0:null===(l=a.end_time)||void 0===l?void 0:l.toFixed(3),active:!1!==e.is_active}}),visibleOverlayIds:Y.map(e=>e.id)});let V=e=>{var t,r,l,a;let i=(null===(t=e.timing)||void 0===t?void 0:t.start_time)||0,s=(null===(r=e.timing)||void 0===r?void 0:r.end_time)||u,o=(null===(l=e.animation)||void 0===l?void 0:l.entrance)||{type:"fade-in",duration:1,easing:"ease-in-out"},d=(null===(a=e.animation)||void 0===a?void 0:a.exit)||{type:"fade-out",duration:1,easing:"ease-in-out"},c=1,m="";if(n<i+o.duration){let e=Math.max(0,Math.min(1,(n-i)/o.duration));switch(o.type){case"fade-in":default:c=e;break;case"slide-up":c=e,m="translateY(".concat((1-e)*10,"%)");break;case"slide-down":c=e,m="translateY(".concat(-(10*(1-e)),"%)");break;case"slide-left":c=e,m="translateX(".concat((1-e)*10,"%)");break;case"slide-right":c=e,m="translateX(".concat(-(10*(1-e)),"%)");break;case"scale-up":case"zoom-in":c=e,m="scale(".concat(.5+.5*e,")");break;case"bounce-in":c=e,m="translateY(".concat(-(Math.abs(Math.sin(e*Math.PI*2))*(1-e)*2),"%)");break;case"fade-slide-up":c=e,m="translateY(".concat((1-e)*8,"%)")}}else if(n>s-d.duration){let e=1-Math.max(0,Math.min(1,(n-(s-d.duration))/d.duration));switch(d.type){case"fade-out":default:c=e;break;case"slide-up":c=e,m="translateY(".concat(-(10*(1-e)),"%)");break;case"slide-down":c=e,m="translateY(".concat((1-e)*10,"%)")}}return{opacity:c,transform:m}},O=(()=>{if(j.width>0)return j;if(b.width>0&&b.height>0){let e=b.width/b.height,t,r,l=0,a=0;return U>e?(t=b.width,r=b.width/U,a=(b.height-r)/2):(r=b.height,t=b.height*U,l=(b.width-t)/2),{width:t,height:r,offsetX:l,offsetY:a}}return L.width>0&&L.height>0?{width:800,height:800/(L.width/L.height),offsetX:0,offsetY:0}:{width:0,height:0,offsetX:0,offsetY:0}})();return(0,l.jsx)("div",{ref:S,className:"relative w-full ".concat(i),style:{aspectRatio:v||U,maxWidth:"100%",margin:"0 auto"},children:(0,l.jsxs)("div",{className:"relative w-full h-full overflow-hidden",style:{backgroundColor:"#000",position:"relative"},children:[R&&!N&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-30",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,l.jsx)(c.Z,{className:"w-12 h-12 text-white animate-spin"}),(0,l.jsx)("span",{className:"text-white text-sm",children:"Loading video..."})]})}),N&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black z-30",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-2 text-white text-center p-4",children:[(0,l.jsx)(I.Z,{className:"w-12 h-12 text-red-500"}),(0,l.jsx)("span",{className:"text-sm",children:N}),(0,l.jsx)("button",{onClick:()=>{k(null),T(!0),E.current&&E.current.load()},className:"mt-2 px-4 py-2 bg-white/20 rounded hover:bg-white/30 transition-colors",children:"Retry"})]})}),(0,l.jsx)("video",{ref:E,src:r.video_url,poster:r.thumbnail_url,className:"w-full h-full",style:{objectFit:"contain",backgroundColor:"transparent",display:"block"},loop:!0,playsInline:!0,preload:"auto"}),O.width>0&&(0,l.jsx)("div",{className:"absolute pointer-events-none",style:{left:"".concat(O.offsetX,"px"),top:"".concat(O.offsetY,"px"),width:"".concat(O.width,"px"),height:"".concat(O.height,"px"),zIndex:50},children:Y.map((e,t)=>{let a=V(e);return(0,l.jsx)(C.Z,{overlay:e,currentTime:n,duration:u,containerSize:O,referenceResolution:L,animationState:a,templateDuration:r.duration},e.id||t)})}),!s&&!N&&!R&&(0,l.jsx)("button",{onClick:M,className:"absolute inset-0 flex items-center justify-center bg-black/20 hover:bg-black/30 transition-all group z-20",children:(0,l.jsx)("div",{className:"w-20 h-20 rounded-full bg-white/90 flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg",children:(0,l.jsx)(p.Z,{className:"w-10 h-10 text-gray-800 ml-1",fill:"currentColor"})})}),s&&(0,l.jsx)("button",{onClick:M,className:"absolute inset-0 z-20",style:{backgroundColor:"transparent"},"aria-label":"Pause video"})]})})}function L(e){var t,r,a;let{wedding:i,themeSettings:s,media:o,videoTemplate:n}=e;null==s||s.primary_color;let d=(null==s?void 0:s.secondary_color)||"#8b0000",c=(null==s?void 0:null===(t=s.studio_details)||void 0===t?void 0:t.default_image_url)||(null==i?void 0:null===(r=i.branding)||void 0===r?void 0:r.default_image_url);return console.log("ClassicSplitHero - videoTemplate:",n),(0,l.jsxs)("div",{className:"w-full bg-[#fffcf5] text-gray-800 overflow-hidden relative",children:[(null==s?void 0:s.layout_page_background_url)&&(0,l.jsx)("div",{className:"absolute inset-0 z-0 opacity-20",style:{backgroundImage:"url('".concat(s.layout_page_background_url,"')"),backgroundSize:"cover"}}),n&&(0,l.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,l.jsx)(z,{videoTemplate:n})}),(0,l.jsxs)("div",{className:"relative min-h-screen flex flex-col md:flex-row items-stretch",children:[(0,l.jsxs)(E.E.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:1},className:"w-full md:w-1/2 relative h-[50vh] md:h-screen",children:[(0,l.jsx)(P,{src:i.bride_photo||i.cover_image,borderUrl:(null==s?void 0:s.bride_border_url)||(null==s?void 0:s.bride_groom_border),alt:"Bride",className:"h-full w-full",aspectRatio:"h-full",enableZoom:!0}),(0,l.jsx)("div",{className:"absolute bottom-10 left-10 z-20 text-white",children:(0,l.jsx)("h2",{className:"text-4xl font-serif font-bold drop-shadow-lg",children:i.bride_name})})]}),(0,l.jsxs)(E.E.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:1,delay:.2},className:"w-full md:w-1/2 relative h-[50vh] md:h-screen",children:[(0,l.jsx)(P,{src:i.groom_photo||i.cover_image,borderUrl:(null==s?void 0:s.groom_border_url)||(null==s?void 0:s.bride_groom_border),alt:"Groom",className:"h-full w-full",aspectRatio:"h-full",enableZoom:!0}),(0,l.jsx)("div",{className:"absolute bottom-10 right-10 z-20 text-white text-right",children:(0,l.jsx)("h2",{className:"text-4xl font-serif font-bold drop-shadow-lg",children:i.groom_name})})]})]}),(0,l.jsx)("div",{className:"container mx-auto px-4 py-20",children:(0,l.jsxs)(E.E.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"max-w-6xl mx-auto",children:[(0,l.jsx)("h3",{className:"text-3xl font-serif text-center mb-12",style:{color:d},children:"Precious Moments"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:null==o?void 0:null===(a=o.recent_items)||void 0===a?void 0:a.slice(0,6).map((e,t)=>(0,l.jsx)(E.E.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.1*t},children:(0,l.jsx)(P,{src:e.thumbnail_url||e.url,borderUrl:null==s?void 0:s.precious_moments_border_url,alt:e.caption||"Gallery Photo",className:"shadow-xl rounded-lg bg-white"})},e.id))})]})}),c&&(0,l.jsxs)("div",{className:"py-12 bg-white/50 text-center",children:[(0,l.jsx)("p",{className:"text-sm uppercase tracking-widest text-gray-500 mb-4",children:"Captured By"}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("div",{className:"w-48 md:w-64 relative rounded-lg overflow-hidden",children:(0,l.jsx)(P,{src:c,borderUrl:null==s?void 0:s.studio_border_url,alt:"Studio",aspectRatio:"aspect-video",className:"bg-transparent shadow-none object-cover"})})})]})]})}function U(e){var t,r,a;let{wedding:i,themeSettings:s,media:o,videoTemplate:n}=e;null==s||s.primary_color;let d=(null==s?void 0:s.secondary_color)||"#1a1a1a",c=(null==s?void 0:null===(t=s.studio_details)||void 0===t?void 0:t.default_image_url)||(null==i?void 0:null===(r=i.branding)||void 0===r?void 0:r.default_image_url);return(0,l.jsxs)("div",{className:"min-h-screen bg-white relative overflow-x-hidden",children:[(null==s?void 0:s.layout_page_background_url)&&(0,l.jsx)("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"url('".concat(s.layout_page_background_url,"')"),backgroundSize:"cover"}}),n&&(0,l.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,l.jsx)(z,{videoTemplate:n})}),(0,l.jsx)("div",{className:"container mx-auto px-4 py-12 md:py-20 relative z-10",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-center",children:[(0,l.jsx)("div",{className:"lg:col-span-6 order-1",children:(0,l.jsx)(E.E.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:(0,l.jsx)(P,{src:i.bride_photo||i.cover_image,borderUrl:null==s?void 0:s.bride_border_url,alt:"Bride",className:"w-full shadow-2xl rounded-lg",aspectRatio:"aspect-[4/5]"})})}),(0,l.jsx)("div",{className:"lg:col-span-6 order-2",children:(0,l.jsx)(E.E.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:(0,l.jsx)(P,{src:i.groom_photo||i.cover_image,borderUrl:null==s?void 0:s.groom_border_url,alt:"Groom",className:"w-full shadow-2xl rounded-lg",aspectRatio:"aspect-[4/5]"})})})]})}),(0,l.jsx)("div",{className:"bg-gray-50 py-20",children:(0,l.jsxs)("div",{className:"container mx-auto px-4",children:[(0,l.jsx)("h3",{className:"text-3xl font-serif text-center mb-12",style:{color:d},children:"Captured Moments"}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8",children:null==o?void 0:null===(a=o.recent_items)||void 0===a?void 0:a.slice(0,4).map((e,t)=>(0,l.jsx)(E.E.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1*t},children:(0,l.jsx)(P,{src:e.thumbnail_url||e.url,borderUrl:null==s?void 0:s.precious_moments_border_url,alt:"Gallery",className:"shadow-lg bg-white p-2"})},e.id))})]})}),c&&(0,l.jsxs)("div",{className:"py-8 text-center border-t",children:[(0,l.jsx)("div",{className:"w-48 mx-auto mb-2 rounded-lg overflow-hidden",children:(0,l.jsx)(P,{src:c,borderUrl:null==s?void 0:s.studio_border_url,className:"bg-transparent object-cover"})}),(0,l.jsx)("p",{className:"text-xs text-gray-400 uppercase",children:"Photography Partner"})]})]})}var A=r(88319),Z=r(44763),M=r(48571),Y=r(67159);function V(e){var t;let{wedding:r,themeSettings:i,media:s,videoTemplate:o}=e,n=(0,a.useRef)(null),{scrollYProgress:d}=(0,A.v)({target:n,offset:["start start","end end"]}),c=(0,Z.H)(d,[0,1],["0%","-60%"]),u=(null==i?void 0:i.primary_color)||"#d4af37",m=null==i?void 0:i.layout_page_background_url,h=e=>{if(!e)return"";try{let t=new Date(e);return(0,M.J)(t)?(0,Y.WU)(t,"MMMM d, yyyy"):""}catch(e){return""}},x=[{type:"intro",title:"Our Story",date:"The Beginning",image:r.bride_photo||r.cover_image,border:(null==i?void 0:i.bride_border_url)||(null==i?void 0:i.bride_groom_border)},{type:"couple",title:"The Couple",date:"Together Forever",image:r.cover_image,border:null==i?void 0:i.couple_border_url},{type:"groom",title:"The Groom",date:r.groom_name,image:r.groom_photo||r.cover_image,border:(null==i?void 0:i.groom_border_url)||(null==i?void 0:i.bride_groom_border)},...(null==s?void 0:null===(t=s.recent_items)||void 0===t?void 0:t.slice(0,5).map(e=>({type:"moment",title:"Moments",date:h(e.created_at),image:e.url,border:null==i?void 0:i.precious_moments_border_url})))||[]];return(0,l.jsxs)("div",{className:"bg-[#fffcf5] text-gray-800 min-h-[300vh]",ref:n,children:[m&&(0,l.jsx)("div",{className:"fixed inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"url('".concat(m,"')"),backgroundSize:"cover"}}),o&&(0,l.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,l.jsx)(z,{videoTemplate:o})}),(0,l.jsx)("div",{className:"sticky top-0 h-screen overflow-hidden flex items-center",children:(0,l.jsxs)(E.E.div,{style:{x:c},className:"flex gap-12 md:gap-32 px-12 md:px-32 items-center",children:[(0,l.jsxs)("div",{className:"min-w-[300px] md:min-w-[400px] flex flex-col justify-center items-center p-8 bg-white/80 backdrop-blur-sm rounded-xl shadow-xl border-t-4",style:{borderColor:u},children:[(0,l.jsx)("h2",{className:"text-4xl md:text-6xl font-serif mb-6 text-center",children:"Journey"}),(0,l.jsx)("div",{className:"w-20 h-1 mb-6",style:{backgroundColor:u}}),(0,l.jsx)("p",{className:"text-center italic text-gray-600",children:"Swipe or scroll to walk through our timeline."}),(0,l.jsx)("div",{className:"mt-8 text-4xl animate-bounce",children:"→"})]}),x.map((e,t)=>(0,l.jsxs)("div",{className:"min-w-[350px] md:min-w-[500px] relative group",children:[(0,l.jsx)("div",{className:"absolute top-1/2 -left-32 w-32 h-1 bg-gray-300 hidden md:block"}),(0,l.jsxs)("div",{className:"relative transform transition-transform duration-500 hover:-translate-y-4",children:[(0,l.jsx)(P,{src:e.image,borderUrl:e.border,alt:e.title,className:"w-full shadow-2xl bg-white",aspectRatio:"aspect-[3/4]"}),(0,l.jsxs)("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 bg-white px-6 py-3 rounded-full shadow-lg whitespace-nowrap z-30 border",style:{borderColor:u},children:[(0,l.jsx)("p",{className:"text-sm font-bold uppercase tracking-widest text-gray-500",children:e.date}),(0,l.jsx)("h3",{className:"text-xl font-serif font-bold",style:{color:u},children:e.title})]})]})]},t)),(0,l.jsx)("div",{className:"min-w-[200px]"})]})})]})}var O=r(62483);function B(e){var t,r;let{wedding:a,themeSettings:i,media:s,videoTemplate:o}=e,n=(null==i?void 0:i.primary_color)||"#e85d75",d=null==i?void 0:i.layout_page_background_url;return(0,l.jsxs)("div",{className:"min-h-screen bg-[#f8f5f2] p-4 md:p-8 overflow-hidden font-sans relative",children:[d&&(0,l.jsx)("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"url('".concat(d,"')"),backgroundSize:"cover"}}),o&&(0,l.jsx)("div",{className:"container mx-auto px-4 py-8 relative z-10",children:(0,l.jsx)(z,{videoTemplate:o})}),(0,l.jsxs)("header",{className:"relative z-10 flex flex-col md:flex-row justify-between items-end border-b-4 border-black pb-6 mb-12 max-w-7xl mx-auto",children:[(0,l.jsx)("div",{children:(0,l.jsxs)("h1",{className:"text-6xl md:text-9xl font-black tracking-tighter leading-none uppercase",children:["The",(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{color:n},children:"Wedding"})]})}),(0,l.jsxs)("div",{className:"text-right mt-4 md:mt-0",children:[(0,l.jsx)("p",{className:"text-xl font-bold uppercase tracking-widest bg-black text-white px-2 inline-block",children:"Vol. 01"}),(0,l.jsx)("p",{className:"text-sm font-medium mt-1",children:"Special Edition"})]})]}),(0,l.jsxs)("div",{className:"relative z-10 grid grid-cols-1 md:grid-cols-12 gap-6 max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"md:col-span-8 relative group",children:[(0,l.jsx)("div",{className:"absolute -top-6 -right-6 z-20",children:(0,l.jsx)(O.Z,{className:"w-16 h-16",style:{color:n}})}),(0,l.jsx)(E.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative border-4 border-black shadow-[12px_12px_0px_0px_rgba(0,0,0,1)] bg-white p-2",children:(0,l.jsx)(P,{src:a.cover_image,borderUrl:null==i?void 0:i.couple_border_url,alt:"Couple",className:"w-full h-[500px] md:h-[600px]",aspectRatio:"none"})})]}),(0,l.jsx)("div",{className:"md:col-span-4 flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"border-2 border-black bg-white p-1 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]",children:[(0,l.jsx)(P,{src:a.bride_photo||a.cover_image,borderUrl:(null==i?void 0:i.bride_border_url)||(null==i?void 0:i.bride_groom_border),aspectRatio:"aspect-square"}),(0,l.jsx)("p",{className:"text-center font-bold text-xs mt-1 uppercase",children:"The Bride"})]}),(0,l.jsxs)("div",{className:"border-2 border-black bg-white p-1 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]",children:[(0,l.jsx)(P,{src:a.groom_photo||a.cover_image,borderUrl:(null==i?void 0:i.groom_border_url)||(null==i?void 0:i.bride_groom_border),aspectRatio:"aspect-square"}),(0,l.jsx)("p",{className:"text-center font-bold text-xs mt-1 uppercase",children:"The Groom"})]})]})}),null==s?void 0:null===(t=s.recent_items)||void 0===t?void 0:t.slice(0,4).map((e,t)=>(0,l.jsx)("div",{className:"md:col-span-3",children:(0,l.jsxs)(E.E.div,{whileHover:{y:-5},className:"bg-white p-2 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]",children:[(0,l.jsx)(P,{src:e.thumbnail_url||e.url,borderUrl:null==i?void 0:i.precious_moments_border_url,aspectRatio:"aspect-square",className:"mb-2 border border-black"}),(0,l.jsx)("p",{className:"font-mono text-[10px] uppercase text-center truncate",children:e.caption||"Moment ".concat(t+1)})]})},t)),(null==i?void 0:null===(r=i.studio_details)||void 0===r?void 0:r.default_image_url)&&(0,l.jsx)("div",{className:"md:col-span-12 mt-8 flex justify-end",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-black text-white px-4 py-2 rounded-full",children:[(0,l.jsx)("span",{className:"text-xs font-bold uppercase",children:"Photos by"}),(0,l.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-white",children:(0,l.jsx)(P,{src:i.studio_details.default_image_url,borderUrl:null==i?void 0:i.studio_border_url,className:"w-full h-full object-cover",aspectRatio:"none"})})]})})]})]})}function F(e){var t;let{wedding:r,themeSettings:a,media:i,videoTemplate:s}=e;null==a||a.secondary_color;let o=null==a?void 0:a.layout_page_background_url;return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center py-12 md:py-24 px-4 relative",children:[o&&(0,l.jsx)("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"url('".concat(o,"')"),backgroundSize:"cover"}}),s&&(0,l.jsx)("div",{className:"w-full max-w-4xl mb-8 relative z-10",children:(0,l.jsx)(z,{videoTemplate:s})}),(0,l.jsxs)(E.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"w-full max-w-4xl bg-white shadow-2xl overflow-hidden rounded-sm relative z-10",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[(0,l.jsx)("div",{className:"h-[500px] md:h-auto bg-gray-100 relative",children:(0,l.jsx)(P,{src:r.bride_photo||r.cover_image,borderUrl:null==a?void 0:a.bride_border_url,alt:"Bride",className:"w-full h-full",aspectRatio:"h-full",imgClassName:"object-cover"})}),(0,l.jsx)("div",{className:"h-[500px] md:h-auto bg-gray-100 relative",children:(0,l.jsx)(P,{src:r.groom_photo||r.cover_image,borderUrl:null==a?void 0:a.groom_border_url,alt:"Groom",className:"w-full h-full",aspectRatio:"h-full",imgClassName:"object-cover"})})]}),(null==i?void 0:null===(t=i.recent_items)||void 0===t?void 0:t.length)>0&&(0,l.jsx)("div",{className:"grid grid-cols-3 border-t border-gray-100",children:i.recent_items.slice(0,3).map((e,t)=>(0,l.jsx)("div",{className:"aspect-square relative group overflow-hidden bg-gray-50",children:(0,l.jsx)(P,{src:e.thumbnail_url||e.url,borderUrl:null==a?void 0:a.precious_moments_border_url,className:"w-full h-full",aspectRatio:"none"})},t))})]})]})}function D(e){var t;let{wedding:r,themeSettings:a,media:i,videoTemplate:s}=e,o=(null==a?void 0:a.primary_color)||"#e91e63",n=(null==a?void 0:a.layout_page_background_url)||r.cover_image||"/placeholder.jpg";return(0,l.jsxs)("div",{className:"relative w-full min-h-screen overflow-hidden bg-black",children:[(0,l.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,l.jsx)("img",{src:n,alt:"Background",className:"w-full h-full object-cover opacity-60 blur-sm scale-110"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"})]}),s&&(0,l.jsx)("div",{className:"relative z-10 container mx-auto px-4 py-8",children:(0,l.jsx)(z,{videoTemplate:s})}),(0,l.jsxs)("div",{className:"relative z-10 container mx-auto px-4 h-screen flex flex-col justify-center items-center text-center text-white",children:[(0,l.jsxs)("div",{className:"absolute top-1/4 w-full max-w-4xl flex justify-between px-4 pointer-events-none opacity-50 md:opacity-100",children:[(0,l.jsx)(E.E.div,{animate:{y:[0,-20,0]},transition:{repeat:1/0,duration:6},children:(0,l.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-full overflow-hidden border-2 border-white/30",children:(0,l.jsx)(P,{src:r.bride_photo||r.cover_image,borderUrl:null==a?void 0:a.bride_border_url,className:"w-full h-full",aspectRatio:"none"})})}),(0,l.jsx)(E.E.div,{animate:{y:[0,-20,0]},transition:{repeat:1/0,duration:6,delay:1},children:(0,l.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-full overflow-hidden border-2 border-white/30",children:(0,l.jsx)(P,{src:r.groom_photo||r.cover_image,borderUrl:null==a?void 0:a.groom_border_url,className:"w-full h-full",aspectRatio:"none"})})})]}),(0,l.jsx)(E.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1.2},children:(0,l.jsx)("div",{className:"mb-6 flex justify-center",children:(0,l.jsx)(h.Z,{className:"w-12 h-12 animate-pulse",style:{fill:o,stroke:"none"}})})}),(0,l.jsx)("div",{className:"absolute bottom-10 w-full flex justify-center gap-4 overflow-x-auto pb-4 no-scrollbar px-4",children:null==i?void 0:null===(t=i.recent_items)||void 0===t?void 0:t.slice(0,5).map((e,t)=>(0,l.jsx)(E.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:1+.2*t},className:"w-24 h-32 md:w-32 md:h-40 flex-shrink-0 rounded-lg overflow-hidden border border-white/20 shadow-lg relative group cursor-pointer bg-black/50",children:(0,l.jsx)(P,{src:e.thumbnail_url||e.url,borderUrl:null==a?void 0:a.precious_moments_border_url,className:"w-full h-full opacity-80 group-hover:opacity-100 transition-opacity",aspectRatio:"none"})},t))})]})]})}function W(e){var t;let{wedding:r,themeSettings:a,media:i,videoTemplate:s}=e;null==a||a.primary_color;let o=null==a?void 0:a.layout_page_background_url;return(0,l.jsxs)("div",{className:"min-h-screen bg-white p-4 md:p-12 relative",children:[o&&(0,l.jsx)("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"url('".concat(o,"')"),backgroundSize:"cover"}}),s&&(0,l.jsx)("div",{className:"max-w-7xl mx-auto mb-12 relative z-10",children:(0,l.jsx)(z,{videoTemplate:s})}),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,l.jsx)("div",{className:"mb-12 md:mb-24 border-b-2 border-black pb-8",children:(0,l.jsx)("h1",{className:"text-6xl md:text-8xl font-serif leading-none",children:"Editorial"})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 mb-24",children:[(0,l.jsxs)("div",{className:"md:col-span-7",children:[(0,l.jsx)(P,{src:r.cover_image,borderUrl:null==a?void 0:a.couple_border_url,alt:"Couple",className:"w-full h-[600px] shadow-none",aspectRatio:"none"}),(0,l.jsx)("p",{className:"mt-4 text-sm font-mono uppercase tracking-widest text-gray-500 text-right",children:"Figure 1. The Happy Couple"})]}),(0,l.jsxs)("div",{className:"md:col-span-5 flex flex-col gap-12 pt-0 md:pt-24",children:[(0,l.jsxs)("div",{className:"p-8 bg-gray-50",children:[(0,l.jsx)("h3",{className:"text-3xl font-serif italic mb-4",children:'"A story of love."'}),(0,l.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Join us as we celebrate the beginning of our new chapter together. We are thrilled to share this day with you."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)(P,{src:r.bride_photo||r.cover_image,borderUrl:(null==a?void 0:a.bride_border_url)||(null==a?void 0:a.bride_groom_border),aspectRatio:"aspect-[3/4]"})}),(0,l.jsx)("div",{className:"mt-8",children:(0,l.jsx)(P,{src:r.groom_photo||r.cover_image,borderUrl:(null==a?void 0:a.groom_border_url)||(null==a?void 0:a.bride_groom_border),aspectRatio:"aspect-[3/4]"})})]})]})]}),(0,l.jsxs)("div",{className:"border-t-2 border-black pt-12",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold uppercase tracking-widest mb-8",children:"Visual Diary"}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:null==i?void 0:null===(t=i.recent_items)||void 0===t?void 0:t.slice(0,4).map((e,t)=>(0,l.jsx)("div",{className:"group cursor-pointer",children:(0,l.jsx)(P,{src:e.thumbnail_url||e.url,borderUrl:null==a?void 0:a.precious_moments_border_url,aspectRatio:"aspect-[4/5]",className:"grayscale group-hover:grayscale-0 transition-all duration-500"})},t))})]})]})]})}function X(e){var t;let{wedding:r,themeSettings:a,media:i,videoTemplate:s}=e;null==a||a.primary_color;let o=null==a?void 0:a.layout_page_background_url;return(0,l.jsxs)("div",{className:"min-h-screen bg-white text-gray-800 font-light relative",children:[o&&(0,l.jsx)("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"url('".concat(o,"')"),backgroundSize:"cover"}}),s&&(0,l.jsx)("div",{className:"max-w-3xl mx-auto px-6 pt-12 relative z-10",children:(0,l.jsx)(z,{videoTemplate:s})}),(0,l.jsxs)("div",{className:"max-w-3xl mx-auto px-6 py-24 relative z-10 text-center",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center gap-8 mb-24",children:[(0,l.jsx)("span",{className:"h-24 w-[1px] bg-gray-300 block"}),(0,l.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-gray-400",children:"Union"})]}),(0,l.jsxs)("div",{className:"mb-24 grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,l.jsx)(P,{src:r.bride_photo||r.cover_image,borderUrl:null==a?void 0:a.bride_border_url,alt:"Bride",className:"w-full shadow-sm",aspectRatio:"aspect-[3/4]"}),(0,l.jsx)(P,{src:r.cover_image,borderUrl:null==a?void 0:a.couple_border_url,alt:"Couple",className:"w-full shadow-sm",aspectRatio:"aspect-[3/4]"}),(0,l.jsx)(P,{src:r.groom_photo||r.cover_image,borderUrl:null==a?void 0:a.groom_border_url,alt:"Groom",className:"w-full shadow-sm",aspectRatio:"aspect-[3/4]"})]}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-12",children:null==i?void 0:null===(t=i.recent_items)||void 0===t?void 0:t.slice(0,3).map((e,t)=>(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)(P,{src:e.thumbnail_url||e.url,borderUrl:null==a?void 0:a.precious_moments_border_url,aspectRatio:"aspect-[3/4]",className:"w-full grayscale hover:grayscale-0 transition-all duration-700"}),(0,l.jsxs)("span",{className:"text-[10px] uppercase tracking-widest text-gray-300",children:["0",t+1]})]},t))}),(0,l.jsx)("div",{className:"mt-24 flex justify-center",children:(0,l.jsx)("span",{className:"h-24 w-[1px] bg-gray-300 block"})})]})]})}function G(e){let{wedding:t,themeSettings:r,media:a,videoTemplate:i,layoutPhotos:s}=e,o=(null==r?void 0:r.layout_id)||"layout_1";console.log("LayoutRenderer - videoTemplate prop:",i),console.log("LayoutRenderer - layoutId:",o),console.log("LayoutRenderer - layoutPhotos prop:",s);let n={...a,recent_items:Array.isArray(null==a?void 0:a.recent_items)?a.recent_items:[]},d=s||{};return(0,l.jsx)("div",{className:"w-full min-h-screen",children:(()=>{switch(o){case"layout_1":default:return(0,l.jsx)(L,{wedding:t,themeSettings:r,media:n,videoTemplate:i,layoutPhotos:d});case"layout_2":return(0,l.jsx)(U,{wedding:t,themeSettings:r,media:n,videoTemplate:i,layoutPhotos:d});case"layout_3":return(0,l.jsx)(V,{wedding:t,themeSettings:r,media:n,videoTemplate:i,layoutPhotos:d});case"layout_4":return(0,l.jsx)(B,{wedding:t,themeSettings:r,media:n,videoTemplate:i,layoutPhotos:d});case"layout_5":return(0,l.jsx)(F,{wedding:t,themeSettings:r,media:n,videoTemplate:i,layoutPhotos:d});case"layout_6":return(0,l.jsx)(D,{wedding:t,themeSettings:r,media:n,videoTemplate:i,layoutPhotos:d});case"layout_7":return(0,l.jsx)(W,{wedding:t,themeSettings:r,media:n,videoTemplate:i,layoutPhotos:d});case"layout_8":return(0,l.jsx)(X,{wedding:t,themeSettings:r,media:n,videoTemplate:i,layoutPhotos:d})}})()})}function J(e){let{weddingId:t}=e;(0,i.useRouter)();let{viewerCount:r}=(0,k.s)(),[E,S]=(0,a.useState)(null),[P,I]=(0,a.useState)(!0),[C,z]=(0,a.useState)("live"),[L,U]=(0,a.useState)([]),[A,Z]=(0,a.useState)(null),M=(0,a.useCallback)(async()=>{try{let e=await y.default.get("/api/viewer/wedding/".concat(t,"/all"));console.log("API Response:",e.data),console.log("Video Template Data:",e.data.video_template),S(e.data);try{let e=await y.default.get("/api/albums/".concat(t));U(e.data)}catch(e){console.error("Failed to load albums",e)}e.data.live_stream.is_live?z("live"):e.data.recording.available?z("recording"):e.data.media.total_count>0&&z("media")}catch(e){console.error("Error loading wedding:",e),w.toast.error("Failed to load wedding data")}finally{I(!1)}},[t]);(0,a.useEffect)(()=>{t&&M()},[t,M]);let Y=e=>{navigator.clipboard.writeText(e),w.toast.success("Link copied to clipboard!")};if(P)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsx)(c.Z,{className:"w-12 h-12 animate-spin text-pink-500"})});if(!E)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-xl text-gray-600 mb-4",children:"Wedding not found"}),(0,l.jsx)(_.default,{href:"/join",children:(0,l.jsx)(s.z,{children:"Enter Wedding Code"})})]})});let{wedding:V,live_stream:O,media:B,recording:F,branding:D,access_restricted:W}=E,X=(null==D?void 0:D.primary_color)||"#FF6B6B";if(W)return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:(0,l.jsx)(o.Zb,{className:"max-w-md w-full",children:(0,l.jsxs)(o.aY,{className:"pt-6 text-center space-y-4",children:[(0,l.jsx)("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center mx-auto",children:(0,l.jsx)(u.Z,{className:"w-10 h-10 text-gray-400"})}),(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"Content Locked"}),(0,l.jsx)("p",{className:"text-gray-600",children:E.restriction_message}),(0,l.jsx)("div",{className:"pt-4",children:(0,l.jsx)(_.default,{href:"/join",children:(0,l.jsx)(s.z,{variant:"outline",children:"Try Another Wedding"})})})]})})});let J=async e=>{try{let t=await y.default.get("/api/albums/detail/".concat(e));Z(t.data)}catch(e){w.toast.error("Could not load album")}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50",children:[A&&(0,l.jsx)(T.Z,{album:A,onClose:()=>Z(null)}),(0,l.jsx)("header",{className:"border-b bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:(0,l.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(_.default,{href:"/join",children:(0,l.jsxs)(s.z,{variant:"ghost",size:"sm",children:[(0,l.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Back"]})}),(null==D?void 0:D.logo_url)?(0,l.jsx)("img",{src:D.logo_url,alt:"Logo",className:"h-8"}):(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(h.Z,{className:"w-6 h-6 text-pink-500 fill-pink-500"}),!(null==D?void 0:D.hide_wedlive_branding)&&(0,l.jsx)("span",{className:"text-xl font-bold",style:{color:X},children:"WedLive"})]})]}),(0,l.jsxs)(s.z,{onClick:()=>{let e=window.location.href;navigator.share?navigator.share({title:null==E?void 0:E.wedding.title,text:"Watch ".concat(null==E?void 0:E.wedding.bride_name," & ").concat(null==E?void 0:E.wedding.groom_name,"'s wedding!"),url:e}).catch(()=>{Y(e)}):Y(e)},variant:"outline",size:"sm",children:[(0,l.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Share"]})]})})}),(0,l.jsx)(G,{wedding:V,themeSettings:E.theme_settings,media:B,videoTemplate:E.video_template,layoutPhotos:E.layout_photos||{}}),(0,l.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,l.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,l.jsxs)(d.mQ,{value:C,onValueChange:z,className:"w-full",children:[(0,l.jsxs)(d.dr,{className:"grid w-full grid-cols-4 max-w-2xl mx-auto mb-8",children:[(0,l.jsxs)(d.SP,{value:"live",disabled:!O.is_live,children:[(0,l.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Live"]}),(0,l.jsxs)(d.SP,{value:"albums",disabled:0===L.length,children:[(0,l.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Albums (",L.length,")"]}),(0,l.jsxs)(d.SP,{value:"media",disabled:0===B.total_count,children:[(0,l.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Media (",B.total_count,")"]}),(0,l.jsxs)(d.SP,{value:"recording",disabled:!F.available,children:[(0,l.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Recording"]})]}),(0,l.jsx)(d.nU,{value:"albums",children:L.length>0?(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(e=>{var t;return(0,l.jsx)(o.Zb,{className:"overflow-hidden group hover:shadow-lg transition-all cursor-pointer",onClick:()=>J(e.id),children:(0,l.jsxs)("div",{className:"aspect-video bg-gray-100 relative",children:[e.cover_photo_url?(0,l.jsx)("img",{src:e.cover_photo_url,alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:(0,l.jsx)(g.Z,{className:"w-8 h-8 text-gray-400"})}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/30 group-hover:bg-black/50 transition-colors flex items-center justify-center",children:(0,l.jsx)("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-full border border-white/50 group-hover:scale-110 transition-transform",children:(0,l.jsx)(p.Z,{className:"w-8 h-8 text-white fill-white"})})}),(0,l.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent text-white",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:e.title}),(0,l.jsxs)("p",{className:"text-sm opacity-80",children:[(null===(t=e.slides)||void 0===t?void 0:t.length)||0," photos"]})]})]})},e.id)})}):(0,l.jsx)(o.Zb,{children:(0,l.jsxs)(o.aY,{className:"py-12 text-center",children:[(0,l.jsx)(g.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,l.jsx)("p",{className:"text-gray-600",children:"No albums created yet"})]})})}),(0,l.jsx)(d.nU,{value:"live",children:O.is_live&&O.stream_call_id?(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,l.jsx)("div",{className:"lg:col-span-2",children:(0,l.jsx)(o.Zb,{children:(0,l.jsxs)(o.aY,{className:"p-0",children:[(0,l.jsx)("div",{className:"aspect-video bg-black relative",children:(0,l.jsx)(N.Z,{playbackUrl:O.playback_url,autoPlay:!0,controls:!0,muted:!1})}),(0,l.jsxs)("div",{className:"p-4 flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(f.Z,{className:"w-5 h-5 text-gray-600"}),(0,l.jsxs)("span",{className:"text-gray-600",children:[r||O.viewers_count," watching"]})]}),O.has_multi_camera&&(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(j.Z,{className:"w-4 h-4 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-blue-600 font-medium",children:"Multi-Camera"})]})]}),(0,l.jsx)(n.C,{className:"bg-red-500 text-white animate-pulse",children:"LIVE"})]})]})})}),(0,l.jsx)("div",{className:"lg:col-span-1",children:(0,l.jsx)(R.Z,{weddingId:t})})]}):(0,l.jsx)(o.Zb,{children:(0,l.jsxs)(o.aY,{className:"py-12 text-center",children:[(0,l.jsx)(v.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Live stream is not currently active"})]})})}),(0,l.jsxs)(d.nU,{value:"media",children:[B.recent_items.length>0?(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:B.recent_items.map(e=>(0,l.jsx)(o.Zb,{className:"overflow-hidden group cursor-pointer hover:shadow-lg transition-all",children:(0,l.jsxs)("div",{className:"aspect-square relative",children:[(0,l.jsx)("img",{src:e.thumbnail_url||e.url,alt:e.caption||"Media",className:"w-full h-full object-cover"}),"video"===e.type&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/40 transition-all",children:(0,l.jsx)(p.Z,{className:"w-12 h-12 text-white"})})]})},e.id))}):(0,l.jsx)(o.Zb,{children:(0,l.jsxs)(o.aY,{className:"py-12 text-center",children:[(0,l.jsx)(g.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,l.jsx)("p",{className:"text-gray-600",children:"No media uploaded yet"})]})}),B.total_count>12&&(0,l.jsx)("div",{className:"text-center mt-6",children:(0,l.jsx)(s.z,{variant:"outline",children:"Load More Media"})})]}),(0,l.jsx)(d.nU,{value:"recording",children:F.available&&F.url?(0,l.jsx)(o.Zb,{children:(0,l.jsxs)(o.aY,{className:"p-0",children:[(0,l.jsx)("div",{className:"aspect-video bg-black",children:(0,l.jsx)("video",{src:F.url,controls:!0,className:"w-full h-full"})}),(0,l.jsx)("div",{className:"p-4",children:(0,l.jsxs)(s.z,{className:"w-full",variant:"outline",children:[(0,l.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Download Recording"]})})]})}):(0,l.jsx)(o.Zb,{children:(0,l.jsxs)(o.aY,{className:"py-12 text-center",children:[(0,l.jsx)(p.Z,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Recording not available yet"})]})})})]})})})]})}function q(e){let{params:t}=e,r=t.id;return(0,l.jsx)(k.w,{weddingId:r,children:(0,l.jsx)(J,{weddingId:r})})}},74414:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var l=r(57437);function a(e){let{playbackUrl:t,autoPlay:r=!1,controls:a=!0,muted:i=!1,className:s=""}=e;return(0,l.jsx)("div",{className:"w-full ".concat(s),children:(0,l.jsx)("video",{src:t,autoPlay:r,controls:a,muted:i,playsInline:!0,className:"w-full h-full object-contain bg-black"})})}r(2265)},79004:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var l=r(57437);r(2265);var a=r(13027),i=r(77700);let s=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...a}=e;return(0,l.jsx)("div",{className:(0,i.cn)(s({variant:r}),t),...a})}},56360:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var l=r(57437),a=r(2265),i=r(71538),s=r(13027),o=r(77700);let n=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:s,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,l.jsx)(u,{className:(0,o.cn)(n({variant:a,size:s,className:r})),ref:t,...c})});d.displayName="Button"},10273:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return s},aY:function(){return c},eW:function(){return u},ll:function(){return n}});var l=r(57437),a=r(2265),i=r(77700);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});s.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",r),...a})});n.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},6657:function(e,t,r){"use strict";r.r(t);var l=r(38472),a=r(78614);(0,a.ww)(),console.log("API Base URL:",(0,a.bR)());let i=l.Z.create({baseURL:(0,a.bR)(),headers:{"Content-Type":"application/json"},timeout:a.ZP.API.TIMEOUT});i.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),i.interceptors.response.use(e=>e,async e=>{var t,r,l,s,o,n,d;let c=e.config;if(console.error("API Error:",e),"ECONNABORTED"===e.code||"Network Error"===e.message){if(c.__retryCount||(c.__retryCount=0),c.__retryCount<a.ZP.API.RETRY_ATTEMPTS)return c.__retryCount+=1,console.warn("Retrying request (".concat(c.__retryCount,"/").concat(a.ZP.API.RETRY_ATTEMPTS,")...")),await new Promise(e=>setTimeout(e,a.ZP.API.RETRY_DELAY*c.__retryCount)),i(c);console.error("Request timeout after retries - API might be down")}if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&(console.error("❌ Authentication failed - token expired or invalid"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(s=window.toast)||void 0===s||s.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true"),(null===(r=e.response)||void 0===r?void 0:r.status)===403){console.error("❌ Access forbidden - you may not have permission or your session expired");let t=(null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.detail)||"";(t.toLowerCase().includes("not authorized")||t.toLowerCase().includes("permission"))&&(console.warn("⚠️ Token may be expired - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(d=window.toast)||void 0===d||d.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true")}return(null===(l=e.response)||void 0===l?void 0:l.status)===404&&console.error("Resource not found - check API endpoint"),Promise.reject(e)}),t.default=i},15730:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return n},a:function(){return d}});var l=r(57437),a=r(2265),i=r(6657);let s=(0,a.createContext)({});function o(e){if(!e)return!0;let t=function(e){try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch(e){return console.error("Failed to decode JWT:",e),null}}(e);return!t||!t.exp||1e3*t.exp-Date.now()<3e5}let n=e=>{let{children:t}=e,[r,n]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&(o(e)?(console.warn("⚠️ JWT token expired - clearing auth state"),localStorage.removeItem("token"),localStorage.removeItem("user"),c(null),n(null)):(c(e),n(JSON.parse(t)))),m(!1)},[]);let h=async(e,t)=>{let{access_token:r,user:l}=(await i.default.post("/api/auth/login",{email:e,password:t})).data;return localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(l)),c(r),n(l),l},x=async(e,t,r)=>{let{access_token:l,user:a}=(await i.default.post("/api/auth/register",{email:e,password:t,full_name:r})).data;return localStorage.setItem("token",l),localStorage.setItem("user",JSON.stringify(a)),c(l),n(a),a},v=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),c(null),n(null),window.location.href="/"},p=async()=>{try{let e=(await i.default.get("/api/auth/me")).data;return localStorage.setItem("user",JSON.stringify(e)),n(e),e}catch(t){var e;return console.error("Failed to refresh user data:",t),(null===(e=t.response)||void 0===e?void 0:e.status)===401&&(console.error("❌ Token invalid - logging out"),v()),null}};return(0,a.useEffect)(()=>{if(!d)return;let e=setInterval(()=>{o(d)&&(console.warn("⚠️ JWT token expired - logging out"),v())},6e4);return()=>clearInterval(e)},[d]),(0,l.jsx)(s.Provider,{value:{user:r,token:d,setToken:c,setUser:n,login:h,register:x,logout:v,refreshUser:p,loading:u,isTokenExpired:()=>o(d)},children:t})},d=()=>(0,a.useContext)(s)},78614:function(e,t,r){"use strict";r.d(t,{bR:function(){return s},ww:function(){return o}});var l=r(20357);let a=()=>{{let e=window.location.hostname;return e.includes("vercel.app")||e.includes("wedlive.vercel.app")}},i={API:{BASE_URL:(()=>{let e=l.env.NEXT_PUBLIC_BACKEND_URL||l.env.REACT_APP_BACKEND_URL||l.env.NEXT_PUBLIC_API_URL;if(e)return e;{let e=window.location.hostname;if(e.includes("emergentagent.com")||e.includes("preview.emergentagent.com"))return window.location.origin;if(e.includes("vercel.app")||e.includes("wedlive.vercel.app"))return"https://wedlive.onrender.com";e.includes("localhost")||e.includes("127.0.0.1")}return"http://localhost:8001"})(),TIMEOUT:3e5,RETRY_ATTEMPTS:2,RETRY_DELAY:1e3},MEDIA:{PROXY_ENDPOINT:"/api/media/telegram-proxy/photos/",SUPPORTED_FORMATS:["jpg","jpeg","png","webp"],MAX_FILE_SIZE:10485760},IMAGE:{MAX_RETRIES:2,RETRY_DELAY:1e3,FALLBACK_TIMEOUT:5e3,LOADING_PLACEHOLDER:"/images/placeholder.jpg"}},s=()=>i.API.BASE_URL,o=()=>{let e=s(),t=e.includes("localhost"),r=a();return console.log("\uD83D\uDD27 Configuration Validation:",{apiBaseUrl:e,environment:r?"production":"development",isLocal:t,mediaProxy:i.MEDIA.PROXY_ENDPOINT}),r&&t&&(console.error("❌ ERROR: Production frontend using localhost backend URL!"),console.error("Update NEXT_PUBLIC_API_URL in Vercel environment variables to: https://wedlive.onrender.com")),e.includes("8000")&&console.warn("⚠️ WARNING: API base URL is using port 8000, expected 8001 for local or 443 for production"),!0};t.ZP=i},77700:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var l=r(44839),a=r(96164);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,l.W)(t))}}},function(e){e.O(0,[9767,4868,7776,7515,1229,2151,5787,8916,9204,1944,8358,9178,5907,2971,7023,1744],function(){return e(e.s=79204)}),_N_E=e.O()}]);