(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185,6657],{52734:function(e,t,r){Promise.resolve().then(r.bind(r,77215)),Promise.resolve().then(r.bind(r,54974)),Promise.resolve().then(r.bind(r,37854)),Promise.resolve().then(r.bind(r,92898)),Promise.resolve().then(r.bind(r,15730)),Promise.resolve().then(r.t.bind(r,58967,23)),Promise.resolve().then(r.t.bind(r,15483,23)),Promise.resolve().then(r.t.bind(r,511,23)),Promise.resolve().then(r.t.bind(r,8316,23)),Promise.resolve().then(r.t.bind(r,90420,23)),Promise.resolve().then(r.t.bind(r,1393,23)),Promise.resolve().then(r.t.bind(r,41085,23)),Promise.resolve().then(r.t.bind(r,70183,23)),Promise.resolve().then(r.t.bind(r,81061,23)),Promise.resolve().then(r.t.bind(r,37197,23)),Promise.resolve().then(r.t.bind(r,58877,23))},77215:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var n=r(57437),o=r(2265),a=r(15730),l=r(11980),i=r(56360),s=r(76780);let u=(0,r(78030).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var c=r(16463);function d(){let{token:e,logout:t,isTokenExpired:r}=(0,a.a)(),[d,f]=(0,o.useState)(!1),_=(0,c.useRouter)();return((0,o.useEffect)(()=>{if(!e)return;let t=()=>{r&&r()&&f(!0)};t();let n=setInterval(t,3e4);return()=>clearInterval(n)},[e,r]),d)?(0,n.jsx)("div",{className:"fixed bottom-4 right-4 z-50 max-w-md",children:(0,n.jsxs)(l.bZ,{variant:"destructive",className:"shadow-lg",children:[(0,n.jsx)(s.Z,{className:"h-4 w-4"}),(0,n.jsxs)(l.X,{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold",children:"Session Expired"}),(0,n.jsx)("p",{className:"text-sm",children:"Your session has expired. Please log in again to continue."})]}),(0,n.jsxs)(i.z,{size:"sm",variant:"outline",onClick:()=>{t(),_.push("/login?expired=true")},className:"shrink-0",children:[(0,n.jsx)(u,{className:"w-4 h-4 mr-2"}),"Re-login"]})]})]})}):null}},11980:function(e,t,r){"use strict";r.d(t,{X:function(){return u},bZ:function(){return s}});var n=r(57437),o=r(2265),a=r(13027),l=r(77700);let i=(0,a.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),s=o.forwardRef((e,t)=>{let{className:r,variant:o,...a}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:o}),r),...a})});s.displayName="Alert",o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",r),...o})}).displayName="AlertTitle";let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",r),...o})});u.displayName="AlertDescription"},56360:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(57437),o=r(2265),a=r(71538),l=r(13027),i=r(77700);let s=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef((e,t)=>{let{className:r,variant:o,size:l,asChild:u=!1,...c}=e,d=u?a.g7:"button";return(0,n.jsx)(d,{className:(0,i.cn)(s({variant:o,size:l,className:r})),ref:t,...c})});u.displayName="Button"},54974:function(e,t,r){"use strict";r.d(t,{Toaster:function(){return u}});var n=r(57437),o=r(27776),a=r(2265),l=a.createContext(void 0),i={setTheme:e=>{},themes:[]},s=()=>{var e;return null!=(e=a.useContext(l))?e:i};let u=e=>{let{...t}=e,{theme:r="light"}=s();return(0,n.jsx)(o.x,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})}},37854:function(e,t,r){"use strict";r.d(t,{BorderProvider:function(){return l},P:function(){return i}});var n=r(57437),o=r(2265);let a=(0,o.createContext)();function l(e){let{children:t}=e,[r,l]=(0,o.useState)({groom_border_id:null,bride_border_id:null,couple_border_id:null,cover_border_id:null,precious_moment_border_id:null});return(0,n.jsx)(a.Provider,{value:{currentBorders:r,updateBorder:(e,t)=>{l(r=>({...r,[e]:t}))},updateAllBorders:e=>{l(e)}},children:t})}let i=()=>(0,o.useContext)(a)},92898:function(e,t,r){"use strict";r.d(t,{FontProvider:function(){return l},j:function(){return i}});var n=r(57437),o=r(2265);let a=(0,o.createContext)();function l(e){let{children:t}=e,[r,l]=(0,o.useState)("Great Vibes"),[i]=(0,o.useState)({Inter:"var(--font-inter), sans-serif","Great Vibes":"var(--font-greatvibes), cursive","Playfair Display":"var(--font-playfair), serif",Cinzel:"var(--font-cinzel), serif",Montserrat:"var(--font-montserrat), sans-serif",Lato:"var(--font-lato), sans-serif",Caveat:"var(--font-caveat), cursive","Bebas Neue":"var(--font-bebas), cursive","Rozha One":"var(--font-rozha), serif","Pinyon Script":"var(--font-pinyon), cursive"});return(0,n.jsx)(a.Provider,{value:{currentFont:r,fontMappings:i,updateFont:e=>{l(e)}},children:t})}let i=()=>(0,o.useContext)(a)},6657:function(e,t,r){"use strict";r.r(t);var n=r(38472),o=r(78614);(0,o.ww)(),console.log("API Base URL:",(0,o.bR)());let a=n.Z.create({baseURL:(0,o.bR)(),headers:{"Content-Type":"application/json"},timeout:o.ZP.API.TIMEOUT});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),a.interceptors.response.use(e=>e,async e=>{var t,r,n,l,i,s,u;let c=e.config;if(console.error("API Error:",e),"ECONNABORTED"===e.code||"Network Error"===e.message){if(c.__retryCount||(c.__retryCount=0),c.__retryCount<o.ZP.API.RETRY_ATTEMPTS)return c.__retryCount+=1,console.warn("Retrying request (".concat(c.__retryCount,"/").concat(o.ZP.API.RETRY_ATTEMPTS,")...")),await new Promise(e=>setTimeout(e,o.ZP.API.RETRY_DELAY*c.__retryCount)),a(c);console.error("Request timeout after retries - API might be down")}if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&(console.error("❌ Authentication failed - token expired or invalid"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(l=window.toast)||void 0===l||l.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true"),(null===(r=e.response)||void 0===r?void 0:r.status)===403){console.error("❌ Access forbidden - you may not have permission or your session expired");let t=(null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.detail)||"";(t.toLowerCase().includes("not authorized")||t.toLowerCase().includes("permission"))&&(console.warn("⚠️ Token may be expired - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(u=window.toast)||void 0===u||u.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true")}return(null===(n=e.response)||void 0===n?void 0:n.status)===404&&console.error("Resource not found - check API endpoint"),Promise.reject(e)}),t.default=a},15730:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return s},a:function(){return u}});var n=r(57437),o=r(2265),a=r(6657);let l=(0,o.createContext)({});function i(e){if(!e)return!0;let t=function(e){try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch(e){return console.error("Failed to decode JWT:",e),null}}(e);return!t||!t.exp||1e3*t.exp-Date.now()<3e5}let s=e=>{let{children:t}=e,[r,s]=(0,o.useState)(null),[u,c]=(0,o.useState)(null),[d,f]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&(i(e)?(console.warn("⚠️ JWT token expired - clearing auth state"),localStorage.removeItem("token"),localStorage.removeItem("user"),c(null),s(null)):(c(e),s(JSON.parse(t)))),f(!1)},[]);let _=async(e,t)=>{let{access_token:r,user:n}=(await a.default.post("/api/auth/login",{email:e,password:t})).data;return localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(n)),c(r),s(n),n},v=async(e,t,r)=>{let{access_token:n,user:o}=(await a.default.post("/api/auth/register",{email:e,password:t,full_name:r})).data;return localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify(o)),c(n),s(o),o},m=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),c(null),s(null),window.location.href="/"},p=async()=>{try{let e=(await a.default.get("/api/auth/me")).data;return localStorage.setItem("user",JSON.stringify(e)),s(e),e}catch(t){var e;return console.error("Failed to refresh user data:",t),(null===(e=t.response)||void 0===e?void 0:e.status)===401&&(console.error("❌ Token invalid - logging out"),m()),null}};return(0,o.useEffect)(()=>{if(!u)return;let e=setInterval(()=>{i(u)&&(console.warn("⚠️ JWT token expired - logging out"),m())},6e4);return()=>clearInterval(e)},[u]),(0,n.jsx)(l.Provider,{value:{user:r,token:u,setToken:c,setUser:s,login:_,register:v,logout:m,refreshUser:p,loading:d,isTokenExpired:()=>i(u)},children:t})},u=()=>(0,o.useContext)(l)},78614:function(e,t,r){"use strict";r.d(t,{bR:function(){return l},ww:function(){return i}});var n=r(20357);let o=()=>{{let e=window.location.hostname;return e.includes("vercel.app")||e.includes("wedlive.vercel.app")}},a={API:{BASE_URL:(()=>{let e=n.env.NEXT_PUBLIC_BACKEND_URL||n.env.REACT_APP_BACKEND_URL||n.env.NEXT_PUBLIC_API_URL;if(e)return e;{let e=window.location.hostname;if(e.includes("emergentagent.com")||e.includes("preview.emergentagent.com"))return window.location.origin;if(e.includes("vercel.app")||e.includes("wedlive.vercel.app"))return"https://wedlive.onrender.com";e.includes("localhost")||e.includes("127.0.0.1")}return"http://localhost:8001"})(),TIMEOUT:3e5,RETRY_ATTEMPTS:2,RETRY_DELAY:1e3},MEDIA:{PROXY_ENDPOINT:"/api/media/telegram-proxy/photos/",SUPPORTED_FORMATS:["jpg","jpeg","png","webp"],MAX_FILE_SIZE:10485760},IMAGE:{MAX_RETRIES:2,RETRY_DELAY:1e3,FALLBACK_TIMEOUT:5e3,LOADING_PLACEHOLDER:"/images/placeholder.jpg"}},l=()=>a.API.BASE_URL,i=()=>{let e=l(),t=e.includes("localhost"),r=o();return console.log("\uD83D\uDD27 Configuration Validation:",{apiBaseUrl:e,environment:r?"production":"development",isLocal:t,mediaProxy:a.MEDIA.PROXY_ENDPOINT}),r&&t&&(console.error("❌ ERROR: Production frontend using localhost backend URL!"),console.error("Update NEXT_PUBLIC_API_URL in Vercel environment variables to: https://wedlive.onrender.com")),e.includes("8000")&&console.warn("⚠️ WARNING: API base URL is using port 8000, expected 8001 for local or 443 for production"),!0};t.ZP=a},77700:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(44839),o=r(96164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}},76780:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(78030).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},58877:function(){},70183:function(e){e.exports={style:{fontFamily:"'__Bebas_Neue_d758cf', '__Bebas_Neue_Fallback_d758cf'",fontWeight:400,fontStyle:"normal"},className:"__className_d758cf",variable:"__variable_d758cf"}},41085:function(e){e.exports={style:{fontFamily:"'__Caveat_97f5e1', '__Caveat_Fallback_97f5e1'",fontStyle:"normal"},className:"__className_97f5e1",variable:"__variable_97f5e1"}},8316:function(e){e.exports={style:{fontFamily:"'__Cinzel_a5db66', '__Cinzel_Fallback_a5db66'",fontStyle:"normal"},className:"__className_a5db66",variable:"__variable_a5db66"}},15483:function(e){e.exports={style:{fontFamily:"'__Great_Vibes_a10525', '__Great_Vibes_Fallback_a10525'",fontWeight:400,fontStyle:"normal"},className:"__className_a10525",variable:"__variable_a10525"}},58967:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3",variable:"__variable_f367f3"}},1393:function(e){e.exports={style:{fontFamily:"'__Lato_47a102', '__Lato_Fallback_47a102'",fontStyle:"normal"},className:"__className_47a102",variable:"__variable_47a102"}},90420:function(e){e.exports={style:{fontFamily:"'__Montserrat_069ab3', '__Montserrat_Fallback_069ab3'",fontStyle:"normal"},className:"__className_069ab3",variable:"__variable_069ab3"}},37197:function(e){e.exports={style:{fontFamily:"'__Pinyon_Script_cad7cf', '__Pinyon_Script_Fallback_cad7cf'",fontWeight:400,fontStyle:"normal"},className:"__className_cad7cf",variable:"__variable_cad7cf"}},511:function(e){e.exports={style:{fontFamily:"'__Playfair_Display_0a80b4', '__Playfair_Display_Fallback_0a80b4'",fontStyle:"normal"},className:"__className_0a80b4",variable:"__variable_0a80b4"}},81061:function(e){e.exports={style:{fontFamily:"'__Rozha_One_6c19d0', '__Rozha_One_Fallback_6c19d0'",fontWeight:400,fontStyle:"normal"},className:"__className_6c19d0",variable:"__variable_6c19d0"}},1584:function(e,t,r){"use strict";r.d(t,{F:function(){return a},e:function(){return l}});var n=r(2265);function o(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let r=!1,n=e.map(e=>{let n=o(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():o(e[t],null)}}}}function l(...e){return n.useCallback(a(...e),e)}},71538:function(e,t,r){"use strict";r.d(t,{Z8:function(){return c},g7:function(){return d}});var n,o=r(2265),a=r(1584),l=r(57437),i=Symbol.for("react.lazy"),s=(n||(n=r.t(o,2)))[" use ".trim().toString()];function u(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function c(e){let t=function(e){let t=o.forwardRef((e,t)=>{let{children:r,...n}=e;if(u(r)&&"function"==typeof s&&(r=s(r._payload)),o.isValidElement(r)){var l;let e,i;let s=(l=r,(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.ref:(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.props.ref:l.props.ref||l.ref),u=function(e,t){let r={...t};for(let n in t){let o=e[n],a=t[n];/^on[A-Z]/.test(n)?o&&a?r[n]=(...e)=>{let t=a(...e);return o(...e),t}:o&&(r[n]=o):"style"===n?r[n]={...o,...a}:"className"===n&&(r[n]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==o.Fragment&&(u.ref=t?(0,a.F)(t,s):s),o.cloneElement(r,u)}return o.Children.count(r)>1?o.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=o.forwardRef((e,r)=>{let{children:n,...a}=e;u(n)&&"function"==typeof s&&(n=s(n._payload));let i=o.Children.toArray(n),c=i.find(_);if(c){let e=c.props.children,n=i.map(t=>t!==c?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...a,ref:r,children:o.isValidElement(e)?o.cloneElement(e,void 0,n):null})}return(0,l.jsx)(t,{...a,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var d=c("Slot"),f=Symbol("radix.slottable");function _(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}},13027:function(e,t,r){"use strict";r.d(t,{j:function(){return l}});var n=r(44839);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=n.W,l=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:i}=t,s=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],n=null==i?void 0:i[e];if(null===t)return null;let a=o(t)||o(n);return l[e][a]}),u=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return a(e,s,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...o}=t;return Object.entries(o).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...u}[t]):({...i,...u})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[8460,404,9767,4868,7776,2971,7023,1744],function(){return e(e.s=52734)}),_N_E=e.O()}]);