(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1624,7611],{13170:function(e,s,t){Promise.resolve().then(t.bind(t,36428))},36428:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return eJ}});var a=t(57437),r=t(2265),l=t(15730),i=t(56360),o=t(10273),n=t(65236),d=t(79004),c=t(17953),u=t(11980),m=t(3274),p=t(95137),x=t(68954),h=t(74453),g=t(23787),f=t(957),v=t(33907),b=t(18604),y=t(24258),j=t(75733),N=t(92940),w=t(6884),_=t(64042),k=t(24241),S=t(49321),C=t(87138),Z=t(16463),P=t(27776),B=t(6657),M=t(67159),E=t(10464),F=t(7990),q=t(32816),T=t(74697),z=t(76780);function O(e){let{weddingId:s,onUploadComplete:t}=e,[l,n]=(0,r.useState)(!1),[d,c]=(0,r.useState)(0),[p,h]=(0,r.useState)(null),[g,f]=(0,r.useState)(""),[v,y]=(0,r.useState)(null),[j,N]=(0,r.useState)(null),[w,_]=(0,r.useState)({uploaded:0,total:0,failed:[]}),[k,S]=(0,r.useState)("general"),C=(0,r.useRef)(null),Z=e=>{if(e<=209715200)return{chunkSize:e,totalChunks:1};let s=Math.ceil(e/209715200);return{chunkSize:Math.ceil(e/(s=Math.max(8,Math.min(15,s)))),totalChunks:s}},M=e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!t)return;if(!t.type.startsWith("image/")&&!t.type.startsWith("video/")){P.toast.error("Please select an image or video file");return}if(t.size>10737418240){P.toast.error("File size must be less than 10GB");return}h(t),N(t.type.startsWith("image/")?"photo":"video");let a=new FileReader;a.onload=e=>{y(e.target.result)},a.readAsDataURL(t);let{chunkSize:r,totalChunks:l}=Z(t.size);l>1&&P.toast.info("Large file detected! Will upload in ".concat(l," chunks (").concat((r/1024/1024).toFixed(0),"MB each)"))},O=async function(e,s,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;try{let a=new FormData;return a.append("upload_id",e),a.append("chunk_index",s),a.append("chunk",t,"chunk_".concat(s)),await B.default.post("/api/media/upload/chunk",a,{headers:{"Content-Type":"multipart/form-data"}}),{success:!0,chunkIndex:s}}catch(r){if(console.error("Chunk ".concat(s," upload failed:"),r),a<3)return console.log("Retrying chunk ".concat(s," (attempt ").concat(a+1,"/").concat(3,")")),await new Promise(e=>setTimeout(e,1e3*(a+1))),O(e,s,t,a+1);return{success:!1,chunkIndex:s,error:r}}},A=async(e,s)=>{let t=[],a=[];for(let r=0;r<s.length;r+=5){let l=s.slice(r,r+5).map(s=>{let{index:t,blob:a}=s;return O(e,t,a)});(await Promise.all(l)).forEach(e=>{e.success?(t.push(e.chunkIndex),_(e=>({...e,uploaded:e.uploaded+1})),c(Math.round(t.length/s.length*95))):(a.push(e.chunkIndex),_(s=>({...s,failed:[...s.failed,e.chunkIndex]})))})}return{results:t,failed:a}},U=async()=>{if(!p){P.toast.error("Please select a file to upload");return}n(!0),c(0),_({uploaded:0,total:0,failed:[]});try{let{chunkSize:e,totalChunks:a}=Z(p.size);if(1===a){let e=new FormData;e.append("file",p),e.append("wedding_id",s),e.append("caption",g),e.append("category",k);let a="photo"===j?"/api/media/upload/photo":"/api/media/upload/video",r=await B.default.post(a,e,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5,onUploadProgress:e=>{let s=Math.round(100*e.loaded/e.total);c(s)}});P.toast.success("".concat("photo"===j?"Photo":"Video"," uploaded successfully!")),D(),t&&t(r.data);return}_({uploaded:0,total:a,failed:[]});let r=(await B.default.post("/api/media/upload/init",{wedding_id:s,filename:p.name,total_size:p.size,total_chunks:a,media_type:j,caption:g,category:k})).data.upload_id;P.toast.info("Starting chunked upload: ".concat(a," chunks"));let l=[];for(let s=0;s<a;s++){let t=s*e,a=Math.min(t+e,p.size),r=p.slice(t,a);l.push({index:s,blob:r})}c(5);let{results:i,failed:o}=await A(r,l);if(o.length>0)throw Error("Failed to upload ".concat(o.length," chunks: ").concat(o.join(", ")));c(95);let n=new FormData;n.append("upload_id",r);let d=await B.default.post("/api/media/upload/complete",n,{headers:{"Content-Type":"multipart/form-data"}});c(100),P.toast.success("".concat("photo"===j?"Photo":"Video"," uploaded successfully! (").concat(a," chunks)")),D(),t&&t(d.data)}catch(t){var e,a,r;console.error("Upload error:",t);let s=(null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.detail)||t.message||"Failed to upload media";P.toast.error(s),(null===(r=t.response)||void 0===r?void 0:r.status)===403&&P.toast.error("Storage limit reached. Please upgrade your plan.",{duration:5e3})}finally{n(!1)}},D=()=>{h(null),f(""),y(null),N(null),S("general"),c(0),_({uploaded:0,total:0,failed:[]}),C.current&&(C.current.value="")};return(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5 mr-2"}),"Upload Media"]}),(0,a.jsx)(o.SZ,{children:"Add photos and videos to your wedding gallery (up to 10GB per file)"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative rounded-lg overflow-hidden bg-gray-100",children:["photo"===j?(0,a.jsx)("img",{src:v,alt:"Preview",className:"w-full h-64 object-cover"}):(0,a.jsx)("div",{className:"relative w-full h-64",children:(0,a.jsx)("video",{src:v,className:"w-full h-full object-cover",controls:!0})}),!l&&(0,a.jsx)("button",{onClick:D,className:"absolute top-2 right-2 bg-black/60 hover:bg-black/80 text-white rounded-full p-2 transition-colors",children:(0,a.jsx)(T.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"flex items-center",children:["photo"===j?(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}):(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),p.name]}),(0,a.jsxs)("span",{children:[(p.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E._,{htmlFor:"caption",children:"Caption (optional)"}),(0,a.jsx)(F.g,{id:"caption",value:g,onChange:e=>f(e.target.value),placeholder:"Add a caption to your media...",disabled:l,rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E._,{htmlFor:"category",children:"Photo Category"}),(0,a.jsxs)("select",{id:"category",value:k,onChange:e=>S(e.target.value),disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"general",children:"General Gallery"}),(0,a.jsx)("option",{value:"couple",children:"Couple Photo"}),(0,a.jsx)("option",{value:"bride",children:"Bride Photo"}),(0,a.jsx)("option",{value:"groom",children:"Groom Photo"}),(0,a.jsx)("option",{value:"moment",children:"Precious Moment"}),(0,a.jsx)("option",{value:"cover",children:"Cover Photo"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Select a category to automatically use this photo in your wedding theme"})]}),l&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:w.total>1?"Uploading chunks... ".concat(w.uploaded,"/").concat(w.total):"Uploading..."}),(0,a.jsxs)("span",{className:"font-semibold text-rose-600",children:[d,"%"]})]}),(0,a.jsx)(q.E,{value:d,className:"h-2"}),w.failed.length>0&&(0,a.jsxs)(u.bZ,{className:"border-yellow-500 bg-yellow-50",children:[(0,a.jsx)(z.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsxs)(u.X,{className:"text-yellow-800",children:["Retrying failed chunks: ",w.failed.join(", ")]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.z,{onClick:U,disabled:l,className:"flex-1 bg-gradient-to-r from-rose-500 to-purple-600 text-white hover:from-rose-600 hover:to-purple-700",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Upload ","photo"===j?"Photo":"Video"]})}),!l&&(0,a.jsx)(i.z,{variant:"outline",onClick:D,children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-rose-500 transition-colors",onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();let s=e.dataTransfer.files;s&&s[0]&&M({target:{files:[s[0]]}})},children:[(0,a.jsx)("input",{ref:C,type:"file",accept:"image/*,video/*",onChange:M,className:"hidden"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"w-8 h-8 text-rose-500"})}),(0,a.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-8 h-8 text-purple-500"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Drop files here or click to browse"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Supports images and videos up to 10GB"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Large files (over 200MB) will be uploaded in chunks for reliability"})]}),(0,a.jsx)(i.z,{type:"button",variant:"outline",onClick:e=>{var s;e.stopPropagation(),null===(s=C.current)||void 0===s||s.click()},children:"Select Files"})]})]}),(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(z.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Tip:"})," Upload high-quality photos and videos to preserve precious memories. Supported formats: JPG, PNG, MP4, MOV"]})]})]})})]})}var A=t(2645),U=t(90223),D=t(208),R=t(80233),L=t(92513),I=t(10883),G=t(68639),Y=t(92404);function V(e){let{weddingId:s,isPremium:t,rtmpUrl:l}=e,[n,c]=(0,r.useState)([]),[p,h]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[b,y]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&_()},[s,t]);let _=async()=>{try{h(!0);let e=await B.default.get("/api/streams/".concat(s,"/cameras"));c(e.data||[])}catch(e){console.error("Error loading cameras:",e)}finally{h(!1)}},k=async()=>{if(!b.trim()){P.toast.error("Please enter a camera name");return}try{N(!0),await B.default.post("/api/streams/camera/add",{wedding_id:s,camera_name:b}),P.toast.success("Camera added successfully!"),y(""),v(!1),_()}catch(s){var e,t;console.error("Error adding camera:",s),P.toast.error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Failed to add camera")}finally{N(!1)}},S=async e=>{if(confirm("Are you sure you want to remove this camera?"))try{await B.default.delete("/api/streams/camera/".concat(s,"/").concat(e)),P.toast.success("Camera removed"),_()}catch(e){console.error("Error removing camera:",e),P.toast.error("Failed to remove camera")}},Z=(e,s)=>{navigator.clipboard.writeText(e),P.toast.success("".concat(s," copied!"))},M=e=>{let s={waiting:{variant:"secondary",label:"Waiting"},connected:{variant:"default",label:"Connected",className:"bg-green-500"},disconnected:{variant:"destructive",label:"Disconnected"}},t=s[e]||s.waiting;return(0,a.jsx)(d.C,{variant:t.variant,className:t.className,children:t.label})};return t?(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(R.Z,{className:"w-5 h-5"}),"Multi-Camera Sources"]}),(0,a.jsx)(o.SZ,{children:"Manage multiple camera streams for your wedding"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)(G.Vq,{open:g,onOpenChange:v,children:[(0,a.jsx)(G.hg,{asChild:!0,children:(0,a.jsxs)(i.z,{variant:"outline",className:"w-full",children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 mr-2"}),"Add Camera Source"]})}),(0,a.jsxs)(G.cZ,{children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Add Camera Source"}),(0,a.jsx)(G.Be,{children:"Add a new camera stream for multi-angle coverage"})]}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E._,{htmlFor:"camera-name",children:"Camera Name"}),(0,a.jsx)(Y.I,{id:"camera-name",placeholder:"e.g., Sony A7S III, iPhone Camera, Drone View",value:b,onChange:e=>y(e.target.value),onKeyDown:e=>"Enter"===e.key&&k()})]})}),(0,a.jsx)(G.cN,{children:(0,a.jsx)(i.z,{onClick:k,disabled:j||!b.trim(),children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"})," Adding..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 mr-2"})," Add Camera"]})})})]})]}),p?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 animate-spin text-gray-400"})}):0===n.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(x.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No additional cameras added yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:'Click "Add Camera Source" to get started'})]}):(0,a.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-3 hover:border-rose-200 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Added ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[M(e.status),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>S(e.camera_id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:(0,a.jsx)(I.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"password",value:e.stream_key,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-xs"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>Z(e.stream_key,"Stream Key"),children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,a.jsx)("strong",{children:"Server:"})," ",l||"rtmp://live.wedlive.app/live"]})})]},e.camera_id))}),n.length>0&&(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{className:"text-xs",children:"Each camera uses its own stream key. Configure OBS Studio or your streaming software with the corresponding stream key for each camera."})]})]})]}):(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(R.Z,{className:"w-5 h-5"}),"Multi-Camera Support",(0,a.jsxs)(d.C,{className:"ml-2 bg-gradient-to-r from-yellow-500 to-orange-500",children:[(0,a.jsx)(f.Z,{className:"w-3 h-3 mr-1"}),"Premium"]})]}),(0,a.jsx)(o.SZ,{children:"Stream from multiple camera angles simultaneously"})]}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{children:["Multi-camera support is available for Premium subscribers only.",(0,a.jsx)(C.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade to Premium"})]})]})})]})}var W=t(42421),K=t(87592),H=t(91863),X=t(48496),Q=t(46290),J=t(86244),$=t(92095),ee=t(99913),es=t(71976);let et=e=>{if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["B","KB","MB","GB"][s]};function ea(e){let{weddingId:s,onFolderSelect:t}=e,[l,n]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(new Set),[p,x]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)({name:"",description:"",parentFolderId:null}),[_,k]=(0,r.useState)(null),[S,C]=(0,r.useState)(null);(0,r.useEffect)(()=>{Z()},[s]);let Z=async()=>{try{c(!0);let e=await B.default.get("/api/folders/wedding/".concat(s));n(e.data||[])}catch(e){console.error("Error loading folders:",e),P.toast.error("Failed to load folders")}finally{c(!1)}},M=e=>{let s=new Set(u);s.has(e)?s.delete(e):s.add(e),m(s)},E=async()=>{if(!N.name.trim()){P.toast.error("Folder name is required");return}try{c(!0),await B.default.post("/api/folders/create",{wedding_id:s,name:N.name,parent_folder_id:N.parentFolderId,description:N.description}),P.toast.success("Folder created successfully!"),g(!1),w({name:"",description:"",parentFolderId:null}),Z()}catch(s){var e,t;console.error("Error creating folder:",s),P.toast.error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Failed to create folder")}finally{c(!1)}},q=async()=>{if(!N.name.trim()){P.toast.error("Folder name is required");return}try{c(!0),await B.default.put("/api/folders/".concat(_.id),{name:N.name,description:N.description}),P.toast.success("Folder updated successfully!"),v(!1),k(null),w({name:"",description:"",parentFolderId:null}),Z()}catch(t){var e,s;console.error("Error updating folder:",t),P.toast.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"Failed to update folder")}finally{c(!1)}},T=async e=>{let s=e.media_count>0||e.subfolder_count>0?'Are you sure you want to delete "'.concat(e.name,'"? All content will be moved to ').concat(e.parent_folder_id?"its parent folder":"root","."):'Are you sure you want to delete "'.concat(e.name,'"?');if(window.confirm(s))try{c(!0),await B.default.delete("/api/folders/".concat(e.id)),P.toast.success("Folder deleted successfully"),Z()}catch(e){var t,a;console.error("Error deleting folder:",e),P.toast.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail)||"Failed to delete folder")}finally{c(!1)}},z=async()=>{if(_)try{c(!0),await B.default.post("/api/folders/move",{folder_id:_.id,new_parent_id:S}),P.toast.success("Folder moved successfully!"),j(!1),k(null),C(null),Z()}catch(t){var e,s;console.error("Error moving folder:",t),P.toast.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"Failed to move folder")}finally{c(!1)}},O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;w({name:"",description:"",parentFolderId:e}),g(!0)},A=e=>{k(e),w({name:e.name,description:e.description||"",parentFolderId:e.parent_folder_id}),v(!0)},U=e=>{k(e),C(null),j(!0)},D=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(e=>{let r=u.has(e.id),l=e.children&&e.children.length>0;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-100 transition-colors group ".concat(p===e.id?"bg-blue-50 border-2 border-blue-300":"border-2 border-transparent"),style:{paddingLeft:"".concat(24*s+12,"px")},children:(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[l?(0,a.jsx)("button",{onClick:()=>M(e.id),className:"p-1 hover:bg-gray-200 rounded",children:r?(0,a.jsx)(W.Z,{className:"w-4 h-4 text-gray-600"}):(0,a.jsx)(K.Z,{className:"w-4 h-4 text-gray-600"})}):(0,a.jsx)("div",{className:"w-6"}),(0,a.jsxs)("button",{onClick:()=>{x(e.id),t&&t(e.id)},className:"flex items-center gap-2 flex-1 text-left",children:[r?(0,a.jsx)(H.Z,{className:"w-5 h-5 text-yellow-500"}):(0,a.jsx)(X.Z,{className:"w-5 h-5 text-blue-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"w-3 h-3"}),e.media_count]}),e.subfolder_count>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(X.Z,{className:"w-3 h-3"}),e.subfolder_count]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(Q.Z,{className:"w-3 h-3"}),et(e.folder_size)]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>O(e.id),title:"Create subfolder",children:(0,a.jsx)(J.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>U(e),title:"Move folder",children:(0,a.jsx)($.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>A(e),title:"Edit folder",children:(0,a.jsx)(ee.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>T(e),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete folder",children:(0,a.jsx)(I.Z,{className:"w-4 h-4"})})]})]})}),r&&l&&(0,a.jsx)("div",{className:"mt-1",children:D(e.children,s+1)})]},e.id)})},R=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.filter(e=>e.id!==t).map(e=>_&&L(e.id,_.id)?null:(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>C(e.id),className:"w-full text-left p-2 rounded hover:bg-gray-100 flex items-center gap-2 ".concat(S===e.id?"bg-blue-50 border-2 border-blue-300":""),style:{paddingLeft:"".concat(16*s+8,"px")},children:[(0,a.jsx)(X.Z,{className:"w-4 h-4 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm",children:e.name})]}),e.children&&e.children.length>0&&R(e.children,s+1,t)]},e.id))},L=(e,s)=>{let t=l.find(s=>s.id===e);return!!t&&!!t.parent_folder_id&&(t.parent_folder_id===s||L(t.parent_folder_id,s))},V=(e=>{let s={},t=[];return e.forEach(e=>{s[e.id]={...e,children:[]}}),e.forEach(e=>{e.parent_folder_id&&s[e.parent_folder_id]?s[e.parent_folder_id].children.push(s[e.id]):t.push(s[e.id])}),t})(l),ea=l.reduce((e,s)=>e+s.media_count,0),er=l.reduce((e,s)=>e+s.folder_size,0);return(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(X.Z,{className:"w-5 h-5"}),"Media Folders"]}),(0,a.jsx)(o.SZ,{className:"mt-1",children:"Organize your wedding media into nested folders"}),l.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:[l.length," folders"]}),(0,a.jsxs)("span",{children:[ea," items"]}),(0,a.jsxs)("span",{children:[et(er)," total"]})]})]}),(0,a.jsxs)(i.z,{onClick:()=>O(),disabled:d,size:"sm",children:[(0,a.jsx)(J.Z,{className:"w-4 h-4 mr-2"}),"New Folder"]})]})}),(0,a.jsxs)(o.aY,{children:[d&&0===l.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,a.jsx)("p",{children:"Loading folders..."})}):0===l.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(X.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"No folders yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Create folders to organize your media"})]}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>{x(null),t&&t(null)},className:"w-full flex items-center justify-between p-3 rounded-lg transition-all ".concat(null===p?"bg-gradient-to-r from-pink-100 to-purple-100 border-2 border-pink-300":"bg-gradient-to-r from-pink-50 to-purple-50 hover:from-pink-100 hover:to-purple-100 border-2 border-transparent"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-semibold",children:"All Media"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"View all photos and videos"})]})]}),(0,a.jsx)(es.Z,{className:"w-5 h-5 text-gray-400"})]}),(0,a.jsx)("div",{className:"mt-2 border-t pt-2",children:D(V)})]}),(0,a.jsx)(G.Vq,{open:h,onOpenChange:g,children:(0,a.jsxs)(G.cZ,{children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Create New Folder"}),(0,a.jsx)(G.Be,{children:N.parentFolderId?"Create a subfolder inside the selected folder":"Create a new root folder to organize media"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Folder Name *"}),(0,a.jsx)(Y.I,{value:N.name,onChange:e=>w({...N,name:e.target.value}),placeholder:"e.g., Ceremony, Reception, Portraits",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Description (Optional)"}),(0,a.jsx)(F.g,{value:N.description,onChange:e=>w({...N,description:e.target.value}),placeholder:"Add a description for this folder...",rows:3,className:"mt-1"})]})]}),(0,a.jsxs)(G.cN,{children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>{g(!1),w({name:"",description:"",parentFolderId:null})},children:"Cancel"}),(0,a.jsx)(i.z,{onClick:E,disabled:d,children:d?"Creating...":"Create Folder"})]})]})}),(0,a.jsx)(G.Vq,{open:f,onOpenChange:v,children:(0,a.jsxs)(G.cZ,{children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Edit Folder"}),(0,a.jsx)(G.Be,{children:"Update folder name and description"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Folder Name *"}),(0,a.jsx)(Y.I,{value:N.name,onChange:e=>w({...N,name:e.target.value}),placeholder:"Folder name",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Description (Optional)"}),(0,a.jsx)(F.g,{value:N.description,onChange:e=>w({...N,description:e.target.value}),placeholder:"Add a description...",rows:3,className:"mt-1"})]})]}),(0,a.jsxs)(G.cN,{children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>{v(!1),k(null),w({name:"",description:"",parentFolderId:null})},children:"Cancel"}),(0,a.jsx)(i.z,{onClick:q,disabled:d,children:d?"Updating...":"Update Folder"})]})]})}),(0,a.jsx)(G.Vq,{open:y,onOpenChange:j,children:(0,a.jsxs)(G.cZ,{children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Move Folder"}),(0,a.jsxs)(G.Be,{children:['Select a new parent folder or choose root to move "',null==_?void 0:_.name,'"']})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("button",{onClick:()=>C(null),className:"w-full text-left p-2 rounded hover:bg-gray-100 flex items-center gap-2 ".concat(null===S?"bg-blue-50 border-2 border-blue-300":""),children:[(0,a.jsx)(H.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Root (No Parent)"})]}),R(V,0,null==_?void 0:_.id)]}),(0,a.jsxs)(G.cN,{children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>{j(!1),k(null),C(null)},children:"Cancel"}),(0,a.jsx)(i.z,{onClick:z,disabled:d||S===(null==_?void 0:_.parent_folder_id),children:d?"Moving...":"Move Folder"})]})]})})]})]})}var er=t(46260),el=t(44662),ei=t(98094),eo=t(24501),en=t(13231),ed=t(6569),ec=t(58184),eu=t(74232),em=t(78614),ep=t(92898),ex=t(37854),eh=t(87611),eg=t(90508),ef=t(9036),ev=t(18814),eb=t(94835),ey=t(8209),ej=t(59451),eN=t(44906),ew=JSON.parse('{"layout_id":"layout_1","name":"Vertical Wedding Invitation","description":"Single-column vertical layout with dynamic video template (9:16 or 16:9), couple photo with border, YouTube video, studio branding, and precious moments gallery. Fully mobile responsive.","version":"3.0","thumbnail":"/layout-previews/layout1.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Couple photo with decorative border (Section 2)","supports_border":true,"aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":12,"description":"Polaroid-style photo gallery (Section 5)","supports_border":true}},"videos":{"templateVideo":{"required":false,"description":"Dynamic template video with overlays (Section 1)","aspect_ratio":"dynamic","supports_overlays":true},"preWeddingVideo":{"required":false,"description":"YouTube video embed (Section 3)","embed_type":"youtube"}},"branding":{"studioDetails":{"required":false,"description":"Studio branding section (Section 4)","includes":["logo_url","tagline"]}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for couple photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery images"}}},"style_inputs":{"font":{"required":true,"default":"Playfair Display","description":"Primary font family"},"primaryColor":{"required":true,"default":"#1e3a8a","description":"Primary accent color"}},"layout_structure":{"sections":["template_video_section","couple_photo_section","youtube_video_section","studio_branding_section","precious_moments_gallery"],"orientation":"vertical","responsive":true,"dynamic_aspect_ratio":true}}'),e_=JSON.parse('{"layout_id":"layout_2","name":"Center Focus","description":"Large centered couple photo as hero with gallery below. Emphasizes the couple\'s unity.","version":"1.0","thumbnail":"/layout-previews/layout2.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main couple photo (hero image)","supports_border":true,"default_position":"center","aspect_ratio":"square"},"coverPhotos":{"required":false,"type":"array","max_count":5,"description":"Background carousel photos"},"preciousMoments":{"required":false,"type":"array","max_count":20,"description":"Gallery photos with precious moments","supports_border":true,"layout_style":["grid","carousel"]},"studioImage":{"required":false,"description":"Studio partner logo/photo","supports_border":false},"streamImage":{"required":false,"description":"Live stream thumbnail"}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":150,"description":"Welcome greeting text"},"description":{"required":false,"max_length":400,"description":"Love story or event description"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"},"studioLogo":{"required":false,"description":"Studio logo URL"},"studioContact":{"required":false,"description":"Studio contact information"}},"backgrounds":{"heroBackground":{"required":false,"description":"Hero section background image"},"liveBackground":{"required":false,"description":"Live streaming section background"}}},"style_inputs":{"font":{"required":true,"default":"Cormorant Garamond","description":"Primary font family"},"primaryColor":{"required":true,"default":"#3b82f6","description":"Primary brand color (hex)"},"secondaryColor":{"required":true,"default":"#8b5cf6","description":"Secondary accent color (hex)"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border style for gallery photos"}},"layout_structure":{"sections":["hero_center","couple_intro","event_details","precious_moments_gallery","live_stream","studio_details"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),ek=JSON.parse('{"layout_id":"layout_3","name":"Horizontal Timeline","description":"Interactive horizontal scrolling journey on desktop, beautiful vertical timeline on mobile. Tells a chronological love story.","version":"2.0","thumbnail":"/layout-previews/layout3.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Hero photo at start of timeline","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":10,"description":"Photos scattered along the timeline","supports_border":true}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Opening tagline"},"description":{"required":false,"max_length":400,"description":"Love story narrative"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for hero photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for timeline photos"}}},"style_inputs":{"font":{"required":true,"default":"Lato","description":"Primary font family"},"primaryColor":{"required":true,"default":"#be185d","description":"Timeline connector color"}},"layout_structure":{"sections":["horizontal_scroll_container","hero_section","story_card","moments_scattered","event_details_card","media_cta"]}}'),eS=JSON.parse('{"layout_id":"layout_4","name":"Modern Scrapbook","description":"A warm, personal layout designed like a handcrafted scrapbook. Features taped photos, handwritten fonts, stickers, and a textured paper feel.","version":"2.0","thumbnail":"/layout-previews/layout4.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main Polaroid Photo","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":12,"description":"Scattered polaroid photos","supports_border":true}},"videos":{"preWeddingVideo":{"required":false,"description":"Video tape style embed","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":60,"description":"Notebook header"},"description":{"required":false,"max_length":800,"description":"Handwritten note"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for main photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery photos"}}},"style_inputs":{"font":{"required":true,"default":"Indie Flower","description":"Handwriting font family"},"primaryColor":{"required":true,"default":"#44403c","description":"Ink color"}},"layout_structure":{"sections":["polaroid_hero","notebook_story","ticket_stubs_details","scattered_gallery","video_tape","footer"]}}'),eC=JSON.parse('{"layout_id":"layout_5","name":"Minimalist Card","description":"Ultra-clean card-based design with emphasis on negative space and elegant simplicity. Modern minimalist aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout5.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main couple photo in card","supports_border":true,"default_position":"center","aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":9,"description":"Minimal gallery (3x3 grid)","supports_border":false,"layout_style":["grid"]},"studioImage":{"required":false,"description":"Studio logo minimal","supports_border":false}},"videos":{"preWeddingVideo":{"required":false,"description":"Video in clean card","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":80,"description":"Brief welcome text"},"description":{"required":false,"max_length":300,"description":"Short description only"}},"studio_info":{"studioName":{"required":false,"description":"Studio name"}},"backgrounds":{"heroBackground":{"required":false,"description":"Subtle background"}}},"style_inputs":{"font":{"required":true,"default":"Montserrat","description":"Clean modern font"},"primaryColor":{"required":true,"default":"#000000","description":"Primary color (typically black/dark)"},"secondaryColor":{"required":true,"default":"#737373","description":"Secondary gray tone"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"}},"layout_structure":{"sections":["hero_card","info_card","gallery_card","live_card","footer_card"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eZ=JSON.parse('{"layout_id":"layout_6","name":"Romantic Overlay","description":"Full-screen couple photo with elegant text overlay, floating transparent cards, and dreamy romantic aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout6.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Full-screen background couple photo","supports_border":false,"default_position":"background","aspect_ratio":"landscape"},"bridePhoto":{"required":false,"description":"Bride photo (circular overlay)","supports_border":false,"aspect_ratio":"square"},"groomPhoto":{"required":false,"description":"Groom photo (circular overlay)","supports_border":false,"aspect_ratio":"square"},"preciousMoments":{"required":false,"type":"array","max_count":6,"description":"Floating card gallery (limited to 6)","supports_border":true,"layout_style":["grid"]}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Short, impactful romantic message"},"description":{"required":false,"max_length":300,"description":"Love story in floating card"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"},"studioContact":{"required":false,"description":"Studio contact information"}},"backgrounds":{"heroBackground":{"required":false,"description":"Alternative to couple photo as background"}}},"style_inputs":{"font":{"required":true,"default":"Pinyon Script","description":"Primary font family (script recommended)"},"primaryColor":{"required":true,"default":"#fbbf24","description":"Primary accent color (hex)"},"secondaryColor":{"required":true,"default":"#f59e0b","description":"Secondary accent color (hex)"}},"border_slots":{"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border style for gallery photos"}},"layout_structure":{"sections":["hero_fullscreen_overlay","description_card","precious_moments_floating","video_story","studio_details"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eP=JSON.parse('{"layout_id":"layout_7","name":"Editorial Grid","description":"Avant-garde broken grid layout. Asymmetrical image placement, sticky hero, brutalist typography, and museum-like aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout7.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Sticky hero background image","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":8,"description":"Asymmetrical gallery images","supports_border":true}},"videos":{"preWeddingVideo":{"required":false,"description":"Full-width motion picture","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":30,"description":"Top corner label"},"description":{"required":false,"max_length":600,"description":"Exhibition note (main text)"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for hero image"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery images"}}},"style_inputs":{"font":{"required":true,"default":"Space Grotesk","description":"Primary font family (Sans Serif recommended)"},"primaryColor":{"required":true,"default":"#000000","description":"Primary text color"}},"layout_structure":{"sections":["sticky_parallax_hero","exhibition_intro","asymmetrical_gallery","brutalist_details","cinema_video","footer"]}}'),eB=JSON.parse('{"layout_id":"layout_8","name":"Zen Minimalist","description":"Ultra-minimalist vertical flow with maximum white space, large impactful typography, and single-column layout focused on essential elements.","version":"2.0","thumbnail":"/layout-previews/layout8.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Primary couple photo (full-width)","supports_border":true,"aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":3,"description":"Three-column minimal gallery (limited to 3)","supports_border":false,"layout_style":["three-column"]}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Simple, elegant message"},"description":{"required":false,"max_length":300,"description":"Minimal love story"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"}}},"style_inputs":{"font":{"required":true,"default":"CINZEL","description":"Primary font family (serif recommended)"},"primaryColor":{"required":true,"default":"#18181b","description":"Primary text color (dark recommended)"},"secondaryColor":{"required":true,"default":"#71717a","description":"Secondary text color (gray recommended)"}},"layout_structure":{"sections":["hero_minimal","couple_photo_fullwidth","description_centered","event_details_vertical","precious_moments_three_column","video_story","studio_details_minimal"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}');eh.default,eg.default,ef.default,ev.default,eb.default,ey.default,ej.default,eN.default;let eM={layout_1:ew,layout_2:e_,layout_3:ek,layout_4:eS,layout_5:eC,layout_6:eZ,layout_7:eP,layout_8:eB},eE={layout_1:{bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride's individual photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom's individual photo"},couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Gallery photos with precious moments"},studioImage:{name:"studioImage",required:!1,supports_border:!0,max_count:1,description:"Studio partner logo/photo"}},layout_2:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo (hero image)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Gallery photos"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio partner logo"}},layout_3:{bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride's individual photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom's individual photo"},couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Horizontal scrolling gallery"}},layout_4:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo for magazine cover"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!1,max_count:1,description:"Bride feature photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!1,max_count:1,description:"Groom feature photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Gallery in magazine grid layout"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio logo for credits"}},layout_5:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Main couple photo in card"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Minimal gallery (3x3 grid max)"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio logo minimal"}},layout_6:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Full-screen background couple photo"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!1,max_count:1,description:"Bride photo (circular overlay)"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!1,max_count:1,description:"Groom photo (circular overlay)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Floating card gallery"}},layout_7:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Large feature photo in grid"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride photo in offset grid position"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom photo in offset grid position"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Staggered grid gallery"}},layout_8:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Primary couple photo (full-width)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:3,description:"Three-column minimal gallery (max 3)"}}},eF={layout_1:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for bride/groom photos (shared, groom mirrored)"},coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"},studioBorder:{name:"studioBorder",applies_to:["studioImage"],description:"Border for studio image"}},layout_2:{coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"}},layout_3:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for individual photos"},coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"}},layout_4:{coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for cover photo"}},layout_5:{},layout_6:{},layout_7:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for individual photos"}},layout_8:{}},eq={layout_1:{layout_id:"layout_1",name:"Classic Split Hero",description:"Side-by-side bride and groom photos with centered couple photo below",supports_youtube:!0,supports_studio_image:!0},layout_2:{layout_id:"layout_2",name:"Center Focus",description:"Large centered couple photo as hero with gallery below",supports_youtube:!0,supports_studio_image:!0},layout_3:{layout_id:"layout_3",name:"Horizontal Timeline",description:"Journey-style layout with bride and groom photos connected by timeline",supports_youtube:!0,supports_studio_image:!0},layout_4:{layout_id:"layout_4",name:"Magazine Style",description:"Editorial magazine-inspired layout with multi-column text and images",supports_youtube:!0,supports_studio_image:!0},layout_5:{layout_id:"layout_5",name:"Minimalist Card",description:"Ultra-clean card-based design with emphasis on negative space",supports_youtube:!0,supports_studio_image:!0},layout_6:{layout_id:"layout_6",name:"Romantic Overlay",description:"Full-screen couple photo with elegant text overlay and floating cards",supports_youtube:!0,supports_studio_image:!0},layout_7:{layout_id:"layout_7",name:"Editorial Grid",description:"Asymmetric grid layout inspired by editorial design with bold typography",supports_youtube:!0,supports_studio_image:!0},layout_8:{layout_id:"layout_8",name:"Zen Minimalist",description:"Ultra-minimalist vertical flow with maximum white space",supports_youtube:!0,supports_studio_image:!0}};function eT(e){var s;let t=eE[e]||{},a=eF[e]||{},r=eq[e]||null,l=Object.keys(t).length,i=Object.keys(a).length,o=(null===(s=t.preciousMoments)||void 0===s?void 0:s.max_count)||0;return{photoPlaceholderCount:l,borderSlotCount:i,hasBridePhoto:!!t.bridePhoto,hasGroomPhoto:!!t.groomPhoto,hasCouplePhoto:!!t.couplePhoto,hasPreciousMoments:!!t.preciousMoments,preciousMomentsMax:o,hasStudioImage:!!t.studioImage,supportsYouTube:(null==r?void 0:r.supports_youtube)||!1,supportsBorders:i>0,layoutName:(null==r?void 0:r.name)||e,layoutDescription:(null==r?void 0:r.description)||""}}var ez=t(71561);let eO=[{name:"Inter",fontFamily:"Inter, sans-serif",googleFont:"Inter:wght@400;600;700"},{name:"Great Vibes",fontFamily:"'Great Vibes', cursive",googleFont:"Great+Vibes"},{name:"Playfair Display",fontFamily:"'Playfair Display', serif",googleFont:"Playfair+Display:wght@400;600;700"},{name:"Cinzel",fontFamily:"'Cinzel', serif",googleFont:"Cinzel:wght@400;600;700"},{name:"Montserrat",fontFamily:"'Montserrat', sans-serif",googleFont:"Montserrat:wght@400;600;700"},{name:"Lato",fontFamily:"'Lato', sans-serif",googleFont:"Lato:wght@400;700"},{name:"Caveat",fontFamily:"'Caveat', cursive",googleFont:"Caveat:wght@400;700"},{name:"Bebas Neue",fontFamily:"'Bebas Neue', cursive",googleFont:"Bebas+Neue"},{name:"Rozha One",fontFamily:"'Rozha One', serif",googleFont:"Rozha+One"},{name:"Pinyon Script",fontFamily:"'Pinyon Script', cursive",googleFont:"Pinyon+Script"}];function eA(e){var s,t,l,i,n,d,c,p,h,g,f,v,y,j,N,w;let{weddingId:_,wedding:k}=e,{updateFont:S}=(0,ep.j)(),{updateBorder:C}=(0,ex.P)(),[Z,M]=(0,r.useState)(!1),[q,O]=(0,r.useState)(!1),[A,U]=(0,r.useState)(null),D=(0,r.useRef)({}),[R,L]=(0,r.useState)({}),[I,G]=(0,r.useState)(!1),[V,W]=(0,r.useState)(!1),[K,H]=(0,r.useState)({layout_page_background_id:null,stream_page_background_id:null}),[X,Q]=(0,r.useState)([]),[J,$]=(0,r.useState)([]),[ee,es]=(0,r.useState)(!0),[et,ea]=(0,r.useState)([]),[eh,eg]=(0,r.useState)(!1),[ef,ev]=(0,r.useState)("layout_1");(0,r.useEffect)(()=>{ey(),eN(),ew(),e_(),ek(),eb()},[_]);let eb=()=>{let e=eO.map(e=>e.googleFont).join("&family="),s=document.createElement("link");s.href="https://fonts.googleapis.com/css2?family=".concat(e,"&display=swap"),s.rel="stylesheet",document.head.appendChild(s)},ey=async()=>{try{let e=(await B.default.get("/api/weddings/".concat(_,"/theme"))).data,s=e.layout_id||e.theme_id||"layout_1";ev(s),U({layout_id:s,custom_font:e.custom_font||"Great Vibes",primary_color:e.primary_color||"#f43f5e",secondary_color:e.secondary_color||"#a855f7",pre_wedding_video:e.pre_wedding_video||"",studio_details:e.studio_details||{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:e.custom_messages||{welcome_text:"Welcome to our big day",description:""},theme_assets:e.theme_assets||{borders:{},background_image_id:null}})}catch(e){console.error("Error loading layout:",e),P.toast.error("Failed to load layout settings"),U({layout_id:"layout_1",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:{welcome_text:"Welcome to our big day",description:""},theme_assets:{borders:{},background_image_id:null}})}},ej=e=>{let s=[];return Object.keys(e).forEach(t=>{let a=e[t];if(Array.isArray(a))a.forEach((e,a)=>{if(e){let r=e.retryCount>=e.maxRetries,l=e.file_id&&e.file_id.startsWith("file_")&&["8","12","13","14","52","53","54","55","56","57"].includes(e.file_id.replace("file_","").replace(".jpg","")),i=e.retryCount>0&&!e.url;(r||l||i)&&s.push({slotName:t,index:a,photo:e})}});else if(a){let e=a.retryCount>=a.maxRetries,r=a.file_id&&a.file_id.startsWith("file_")&&["8","12","13","14","52","53","54","55","56","57"].includes(a.file_id.replace("file_","").replace(".jpg","")),l=a.retryCount>0&&!a.url;(e||r||l)&&s.push({slotName:t,index:0,photo:a})}}),s},eN=async()=>{try{G(!0),W(!1);let e=(await B.default.get("/api/weddings/".concat(_,"/layout-photos"))).data.photos||{},s=(0,em.bR)();console.log("[LOAD_LAYOUT_PHOTOS] Received photos from API:",Object.keys(e)),Object.keys(e).forEach(t=>{let a=e[t];Array.isArray(a)?a.forEach((e,a)=>{e&&e.url&&(e.url.startsWith("/api/")?(e.url="".concat(s).concat(e.url),console.log("[LOAD_LAYOUT_PHOTOS] ".concat(t,"[").concat(a,"]: Prepended base URL:"),e.url)):(e.url.startsWith("http://")||e.url.startsWith("https://"))&&console.log("[LOAD_LAYOUT_PHOTOS] ".concat(t,"[").concat(a,"]: Keeping absolute URL:"),e.url),e.retryCount=0,e.maxRetries=em.ZP.IMAGE.MAX_RETRIES||2)}):a&&a.url&&(a.url.startsWith("/api/")?(a.url="".concat(s).concat(a.url),console.log("[LOAD_LAYOUT_PHOTOS] ".concat(t,": Prepended base URL:"),a.url)):(a.url.startsWith("http://")||a.url.startsWith("https://"))&&console.log("[LOAD_LAYOUT_PHOTOS] ".concat(t,": Keeping absolute URL:"),a.url),a.retryCount=0,a.maxRetries=em.ZP.IMAGE.MAX_RETRIES||2)}),L(e),console.log("[LOAD_LAYOUT_PHOTOS] Photos loaded successfully")}catch(e){console.error("[LOAD_LAYOUT_PHOTOS] Error loading layout photos:",e),L({}),("ERR_NETWORK"===e.code||e.message.includes("Network Error"))&&W(!0)}finally{G(!1)}},ew=async()=>{try{console.log("[LOAD_BACKGROUNDS] Loading backgrounds for wedding:",_);let e=await B.default.get("/api/weddings/".concat(_,"/backgrounds"));console.log("[LOAD_BACKGROUNDS] API Response:",e.data);let s={layout_page_background_id:e.data.layout_page_background_id||null,stream_page_background_id:e.data.stream_page_background_id||null,layout_page_background_url:e.data.layout_page_background_url||null,stream_page_background_url:e.data.stream_page_background_url||null};H(s),console.log("[LOAD_BACKGROUNDS] State updated:",s),console.log("[LOAD_BACKGROUNDS] Layout preview URL:",s.layout_page_background_url),console.log("[LOAD_BACKGROUNDS] Stream preview URL:",s.stream_page_background_url)}catch(s){var e;console.error("[LOAD_BACKGROUNDS] Error:",s),console.error("[LOAD_BACKGROUNDS] Error details:",(null===(e=s.response)||void 0===e?void 0:e.data)||s.message),H({layout_page_background_id:null,stream_page_background_id:null,layout_page_background_url:null,stream_page_background_url:null})}},e_=async()=>{try{var e,s;es(!0);let[t,a]=await Promise.all([B.default.get("/api/borders"),B.default.get("/api/backgrounds")]);Q(t.data||[]),$(a.data||[]),console.log("[THEME_MANAGER] Loaded borders:",(null===(e=t.data)||void 0===e?void 0:e.length)||0),console.log("[THEME_MANAGER] Loaded backgrounds:",(null===(s=a.data)||void 0===s?void 0:s.length)||0)}catch(e){console.error("Error loading layout assets:",e),Q([]),$([])}finally{es(!1)}},ek=async()=>{try{var e;eg(!0);let s=await B.default.get("/api/profile/me");ea((null===(e=s.data)||void 0===e?void 0:e.studios)||[])}catch(e){console.error("Error loading studios:",e),ea([])}finally{eg(!1)}},eS=async e=>{if(!(Object.keys(R).length>0)||window.confirm("You have existing photos. Changing the layout may affect how they are displayed. Continue?"))try{M(!0),ev(e),await B.default.put("/api/weddings/".concat(_,"/theme"),{layout_id:e}),P.toast.success("Layout changed successfully!"),ey(),eN()}catch(e){console.error("Error changing layout:",e),P.toast.error("Failed to change layout")}finally{M(!1)}},eC=async e=>{try{M(!0),await B.default.put("/api/weddings/".concat(_,"/theme"),e),P.toast.success("Settings updated!"),ey()}catch(e){console.error("Error updating layout:",e),P.toast.error("Failed to update settings")}finally{M(!1)}},eZ=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;console.log("handlePhotoUpload called with:",{placeholder:e,fileName:null==s?void 0:s.name,retryCount:t});try{if(O(!0),!s){console.error("No file selected"),P.toast.error("No file selected");return}if(s.size>10485760){P.toast.error("File too large (".concat((s.size/1048576).toFixed(2),"MB). Maximum size is 10MB"));return}if(!s.type.startsWith("image/")){P.toast.error("Only image files are allowed");return}let t=new FormData;t.append("placeholder",e),t.append("file",s);let a=P.toast.loading("Uploading photo to ".concat(e,"..."));await B.default.post("/api/weddings/".concat(_,"/layout-photos/upload"),t,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5}),P.toast.dismiss(a),P.toast.success("Photo uploaded to ".concat(e,"!"),{duration:3e3,icon:""}),eN()}catch(i){var a,r;if(console.error("Error uploading photo:",i),("ECONNABORTED"===i.code||i.message.includes("timeout"))&&t<2){P.toast.warning("Upload timeout. Retrying... (".concat(t+1,"/").concat(2,")")),setTimeout(()=>eZ(e,s,t+1),2e3);return}let l="Failed to upload photo";if(null===(r=i.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.detail){let e=i.response.data.detail;"string"==typeof e?l=e:"object"==typeof e&&e.error&&(l=e.error)}else i.message&&(l=i.message);P.toast.error(l,{duration:5e3,action:t<2?{label:"Retry",onClick:()=>eZ(e,s,t+1)}:void 0})}finally{O(!1)}},eP=async(e,s)=>{if(window.confirm("Are you sure you want to delete this photo?"))try{let t=P.toast.loading("Deleting photo...");await B.default.delete("/api/weddings/".concat(_,"/layout-photos/").concat(e,"/").concat(s)),P.toast.dismiss(t),P.toast.success("Photo deleted!",{duration:2e3,icon:"\uD83D\uDDD1"}),eN()}catch(s){var t,a;console.error("Error deleting photo:",s);let e="Failed to delete photo";if(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail){let t=s.response.data.detail;"string"==typeof t?e=t:"object"==typeof t&&t.error&&(e=t.error)}P.toast.error(e,{duration:4e3})}},eB=async e=>{try{M(!0),console.log("[BACKGROUND_UPDATE] Updating backgrounds:",e),await B.default.put("/api/weddings/".concat(_,"/backgrounds"),e),console.log("[BACKGROUND_UPDATE] Background update API call successful"),P.toast.success("Background updated! Refreshing...",{duration:2e3}),await new Promise(e=>setTimeout(e,500)),await ew(),console.log("[BACKGROUND_UPDATE] Backgrounds reloaded"),window.dispatchEvent(new CustomEvent("wedding-backgrounds-updated",{detail:{weddingId:_,updates:e,timestamp:Date.now()}})),setTimeout(()=>{console.log("[BACKGROUND_UPDATE] Forcing page reload to apply background changes"),window.location.reload()},1e3)}catch(e){var s,t;console.error("[BACKGROUND_UPDATE] Error updating backgrounds:",e),P.toast.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to update backgrounds")}finally{M(!1)}},eA=A||{layout_id:"layout_1",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:{welcome_text:"Welcome to our big day",description:""},theme_assets:{borders:{},background_image_id:null}},eU=eq[ef]||null,eD=eE[ef]||{},eR=eF[ef]||{};if(eT(ef),!A)return(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 animate-spin text-rose-500"})});let eL=Object.keys(eM).map(e=>({id:e,...eM[e]}));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(el.Z,{className:"w-5 h-5"}),"Wedding Layout"]}),(0,a.jsx)(o.SZ,{children:"Choose a layout structure for your wedding page"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:eL.map(e=>{let s=e.layout_id===ef,t=eT(e.layout_id);return(0,a.jsxs)("button",{"data-testid":"layout-card-".concat(e.layout_id),onClick:()=>eS(e.layout_id),disabled:Z,className:"relative p-4 rounded-lg border-2 text-left transition-all group ".concat(s?"border-rose-500 bg-rose-50":"border-gray-200 hover:border-rose-300"," ").concat(Z?"opacity-50 cursor-not-allowed":""),children:[(0,a.jsx)("div",{className:"mb-3 aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded overflow-hidden",children:e.thumbnail?(0,a.jsx)("img",{src:e.thumbnail,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(el.Z,{className:"w-12 h-12 text-gray-300"})})}),(0,a.jsx)("div",{className:"font-semibold text-sm",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1",children:[t.supportsYouTube&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-100 text-red-700 text-[10px] rounded-full",children:[(0,a.jsx)(ei.Z,{className:"w-2.5 h-2.5"}),"YouTube"]}),t.supportsBorders&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-[10px] rounded-full",children:[(0,a.jsx)(eo.Z,{className:"w-2.5 h-2.5"}),"Borders"]}),t.photoPlaceholderCount&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] rounded-full",children:[(0,a.jsx)(b.Z,{className:"w-2.5 h-2.5"}),t.photoPlaceholderCount," slots"]})]}),s&&(0,a.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 bg-rose-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(en.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/90 rounded-lg p-3 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:(0,a.jsxs)("div",{className:"text-white text-xs space-y-1",children:[(0,a.jsx)("p",{className:"font-semibold",children:t.layoutName}),(0,a.jsx)("p",{className:"text-gray-300 text-[10px]",children:t.layoutDescription}),(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-2 mt-2 space-y-1",children:[t.hasBridePhoto&&(0,a.jsx)("p",{children:" Bride photo"}),t.hasGroomPhoto&&(0,a.jsx)("p",{children:" Groom photo"}),t.hasCouplePhoto&&(0,a.jsx)("p",{children:" Couple photo"}),t.hasPreciousMoments&&(0,a.jsxs)("p",{children:[" Gallery (max ",t.preciousMomentsMax,")"]})]})]})})]},e.layout_id)})})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(ed.Z,{className:"w-5 h-5"}),"Typography & Colors"]}),(0,a.jsx)(o.SZ,{children:"Customize fonts and color scheme"})]}),(0,a.jsxs)(o.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(E._,{className:"flex items-center gap-2",children:[(0,a.jsx)(ed.Z,{className:"w-4 h-4"}),"Font Family"]}),(0,a.jsxs)(er.Ph,{value:eA.custom_font,onValueChange:e=>{eC({custom_font:e}),S(e)},children:[(0,a.jsx)(er.i4,{className:"w-full","data-testid":"font-selector",children:(0,a.jsx)(er.ki,{})}),(0,a.jsx)(er.Bw,{children:eO.map(e=>(0,a.jsx)(er.Ql,{value:e.name,children:(0,a.jsx)("span",{style:{fontFamily:e.fontFamily},className:"text-lg",children:e.name})},e.name))})]}),(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Preview:"}),(0,a.jsxs)("p",{className:"text-3xl",style:{fontFamily:(null===(s=eO.find(e=>e.name===eA.custom_font))||void 0===s?void 0:s.fontFamily)||"Inter"},children:[(null==k?void 0:k.bride_name)||"Bride"," & ",(null==k?void 0:k.groom_name)||"Groom"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Primary Color"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"color",value:eA.primary_color,onChange:e=>eC({primary_color:e.target.value}),className:"w-12 h-10 rounded border cursor-pointer",disabled:Z}),(0,a.jsx)(Y.I,{value:eA.primary_color,onChange:e=>eC({primary_color:e.target.value}),className:"flex-1",placeholder:"#f43f5e",disabled:Z})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Secondary Color"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"color",value:eA.secondary_color,onChange:e=>eC({secondary_color:e.target.value}),className:"w-12 h-10 rounded border cursor-pointer",disabled:Z}),(0,a.jsx)(Y.I,{value:eA.secondary_color,onChange:e=>eC({secondary_color:e.target.value}),className:"flex-1",placeholder:"#a855f7",disabled:Z})]})]})]})]})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"Welcome Message & Description"}),(0,a.jsx)(o.SZ,{children:"Customize the text content for your wedding page"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E._,{children:"Welcome Message"}),(0,a.jsx)(Y.I,{value:(null===(t=eA.custom_messages)||void 0===t?void 0:t.welcome_text)||"",onChange:e=>eC({custom_messages:{...eA.custom_messages,welcome_text:e.target.value}}),placeholder:"Welcome to our big day",disabled:Z})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E._,{children:"Description"}),(0,a.jsx)(F.g,{value:(null===(l=eA.custom_messages)||void 0===l?void 0:l.description)||"",onChange:e=>eC({custom_messages:{...eA.custom_messages,description:e.target.value}}),placeholder:"Share your love story...",rows:4,disabled:Z})]})]})]}),(null==eU?void 0:eU.supports_youtube)&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(ei.Z,{className:"w-5 h-5"}),"Pre-Wedding Video"]}),(0,a.jsx)(o.SZ,{children:"Add a YouTube video (supported by this layout)"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E._,{children:"YouTube URL"}),(0,a.jsx)(Y.I,{value:eA.pre_wedding_video||"",onChange:e=>{let s=e.target.value;eC({pre_wedding_video:((0,ez.yk)(s)?(0,ez.Tc)(s):s)||s})},placeholder:"https://youtube.com/watch?v=... or https://youtu.be/...",disabled:Z}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Supports: youtube.com/watch?v=, youtu.be/, and embed URLs"})]}),eA.pre_wedding_video&&(0,ez.yk)(eA.pre_wedding_video)&&(0,a.jsx)("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:(0,a.jsx)("iframe",{src:(0,ez.Tc)(eA.pre_wedding_video),title:"Pre-wedding video preview",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5"}),"Photos"]}),(0,a.jsx)(o.SZ,{children:"Upload photos based on your selected layout's placeholders"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Selected Layout:"})," ",null==eU?void 0:eU.name]}),(0,a.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:null==eU?void 0:eU.description})]}),I?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Loading photos..."]}):(0,a.jsxs)(a.Fragment,{children:[(()=>{let e=ej(R);return e.length>0?(0,a.jsxs)(u.bZ,{variant:"destructive",className:"mb-4",children:[(0,a.jsx)(z.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Broken Photo References Detected:"})," ",e.length," photo(s) reference files that no longer exist on Telegram."]}),(0,a.jsx)("div",{className:"space-y-1",children:e.map(e=>{let{slotName:s,index:t,photo:r}=e;return(0,a.jsxs)("div",{className:"text-xs flex items-center justify-between",children:[(0,a.jsxs)("span",{children:[s," ",t>0?"(".concat(t+1,")"):""]}),(0,a.jsx)("button",{onClick:()=>{window.confirm("Clear broken photo from ".concat(s).concat(t>0?" (".concat(t+1,")"):"","?"))&&eP(s,t)},className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Clear"})]},"".concat(s,"-").concat(t))})}),(0,a.jsx)("button",{onClick:()=>{window.confirm("Clear all ".concat(e.length," broken photo references?"))&&e.forEach(e=>{let{slotName:s,index:t}=e;eP(s,t)})},className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 mt-2",children:"Clear All Broken Photos"})]})})]}):null})(),V&&(0,a.jsxs)(u.bZ,{variant:"destructive",className:"mb-4",children:[(0,a.jsx)(z.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{children:[(0,a.jsx)("strong",{children:"Photo Loading Issue:"})," Unable to load photos from server. This may be due to network connectivity or server issues. Photos will show as placeholders until the issue is resolved."]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(eD).map(e=>{let[s,t]=e,r=R[s],l="preciousMoments"===s,i=l?(null==r?void 0:r.length)||0:r?1:0,o=t.max_count,n=i<o,d="border-gray-300 bg-gray-50 text-gray-600";return s.includes("bride")?d="border-pink-300 bg-pink-50 text-pink-600":s.includes("groom")?d="border-blue-300 bg-blue-50 text-blue-600":s.includes("couple")?d="border-purple-300 bg-purple-50 text-purple-600":s.includes("precious")||s.includes("Moments")?d="border-green-300 bg-green-50 text-green-600":s.includes("studio")&&(d="border-amber-300 bg-amber-50 text-amber-600"),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"aspect-square rounded-lg border-2 border-dashed ".concat(d," hover:border-rose-500 hover:bg-rose-50 transition-colors cursor-pointer flex flex-col items-center justify-center gap-2 group"),children:[(0,a.jsx)("input",{type:"file",accept:"image/*",className:"hidden","data-testid":"upload-".concat(s),multiple:l,ref:e=>{e&&(D.current[s]=e)},disabled:q,onChange:e=>{let t=Array.from(e.target.files||[]);if(!t.length){e.target.value="";return}if(l){if(i>=o){P.toast.error("Gallery is full. Delete a photo to add more."),e.target.value="";return}let a=o-i,r=t.slice(0,a);t.length>a&&P.toast.warning("Only ".concat(a," photo(s) can be added. Extra files were ignored.")),(async()=>{for(let e of r)console.log("File selected for upload:",e.name,"to slot:",s),await eZ(s,e)})()}else{let e=t[0];console.log("File selected for upload:",e.name,"to slot:",s),eZ(s,e)}e.target.value=""}}),q?(0,a.jsx)(m.Z,{className:"w-6 h-6 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec.Z,{className:"w-6 h-6 mb-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-center px-2",children:t.description.split(" ").slice(0,2).join(" ")}),t.required&&(0,a.jsx)("span",{className:"text-[10px] text-red-500 font-semibold",children:"Required"}),!n&&(0,a.jsx)("span",{className:"text-[10px] text-gray-500",children:l?"Full":"Replace"}),l&&(0,a.jsxs)("span",{className:"text-[10px] mt-0.5",children:[i,"/",o]})]})]}),r&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-1 cursor-pointer",onClick:()=>{if(q)return;let e=D.current[s];e&&e.click()},children:Array.isArray(r)?r.map((e,r)=>(0,a.jsxs)("div",{className:"relative group aspect-square","data-testid":"photo-".concat(s,"-").concat(r),children:[(0,a.jsx)("img",{src:e.url||e,alt:t.description,className:"w-full h-full object-cover rounded border",onError:s=>{if(console.error("Photo failed to load:",e.url||e,s),e.fallbackUrl&&e.retryCount<e.maxRetries){console.log("Retrying with fallback URL (attempt ".concat(e.retryCount+1,"/").concat(e.maxRetries,"):"),e.fallbackUrl),e.retryCount++,s.target.src=e.fallbackUrl;return}V||(W(!0),console.warn("Photo connectivity issue detected - showing user warning")),s.target.style.display="none",s.target.nextSibling.style.display="flex"},onLoad:s=>{console.log("Photo loaded successfully:",e.url||e),s.target.nextSibling.style.display="none"}}),(0,a.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded border",style:{display:"none"},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation();let a=e.photo_id||"photo-".concat(r);console.log("Deleting photo:",{slotName:s,photoId:a,photo:e}),eP(s,a)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":"delete-".concat(s,"-").concat(r),children:(0,a.jsx)(T.Z,{className:"w-3 h-3"})})]},e.photo_id||r)):(0,a.jsxs)("div",{className:"relative group aspect-square","data-testid":"photo-".concat(s),children:[(0,a.jsx)("img",{src:r.url||r,alt:t.description,className:"w-full h-full object-cover rounded border",onError:e=>{if(console.error("Photo failed to load:",r.url||r,e),r.fallbackUrl&&r.retryCount<r.maxRetries){console.log("Retrying with fallback URL (attempt ".concat(r.retryCount+1,"/").concat(r.maxRetries,"):"),r.fallbackUrl),r.retryCount++,e.target.src=r.fallbackUrl;return}V||(W(!0),console.warn("Photo connectivity issue detected - showing user warning")),e.target.style.display="none",e.target.nextSibling.style.display="flex"},onLoad:e=>{console.log("Photo loaded successfully:",r.url||r),e.target.nextSibling.style.display="none"}}),(0,a.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded border",style:{display:"none"},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),eP(s,r.photo_id||"0")},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":"delete-".concat(s),children:(0,a.jsx)(T.Z,{className:"w-3 h-3"})})]})})]},s)})}),(()=>{let e=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=eE[e]||{},a=[];for(let[e,r]of Object.entries(t))r.required&&!s[e]&&a.push({name:e,description:r.description});return{isValid:0===a.length,missingRequired:a}}(ef,R);return e.isValid?(0,a.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[(0,a.jsx)(en.Z,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("p",{className:"text-xs text-green-800 font-medium",children:"All required photos uploaded!"})]}):(0,a.jsxs)("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-2",children:[(0,a.jsx)(z.Z,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-xs text-amber-800",children:[(0,a.jsx)("p",{className:"font-semibold mb-1",children:"Missing required photos:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-0.5",children:e.missingRequired.map(e=>(0,a.jsx)("li",{children:e.description},e.name))})]})]})})()]})]})]}),Object.keys(eR).length>0&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(eo.Z,{className:"w-5 h-5"}),"Photo Borders"]}),(0,a.jsx)(o.SZ,{children:"Customize borders for photos (based on layout support)"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:ee?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Loading borders..."]}):0===X.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800",children:"No borders available"}),(0,a.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload borders first"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(eR).map(e=>{var s,t;let[r,l]=e,i=null;"brideGroomBorder"===r?i="bride_groom_border_id":"coupleBorder"===r?i="couple_border_id":"preciousMomentsBorder"===r?i="precious_moments_border_id":"studioBorder"===r&&(i="studio_border_id");let o=null===(t=eA.theme_assets)||void 0===t?void 0:null===(s=t.borders)||void 0===s?void 0:s[i],n=X.find(e=>e.id===o);return(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-lg border",children:[(0,a.jsxs)(E._,{className:"text-xs font-medium flex items-center justify-between",children:[(0,a.jsx)("span",{children:l.description}),"brideGroomBorder"===r&&(0,a.jsx)("span",{className:"text-[10px] text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:"Groom mirrored"})]}),(0,a.jsxs)(er.Ph,{value:o||"none",onValueChange:e=>{var s;eC({theme_assets:{...eA.theme_assets,borders:{...null===(s=eA.theme_assets)||void 0===s?void 0:s.borders,[i]:"none"===e?null:e}}}),C(i,"none"===e?null:e)},children:[(0,a.jsx)(er.i4,{className:"text-xs bg-white","data-testid":"border-selector-".concat(r),children:(0,a.jsx)(er.ki,{placeholder:"Select border"})}),(0,a.jsxs)(er.Bw,{children:[(0,a.jsx)(er.Ql,{value:"none",children:"None"}),X.filter(e=>{var s,t,a,l,i,o;return"brideGroomBorder"===r||("coupleBorder"===r?(null===(s=e.tags)||void 0===s?void 0:s.includes("couple"))||!(null===(t=e.tags)||void 0===t?void 0:t.includes("individual")):"preciousMomentsBorder"===r?(null===(a=e.tags)||void 0===a?void 0:a.includes("gallery"))||!(null===(l=e.tags)||void 0===l?void 0:l.includes("individual")):"studioBorder"!==r||(null===(i=e.tags)||void 0===i?void 0:i.includes("minimal"))||(null===(o=e.tags)||void 0===o?void 0:o.includes("studio")))}).map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&(0,a.jsx)("img",{src:e.cdn_url,alt:e.name,className:"w-8 h-8 object-cover rounded border"}),(0,a.jsx)("span",{children:e.name}),e.tags&&e.tags.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tags.join(", "),")"]})]})},e.id))]})]}),(null==n?void 0:n.cdn_url)&&(0,a.jsx)("div",{className:"mt-2 p-2 bg-white rounded border",children:(0,a.jsx)("img",{src:n.cdn_url,alt:"Preview",className:"w-full h-20 object-contain"})})]},r)})})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Stream Border"]}),(0,a.jsx)(o.SZ,{children:"Add a decorative border around the video player during live stream"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:ee?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Loading borders..."]}):0===X.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800",children:"No borders available"}),(0,a.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload borders first"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E._,{className:"text-sm font-medium",children:"Border for Video Player"}),(0,a.jsxs)(er.Ph,{value:(null===(n=eA.theme_assets)||void 0===n?void 0:null===(i=n.borders)||void 0===i?void 0:i.stream_border_id)||"none",onValueChange:e=>{var s;eC({theme_assets:{...eA.theme_assets,borders:{...null===(s=eA.theme_assets)||void 0===s?void 0:s.borders,stream_border_id:"none"===e?null:e}}})},children:[(0,a.jsx)(er.i4,{className:"text-xs bg-white","data-testid":"border-selector-stream",children:(0,a.jsx)(er.ki,{placeholder:"Select border for stream"})}),(0,a.jsxs)(er.Bw,{children:[(0,a.jsx)(er.Ql,{value:"none",children:"None"}),X.map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&(0,a.jsx)("img",{src:e.cdn_url,alt:e.name,className:"w-8 h-8 object-cover rounded border"}),(0,a.jsx)("span",{children:e.name}),e.tags&&e.tags.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tags.join(", "),")"]})]})},e.id))]})]}),(()=>{var e,s;let t=null===(s=eA.theme_assets)||void 0===s?void 0:null===(e=s.borders)||void 0===e?void 0:e.stream_border_id,r=X.find(e=>e.id===t);return(null==r?void 0:r.cdn_url)?(0,a.jsxs)("div",{className:"mt-2 p-2 bg-white rounded border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),(0,a.jsx)("img",{src:r.cdn_url,alt:"Stream Border Preview",className:"w-full h-20 object-contain"})]}):null})(),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"This border will appear around the video player during live streaming"})]})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5"}),"Background Images"]}),(0,a.jsx)(o.SZ,{children:"Set separate backgrounds for layout page and stream page"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:ee?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Loading backgrounds..."]}):0===J.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800",children:"No backgrounds available"}),(0,a.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload backgrounds first"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E._,{className:"text-sm font-semibold",children:"Layout Page Background"}),(0,a.jsxs)(er.Ph,{value:K.layout_page_background_id||"none",onValueChange:e=>{eB({layout_page_background_id:"none"===e?null:e})},children:[(0,a.jsx)(er.i4,{className:"bg-white","data-testid":"layout-background-selector",children:(0,a.jsx)(er.ki,{placeholder:"Select background for layout page"})}),(0,a.jsxs)(er.Bw,{children:[(0,a.jsx)(er.Ql,{value:"none",children:"None"}),J.map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&(0,a.jsx)("img",{src:e.cdn_url,alt:e.name,className:"w-12 h-8 object-cover rounded border"}),(0,a.jsx)("span",{children:e.name})]})},e.id))]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[K.layout_page_background_id&&!K.layout_page_background_url&&(0,a.jsx)("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-700",children:"Background selected but URL not loaded. Check console for details."}),K.layout_page_background_url&&(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),(0,a.jsx)("img",{src:K.layout_page_background_url,alt:"Layout Background",className:"w-full h-32 object-cover rounded",onError:e=>{console.error("[BACKGROUND_IMAGE_ERROR] Failed to load:",K.layout_page_background_url),e.target.style.display="none"}}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1 break-all",children:["URL: ",K.layout_page_background_url]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E._,{className:"text-sm font-semibold",children:"Stream Page Background"}),(0,a.jsxs)(er.Ph,{value:K.stream_page_background_id||"none",onValueChange:e=>{eB({stream_page_background_id:"none"===e?null:e})},children:[(0,a.jsx)(er.i4,{className:"bg-white","data-testid":"stream-background-selector",children:(0,a.jsx)(er.ki,{placeholder:"Select background for stream page"})}),(0,a.jsxs)(er.Bw,{children:[(0,a.jsx)(er.Ql,{value:"none",children:"None"}),J.map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&(0,a.jsx)("img",{src:e.cdn_url,alt:e.name,className:"w-12 h-8 object-cover rounded border"}),(0,a.jsx)("span",{children:e.name})]})},e.id))]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[K.stream_page_background_id&&!K.stream_page_background_url&&(0,a.jsx)("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-700",children:"Background selected but URL not loaded. Check console for details."}),K.stream_page_background_url&&(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),(0,a.jsx)("img",{src:K.stream_page_background_url,alt:"Stream Background",className:"w-full h-32 object-cover rounded",onError:e=>{console.error("[BACKGROUND_IMAGE_ERROR] Failed to load:",K.stream_page_background_url),e.target.style.display="none"}}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1 break-all",children:["URL: ",K.stream_page_background_url]})]})]})]})]})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(eu.Z,{className:"w-5 h-5"}),"Studio Partner"]}),(0,a.jsx)(o.SZ,{children:"Select a studio from your profile (optional)"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:eh?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Loading studios..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(er.Ph,{value:(null===(d=eA.studio_details)||void 0===d?void 0:d.studio_id)||"none",onValueChange:async e=>{if("none"===e)eC({studio_details:{studio_id:"",name:"",logo_url:"",default_image_url:"",website:"",email:"",phone:"",address:"",contact:"",show_details:!1}});else{let s=et.find(s=>s.id===e);s&&(eC({studio_details:{studio_id:s.id,name:s.name||"",logo_url:s.logo_url||"",default_image_url:s.default_image_url||"",website:s.website||"",email:s.email||"",phone:s.phone||"",address:s.address||"",contact:s.contact||"",show_details:!0}}),s.default_image_url&&P.toast.success("Studio selected with image!"))}},disabled:Z||0===et.length,children:[(0,a.jsx)(er.i4,{className:"bg-white","data-testid":"studio-selector",children:(0,a.jsx)(er.ki,{placeholder:0===et.length?"No studios available - Create one in Profile":"Select a studio"})}),(0,a.jsxs)(er.Bw,{children:[(0,a.jsx)(er.Ql,{value:"none",children:"None"}),et.map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.default_image_url&&(0,a.jsx)("img",{src:e.default_image_url,alt:e.name,className:"w-8 h-8 object-cover rounded"}),(0,a.jsx)("span",{children:e.name})]})},e.id))]})]}),0===et.length&&(0,a.jsx)("p",{className:"text-xs text-amber-600",children:"Go to Profile  Studios to create a studio first"})]}),(null===(c=eA.studio_details)||void 0===c?void 0:c.studio_id)&&(null===(p=eA.studio_details)||void 0===p?void 0:p.studio_id)!==""&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Preview:"}),(null===(h=eA.studio_details)||void 0===h?void 0:h.default_image_url)?(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("img",{src:eA.studio_details.default_image_url,alt:"Studio",className:"w-full h-32 object-cover rounded"})}):(0,a.jsxs)("div",{className:"h-32 mx-auto flex flex-col items-center justify-center bg-gray-100 rounded mb-3",children:[(0,a.jsx)(eu.Z,{className:"w-8 h-8 text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-400 text-xs text-center mt-1",children:"No studio image"})]}),(null===(g=eA.studio_details)||void 0===g?void 0:g.logo_url)&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("img",{src:eA.studio_details.logo_url,alt:eA.studio_details.name||"Studio logo",className:"h-16 mx-auto object-contain"})}),(null===(f=eA.studio_details)||void 0===f?void 0:f.show_details)&&(0,a.jsxs)("div",{className:"text-center text-sm space-y-1",children:[(null===(v=eA.studio_details)||void 0===v?void 0:v.name)&&(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:eA.studio_details.name}),(null===(y=eA.studio_details)||void 0===y?void 0:y.email)&&(0,a.jsx)("p",{className:"text-gray-600",children:eA.studio_details.email}),(null===(j=eA.studio_details)||void 0===j?void 0:j.phone)&&(0,a.jsx)("p",{className:"text-gray-600",children:eA.studio_details.phone})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(E._,{className:"text-sm font-medium text-purple-900",children:"Show Studio Details"}),(0,a.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:"Display contact info along with logo"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return eC({studio_details:{...eA.studio_details,show_details:!(null===(e=eA.studio_details)||void 0===e?void 0:e.show_details)}})},className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat((null===(N=eA.studio_details)||void 0===N?void 0:N.show_details)?"bg-purple-600":"bg-gray-300"),disabled:Z,"data-testid":"studio-details-toggle",children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat((null===(w=eA.studio_details)||void 0===w?void 0:w.show_details)?"translate-x-6":"translate-x-1")})})]})]})]})})]})]})}var eU=t(67783),eD=t(19178),eR=t(9229),eL=t(55404),eI=t(42555);function eG(e){var s,t,l;let{weddingId:n,wedding:d,onStatusChange:c}=e,[p,x]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{var e;if((null==d?void 0:d.streaming_type)==="youtube"&&(null==d?void 0:null===(e=d.youtube_settings)||void 0===e?void 0:e.broadcast_id)){y();let e=setInterval(y,1e4);return()=>clearInterval(e)}},[null==d?void 0:null===(s=d.youtube_settings)||void 0===s?void 0:s.broadcast_id]);let y=async()=>{try{b(!0);let e=await B.default.get("/api/youtube/status/".concat(n));f(e.data)}catch(e){console.error("Error fetching broadcast status:",e)}finally{b(!1)}},j=async e=>{try{if(x(!0),await B.default.post("/api/youtube/transition",{broadcast_id:d.youtube_settings.broadcast_id,status:e}),P.toast.success("Broadcast transitioned to ".concat(e)),await y(),c&&c(),"complete"===e)try{await B.default.post("/api/youtube/save-video-to-media/".concat(n)),P.toast.success("YouTube video saved to media gallery!")}catch(e){console.error("Error saving video to media:",e),P.toast.error("Broadcast ended but failed to save video to gallery")}}catch(a){var s,t;console.error("Error transitioning broadcast:",a),P.toast.error((null===(t=a.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to transition to ".concat(e))}finally{x(!1)}};if(!(null==d?void 0:null===(t=d.youtube_settings)||void 0===t?void 0:t.broadcast_id))return null;let w=(null==h?void 0:h.life_cycle_status)||"unknown",_="complete"===w;return(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(eR.Z,{className:"w-5 h-5 text-red-600"}),"YouTube Broadcast Controls"]}),(0,a.jsx)(o.SZ,{children:"Manage your YouTube Live broadcast status"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat((()=>{switch(w){case"live":return"bg-red-500 animate-pulse";case"testing":return"bg-yellow-500";case"complete":return"bg-gray-500";default:return"bg-blue-500"}})())}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:(()=>{switch(w){case"ready":return"Ready to Go Live";case"testing":return"Testing (Private)";case"live":return"LIVE";case"complete":return"Ended";case"revoked":return"Cancelled";default:return w}})()}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"live"===w?"Your stream is live on YouTube":"testing"===w?"Stream is in testing mode (not visible to public)":_?"Broadcast has ended":"Broadcast is ready to start"})]})]}),v&&(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin text-gray-400"})]}),(null===(l=d.youtube_settings)||void 0===l?void 0:l.youtube_video_url)&&(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"View on YouTube"}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>window.open(d.youtube_settings.youtube_video_url,"_blank"),children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Open"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 pt-4 border-t",children:["ready"===w&&(0,a.jsxs)(i.z,{onClick:()=>j("testing"),disabled:p,className:"w-full bg-yellow-500 hover:bg-yellow-600",children:[p?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(ei.Z,{className:"w-4 h-4 mr-2"}),"Start Testing (Private)"]}),("testing"===w||"ready"===w)&&(0,a.jsxs)(i.z,{onClick:()=>j("live"),disabled:p,className:"w-full bg-red-600 hover:bg-red-700",children:[p?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(eL.Z,{className:"w-4 h-4 mr-2"}),"Go Live on YouTube"]}),("live"===w||"testing"===w)&&(0,a.jsxs)(i.z,{onClick:()=>{confirm("Are you sure you want to end the YouTube broadcast? This will make it available as a video on your channel.")&&j("complete")},disabled:p,variant:"destructive",className:"w-full",children:[p?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(eI.Z,{className:"w-4 h-4 mr-2"}),"End Broadcast"]}),_&&(0,a.jsxs)(u.bZ,{className:"bg-green-50 border-green-200",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(u.X,{className:"text-green-800",children:"Broadcast ended successfully. Video is now available on your YouTube channel."})]})]}),!_&&(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(z.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{className:"text-xs",children:[(0,a.jsx)("strong",{children:"How it works:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Testing:"})," Start OBS and test privately before going live"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Go Live:"})," Make your stream visible to the public on YouTube"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"End:"})," Finish the broadcast and save the recording"]})]})]})]})]})]})}var eY=t(40933);function eV(e){var s,t;let{weddingId:l,wedding:n}=e,[c,p]=(0,r.useState)([]),[x,h]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{var e;(null==n?void 0:null===(e=n.youtube_settings)||void 0===e?void 0:e.auth_connected)&&f&&b()},[f,null==n?void 0:null===(s=n.youtube_settings)||void 0===s?void 0:s.auth_connected]);let b=async()=>{try{h(!0);let e=await B.default.get("/api/youtube/broadcasts");p(e.data.broadcasts||[])}catch(e){console.error("Error fetching broadcasts:",e),P.toast.error("Failed to load YouTube broadcasts")}finally{h(!1)}};if(!(null==n?void 0:null===(t=n.youtube_settings)||void 0===t?void 0:t.auth_connected))return null;let y=e=>{let s={ready:{color:"bg-blue-500",text:"Ready"},testing:{color:"bg-yellow-500",text:"Testing"},live:{color:"bg-red-500",text:"Live"},complete:{color:"bg-green-500",text:"Completed"},revoked:{color:"bg-gray-500",text:"Cancelled"}}[e]||{color:"bg-gray-400",text:e};return(0,a.jsx)(d.C,{className:"".concat(s.color," text-white"),children:s.text})};return(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(eR.Z,{className:"w-5 h-5 text-red-600"}),"Your YouTube Broadcasts"]}),(0,a.jsx)(o.SZ,{children:"View and manage your previous YouTube Live streams"})]}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{v(!f),f||b()},children:[f?"Hide":"Show"," Broadcasts"]})]})}),f&&(0,a.jsxs)(o.aY,{className:"space-y-4",children:[x?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 animate-spin text-rose-500"})}):0===c.length?(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{children:"No previous broadcasts found. Create your first YouTube broadcast to get started!"})]}):(0,a.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[e.thumbnail_url&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("img",{src:e.thumbnail_url,alt:e.title,className:"w-32 h-20 object-cover rounded"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm line-clamp-2",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:e.description})]}),y(e.life_cycle_status)]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-xs text-gray-600",children:[e.scheduled_start_time&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(k.Z,{className:"w-3 h-3"}),(0,M.WU)(new Date(e.scheduled_start_time),"MMM d, yyyy")]}),e.actual_start_time&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eY.Z,{className:"w-3 h-3"}),"Started: ",(0,M.WU)(new Date(e.actual_start_time),"p")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>window.open(e.youtube_video_url,"_blank"),children:[(0,a.jsx)(g.Z,{className:"w-3 h-3 mr-1"}),"View on YouTube"]}),"complete"===e.life_cycle_status&&(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:async()=>{try{await B.default.post("/api/youtube/save-video-to-media/".concat(l),{broadcast_id:e.broadcast_id}),P.toast.success("Video added to media gallery!")}catch(e){P.toast.error("Failed to add video to gallery")}},children:[(0,a.jsx)(eR.Z,{className:"w-3 h-3 mr-1"}),"Add to Gallery"]})]})]})]})},e.broadcast_id))}),c.length>0&&(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:b,disabled:x,className:"w-full",children:[x?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Refresh List"]})]})]})}var eW=t(22468),eK=t(88492),eH=t.n(eK);function eX(e){var s,t,l,n,c;let{weddingId:u,currentTemplateId:p,onTemplateAssigned:h}=e,[g,f]=(0,r.useState)([]),[v,b]=(0,r.useState)(!0),[y,N]=(0,r.useState)(p||""),[w,_]=(0,r.useState)(!1),[k,S]=(0,r.useState)(null),[C,Z]=(0,r.useState)(!1),[M,E]=(0,r.useState)(null),[F,q]=(0,r.useState)([]),[z,O]=(0,r.useState)(!1);(0,r.useEffect)(()=>{A(),U()},[u]);let A=async()=>{try{b(!0),console.log("Loading templates from /api/video-templates");let e=await B.default.get("/api/video-templates");console.log("Templates loaded:",e.data),f(e.data||[])}catch(e){console.error("Failed to load templates:",e),P.toast.error("Failed to load video templates")}finally{b(!1)}},U=async()=>{try{let s=await B.default.get("/api/weddings/".concat(u,"/template-assignment"));if(console.log("Current assignment:",s.data),s.data.assignment_id){var e;S(s.data),N((null===(e=s.data.template)||void 0===e?void 0:e.id)||"")}}catch(e){console.error("Failed to load current assignment:",e)}},D=async e=>{let s=g.find(s=>s.id===e);if(s){E(s),Z(!0);try{var t;O(!0);let s=await B.default.post("/api/video-templates/".concat(e,"/preview"),{wedding_id:u});console.log("Preview overlays:",s.data),q((null===(t=s.data.preview_data)||void 0===t?void 0:t.overlays)||[])}catch(e){console.error("Failed to load preview overlays:",e),P.toast.error("Failed to load overlay preview"),q([])}finally{O(!1)}}},R=async()=>{if(!y){P.toast.error("Please select a template");return}try{_(!0),console.log("Assigning template:",{template_id:y,slot:1,customizations:{color_overrides:{},font_overrides:{}}}),await B.default.post("/api/weddings/".concat(u,"/assign-template"),{template_id:y,slot:1,customizations:{color_overrides:{},font_overrides:{}}}),P.toast.success("Template assigned successfully!"),U(),h&&h()}catch(a){var e,s,t;console.error("Failed to assign template:",a),console.error("Error response:",null===(e=a.response)||void 0===e?void 0:e.data),P.toast.error((null===(t=a.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to assign template")}finally{_(!1)}},L=async()=>{if(confirm("Are you sure you want to remove the assigned template?"))try{_(!0),await B.default.delete("/api/weddings/".concat(u,"/template-assignment")),P.toast.success("Template removed successfully"),S(null),N(""),h&&h()}catch(t){var e,s;console.error("Failed to remove template:",t),P.toast.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"Failed to remove template")}finally{_(!1)}};return v?(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Video Template"]}),(0,a.jsx)(o.SZ,{children:"Select a video template for your wedding layout"})]}),(0,a.jsx)(o.aY,{children:(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 animate-spin text-rose-500"})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Zb,{"data-testid":"template-selector-card",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Video Template"]}),(0,a.jsx)(o.SZ,{children:"Select a video template to use for your wedding layout"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[k&&k.template&&(0,a.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(eW.Z,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("p",{className:"font-semibold text-green-900",children:"Template Assigned"})]}),(0,a.jsx)("p",{className:"text-sm text-green-800",children:k.template.name}),(0,a.jsx)("p",{className:"text-xs text-green-600 mt-1",children:k.template.description}),k.template.tags&&k.template.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:k.template.tags.map(e=>(0,a.jsx)(d.C,{variant:"outline",className:"text-xs bg-white",children:e},e))})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>D(k.template.id),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:(0,a.jsx)(j.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:L,disabled:w,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,a.jsx)(T.Z,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Select Template"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(er.Ph,{value:y,onValueChange:N,"data-testid":"template-dropdown",children:[(0,a.jsx)(er.i4,{className:"flex-1",children:(0,a.jsx)(er.ki,{placeholder:"Choose a video template..."})}),(0,a.jsx)(er.Bw,{children:0===g.length?(0,a.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"No templates available. Create templates in Admin panel."}):g.map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"truncate",children:e.name}),e.category&&(0,a.jsx)(d.C,{variant:"secondary",className:"text-xs",children:e.category})]})},e.id))})]}),y&&(0,a.jsx)(i.z,{variant:"outline",size:"icon",onClick:()=>D(y),title:"Preview Template",children:(0,a.jsx)(j.Z,{className:"w-4 h-4"})})]})]}),y&&(0,a.jsx)("div",{className:"p-3 bg-gray-50 border rounded-lg",children:(()=>{let e=g.find(e=>e.id===y);return e?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),e.video_data&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2 grid grid-cols-2 gap-2",children:[(0,a.jsxs)("p",{children:["Duration: ",e.video_data.duration_seconds,"s"]}),(0,a.jsxs)("p",{children:["Resolution: ",e.video_data.width,"x",e.video_data.height]})]}),e.tags&&e.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map(e=>(0,a.jsx)(d.C,{variant:"outline",className:"text-xs",children:e},e))})]}):null})()}),(0,a.jsx)(i.z,{onClick:R,disabled:!y||w||0===g.length,className:"w-full","data-testid":"assign-template-btn",children:w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Assigning..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eW.Z,{className:"w-4 h-4 mr-2"}),k?"Change Template":"Assign Template"]})})]}),(0,a.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-blue-900",children:[(0,a.jsx)("strong",{children:"Note:"})," Video templates will be used to generate personalized videos with your wedding information automatically populated."]})})]})]}),(0,a.jsx)(G.Vq,{open:C,onOpenChange:Z,children:(0,a.jsxs)(G.cZ,{className:"max-w-4xl",children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Template Preview"}),(0,a.jsxs)(G.Be,{children:[null==M?void 0:M.name," - ",null==M?void 0:M.description]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[M&&M.video_data&&(0,a.jsxs)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden relative",children:[(0,a.jsx)(eH(),{url:M.video_data.original_url,width:"100%",height:"100%",controls:!0,playing:!1,light:(null===(s=M.preview_thumbnail)||void 0===s?void 0:s.url)||!1,playIcon:(0,a.jsx)("div",{className:"w-16 h-16 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-rose-500 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M8 5v14l11-7z"})})}),config:{file:{attributes:{controlsList:"nodownload"}}}}),!z&&F.length>0&&(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:F.map((e,s)=>{var t,r,l,i,o,n;return(0,a.jsx)("div",{className:"absolute",style:{left:"".concat((null===(t=e.position)||void 0===t?void 0:t.x)||0,"%"),top:"".concat((null===(r=e.position)||void 0===r?void 0:r.y)||0,"%"),transform:"translate(-50%, -50%)",fontSize:"".concat((null===(l=e.style)||void 0===l?void 0:l.font_size)||24,"px"),fontFamily:(null===(i=e.style)||void 0===i?void 0:i.font_family)||"Arial",color:(null===(o=e.style)||void 0===o?void 0:o.color)||"#FFFFFF",fontWeight:(null===(n=e.style)||void 0===n?void 0:n.font_weight)||"normal",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",textAlign:"center",maxWidth:"80%"},children:e.text},e.id||s)})}),z&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 animate-spin text-white"})})]}),F.length>0&&(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Dynamic Overlays Preview (populated with your wedding data):"}),(0,a.jsx)("div",{className:"space-y-1",children:F.map((e,s)=>(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[" ",e.data_source,": ",(0,a.jsx)("span",{className:"font-semibold",children:e.text})]},s))})]}),M&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Category"}),(0,a.jsx)("p",{className:"font-medium",children:M.category||"General"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Duration"}),(0,a.jsxs)("p",{className:"font-medium",children:[null===(t=M.video_data)||void 0===t?void 0:t.duration_seconds,"s"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Resolution"}),(0,a.jsxs)("p",{className:"font-medium",children:[null===(l=M.video_data)||void 0===l?void 0:l.width,"x",null===(n=M.video_data)||void 0===n?void 0:n.height]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Text Overlays"}),(0,a.jsxs)("p",{className:"font-medium",children:[(null===(c=M.text_overlays)||void 0===c?void 0:c.length)||0," overlays"]})]})]}),M&&M.tags&&M.tags.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:M.tags.map(e=>(0,a.jsx)(d.C,{variant:"outline",children:e},e))})]})]})]})})]})}function eQ(e){var s,t,E,F,q,T,z,R,L,I;let{params:G}=e,{user:Y,loading:W}=(0,l.a)(),K=(0,Z.useRouter)(),H=G.id,[X,Q]=(0,r.useState)(null),[J,$]=(0,r.useState)(!0),[ee,es]=(0,r.useState)(!1),[et,er]=(0,r.useState)(0),[el,ei]=(0,r.useState)(0),[eo,en]=(0,r.useState)(null),[ed,ec]=(0,r.useState)(!1),[eu,em]=(0,r.useState)("weblive"),[ep,ex]=(0,r.useState)(!1),eh=(null==Y?void 0:Y.subscription_plan)==="monthly"||(null==Y?void 0:Y.subscription_plan)==="yearly";(0,r.useEffect)(()=>{W||Y?Y&&H&&eg():K.push("/login");let e=e=>{var s;console.log("[FIX 4] Background update event received in manage page:",e.detail),(null===(s=e.detail)||void 0===s?void 0:s.updates)&&(Q(s=>({...s,backgrounds:{...s.backgrounds,...e.detail.updates}})),console.log("[FIX 4] Wedding backgrounds updated in state (no page refresh)"))};return window.addEventListener("wedding-backgrounds-updated",e),()=>{window.removeEventListener("wedding-backgrounds-updated",e)}},[Y,W,H]);let eg=async()=>{try{$(!0),console.log("DEBUG: Loading wedding with ID:",H);let e=(await B.default.get("/api/weddings/".concat(H))).data;if(console.log("DEBUG: Wedding data received:",e),!e||"object"!=typeof e){console.error("Invalid wedding data received:",e),P.toast.error("Invalid wedding data received"),K.push("/dashboard");return}if(Y&&Y.id&&e.creator_id!==Y.id){P.toast.error("You do not have permission to manage this wedding"),K.push("/dashboard");return}console.log("DEBUG: Theme settings before processing:",e.theme_settings),e.theme_settings&&"object"==typeof e.theme_settings?(e.theme_settings.studio_details&&"object"==typeof e.theme_settings.studio_details||(e.theme_settings.studio_details={studio_id:"",name:"",logo_url:"",contact:""}),e.theme_settings.custom_messages&&"object"==typeof e.theme_settings.custom_messages||(e.theme_settings.custom_messages={welcome_text:"Welcome to our big day",description:""}),Array.isArray(e.theme_settings.cover_photos)||(e.theme_settings.cover_photos=[])):(console.log("DEBUG: Creating default theme_settings"),e.theme_settings={theme_id:"floral_garden",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",cover_photos:[],studio_details:{studio_id:"",name:"",logo_url:"",contact:""},custom_messages:{welcome_text:"Welcome to our big day",description:""}}),console.log("DEBUG: Final theme_settings:",e.theme_settings),console.log("DEBUG: Cover photos count:",e.theme_settings.cover_photos.length),console.log("DEBUG: Theme assets:",e.theme_settings.theme_assets),Q(e),es("live"===e.status),er(e.viewers_count||0);let s=e.streaming_type||"weblive";console.log("DEBUG: Wedding streaming_type:",e.streaming_type),console.log("DEBUG: Setting localStreamingType to:",s),console.log("DEBUG: skipStreamingTypeUpdate:",ep),ep?ex(!1):em(s)}catch(l){var e,s,t,a;console.error("Error loading wedding:",l);let r=(null===(s=l.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||l.message||"Failed to load wedding details";P.toast.error(r),((null===(t=l.response)||void 0===t?void 0:t.status)===401||(null===(a=l.response)||void 0===a?void 0:a.status)===403)&&K.push("/dashboard")}finally{$(!1)}},ef=(e,s)=>{navigator.clipboard.writeText(e),P.toast.success("".concat(s," copied to clipboard!"))},ev=async()=>{try{let e=await B.default.get("/api/weddings/".concat(H,"/settings"));en(e.data)}catch(e){console.error("Error loading settings:",e)}},eb=async(e,s)=>{try{ec(!0),await B.default.put("/api/weddings/".concat(H,"/settings"),{[e]:s}),P.toast.success("Settings updated"),ev()}catch(e){console.error("Error updating settings:",e),P.toast.error("Failed to update settings")}finally{ec(!1)}};if((0,r.useEffect)(()=>{H&&Y&&ev()},[H,Y]),W||J)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 animate-spin text-rose-500"})});if(!X)return null;let ey="".concat(window.location.origin,"/weddings/").concat(H);return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50",children:[(0,a.jsx)("nav",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200 sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(C.default,{href:"/dashboard",children:(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Dashboard"]})}),(0,a.jsx)(c.Z,{orientation:"vertical",className:"h-6"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-rose-500 to-purple-600 p-2 rounded-lg",children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-bold",children:"Manage Wedding"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:X.title})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[X.is_locked&&(0,a.jsxs)(d.C,{variant:"destructive",className:"gap-1",children:[(0,a.jsx)(h.Z,{className:"w-3 h-3"}),"Locked"]}),(0,a.jsx)(d.C,{variant:ee?"default":"secondary",className:ee?"bg-red-500 animate-pulse":"",children:ee?"LIVE":X.status}),(0,a.jsx)(C.default,{href:"/weddings/".concat(H),target:"_blank",children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"View Public Page"]})})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[X.is_locked&&(0,a.jsxs)(u.bZ,{variant:"destructive",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{children:["This wedding is locked because your premium subscription has expired.",(0,a.jsx)(C.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade to Premium"})," to unlock and start streaming."]})]}),(0,a.jsxs)(n.mQ,{defaultValue:"stream",className:"w-full",children:[(0,a.jsxs)(n.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(n.SP,{value:"stream",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Stream"]}),(0,a.jsxs)(n.SP,{value:"layout",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Layout"]}),(0,a.jsxs)(n.SP,{value:"media",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Media"]}),(0,a.jsxs)(n.SP,{value:"settings",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),(0,a.jsxs)(n.nU,{value:"stream",className:"space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"Streaming Type"}),(0,a.jsx)(o.SZ,{children:"Choose between WebLive custom RTMP or YouTube Live Streaming"})]}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"streamingType",value:"weblive",checked:"weblive"===eu,onChange:async e=>{if("live"===X.status||"paused"===X.status){P.toast.error("Cannot change streaming type during an active stream");return}em("weblive");try{let e=await B.default.put("/api/weddings/".concat(H,"/streaming-type?streaming_type=weblive"));console.log("DEBUG: Streaming type update response:",e.data),P.toast.success("Switched to WebLive Streaming"),ex(!0),console.log("DEBUG: API call successful, keeping local state")}catch(e){var s,t;console.error("DEBUG: Failed to update streaming type:",e),P.toast.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to update streaming type"),em(eu)}},disabled:"live"===X.status||"paused"===X.status,className:"w-4 h-4 text-rose-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"WebLive Streaming (Default)"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"streamingType",value:"youtube",checked:"youtube"===eu,onChange:async e=>{if("live"===X.status||"paused"===X.status){P.toast.error("Cannot change streaming type during an active stream");return}console.log("DEBUG: Changing streaming type from",eu,"to youtube"),em("youtube");try{let e=await B.default.put("/api/weddings/".concat(H,"/streaming-type?streaming_type=youtube"));console.log("DEBUG: Streaming type update response:",e.data),P.toast.success("Switched to YouTube Live Streaming"),ex(!0),console.log("DEBUG: API call successful, keeping local state")}catch(e){var s,t;console.error("DEBUG: Failed to update streaming type:",e),P.toast.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to update streaming type"),em(eu)}},disabled:"live"===X.status||"paused"===X.status,className:"w-4 h-4 text-red-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"YouTube Live Streaming"})]})]}),("live"===X.status||"paused"===X.status)&&(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{className:"text-sm",children:"Streaming type is locked during an active stream. End the stream to switch modes."})]})]})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Live Stream Status"]}),(0,a.jsx)(o.SZ,{children:"Manage your wedding stream lifecycle - OBS controls stream presence, you control when it ends"})]}),(0,a.jsxs)(o.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("live"===X.status?"bg-red-500 animate-pulse":"paused"===X.status?"bg-yellow-500":"bg-gray-400")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:"live"===X.status?"LIVE":"paused"===X.status?"PAUSED":"ENDED"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"live"===X.status?"Streaming in progress":"paused"===X.status?"Stream paused - waiting for OBS reconnect":"Stream has ended"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Viewers"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:et})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-blue-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(ee?"bg-green-500":"bg-gray-400")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"OBS Status"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:ee?"OBS is connected and streaming":"OBS is disconnected"}),(0,a.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"OBS start/stop controls stream presence only"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-purple-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 text-purple-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Viewer Experience"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"live"===X.status?"Viewers see live stream":"paused"===X.status?'Viewers see "Be Right Back" screen':"Viewers see replay and highlights"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-rose-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 text-rose-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Host Control"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Only you can end the live stream"})]})]}),("live"===X.status||"paused"===X.status)&&(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)(i.z,{variant:"destructive",size:"lg",className:"w-full",onClick:async()=>{if(confirm("Are you sure you want to end the live stream? This will finalize the recording and show replay to viewers. This action cannot be undone."))try{$(!0),await eg(),await B.default.post("/api/weddings/".concat(H,"/live/end")),P.toast.success("Live stream ended successfully! Recording is being processed."),eg()}catch(a){var e,s,t;console.error("Error ending live stream:",a),(null===(t=a.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:null===(e=s.detail)||void 0===e?void 0:e.includes("Cannot end from"))?P.toast.error("Cannot end live stream: Stream is not currently active"):P.toast.error("Failed to end live stream")}finally{$(!1)}},disabled:J,children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 ".concat(J?"animate-spin":"")}),"End Live Stream"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"This will merge recordings, upload to CDN, and show replay to viewers"})]}),"ended"===X.status&&(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)(N.Z,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"font-semibold text-green-800",children:"Stream Successfully Ended"}),(0,a.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Recording has been processed and is available for replay"}),X.recording_url&&(0,a.jsx)(i.z,{variant:"outline",className:"mt-3",asChild:!0,children:(0,a.jsxs)("a",{href:X.recording_url,target:"_blank",children:[(0,a.jsx)(Play,{className:"w-4 h-4 mr-2"}),"View Recording"]})})]})})]})]}),"weblive"===eu&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"WebLive - RTMP Credentials"}),(0,a.jsx)(o.SZ,{children:"Use these credentials in OBS Studio or your streaming software"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:X.stream_credentials?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Server URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:X.stream_credentials.rtmp_url,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ef(X.stream_credentials.rtmp_url,"Server URL"),children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"password",value:X.stream_credentials.stream_key,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ef(X.stream_credentials.stream_key,"Stream Key"),children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{className:"text-sm",children:"Keep your stream key private! Anyone with this key can stream to your wedding."})]})]}):(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Loading credentials..."})})]}),"youtube"===eu&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"YouTube Account"}),(0,a.jsx)(o.SZ,{children:"Connect your YouTube account to stream live"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:(null===(s=X.youtube_settings)||void 0===s?void 0:s.auth_connected)?(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-green-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(N.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-green-800",children:"YouTube Connected"}),(0,a.jsx)("p",{className:"text-sm text-green-600",children:"Ready to stream"})]})]}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("Are you sure you want to disconnect YouTube?"))try{await B.default.get("/api/youtube/disconnect/".concat(H)),P.toast.success("YouTube disconnected"),eg()}catch(e){P.toast.error("Failed to disconnect YouTube")}},children:"Disconnect"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(u.bZ,{children:(0,a.jsx)(u.X,{children:"Connect your YouTube account to enable live streaming to your YouTube channel"})}),(0,a.jsxs)(i.z,{onClick:async()=>{try{$(!0);let e=await B.default.post("/api/youtube/connect",{wedding_id:H});sessionStorage.setItem("youtube_state",e.data.state),sessionStorage.setItem("youtube_wedding_id",H),window.location.href=e.data.oauth_url}catch(e){P.toast.error("Failed to initiate YouTube connection"),$(!1)}},disabled:J,className:"w-full bg-red-600 hover:bg-red-700",children:[J?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Connect YouTube Account"]})]})})]}),(null===(t=X.youtube_settings)||void 0===t?void 0:t.auth_connected)&&(null===(E=X.youtube_settings)||void 0===E?void 0:E.broadcast_id)&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"YouTube - RTMP Credentials"}),(0,a.jsx)(o.SZ,{children:"Use these credentials in OBS Studio to stream to YouTube"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:X.stream_credentials&&(null===(F=X.youtube_settings)||void 0===F?void 0:F.stream_id)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Stream Server URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:X.stream_credentials.rtmp_url||"rtmp://a.rtmp.youtube.com/live2",readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ef(X.stream_credentials.rtmp_url||"rtmp://a.rtmp.youtube.com/live2","Server URL"),children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"password",value:X.stream_credentials.stream_key||"",readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{var e;(null===(e=X.stream_credentials)||void 0===e?void 0:e.stream_key)?ef(X.stream_credentials.stream_key,"Stream Key"):P.toast.error("Stream key not available")},children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})})]})]}),(null===(q=X.youtube_settings)||void 0===q?void 0:q.youtube_video_url)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"YouTube Video URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:X.youtube_settings.youtube_video_url,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>window.open(X.youtube_settings.youtube_video_url,"_blank"),children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{className:"text-sm",children:"Stream to YouTube using these credentials. Your stream will be visible on your YouTube channel."})]})]}):(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"No broadcast created yet"}),(0,a.jsxs)(i.z,{onClick:async()=>{try{$(!0),await B.default.post("/api/youtube/create-broadcast/".concat(H)),P.toast.success("YouTube broadcast created successfully"),eg()}catch(t){var e,s;P.toast.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"Failed to create broadcast")}finally{$(!1)}},disabled:J,children:[J?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Create YouTube Broadcast"]})]})})]}),(null===(T=X.youtube_settings)||void 0===T?void 0:T.auth_connected)&&(null===(z=X.youtube_settings)||void 0===z?void 0:z.broadcast_id)&&(0,a.jsx)(eG,{weddingId:H,wedding:X,onStatusChange:eg}),(null===(R=X.youtube_settings)||void 0===R?void 0:R.auth_connected)&&(0,a.jsx)(eV,{weddingId:H,wedding:X})]}),(0,a.jsx)(D.Z,{weddingId:H,isPremium:eh,isLive:ee}),(0,a.jsx)(V,{weddingId:H,isPremium:eh,rtmpUrl:null==X?void 0:null===(L=X.stream_credentials)||void 0===L?void 0:L.rtmp_url}),ee&&(0,a.jsx)(eD.Z,{weddingId:H})]}),(0,a.jsxs)(n.nU,{value:"layout",className:"space-y-6",children:[(0,a.jsx)(eX,{weddingId:H,currentTemplateId:null==X?void 0:null===(I=X.template_assignment)||void 0===I?void 0:I.template_id,onTemplateAssigned:()=>{P.toast.success("Template assigned! Your wedding data will be automatically populated."),eg()}}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),"Wedding Layout Customization"]}),(0,a.jsx)(o.SZ,{children:"Select a layout structure, upload photos by category, and customize borders & styles"})]}),(0,a.jsx)(o.aY,{children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Choose your layout structure and customize photos, colors, fonts, and borders below."})})]}),(0,a.jsx)(eA,{weddingId:H,wedding:X})]}),(0,a.jsxs)(n.nU,{value:"media",className:"space-y-6",children:[(0,a.jsx)(ea,{weddingId:H,onFolderSelect:e=>{console.log("Selected folder:",e)}}),(0,a.jsx)(O,{weddingId:H,onUploadComplete:()=>{ei(e=>e+1),P.toast.success("Media uploaded successfully!")}}),(0,a.jsx)(A.Z,{weddingId:H,isCreator:!0},el)]}),(0,a.jsxs)(n.nU,{value:"settings",className:"space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{children:"Wedding Details"})}),(0,a.jsx)(o.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Couple"}),(0,a.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"w-5 h-5 text-rose-500"}),X.bride_name," & ",X.groom_name]})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date & Time"}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 text-gray-400"}),(0,M.WU)(new Date(X.scheduled_date),"PPP")]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 ml-6",children:(0,M.WU)(new Date(X.scheduled_date),"p")})]}),X.location&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Location"}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4 text-gray-400"}),X.location]})]})]}),X.description&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-700 mt-1",children:X.description})]})]})]})})]}),eo&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"Media & Access Settings"}),(0,a.jsx)(o.SZ,{children:"Control how guests interact with your wedding content"})]}),(0,a.jsxs)(o.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Auto Delete Media"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Automatically delete media after a specified period"})]}),(0,a.jsx)("button",{onClick:()=>eb("auto_delete_media",!eo.auto_delete_media),disabled:ed,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(eo.auto_delete_media?"bg-rose-500":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(eo.auto_delete_media?"translate-x-6":"translate-x-1")})})]}),eo.auto_delete_media&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Delete after (days)"}),(0,a.jsx)("input",{type:"number",min:"1",max:"365",value:eo.auto_delete_days,onChange:e=>eb("auto_delete_days",parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-md"})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Enable Download"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Allow guests to download photos and videos"})]}),(0,a.jsx)("button",{onClick:()=>eb("enable_download",!eo.enable_download),disabled:ed,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(eo.enable_download?"bg-rose-500":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(eo.enable_download?"translate-x-6":"translate-x-1")})})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Enable Sharing/Embed"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Allow guests to share wedding page and embed media"})]}),(0,a.jsx)("button",{onClick:()=>eb("enable_sharing",!eo.enable_sharing),disabled:ed,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(eo.enable_sharing?"bg-rose-500":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(eo.enable_sharing?"translate-x-6":"translate-x-1")})})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Viewer Limit"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Maximum number of concurrent viewers (leave empty for unlimited)"})]})}),(0,a.jsx)("input",{type:"number",min:"0",placeholder:"Unlimited",value:eo.viewer_limit||"",onChange:e=>eb("viewer_limit",e.target.value?parseInt(e.target.value):null),className:"w-full px-3 py-2 border rounded-md"})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Playback Quality Options"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Quality options available to viewers"}),(0,a.jsxs)("select",{value:eo.playback_quality,onChange:e=>eb("playback_quality",e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[(0,a.jsx)("option",{value:"auto",children:"Auto (Adaptive)"}),(0,a.jsx)("option",{value:"720p",children:"720p Maximum"}),(0,a.jsx)("option",{value:"1080p",children:"1080p Maximum"}),(0,a.jsx)("option",{value:"4K",children:"4K Maximum"})]})]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{className:"text-lg",children:"Share Your Wedding"})}),(0,a.jsxs)(o.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Public URL"}),(0,a.jsx)("p",{className:"text-sm font-mono break-all",children:ey})]}),(0,a.jsxs)(i.z,{variant:"outline",className:"w-full",onClick:()=>ef(ey,"Wedding URL"),children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]}),(0,a.jsx)(U.Z,{token:(null==Y?void 0:Y.access_token)||localStorage.getItem("token")}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{className:"text-lg",children:"Quick Stats"})}),(0,a.jsxs)(o.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,a.jsx)(d.C,{variant:ee?"default":"secondary",children:X.status})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Current Viewers"}),(0,a.jsx)("span",{className:"font-semibold",children:et})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Total Views"}),(0,a.jsx)("span",{className:"font-semibold",children:X.viewers_count||0})]})]})]})]})]})})]})}function eJ(e){let{params:s}=e;return(0,a.jsx)(eU.w,{children:(0,a.jsx)(eQ,{params:s})})}},208:function(e,s,t){"use strict";t.d(s,{Z:function(){return h}});var a=t(57437),r=t(2265),l=t(10273),i=t(56360),o=t(79004),n=t(11980),d=t(33907),c=t(957),u=t(27776),m=t(6657),p=t(87138);let x=[{value:"240p",label:"240p",description:"426\xd7240"},{value:"360p",label:"360p",description:"640\xd7360"},{value:"480p",label:"480p",description:"854\xd7480"},{value:"720p",label:"720p HD",description:"1280\xd7720",premium:!0},{value:"1080p",label:"1080p Full HD",description:"1920\xd71080",premium:!0},{value:"1440p",label:"1440p 2K",description:"2560\xd71440",premium:!0},{value:"4K",label:"4K Ultra HD",description:"3840\xd72160",premium:!0}];function h(e){let{weddingId:s,isPremium:t}=e,[h,g]=(0,r.useState)(!1),[f,v]=(0,r.useState)(null),[b,y]=(0,r.useState)("480p"),[j,N]=(0,r.useState)("480p");(0,r.useEffect)(()=>{w()},[s]);let w=async()=>{try{let e=(await m.default.get("/api/streams/quality/".concat(s))).data;v(e),y(e.live_quality),N(e.recording_quality)}catch(e){console.error("Error loading quality settings:",e)}},_=async()=>{try{g(!0),await m.default.post("/api/streams/quality/update",{wedding_id:s,live_quality:b,recording_quality:j}),u.toast.success("Quality settings updated successfully!"),w()}catch(s){var e,t;console.error("Error updating quality:",s),u.toast.error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Failed to update quality settings")}finally{g(!1)}},k=e=>!!f&&f.allowed_live_qualities.includes(e);return f?(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),"Stream Quality Control"]}),(0,a.jsx)(l.SZ,{children:"Configure live streaming and recording quality"})]}),(0,a.jsxs)(l.aY,{className:"space-y-6",children:[!f.is_premium&&(0,a.jsxs)(n.bZ,{children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsxs)(n.X,{children:[f.message,(0,a.jsx)(p.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade Now"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Live Streaming Quality"}),(0,a.jsx)(o.C,{children:b})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:x.map(e=>{let s=k(e.value),t=b===e.value;return(0,a.jsxs)("button",{onClick:()=>s&&y(e.value),disabled:!s,className:"\n                    relative p-3 rounded-lg border-2 text-left transition-all\n                    ".concat(t?"border-rose-500 bg-rose-50":s?"border-gray-200 hover:border-rose-300 hover:bg-rose-50/50":"border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed","\n                  "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"font-semibold text-sm",children:e.label}),e.premium&&!f.is_premium&&(0,a.jsx)(c.Z,{className:"w-3 h-3 text-yellow-500"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.value)})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Recording Quality"}),(0,a.jsx)(o.C,{variant:"secondary",children:j})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:x.map(e=>{let s=k(e.value),t=j===e.value,r=x.findIndex(e=>e.value===b),l=x.findIndex(s=>s.value===e.value)>r;return(0,a.jsxs)("button",{onClick:()=>s&&!l&&N(e.value),disabled:!s||l,className:"\n                    relative p-3 rounded-lg border-2 text-left transition-all\n                    ".concat(t?"border-purple-500 bg-purple-50":s&&!l?"border-gray-200 hover:border-purple-300 hover:bg-purple-50/50":"border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed","\n                  "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"font-semibold text-sm",children:e.label}),e.premium&&!f.is_premium&&(0,a.jsx)(c.Z,{className:"w-3 h-3 text-yellow-500"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description}),l&&s&&(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Exceeds live quality"})]},e.value)})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Recording quality cannot exceed live streaming quality"})]}),(0,a.jsx)(i.z,{onClick:_,disabled:h,className:"w-full",children:h?"Updating...":"Save Quality Settings"}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,a.jsx)("strong",{children:"Tip:"})," Higher quality requires more bandwidth. Test your connection before going live with 4K."]})})]})]}):(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"py-8",children:(0,a.jsx)("p",{className:"text-center text-gray-500",children:"Loading quality settings..."})})})}},90223:function(e,s,t){"use strict";t.d(s,{Z:function(){return g}});var a=t(57437),r=t(2265),l=t(38472),i=t(32816),o=t(10273),n=t(56360),d=t(46290),c=t(76780),u=t(53225),m=t(11980),p=t(87138),x=t(20357);let h=x.env.NEXT_PUBLIC_API_URL||x.env.NEXT_PUBLIC_BACKEND_URL;function g(e){let{token:s}=e,[t,x]=(0,r.useState)(null),[g,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{s&&v()},[s]);let v=async()=>{try{let e=await l.Z.get("".concat(h,"/api/plan/storage/stats"),{headers:{Authorization:"Bearer ".concat(s)}});x(e.data)}catch(e){console.error("Error fetching storage stats:",e)}finally{f(!1)}};if(g)return(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),"Storage"]})}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded w-full"})]})})]});if(!t)return null;let{storage_used_formatted:b,storage_limit_formatted:y,percentage_used:j,is_over_limit:N,plan:w}=t,_=j>80&&!N;return(0,a.jsxs)(o.Zb,{className:N?"border-red-500":_?"border-yellow-500":"",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),"Storage Usage"]}),(0,a.jsxs)(o.SZ,{children:[b," of ",y," used"]})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.E,{value:Math.min(j,100),className:"h-3 ".concat(N?"bg-red-100":_?"bg-yellow-100":"bg-gray-100")}),(0,a.jsxs)("p",{className:"text-sm text-right ".concat(N?"text-red-600 font-semibold":_?"text-yellow-600":"text-gray-500"),children:[j.toFixed(1),"% used"]})]}),N&&(0,a.jsxs)(m.bZ,{variant:"destructive",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)(m.X,{children:"You've exceeded your storage limit. Uploads are blocked until you upgrade or delete files."})]}),_&&(0,a.jsxs)(m.bZ,{className:"border-yellow-500 bg-yellow-50",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsx)(m.X,{className:"text-yellow-800",children:"You're approaching your storage limit. Consider upgrading to Premium for 200GB storage."})]}),t.breakdown&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:[" Media items: ",t.breakdown.media_items]}),(0,a.jsxs)("p",{children:[" Photobooth photos: ",t.breakdown.photobooth_photos]}),(0,a.jsxs)("p",{children:[" Recordings: ",t.breakdown.recordings]})]}),"free"===w&&(0,a.jsx)(p.default,{href:"/pricing",children:(0,a.jsx)(n.z,{className:"w-full",variant:N?"destructive":"default",children:"Upgrade to Premium - 200GB Storage"})})]})]})}},87611:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var a=t(57437),r=t(2265),l=t(71229),i=t(91231),o=t(47870);function n(e){let{weddingData:s={},layoutConfig:t={},onEnter:n}=e,[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)("16:9");(0,r.useEffect)(()=>{c(!0)},[]);let{bride_name:p="",groom_name:x="",event_date:h="",event_time:g="",venue:f=""}=s,{font:v="Playfair Display",primaryColor:b="#1e3a8a",couplePhoto:y=null,preciousMoments:j=[],studioDetails:N={},preWeddingVideo:w=null,borders:_={},borderMasks:k={},templateVideoWeddingId:S=null,hasTemplateVideo:C=!1}=t,Z={hidden:{y:40,opacity:0},visible:{y:0,opacity:1,transition:{duration:.8}}};return((0,r.useEffect)(()=>{if(C){let e=()=>{let e=document.querySelector("video");if(e){let s=()=>{let s=e.videoWidth/e.videoHeight;console.log("[Layout1] Video dimensions:",e.videoWidth,"x",e.videoHeight,"Aspect:",s),s<1?m("9:16"):m("16:9")};e.readyState>=1?s():e.addEventListener("loadedmetadata",s)}};e();let s=setTimeout(e,500);return()=>clearTimeout(s)}},[C,S]),d)?(0,a.jsxs)("div",{className:"min-h-screen bg-white",style:{fontFamily:v,color:b},children:[C&&S&&(0,a.jsx)("section",{className:"w-full min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-50 via-pink-100 to-purple-100 p-4 md:p-8",children:(0,a.jsx)("div",{className:"w-full mx-auto transition-all duration-300 ".concat("9:16"===u?"max-w-md aspect-[9/16]":"max-w-6xl aspect-[16/9]"),children:(0,a.jsx)(o.Z,{weddingId:S,className:"w-full h-full"})})}),(null==y?void 0:y.url)&&(0,a.jsx)("section",{className:"w-full min-h-[50vh] md:min-h-[60vh] bg-black py-8 md:py-16 flex items-center justify-center",children:(0,a.jsx)(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Z,className:"w-full max-w-6xl mx-auto px-4 md:px-8",children:(0,a.jsx)("div",{className:"relative w-full aspect-[16/9] md:aspect-[21/9] overflow-hidden",children:(0,a.jsx)(i.Z,{src:y.url,alt:"Couple",maskUrl:null==_?void 0:_.couple,maskData:null==k?void 0:k.couple,aspectRatio:"custom",className:"w-full h-full object-cover"})})})}),w&&(0,a.jsx)("section",{className:"w-full min-h-[50vh] md:min-h-[60vh] bg-gradient-to-br from-gray-900 to-black py-8 md:py-16 flex items-center justify-center",children:(0,a.jsx)(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Z,className:"w-full max-w-6xl mx-auto px-4 md:px-8",children:(0,a.jsx)("div",{className:"aspect-video w-full bg-gray-900 rounded-lg overflow-hidden shadow-2xl",children:(0,a.jsx)("iframe",{src:w,className:"w-full h-full",allowFullScreen:!0,title:"Wedding Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})})})}),(null==N?void 0:N.logo_url)&&(0,a.jsx)("section",{className:"w-full min-h-[40vh] md:min-h-[50vh] bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 py-12 md:py-20 flex items-center justify-center",children:(0,a.jsx)(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Z,className:"w-full max-w-5xl mx-auto px-4 md:px-8 text-center",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-8 md:p-16 shadow-2xl border border-white/20",children:[(0,a.jsx)("img",{src:N.logo_url,className:"h-20 md:h-32 mx-auto mb-6 filter drop-shadow-lg",alt:"Studio"}),(0,a.jsx)("h3",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold uppercase tracking-widest mb-4",children:"Stand Out With World-Class Video Production"}),(0,a.jsx)("p",{className:"text-white/90 text-sm md:text-base lg:text-lg font-light",children:"Your Story Deserves To Be Heard"})]})})}),(null==j?void 0:j.length)>0&&(0,a.jsx)("section",{className:"w-full min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50 py-12 md:py-20",children:(0,a.jsxs)(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Z,className:"w-full max-w-7xl mx-auto px-4 md:px-8",children:[(0,a.jsx)("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12 md:mb-16",style:{color:b},children:"Precious Moments"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 lg:gap-10",children:j.map((e,s)=>(0,a.jsx)(l.E.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{delay:.1*s,duration:.5},className:"relative group",children:(0,a.jsxs)("div",{className:"bg-white p-3 md:p-4 shadow-xl rounded-sm hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",children:[(0,a.jsx)("div",{className:"aspect-square overflow-hidden bg-gray-100",children:(0,a.jsx)(i.Z,{src:e.url,maskUrl:null==_?void 0:_.preciousMoments,maskData:null==k?void 0:k.preciousMoments,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",aspectRatio:"1:1"})}),(0,a.jsx)("div",{className:"h-8 md:h-10 bg-white"})]})},s))})]})}),(0,a.jsx)("footer",{className:"w-full bg-gray-900 text-white py-8 text-center",children:(0,a.jsx)("p",{className:"text-sm md:text-base",children:"\xa9 2025 - Crafted with "})})]}):null}},18814:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var a=t(57437),r=t(2265),l=t(64042),i=t(62483),o=t(42365),n=t(40933),d=t(49321),c=t(98094),u=t(71229),m=t(91231),p=t(47870),x=t(26378),h=t(48571),g=t(67159);function f(e){let{weddingData:s={},layoutConfig:t={},onEnter:f}=e,[v,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{b(!0)},[]);let{bride_name:y="",groom_name:j="",event_date:N="",event_time:w="",venue:_="",playback_url:k="",recording_url:S=""}=s,{font:C="Indie Flower",primaryColor:Z="#44403c",secondaryColor:P="#78716c",welcomeMessage:B="Our Scrapbook",description:M="",couplePhoto:E=null,preciousMoments:F=[],studioDetails:q={},preWeddingVideo:T=null,borders:z={},borderMasks:O={},templateVideoWeddingId:A=null,hasTemplateVideo:U=!1}=t,D=e=>e%2==0?2:-2;return v?(0,a.jsxs)("div",{className:"min-h-screen bg-[#fdf6e3] overflow-x-hidden selection:bg-yellow-200",style:{fontFamily:C,color:Z,backgroundImage:'url("https://www.transparenttextures.com/patterns/cardboard-flat.png")'},children:[(0,a.jsxs)("section",{className:"min-h-screen flex flex-col items-center justify-center p-8 relative",children:[(0,a.jsx)("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 w-48 h-12 bg-yellow-200/80 rotate-1 transform skew-x-12 z-10"}),(0,a.jsxs)("div",{className:"bg-white p-6 pb-20 shadow-xl transform -rotate-1 max-w-2xl w-full border border-gray-200 relative",children:[U&&A?(0,a.jsx)("div",{className:"aspect-[4/5] bg-transparent overflow-hidden relative flex items-center justify-center",children:(0,a.jsx)(p.Z,{weddingId:A,className:"w-full h-full"})}):(null==E?void 0:E.url)?(0,a.jsx)("div",{className:"aspect-[4/5] bg-gray-100 overflow-hidden relative",children:(0,a.jsx)(m.Z,{src:E.url,maskUrl:null==z?void 0:z.couple,maskData:null==O?void 0:O.couple,aspectRatio:"custom",className:"w-full h-full object-cover filter sepia-[0.2]",style:{height:"100%"}})}):(0,a.jsx)("div",{className:"aspect-[4/5] bg-gray-100 flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"w-20 h-20 text-gray-300"})}),!U&&(0,a.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:[(0,a.jsxs)("h1",{className:"text-5xl font-bold mb-1",style:{fontFamily:"Caveat, cursive"},children:[y," & ",j]}),N&&(()=>{try{let e=(0,x.D)(N);if(!(0,h.J)(e))return null;return(0,a.jsx)("p",{className:"text-xl text-gray-500",children:(0,g.WU)(e,"MMMM do, yyyy")})}catch(e){return console.error("Invalid date:",N,e),null}})()]}),(0,a.jsx)("div",{className:"absolute -top-6 -right-6 text-red-400 transform rotate-12",children:(0,a.jsx)(l.Z,{className:"w-16 h-16 fill-current"})})]}),(0,a.jsx)("div",{className:"absolute bottom-8 animate-bounce",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 text-gray-400"})})]}),M&&(0,a.jsx)("section",{className:"py-20 px-4 max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white p-12 shadow-lg relative transform rotate-1 border border-gray-100",style:{backgroundImage:"linear-gradient(#e5e7eb 1px, transparent 1px)",backgroundSize:"100% 2rem"},children:[(0,a.jsx)("div",{className:"absolute -top-4 right-12 text-gray-400",children:(0,a.jsx)(o.Z,{className:"w-12 h-12"})}),(0,a.jsx)("h2",{className:"text-4xl font-bold mb-8 text-center",style:{fontFamily:"Caveat, cursive"},children:B}),(0,a.jsx)("div",{className:"text-2xl leading-[2rem] font-handwriting text-gray-700",children:M})]})}),(0,a.jsx)("section",{className:"py-20 px-4",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto grid md:grid-cols-2 gap-12",children:[(0,a.jsxs)("div",{className:"bg-[#ffedd5] p-8 border-2 border-dashed border-orange-300 relative transform -rotate-2",children:[(0,a.jsx)("div",{className:"absolute -left-3 top-1/2 w-6 h-6 bg-[#fdf6e3] rounded-full"}),(0,a.jsx)("div",{className:"absolute -right-3 top-1/2 w-6 h-6 bg-[#fdf6e3] rounded-full"}),(0,a.jsx)("h3",{className:"text-xl uppercase tracking-widest text-orange-800 mb-4 font-bold",children:"Save the Date"}),N&&(()=>{try{let e=(0,x.D)(N);if(!(0,h.J)(e))return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-6xl font-black text-orange-900",children:"TBD"})});return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-6xl font-black text-orange-900",children:(0,g.WU)(e,"dd")}),(0,a.jsx)("p",{className:"text-3xl text-orange-800",children:(0,g.WU)(e,"MMMM")}),(0,a.jsxs)("p",{className:"text-xl mt-2 flex items-center justify-center gap-2",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5"})," ",w]})]})}catch(e){return console.error("Invalid date:",N,e),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-6xl font-black text-orange-900",children:"TBD"})})}})()]}),(0,a.jsxs)("div",{className:"bg-[#e0f2fe] p-8 border-2 border-dashed border-blue-300 relative transform rotate-1",children:[(0,a.jsx)("div",{className:"absolute -left-3 top-1/2 w-6 h-6 bg-[#fdf6e3] rounded-full"}),(0,a.jsx)("div",{className:"absolute -right-3 top-1/2 w-6 h-6 bg-[#fdf6e3] rounded-full"}),(0,a.jsx)("h3",{className:"text-xl uppercase tracking-widest text-blue-800 mb-4 font-bold",children:"Location"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"w-12 h-12 mx-auto text-blue-600 mb-4"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-900",children:_}),(0,a.jsx)("p",{className:"mt-4 text-blue-700",children:"Can't wait to see you there!"})]})]})]})}),(null==F?void 0:F.length)>0&&(0,a.jsxs)("section",{className:"py-20 px-4 overflow-hidden",children:[(0,a.jsx)("h2",{className:"text-center text-4xl mb-16",style:{fontFamily:"Caveat, cursive"},children:"Favorite Moments"}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto flex flex-wrap justify-center gap-8",children:F.map((e,s)=>(0,a.jsxs)(u.E.div,{whileHover:{scale:1.1,rotate:0,zIndex:10},className:"bg-white p-3 shadow-md pb-12 relative w-64 transform transition-all duration-300",style:{rotate:"".concat(D(s),"deg")},children:[(0,a.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-24 h-6 bg-pink-200/80"}),(0,a.jsx)("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:(0,a.jsx)(m.Z,{src:e.url,maskUrl:null==z?void 0:z.preciousMoments,className:"w-full h-full object-cover"})})]},s))})]}),T&&(0,a.jsx)("section",{className:"py-20 px-4",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto bg-black p-4 rounded-xl shadow-2xl transform rotate-1",children:[(0,a.jsxs)("div",{className:"bg-gray-800 p-1 mb-2 rounded flex justify-between px-4 text-white font-mono text-xs",children:[(0,a.jsx)("span",{children:"REC "}),(0,a.jsx)("span",{children:"00:04:20"}),(0,a.jsx)("span",{children:"BAT [||||]"})]}),(0,a.jsx)("div",{className:"aspect-video",children:(0,a.jsx)("iframe",{src:T,className:"w-full h-full rounded",allowFullScreen:!0})})]})}),(0,a.jsxs)("footer",{className:"py-20 text-center relative",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-4 bg-[url('https://www.transparenttextures.com/patterns/zipper.png')] opacity-20"}),(k||S||f)&&(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsxs)("button",{onClick:f,className:"bg-red-500 text-white px-8 py-4 rounded-full font-bold text-xl shadow-lg hover:bg-red-600 transition-colors transform hover:-rotate-1",children:[(0,a.jsx)(c.Z,{className:"inline w-6 h-6 mr-2"})," Watch Live"]})}),(0,a.jsx)("p",{className:"text-2xl",style:{fontFamily:"Caveat, cursive"},children:"With Love,"}),(0,a.jsxs)("h2",{className:"text-4xl font-bold mt-2",children:[y," & ",j]}),(null==q?void 0:q.name)&&(0,a.jsx)("div",{className:"mt-12 text-gray-500 text-sm",children:(0,a.jsxs)("p",{children:["Memories captured by ",q.name]})})]})]}):null}},94835:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(57437),r=t(2265),l=t(49321),i=t(4436),o=t(71976),n=t(71229),d=t(91231),c=t(47870),u=t(26378),m=t(48571),p=t(67159);function x(e){let{weddingData:s={},layoutConfig:t={},onEnter:x}=e,[h,g]=(0,r.useState)(!1);(0,r.useRef)(null),(0,r.useEffect)(()=>{g(!0)},[]);let{bride_name:f="",groom_name:v="",event_date:b="",event_time:y="",venue:j="",playback_url:N="",recording_url:w=""}=s,{font:_="Montserrat",primaryColor:k="#1a1a1a",secondaryColor:S="#666666",welcomeMessage:C="Together",description:Z="",couplePhoto:P=null,preciousMoments:B=[],studioDetails:M={},preWeddingVideo:E=null,heroBackground:F=null,borders:q={},borderMasks:T={},templateVideoWeddingId:z=null,hasTemplateVideo:O=!1}=t,A={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.16,1,.3,1]}}};return h?(0,a.jsx)("div",{className:"min-h-screen py-12 px-4 sm:px-6 md:px-12 selection:bg-gray-200",style:{backgroundColor:"#f4f4f5",fontFamily:_,color:k,backgroundImage:"radial-gradient(#e4e4e7 1px, transparent 1px)",backgroundSize:"32px 32px"},children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-7 space-y-8",children:[(0,a.jsxs)(n.E.div,{initial:"hidden",animate:"visible",variants:A,className:"bg-white p-8 sm:p-12 shadow-2xl relative overflow-hidden group",style:{borderRadius:"2px"},children:[(0,a.jsx)("div",{className:"absolute -left-3 top-1/2 w-6 h-12 bg-[#f4f4f5] rounded-r-full"}),(0,a.jsx)("div",{className:"absolute -right-3 top-1/2 w-6 h-12 bg-[#f4f4f5] rounded-l-full"}),(0,a.jsxs)("div",{className:"flex flex-col h-full justify-between min-h-[500px]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start border-b border-gray-100 pb-8 mb-8",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs font-bold tracking-[0.2em] uppercase text-gray-400",children:"Invitation"}),(0,a.jsx)("p",{className:"text-xs font-bold tracking-[0.2em] uppercase text-gray-400",children:"No. 001"})]}),b&&(()=>{try{let e=(0,u.D)(b);if(!(0,m.J)(e))return(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("p",{className:"text-4xl font-light tabular-nums tracking-tighter",style:{color:k},children:"TBD"})});return(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-4xl font-light tabular-nums tracking-tighter",style:{color:k},children:(0,p.WU)(e,"dd.MM")}),(0,a.jsx)("p",{className:"text-xs font-bold tracking-[0.2em] uppercase text-gray-400",children:(0,p.WU)(e,"yyyy")})]})}catch(e){return console.error("Invalid date:",b,e),null}})()]}),(0,a.jsxs)("div",{className:"py-12 text-center lg:text-left relative",children:[(0,a.jsx)(n.E.h1,{className:"text-6xl sm:text-7xl md:text-8xl font-medium leading-none tracking-tight mix-blend-exclusion",style:{color:k},whileHover:{scale:1.02,x:20},transition:{type:"spring",stiffness:300},children:f}),(0,a.jsx)("span",{className:"text-4xl font-light italic text-gray-300 block my-4 ml-12",children:"&"}),(0,a.jsx)(n.E.h1,{className:"text-6xl sm:text-7xl md:text-8xl font-medium leading-none tracking-tight pl-8 sm:pl-20",style:{color:k},whileHover:{scale:1.02,x:20},transition:{type:"spring",stiffness:300},children:v})]}),(0,a.jsxs)("div",{className:"border-t border-gray-100 pt-8 mt-8 flex flex-col sm:flex-row justify-between items-end gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium mb-2",children:C}),j&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"uppercase tracking-wide",children:j})]})]}),y&&(0,a.jsx)("div",{className:"bg-black text-white px-6 py-2 rounded-full text-sm font-bold tracking-widest",children:y})]})]})]}),O&&z?(0,a.jsx)(n.E.div,{variants:A,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"bg-white p-4 shadow-xl",children:(0,a.jsx)("div",{className:"aspect-[16/10] overflow-hidden bg-transparent relative flex items-center justify-center",children:(0,a.jsx)(c.Z,{weddingId:z,className:"w-full h-full"})})}):(null==P?void 0:P.url)?(0,a.jsx)(n.E.div,{variants:A,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"bg-white p-4 shadow-xl",children:(0,a.jsxs)("div",{className:"aspect-[16/10] overflow-hidden bg-gray-100 relative",children:[(0,a.jsx)(d.Z,{src:P.url,alt:"".concat(f," & ").concat(v),maskUrl:null==q?void 0:q.couple,maskData:null==T?void 0:T.couple,aspectRatio:"16:10",className:"w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-700"}),(0,a.jsx)("div",{className:"absolute bottom-6 left-6 bg-white/90 backdrop-blur px-4 py-2",children:(0,a.jsx)("p",{className:"text-xs font-bold tracking-widest uppercase",children:"The Couple"})})]})}):null,E&&(0,a.jsxs)(n.E.div,{variants:A,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"bg-black text-white p-8 sm:p-12 shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-light uppercase tracking-widest",children:"Our Story"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),(0,a.jsx)("div",{className:"aspect-video w-full border border-white/20",children:(0,a.jsx)("iframe",{src:E,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-5 space-y-8 lg:mt-24",children:[Z&&(0,a.jsxs)(n.E.div,{variants:A,initial:"hidden",animate:"visible",transition:{delay:.2},className:"bg-white p-8 shadow-lg border-l-4",style:{borderColor:k},children:[(0,a.jsx)("h3",{className:"text-xs font-bold uppercase tracking-widest mb-4 text-gray-400",children:"A Note"}),(0,a.jsx)("p",{className:"text-lg leading-relaxed font-light text-gray-800",children:Z})]}),(N||w||x)&&(0,a.jsxs)(n.E.div,{variants:A,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"bg-[#1a1a1a] text-white p-8 relative overflow-hidden group cursor-pointer",onClick:x,children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity",children:(0,a.jsx)(i.Z,{className:"w-32 h-32 rotate-12"})}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsx)("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Digital Access"})]}),(0,a.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"Live Stream"}),(0,a.jsx)("p",{className:"text-gray-400 mb-8 text-sm",children:"Join the celebration from anywhere."}),x?(0,a.jsxs)("button",{className:"flex items-center gap-4 text-white hover:gap-6 transition-all",children:[(0,a.jsx)("span",{className:"uppercase tracking-widest text-sm border-b border-white pb-1",children:"Enter Event"}),(0,a.jsx)(o.Z,{className:"w-4 h-4"})]}):(0,a.jsx)("div",{className:"bg-white/10 p-2 rounded",children:(0,a.jsx)("p",{className:"text-xs text-center",children:"Video Player Loaded"})})]})]}),(null==B?void 0:B.length)>0&&(0,a.jsxs)(n.E.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-2 gap-4",children:[B.slice(0,4).map((e,s)=>(0,a.jsx)(n.E.div,{variants:A,className:"aspect-square bg-white p-2 shadow-md hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)("div",{className:"w-full h-full bg-gray-100 overflow-hidden relative",children:(0,a.jsx)("img",{src:e.url,alt:"Moment",className:"w-full h-full object-cover filter sepia-[0.2] hover:sepia-0 transition-all"})})},s)),B.length>4&&(0,a.jsx)(n.E.div,{variants:A,className:"col-span-2 text-center py-4",children:(0,a.jsxs)("p",{className:"text-xs uppercase tracking-widest text-gray-500",children:["+ ",B.length-4," More Moments"]})})]}),(0,a.jsxs)(n.E.div,{variants:A,initial:"hidden",whileInView:"visible",className:"text-center py-12 opacity-40",children:[(0,a.jsx)("div",{className:"h-12 w-3/4 mx-auto bg-[url('https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/UPC-A-036000291452.svg/2560px-UPC-A-036000291452.svg.png')] bg-contain bg-no-repeat bg-center grayscale"}),(0,a.jsxs)("p",{className:"mt-2 text-[10px] uppercase tracking-[0.3em]",children:["Admit One  ",b||"2025"]})]}),(null==M?void 0:M.logo_url)&&(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-8 text-center grayscale opacity-60 hover:grayscale-0 hover:opacity-100 transition-all",children:[(0,a.jsx)("img",{src:M.logo_url,className:"h-8 mx-auto mb-2",alt:"Studio"}),(0,a.jsx)("p",{className:"text-[10px] uppercase",children:M.name})]})]})]})}):null}},59451:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(57437),r=t(2265),l=t(62483),i=t(82755),o=t(88319),n=t(44763),d=t(71229),c=t(91231),u=t(47870),m=t(67159),p=t(26378);function x(e){let{weddingData:s={},layoutConfig:t={},onEnter:x}=e,[h,g]=(0,r.useState)(!1),{scrollYProgress:f}=(0,o.v)(),v=(0,n.H)(f,[0,1],[0,-100]);(0,r.useEffect)(()=>{g(!0)},[]);let{bride_name:b="",groom_name:y="",event_date:j="",event_time:N="",venue:w="",playback_url:_="",recording_url:k=""}=s,{font:S="Space Grotesk",primaryColor:C="#000000",secondaryColor:Z="#4b5563",welcomeMessage:P="The Wedding",description:B="",couplePhoto:M=null,preciousMoments:E=[],studioDetails:F={},preWeddingVideo:q=null,borders:T={},borderMasks:z={},templateVideoWeddingId:O=null,hasTemplateVideo:A=!1}=t;return h?(0,a.jsxs)("div",{className:"min-h-screen bg-stone-50 overflow-x-hidden",style:{fontFamily:S,color:C},children:[(0,a.jsxs)("header",{className:"fixed top-0 left-0 w-full z-50 p-6 flex justify-between items-start mix-blend-difference text-white pointer-events-none",children:[(0,a.jsx)("div",{className:"text-xs font-bold uppercase tracking-widest",children:P}),(0,a.jsx)("div",{className:"text-xs font-bold uppercase tracking-widest text-right",children:j?(0,m.WU)((0,p.D)(j),"dd.MM.yy"):"2025"})]}),(0,a.jsx)("section",{className:"relative min-h-[120vh]",children:(0,a.jsx)("div",{className:"sticky top-0 h-screen flex flex-col justify-center items-center overflow-hidden",children:A&&O?(0,a.jsx)("div",{className:"relative z-30 w-[80vw] h-[70vh] md:w-[60vw] md:h-[80vh] flex items-center justify-center",children:(0,a.jsx)(u.Z,{weddingId:O,className:"w-full h-full"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-between p-12 z-0 opacity-10",children:[(0,a.jsx)("h1",{className:"text-[15vw] leading-none font-bold text-transparent stroke-black border-text",style:{WebkitTextStroke:"2px ".concat(C)},children:b.split(" ")[0]}),(0,a.jsx)("h1",{className:"text-[15vw] leading-none font-bold text-right text-transparent stroke-black border-text",style:{WebkitTextStroke:"2px ".concat(C)},children:y.split(" ")[0]})]}),(null==M?void 0:M.url)&&(0,a.jsx)(d.E.div,{className:"relative z-10 w-[80vw] h-[70vh] md:w-[40vw] md:h-[80vh] bg-gray-200 shadow-2xl",style:{y:v},children:(0,a.jsx)(c.Z,{src:M.url,maskUrl:null==T?void 0:T.couple,maskData:null==z?void 0:z.couple,className:"w-full h-full object-cover grayscale contrast-125",aspectRatio:"custom",style:{height:"100%"}})}),(0,a.jsx)("div",{className:"absolute z-20 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center mix-blend-difference text-white",children:(0,a.jsxs)("h2",{className:"text-4xl md:text-6xl font-bold mb-4",children:[b," ",(0,a.jsx)("span",{className:"text-2xl font-light italic",children:"&"})," ",y]})})]})})}),(0,a.jsxs)("section",{className:"max-w-7xl mx-auto px-6 py-24",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-12 gap-12 items-start mb-32",children:[(0,a.jsxs)("div",{className:"md:col-span-4 sticky top-24",children:[(0,a.jsx)("div",{className:"w-12 h-1 bg-black mb-8"}),(0,a.jsx)("p",{className:"text-sm uppercase tracking-widest font-bold mb-2",children:"Exhibition Note"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Curated by Fate"})]}),(0,a.jsx)("div",{className:"md:col-span-8",children:B&&(0,a.jsx)("div",{className:"text-3xl md:text-5xl font-light leading-tight indent-24",children:B})})]}),(null==E?void 0:E.length)>0&&(0,a.jsx)("div",{className:"space-y-32 mb-32",children:E.map((e,s)=>(0,a.jsx)("div",{className:"flex ".concat(s%2==0?"justify-start":"justify-end"),children:(0,a.jsxs)("div",{className:"relative w-full md:w-2/3 ".concat(s%2==0?"md:pr-24":"md:pl-24"),children:[(0,a.jsxs)("div",{className:"absolute -top-12 text-6xl font-bold opacity-10 font-serif",children:["0",s+1]}),(0,a.jsxs)("div",{className:"aspect-[4/3] bg-gray-200 relative group overflow-hidden",children:[(0,a.jsx)(c.Z,{src:e.url,maskUrl:null==T?void 0:T.preciousMoments,className:"w-full h-full object-cover transition-all duration-700 group-hover:scale-105 group-hover:grayscale-0 grayscale"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full bg-black text-white p-4 translate-y-full group-hover:translate-y-0 transition-transform duration-300",children:(0,a.jsxs)("p",{className:"text-xs uppercase tracking-widest",children:["Figure ",s+1]})})]})]})},s))}),(0,a.jsx)("div",{className:"border-t-2 border-black pt-12 mb-32",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-6xl font-bold mb-8",children:"Details"}),(0,a.jsx)(l.Z,{className:"w-12 h-12"})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"group border-b border-gray-300 pb-8 hover:border-black transition-colors cursor-default",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-widest text-gray-500 mb-2 group-hover:text-black",children:"When"}),(0,a.jsx)("p",{className:"text-3xl md:text-4xl",children:j?(0,m.WU)((0,p.D)(j),"MMMM do, yyyy"):"Date TBD"}),(0,a.jsx)("p",{className:"text-xl text-gray-600",children:N})]}),(0,a.jsxs)("div",{className:"group border-b border-gray-300 pb-8 hover:border-black transition-colors cursor-default",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-widest text-gray-500 mb-2 group-hover:text-black",children:"Where"}),(0,a.jsx)("p",{className:"text-3xl md:text-4xl",children:w||"Location TBD"})]}),(_||k||x)&&(0,a.jsxs)("div",{className:"group pt-8 cursor-pointer",onClick:x,children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-widest text-gray-500 group-hover:text-black",children:"Digital Access"}),(0,a.jsx)("div",{className:"bg-black text-white px-3 py-1 text-xs uppercase font-bold animate-pulse",children:"Live"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("p",{className:"text-3xl md:text-4xl underline decoration-2 underline-offset-4 group-hover:text-blue-600 transition-colors",children:"Enter Viewing Room"}),(0,a.jsx)(i.Z,{className:"w-8 h-8 group-hover:translate-x-4 transition-transform"})]})]})]})]})}),q&&(0,a.jsxs)("div",{className:"mb-32",children:[(0,a.jsx)("div",{className:"w-full aspect-video bg-black p-4 md:p-8",children:(0,a.jsx)("iframe",{src:q,className:"w-full h-full opacity-80 hover:opacity-100 transition-opacity",allowFullScreen:!0})}),(0,a.jsxs)("div",{className:"flex justify-between mt-4 font-mono text-xs uppercase",children:[(0,a.jsx)("span",{children:"Motion Picture"}),(0,a.jsx)("span",{children:"Duration: Variable"})]})]})]}),(0,a.jsx)("footer",{className:"bg-black text-white py-24 px-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-end gap-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-8xl font-bold leading-none mb-4",children:[b.charAt(0),"&",y.charAt(0)]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 max-w-xs",children:"A union celebrating art, love, and the future."})]}),(0,a.jsx)("div",{className:"text-right",children:(null==F?void 0:F.name)&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-500 mb-2",children:"Captured By"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:F.name})]})})]})})]}):null}},44906:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(57437),r=t(2265),l=t(55066),i=t(40933),o=t(82755),n=t(71229),d=t(91231),c=t(47870),u=t(67159),m=t(26378);function p(e){let{weddingData:s={},layoutConfig:t={},onEnter:p}=e,[x,h]=(0,r.useState)(!1),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{h(!0)},[]);let{bride_name:f="",groom_name:v="",event_date:b="",event_time:y="",venue:j="",playback_url:N="",recording_url:w=""}=s,{font:_="CINZEL",primaryColor:k="#27272a",secondaryColor:S="#71717a",welcomeMessage:C="We're Getting Married",description:Z="",couplePhoto:P=null,preciousMoments:B=[],studioDetails:M={},preWeddingVideo:E=null,borders:F={},borderMasks:q={},templateVideoWeddingId:T=null,hasTemplateVideo:z=!1}=t,O={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:1,ease:"easeOut"}}};return x?(0,a.jsxs)("div",{ref:g,className:"min-h-screen w-full overflow-x-hidden selection:bg-stone-200",style:{backgroundColor:"#f5f5f4",fontFamily:_,color:k},children:[(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none opacity-40 z-0",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/rice-paper-2.png")'}}),(0,a.jsxs)("section",{className:"relative min-h-screen flex flex-col md:flex-row z-10",children:[(0,a.jsx)("div",{className:"w-full md:w-1/3 min-h-[50vh] md:h-screen flex flex-col items-center justify-center p-8 border-r border-stone-300 bg-[#f5f5f4]",children:(0,a.jsxs)(n.E.div,{initial:"hidden",animate:"visible",variants:O,className:"flex flex-col items-center gap-12",children:[(0,a.jsxs)("div",{className:"md:writing-vertical-rl text-center md:text-left space-y-4 md:space-y-0 md:space-x-8",children:[(0,a.jsx)("h1",{className:"text-5xl md:text-7xl lg:text-8xl tracking-widest font-light",style:{color:k},children:f}),(0,a.jsx)("div",{className:"w-12 h-px md:w-px md:h-12 bg-stone-400 mx-auto"}),(0,a.jsx)("h1",{className:"text-5xl md:text-7xl lg:text-8xl tracking-widest font-light",style:{color:k},children:v})]}),b&&(0,a.jsx)("div",{className:"text-sm tracking-[0.4em] uppercase text-stone-500 mt-8",children:(0,u.WU)((0,m.D)(b),"MMMM dd, yyyy")})]})}),(0,a.jsxs)("div",{className:"w-full md:w-2/3 h-[50vh] md:h-screen relative overflow-hidden",children:[z&&T?(0,a.jsx)(n.E.div,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},transition:{duration:2},className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(c.Z,{weddingId:T,className:"w-full h-full"})}):(null==P?void 0:P.url)?(0,a.jsxs)(n.E.div,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},transition:{duration:2},className:"w-full h-full",children:[(0,a.jsx)(d.Z,{src:P.url,alt:"Couple",maskUrl:null==F?void 0:F.couple,maskData:null==q?void 0:q.couple,aspectRatio:"custom",className:"w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-1000 ease-in-out",style:{height:"100%"}}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[80%] aspect-square border border-white/20 rounded-full opacity-50"})]}):(0,a.jsx)("div",{className:"w-full h-full bg-stone-200 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-32 h-32 border border-stone-400 rounded-full"})}),(0,a.jsx)("div",{className:"absolute bottom-8 right-8 animate-bounce",children:(0,a.jsx)(l.Z,{className:"w-6 h-6 text-white mix-blend-difference"})})]})]}),(0,a.jsx)("section",{className:"py-32 px-4 md:px-20 relative z-10",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,a.jsx)(n.E.div,{initial:{height:0},whileInView:{height:80},className:"w-px bg-stone-800 mx-auto mb-12"}),(0,a.jsxs)(n.E.h2,{initial:"hidden",whileInView:"visible",variants:O,className:"text-2xl md:text-3xl font-light leading-relaxed",children:['"',Z||C,'"']}),(0,a.jsxs)("div",{className:"mt-16 flex justify-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-stone-800"}),(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-stone-400"}),(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-stone-200"})]})]})}),(0,a.jsx)("section",{className:"py-20 px-4 md:px-12 z-10 relative bg-stone-100",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-20",children:[(0,a.jsxs)("div",{className:"space-y-12 flex flex-col justify-center",children:[(0,a.jsxs)(n.E.div,{initial:{x:-50,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-widest text-stone-500 mb-2",children:"The Ceremony"}),(0,a.jsx)("h3",{className:"text-4xl font-serif mb-4",children:j}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-stone-600",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:y})]}),(0,a.jsx)("div",{className:"w-20 h-px bg-stone-800 mt-8"})]}),(N||w||p)&&(0,a.jsx)(n.E.div,{initial:{x:-50,opacity:0},whileInView:{x:0,opacity:1},transition:{delay:.2,duration:.8},children:(0,a.jsxs)("button",{onClick:p,className:"group flex items-center gap-4 text-xl tracking-widest uppercase hover:text-stone-500 transition-colors",children:["Join Live ",(0,a.jsx)(o.Z,{className:"w-6 h-6 group-hover:translate-x-2 transition-transform"})]})})]}),(0,a.jsx)("div",{className:"relative h-[400px] md:h-[600px] bg-stone-200",children:E?(0,a.jsx)("iframe",{src:E,className:"w-full h-full grayscale hover:grayscale-0 transition-all duration-700",allowFullScreen:!0}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",children:(0,a.jsx)("div",{className:"w-[150%] h-[150%] bg-[url('https://www.transparenttextures.com/patterns/shattered-island.png')] opacity-20 rotate-12"})})})]})}),(null==B?void 0:B.length)>0&&(0,a.jsx)("section",{className:"py-32 px-4 z-10 relative",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("p",{className:"text-center text-xs uppercase tracking-widest mb-16",children:"Captured Moments"}),(0,a.jsx)("div",{className:"flex flex-col md:flex-row gap-8 justify-center items-center",children:B.slice(0,3).map((e,s)=>(0,a.jsxs)(n.E.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.2*s},className:"relative w-full md:w-1/3 aspect-[3/4] ".concat(1===s?"md:-mt-12":""),children:[(0,a.jsx)(d.Z,{src:e.url,alt:"Moment",className:"w-full h-full object-cover shadow-xl",style:{filter:"brightness(0.9) contrast(1.1)"}}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("span",{className:"text-xs font-serif italic text-stone-500",children:["0",s+1]})})]},s))})]})}),(0,a.jsxs)("footer",{className:"py-20 text-center z-10 relative border-t border-stone-200",children:[(0,a.jsx)("div",{className:"w-px h-16 bg-stone-300 mx-auto mb-8"}),(0,a.jsxs)("p",{className:"text-3xl font-light",style:{fontFamily:_},children:[f.charAt(0)," & ",v.charAt(0)]}),(null==M?void 0:M.name)&&(0,a.jsxs)("p",{className:"mt-8 text-[10px] uppercase tracking-widest text-stone-400",children:["Photography by ",M.name]})]})]}):null}},11980:function(e,s,t){"use strict";t.d(s,{X:function(){return d},bZ:function(){return n}});var a=t(57437),r=t(2265),l=t(13027),i=t(77700);let o=(0,l.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=r.forwardRef((e,s)=>{let{className:t,variant:r,...l}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,i.cn)(o({variant:r}),t),...l})});n.displayName="Alert",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",t),...r})}).displayName="AlertTitle";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",t),...r})});d.displayName="AlertDescription"},92404:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var a=t(57437),r=t(2265),l=t(77700);let i=r.forwardRef((e,s)=>{let{className:t,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},10464:function(e,s,t){"use strict";t.d(s,{_:function(){return d}});var a=t(57437),r=t(2265),l=t(38837),i=t(13027),o=t(77700);let n=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.f,{ref:s,className:(0,o.cn)(n(),t),...r})});d.displayName=l.f.displayName},32816:function(e,s,t){"use strict";t.d(s,{E:function(){return o}});var a=t(57437),r=t(2265),l=t(13993),i=t(77700);let o=r.forwardRef((e,s)=>{let{className:t,value:r,...o}=e;return(0,a.jsx)(l.fC,{ref:s,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...o,children:(0,a.jsx)(l.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});o.displayName=l.fC.displayName},46260:function(e,s,t){"use strict";t.d(s,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return g},i4:function(){return m},ki:function(){return u}});var a=t(57437),r=t(2265),l=t(89363),i=t(42421),o=t(14392),n=t(22468),d=t(77700);let c=l.fC;l.ZA;let u=l.B4,m=r.forwardRef((e,s)=>{let{className:t,children:r,...o}=e;return(0,a.jsxs)(l.xz,{ref:s,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap bg-transparent px-0 py-0 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-0 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 [&>span]:border-none [&>span]:outline-none [&>span]:focus:border-none [&>span]:focus:outline-none [&>span]:focus:ring-0 [&>span]:focus:ring-offset-0 [&>span]:!border-0 [&>span]:!outline-none [&>span]:!ring-0",t),...o,children:[r,(0,a.jsx)(l.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50 ml-1"})})]})});m.displayName=l.xz.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.u_,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})});p.displayName=l.u_.displayName;let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.$G,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=l.$G.displayName;let h=r.forwardRef((e,s)=>{let{className:t,children:r,position:i="popper",...o}=e;return(0,a.jsx)(l.h_,{children:(0,a.jsxs)(l.VY,{ref:s,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...o,children:[(0,a.jsx)(p,{}),(0,a.jsx)(l.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(x,{})]})})});h.displayName=l.VY.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.__,{ref:s,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",t),...r})}).displayName=l.__.displayName;let g=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(l.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none border-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>span]:border-none [&>span]:outline-none [&>span]:!border-0 [&>span]:!outline-none",t),...i,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.wU,{children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(l.eT,{children:r})]})});g.displayName=l.ck.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=l.Z0.displayName},65236:function(e,s,t){"use strict";t.d(s,{SP:function(){return d},dr:function(){return n},mQ:function(){return o},nU:function(){return c}});var a=t(57437),r=t(2265),l=t(62447),i=t(77700);let o=l.fC,n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.aV,{ref:s,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...r})});n.displayName=l.aV.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...r})});d.displayName=l.xz.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});c.displayName=l.VY.displayName},7990:function(e,s,t){"use strict";t.d(s,{g:function(){return i}});var a=t(57437),r=t(2265),l=t(77700);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r})});i.displayName="Textarea"},37854:function(e,s,t){"use strict";t.d(s,{BorderProvider:function(){return i},P:function(){return o}});var a=t(57437),r=t(2265);let l=(0,r.createContext)();function i(e){let{children:s}=e,[t,i]=(0,r.useState)({groom_border_id:null,bride_border_id:null,couple_border_id:null,cover_border_id:null,precious_moment_border_id:null});return(0,a.jsx)(l.Provider,{value:{currentBorders:t,updateBorder:(e,s)=>{i(t=>({...t,[e]:s}))},updateAllBorders:e=>{i(e)}},children:s})}let o=()=>(0,r.useContext)(l)},92898:function(e,s,t){"use strict";t.d(s,{FontProvider:function(){return i},j:function(){return o}});var a=t(57437),r=t(2265);let l=(0,r.createContext)();function i(e){let{children:s}=e,[t,i]=(0,r.useState)("Great Vibes"),[o]=(0,r.useState)({Inter:"var(--font-inter), sans-serif","Great Vibes":"var(--font-greatvibes), cursive","Playfair Display":"var(--font-playfair), serif",Cinzel:"var(--font-cinzel), serif",Montserrat:"var(--font-montserrat), sans-serif",Lato:"var(--font-lato), sans-serif",Caveat:"var(--font-caveat), cursive","Bebas Neue":"var(--font-bebas), cursive","Rozha One":"var(--font-rozha), serif","Pinyon Script":"var(--font-pinyon), cursive"});return(0,a.jsx)(l.Provider,{value:{currentFont:t,fontMappings:o,updateFont:e=>{i(e)}},children:s})}let o=()=>(0,r.useContext)(l)},71561:function(e,s,t){"use strict";function a(e){if(!e||"string"!=typeof e)return null;let s=(e=e.trim()).match(/(?:youtube\.com\/watch\?v=|youtube\.com\/watch\?.*&v=)([a-zA-Z0-9_-]{11})/);if(s)return s[1];let t=e.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/);if(t)return t[1];let a=e.match(/youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/);if(a)return a[1];let r=e.match(/youtube\.com\/v\/([a-zA-Z0-9_-]{11})/);return r?r[1]:null}function r(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a(e);if(!t)return null;let{autoplay:r=0,mute:l=0,controls:i=1,modestbranding:o=1,rel:n=0}=s,d=new URLSearchParams({autoplay:r.toString(),mute:l.toString(),controls:i.toString(),modestbranding:o.toString(),rel:n.toString()});return"https://www.youtube.com/embed/".concat(t,"?").concat(d.toString())}function l(e){return null!==a(e)}t.d(s,{Tc:function(){return r},yk:function(){return l}})}},function(e){e.O(0,[9767,4868,7776,7515,1229,2889,2151,5787,7999,7090,9879,2628,8492,6340,95,1881,8358,5884,6046,9178,2645,508,9036,8209,2971,7023,1744],function(){return e(e.s=13170)}),_N_E=e.O()}]);