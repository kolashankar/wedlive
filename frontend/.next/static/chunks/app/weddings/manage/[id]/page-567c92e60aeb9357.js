(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1624,7611],{13170:function(e,s,t){Promise.resolve().then(t.bind(t,73093))},73093:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return sx}});var a=t(57437),l=t(2265),r=t(15730),i=t(56360),o=t(10273),n=t(65236),d=t(79004),c=t(17953),u=t(11980),m=t(3274),x=t(95137),h=t(68954),p=t(74453),g=t(23787),f=t(957),v=t(14504),j=t(33907),b=t(18604),y=t(24258),N=t(75733),w=t(92940),_=t(6884),k=t(64042),S=t(24241),C=t(49321),Z=t(87138),P=t(16463),E=t(27776),M=t(6657),z=t(67159),B=t(10464),F=t(7990),A=t(32816),T=t(74697),U=t(76780);function O(e){let{weddingId:s,onUploadComplete:t}=e,[r,n]=(0,l.useState)(!1),[d,c]=(0,l.useState)(0),[x,p]=(0,l.useState)(null),[g,f]=(0,l.useState)(""),[v,j]=(0,l.useState)(null),[y,N]=(0,l.useState)(null),[w,_]=(0,l.useState)({uploaded:0,total:0,failed:[]}),[k,S]=(0,l.useState)("general"),C=(0,l.useRef)(null),Z=e=>{if(e<=209715200)return{chunkSize:e,totalChunks:1};let s=Math.ceil(e/209715200);return{chunkSize:Math.ceil(e/(s=Math.max(8,Math.min(15,s)))),totalChunks:s}},P=e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!t)return;if(!t.type.startsWith("image/")&&!t.type.startsWith("video/")){E.toast.error("Please select an image or video file");return}if(t.size>10737418240){E.toast.error("File size must be less than 10GB");return}p(t),N(t.type.startsWith("image/")?"photo":"video");let a=new FileReader;a.onload=e=>{j(e.target.result)},a.readAsDataURL(t);let{chunkSize:l,totalChunks:r}=Z(t.size);r>1&&E.toast.info("Large file detected! Will upload in ".concat(r," chunks (").concat((l/1024/1024).toFixed(0),"MB each)"))},z=async function(e,s,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;try{let a=new FormData;return a.append("upload_id",e),a.append("chunk_index",s),a.append("chunk",t,"chunk_".concat(s)),await M.default.post("/api/media/upload/chunk",a,{headers:{"Content-Type":"multipart/form-data"}}),{success:!0,chunkIndex:s}}catch(l){if(console.error("Chunk ".concat(s," upload failed:"),l),a<3)return console.log("Retrying chunk ".concat(s," (attempt ").concat(a+1,"/").concat(3,")")),await new Promise(e=>setTimeout(e,1e3*(a+1))),z(e,s,t,a+1);return{success:!1,chunkIndex:s,error:l}}},O=async(e,s)=>{let t=[],a=[];for(let l=0;l<s.length;l+=5){let r=s.slice(l,l+5).map(s=>{let{index:t,blob:a}=s;return z(e,t,a)});(await Promise.all(r)).forEach(e=>{e.success?(t.push(e.chunkIndex),_(e=>({...e,uploaded:e.uploaded+1})),c(Math.round(t.length/s.length*95))):(a.push(e.chunkIndex),_(s=>({...s,failed:[...s.failed,e.chunkIndex]})))})}return{results:t,failed:a}},D=async()=>{if(!x){E.toast.error("Please select a file to upload");return}n(!0),c(0),_({uploaded:0,total:0,failed:[]});try{let{chunkSize:e,totalChunks:a}=Z(x.size);if(1===a){let e=new FormData;e.append("file",x),e.append("wedding_id",s),e.append("caption",g),e.append("category",k);let a="photo"===y?"/api/media/upload/photo":"/api/media/upload/video",l=await M.default.post(a,e,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5,onUploadProgress:e=>{let s=Math.round(100*e.loaded/e.total);c(s)}});E.toast.success("".concat("photo"===y?"Photo":"Video"," uploaded successfully!")),R(),t&&t(l.data);return}_({uploaded:0,total:a,failed:[]});let l=(await M.default.post("/api/media/upload/init",{wedding_id:s,filename:x.name,total_size:x.size,total_chunks:a,media_type:y,caption:g,category:k})).data.upload_id;E.toast.info("Starting chunked upload: ".concat(a," chunks"));let r=[];for(let s=0;s<a;s++){let t=s*e,a=Math.min(t+e,x.size),l=x.slice(t,a);r.push({index:s,blob:l})}c(5);let{results:i,failed:o}=await O(l,r);if(o.length>0)throw Error("Failed to upload ".concat(o.length," chunks: ").concat(o.join(", ")));c(95);let n=new FormData;n.append("upload_id",l);let d=await M.default.post("/api/media/upload/complete",n,{headers:{"Content-Type":"multipart/form-data"}});c(100),E.toast.success("".concat("photo"===y?"Photo":"Video"," uploaded successfully! (").concat(a," chunks)")),R(),t&&t(d.data)}catch(t){var e,a,l;console.error("Upload error:",t);let s=(null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.detail)||t.message||"Failed to upload media";E.toast.error(s),(null===(l=t.response)||void 0===l?void 0:l.status)===403&&E.toast.error("Storage limit reached. Please upgrade your plan.",{duration:5e3})}finally{n(!1)}},R=()=>{p(null),f(""),j(null),N(null),S("general"),c(0),_({uploaded:0,total:0,failed:[]}),C.current&&(C.current.value="")};return(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5 mr-2"}),"Upload Media"]}),(0,a.jsx)(o.SZ,{children:"Add photos and videos to your wedding gallery (up to 10GB per file)"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative rounded-lg overflow-hidden bg-gray-100",children:["photo"===y?(0,a.jsx)("img",{src:v,alt:"Preview",className:"w-full h-64 object-cover"}):(0,a.jsx)("div",{className:"relative w-full h-64",children:(0,a.jsx)("video",{src:v,className:"w-full h-full object-cover",controls:!0})}),!r&&(0,a.jsx)("button",{onClick:R,className:"absolute top-2 right-2 bg-black/60 hover:bg-black/80 text-white rounded-full p-2 transition-colors",children:(0,a.jsx)(T.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"flex items-center",children:["photo"===y?(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}):(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),x.name]}),(0,a.jsxs)("span",{children:[(x.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{htmlFor:"caption",children:"Caption (optional)"}),(0,a.jsx)(F.g,{id:"caption",value:g,onChange:e=>f(e.target.value),placeholder:"Add a caption to your media...",disabled:r,rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{htmlFor:"category",children:"Photo Category"}),(0,a.jsxs)("select",{id:"category",value:k,onChange:e=>S(e.target.value),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"general",children:"General Gallery"}),(0,a.jsx)("option",{value:"couple",children:"Couple Photo"}),(0,a.jsx)("option",{value:"bride",children:"Bride Photo"}),(0,a.jsx)("option",{value:"groom",children:"Groom Photo"}),(0,a.jsx)("option",{value:"moment",children:"Precious Moment"}),(0,a.jsx)("option",{value:"cover",children:"Cover Photo"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Select a category to automatically use this photo in your wedding theme"})]}),r&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:w.total>1?"Uploading chunks... ".concat(w.uploaded,"/").concat(w.total):"Uploading..."}),(0,a.jsxs)("span",{className:"font-semibold text-rose-600",children:[d,"%"]})]}),(0,a.jsx)(A.E,{value:d,className:"h-2"}),w.failed.length>0&&(0,a.jsxs)(u.bZ,{className:"border-yellow-500 bg-yellow-50",children:[(0,a.jsx)(U.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsxs)(u.X,{className:"text-yellow-800",children:["Retrying failed chunks: ",w.failed.join(", ")]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.z,{onClick:D,disabled:r,className:"flex-1 bg-gradient-to-r from-rose-500 to-purple-600 text-white hover:from-rose-600 hover:to-purple-700",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Upload ","photo"===y?"Photo":"Video"]})}),!r&&(0,a.jsx)(i.z,{variant:"outline",onClick:R,children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-rose-500 transition-colors",onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();let s=e.dataTransfer.files;s&&s[0]&&P({target:{files:[s[0]]}})},children:[(0,a.jsx)("input",{ref:C,type:"file",accept:"image/*,video/*",onChange:P,className:"hidden"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"w-8 h-8 text-rose-500"})}),(0,a.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"w-8 h-8 text-purple-500"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Drop files here or click to browse"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Supports images and videos up to 10GB"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Large files (over 200MB) will be uploaded in chunks for reliability"})]}),(0,a.jsx)(i.z,{type:"button",variant:"outline",onClick:e=>{var s;e.stopPropagation(),null===(s=C.current)||void 0===s||s.click()},children:"Select Files"})]})]}),(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(U.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{className:"text-sm",children:[(0,a.jsx)("strong",{children:"Tip:"})," Upload high-quality photos and videos to preserve precious memories. Supported formats: JPG, PNG, MP4, MOV"]})]})]})})]})}var D=t(2645),R=t(90223),q=t(208),I=t(80233),L=t(92513),V=t(10883),G=t(68639),Y=t(92404);function W(e){let{weddingId:s,isPremium:t,rtmpUrl:r}=e,[n,c]=(0,l.useState)([]),[x,p]=(0,l.useState)(!1),[g,v]=(0,l.useState)(!1),[j,b]=(0,l.useState)(""),[y,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t&&w()},[s,t]);let w=async()=>{try{p(!0);let e=await M.default.get("/api/streams/".concat(s,"/cameras"));c(e.data||[])}catch(e){console.error("Error loading cameras:",e)}finally{p(!1)}},k=async()=>{if(!j.trim()){E.toast.error("Please enter a camera name");return}try{N(!0),await M.default.post("/api/streams/camera/add",{wedding_id:s,camera_name:j}),E.toast.success("Camera added successfully!"),b(""),v(!1),w()}catch(s){var e,t;console.error("Error adding camera:",s),E.toast.error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Failed to add camera")}finally{N(!1)}},S=async e=>{if(confirm("Are you sure you want to remove this camera?"))try{await M.default.delete("/api/streams/camera/".concat(s,"/").concat(e)),E.toast.success("Camera removed"),w()}catch(e){console.error("Error removing camera:",e),E.toast.error("Failed to remove camera")}},C=(e,s)=>{navigator.clipboard.writeText(e),E.toast.success("".concat(s," copied!"))},P=e=>{let s={waiting:{variant:"secondary",label:"Waiting"},connected:{variant:"default",label:"Connected",className:"bg-green-500"},disconnected:{variant:"destructive",label:"Disconnected"}},t=s[e]||s.waiting;return(0,a.jsx)(d.C,{variant:t.variant,className:t.className,children:t.label})};return t?(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"w-5 h-5"}),"Multi-Camera Sources"]}),(0,a.jsx)(o.SZ,{children:"Manage multiple camera streams for your wedding"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)(G.Vq,{open:g,onOpenChange:v,children:[(0,a.jsx)(G.hg,{asChild:!0,children:(0,a.jsxs)(i.z,{variant:"outline",className:"w-full",children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 mr-2"}),"Add Camera Source"]})}),(0,a.jsxs)(G.cZ,{children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Add Camera Source"}),(0,a.jsx)(G.Be,{children:"Add a new camera stream for multi-angle coverage"})]}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{htmlFor:"camera-name",children:"Camera Name"}),(0,a.jsx)(Y.I,{id:"camera-name",placeholder:"e.g., Sony A7S III, iPhone Camera, Drone View",value:j,onChange:e=>b(e.target.value),onKeyDown:e=>"Enter"===e.key&&k()})]})}),(0,a.jsx)(G.cN,{children:(0,a.jsx)(i.z,{onClick:k,disabled:y||!j.trim(),children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"})," Adding..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 mr-2"})," Add Camera"]})})})]})]}),x?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 animate-spin text-gray-400"})}):0===n.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No additional cameras added yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:'Click "Add Camera Source" to get started'})]}):(0,a.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-3 hover:border-rose-200 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Added ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[P(e.status),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>S(e.camera_id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:(0,a.jsx)(V.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"password",value:e.stream_key,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-xs"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>C(e.stream_key,"Stream Key"),children:(0,a.jsx)(_.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,a.jsx)("strong",{children:"Server:"})," ",r||"rtmp://live.wedlive.app/live"]})})]},e.camera_id))}),n.length>0&&(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{className:"text-xs",children:"Each camera uses its own stream key. Configure OBS Studio or your streaming software with the corresponding stream key for each camera."})]})]})]}):(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"w-5 h-5"}),"Multi-Camera Support",(0,a.jsxs)(d.C,{className:"ml-2 bg-gradient-to-r from-yellow-500 to-orange-500",children:[(0,a.jsx)(f.Z,{className:"w-3 h-3 mr-1"}),"Premium"]})]}),(0,a.jsx)(o.SZ,{children:"Stream from multiple camera angles simultaneously"})]}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{children:["Multi-camera support is available for Premium subscribers only.",(0,a.jsx)(Z.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade to Premium"})]})]})})]})}var H=t(42421),K=t(87592),X=t(91863),J=t(48496),Q=t(46290),$=t(86244),ee=t(92095),es=t(99913),et=t(71976);let ea=e=>{if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["B","KB","MB","GB"][s]};function el(e){let{weddingId:s,onFolderSelect:t}=e,[r,n]=(0,l.useState)([]),[d,c]=(0,l.useState)(!1),[u,m]=(0,l.useState)(new Set),[x,h]=(0,l.useState)(null),[p,g]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1),[j,y]=(0,l.useState)(!1),[N,w]=(0,l.useState)({name:"",description:"",parentFolderId:null}),[_,k]=(0,l.useState)(null),[S,C]=(0,l.useState)(null);(0,l.useEffect)(()=>{Z()},[s]);let Z=async()=>{try{c(!0);let e=await M.default.get("/api/folders/wedding/".concat(s));n(e.data||[])}catch(e){console.error("Error loading folders:",e),E.toast.error("Failed to load folders")}finally{c(!1)}},P=e=>{let s=new Set(u);s.has(e)?s.delete(e):s.add(e),m(s)},z=async()=>{if(!N.name.trim()){E.toast.error("Folder name is required");return}try{c(!0),await M.default.post("/api/folders/create",{wedding_id:s,name:N.name,parent_folder_id:N.parentFolderId,description:N.description}),E.toast.success("Folder created successfully!"),g(!1),w({name:"",description:"",parentFolderId:null}),Z()}catch(s){var e,t;console.error("Error creating folder:",s),E.toast.error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Failed to create folder")}finally{c(!1)}},B=async()=>{if(!N.name.trim()){E.toast.error("Folder name is required");return}try{c(!0),await M.default.put("/api/folders/".concat(_.id),{name:N.name,description:N.description}),E.toast.success("Folder updated successfully!"),v(!1),k(null),w({name:"",description:"",parentFolderId:null}),Z()}catch(t){var e,s;console.error("Error updating folder:",t),E.toast.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"Failed to update folder")}finally{c(!1)}},A=async e=>{let s=e.media_count>0||e.subfolder_count>0?'Are you sure you want to delete "'.concat(e.name,'"? All content will be moved to ').concat(e.parent_folder_id?"its parent folder":"root","."):'Are you sure you want to delete "'.concat(e.name,'"?');if(window.confirm(s))try{c(!0),await M.default.delete("/api/folders/".concat(e.id)),E.toast.success("Folder deleted successfully"),Z()}catch(e){var t,a;console.error("Error deleting folder:",e),E.toast.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail)||"Failed to delete folder")}finally{c(!1)}},T=async()=>{if(_)try{c(!0),await M.default.post("/api/folders/move",{folder_id:_.id,new_parent_id:S}),E.toast.success("Folder moved successfully!"),y(!1),k(null),C(null),Z()}catch(t){var e,s;console.error("Error moving folder:",t),E.toast.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"Failed to move folder")}finally{c(!1)}},U=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;w({name:"",description:"",parentFolderId:e}),g(!0)},O=e=>{k(e),w({name:e.name,description:e.description||"",parentFolderId:e.parent_folder_id}),v(!0)},D=e=>{k(e),C(null),y(!0)},R=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(e=>{let l=u.has(e.id),r=e.children&&e.children.length>0;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-100 transition-colors group ".concat(x===e.id?"bg-blue-50 border-2 border-blue-300":"border-2 border-transparent"),style:{paddingLeft:"".concat(24*s+12,"px")},children:(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[r?(0,a.jsx)("button",{onClick:()=>P(e.id),className:"p-1 hover:bg-gray-200 rounded",children:l?(0,a.jsx)(H.Z,{className:"w-4 h-4 text-gray-600"}):(0,a.jsx)(K.Z,{className:"w-4 h-4 text-gray-600"})}):(0,a.jsx)("div",{className:"w-6"}),(0,a.jsxs)("button",{onClick:()=>{h(e.id),t&&t(e.id)},className:"flex items-center gap-2 flex-1 text-left",children:[l?(0,a.jsx)(X.Z,{className:"w-5 h-5 text-yellow-500"}):(0,a.jsx)(J.Z,{className:"w-5 h-5 text-blue-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"w-3 h-3"}),e.media_count]}),e.subfolder_count>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(J.Z,{className:"w-3 h-3"}),e.subfolder_count]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(Q.Z,{className:"w-3 h-3"}),ea(e.folder_size)]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>U(e.id),title:"Create subfolder",children:(0,a.jsx)($.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>D(e),title:"Move folder",children:(0,a.jsx)(ee.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>O(e),title:"Edit folder",children:(0,a.jsx)(es.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>A(e),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete folder",children:(0,a.jsx)(V.Z,{className:"w-4 h-4"})})]})]})}),l&&r&&(0,a.jsx)("div",{className:"mt-1",children:R(e.children,s+1)})]},e.id)})},q=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.filter(e=>e.id!==t).map(e=>_&&I(e.id,_.id)?null:(0,a.jsxs)(l.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>C(e.id),className:"w-full text-left p-2 rounded hover:bg-gray-100 flex items-center gap-2 ".concat(S===e.id?"bg-blue-50 border-2 border-blue-300":""),style:{paddingLeft:"".concat(16*s+8,"px")},children:[(0,a.jsx)(J.Z,{className:"w-4 h-4 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm",children:e.name})]}),e.children&&e.children.length>0&&q(e.children,s+1,t)]},e.id))},I=(e,s)=>{let t=r.find(s=>s.id===e);return!!t&&!!t.parent_folder_id&&(t.parent_folder_id===s||I(t.parent_folder_id,s))},L=(e=>{let s={},t=[];return e.forEach(e=>{s[e.id]={...e,children:[]}}),e.forEach(e=>{e.parent_folder_id&&s[e.parent_folder_id]?s[e.parent_folder_id].children.push(s[e.id]):t.push(s[e.id])}),t})(r),W=r.reduce((e,s)=>e+s.media_count,0),el=r.reduce((e,s)=>e+s.folder_size,0);return(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(J.Z,{className:"w-5 h-5"}),"Media Folders"]}),(0,a.jsx)(o.SZ,{className:"mt-1",children:"Organize your wedding media into nested folders"}),r.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:[r.length," folders"]}),(0,a.jsxs)("span",{children:[W," items"]}),(0,a.jsxs)("span",{children:[ea(el)," total"]})]})]}),(0,a.jsxs)(i.z,{onClick:()=>U(),disabled:d,size:"sm",children:[(0,a.jsx)($.Z,{className:"w-4 h-4 mr-2"}),"New Folder"]})]})}),(0,a.jsxs)(o.aY,{children:[d&&0===r.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,a.jsx)("p",{children:"Loading folders..."})}):0===r.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(J.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"No folders yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Create folders to organize your media"})]}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>{h(null),t&&t(null)},className:"w-full flex items-center justify-between p-3 rounded-lg transition-all ".concat(null===x?"bg-gradient-to-r from-pink-100 to-purple-100 border-2 border-pink-300":"bg-gradient-to-r from-pink-50 to-purple-50 hover:from-pink-100 hover:to-purple-100 border-2 border-transparent"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-semibold",children:"All Media"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"View all photos and videos"})]})]}),(0,a.jsx)(et.Z,{className:"w-5 h-5 text-gray-400"})]}),(0,a.jsx)("div",{className:"mt-2 border-t pt-2",children:R(L)})]}),(0,a.jsx)(G.Vq,{open:p,onOpenChange:g,children:(0,a.jsxs)(G.cZ,{children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Create New Folder"}),(0,a.jsx)(G.Be,{children:N.parentFolderId?"Create a subfolder inside the selected folder":"Create a new root folder to organize media"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Folder Name *"}),(0,a.jsx)(Y.I,{value:N.name,onChange:e=>w({...N,name:e.target.value}),placeholder:"e.g., Ceremony, Reception, Portraits",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Description (Optional)"}),(0,a.jsx)(F.g,{value:N.description,onChange:e=>w({...N,description:e.target.value}),placeholder:"Add a description for this folder...",rows:3,className:"mt-1"})]})]}),(0,a.jsxs)(G.cN,{children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>{g(!1),w({name:"",description:"",parentFolderId:null})},children:"Cancel"}),(0,a.jsx)(i.z,{onClick:z,disabled:d,children:d?"Creating...":"Create Folder"})]})]})}),(0,a.jsx)(G.Vq,{open:f,onOpenChange:v,children:(0,a.jsxs)(G.cZ,{children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Edit Folder"}),(0,a.jsx)(G.Be,{children:"Update folder name and description"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Folder Name *"}),(0,a.jsx)(Y.I,{value:N.name,onChange:e=>w({...N,name:e.target.value}),placeholder:"Folder name",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Description (Optional)"}),(0,a.jsx)(F.g,{value:N.description,onChange:e=>w({...N,description:e.target.value}),placeholder:"Add a description...",rows:3,className:"mt-1"})]})]}),(0,a.jsxs)(G.cN,{children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>{v(!1),k(null),w({name:"",description:"",parentFolderId:null})},children:"Cancel"}),(0,a.jsx)(i.z,{onClick:B,disabled:d,children:d?"Updating...":"Update Folder"})]})]})}),(0,a.jsx)(G.Vq,{open:j,onOpenChange:y,children:(0,a.jsxs)(G.cZ,{children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Move Folder"}),(0,a.jsxs)(G.Be,{children:['Select a new parent folder or choose root to move "',null==_?void 0:_.name,'"']})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("button",{onClick:()=>C(null),className:"w-full text-left p-2 rounded hover:bg-gray-100 flex items-center gap-2 ".concat(null===S?"bg-blue-50 border-2 border-blue-300":""),children:[(0,a.jsx)(X.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Root (No Parent)"})]}),q(L,0,null==_?void 0:_.id)]}),(0,a.jsxs)(G.cN,{children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>{y(!1),k(null),C(null)},children:"Cancel"}),(0,a.jsx)(i.z,{onClick:T,disabled:d||S===(null==_?void 0:_.parent_folder_id),children:d?"Moving...":"Move Folder"})]})]})})]})]})}var er=t(46260),ei=t(44662),eo=t(98094),en=t(24501),ed=t(13231),ec=t(58184),eu=t(74232),em=t(78614),ex=t(92898),eh=t(37854),ep=t(87611),eg=t(90508),ef=t(9036),ev=t(18814),ej=t(94835),eb=t(8209),ey=t(59451),eN=t(44906),ew=JSON.parse('{"layout_id":"layout_1","name":"Vertical Wedding Invitation","description":"Single-column vertical layout with dynamic video template (9:16 or 16:9), couple photo with border, YouTube video, studio branding, and precious moments gallery. Fully mobile responsive.","version":"3.0","thumbnail":"/layout-previews/layout1.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Couple photo with decorative border (Section 2)","supports_border":true,"aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":12,"description":"Polaroid-style photo gallery (Section 5)","supports_border":true}},"videos":{"templateVideo":{"required":false,"description":"Dynamic template video with overlays (Section 1)","aspect_ratio":"dynamic","supports_overlays":true},"preWeddingVideo":{"required":false,"description":"YouTube video embed (Section 3)","embed_type":"youtube"}},"branding":{"studioDetails":{"required":false,"description":"Studio branding section (Section 4)","includes":["logo_url","tagline"]}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for couple photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery images"}}},"style_inputs":{"font":{"required":true,"default":"Playfair Display","description":"Primary font family"},"primaryColor":{"required":true,"default":"#1e3a8a","description":"Primary accent color"}},"layout_structure":{"sections":["template_video_section","couple_photo_section","youtube_video_section","studio_branding_section","precious_moments_gallery"],"orientation":"vertical","responsive":true,"dynamic_aspect_ratio":true}}'),e_=JSON.parse('{"layout_id":"layout_2","name":"Center Focus","description":"Large centered couple photo as hero with gallery below. Emphasizes the couple\'s unity.","version":"1.0","thumbnail":"/layout-previews/layout2.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main couple photo (hero image)","supports_border":true,"default_position":"center","aspect_ratio":"square"},"coverPhotos":{"required":false,"type":"array","max_count":5,"description":"Background carousel photos"},"preciousMoments":{"required":false,"type":"array","max_count":20,"description":"Gallery photos with precious moments","supports_border":true,"layout_style":["grid","carousel"]},"studioImage":{"required":false,"description":"Studio partner logo/photo","supports_border":false},"streamImage":{"required":false,"description":"Live stream thumbnail"}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":150,"description":"Welcome greeting text"},"description":{"required":false,"max_length":400,"description":"Love story or event description"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"},"studioLogo":{"required":false,"description":"Studio logo URL"},"studioContact":{"required":false,"description":"Studio contact information"}},"backgrounds":{"heroBackground":{"required":false,"description":"Hero section background image"},"liveBackground":{"required":false,"description":"Live streaming section background"}}},"style_inputs":{"font":{"required":true,"default":"Cormorant Garamond","description":"Primary font family"},"primaryColor":{"required":true,"default":"#3b82f6","description":"Primary brand color (hex)"},"secondaryColor":{"required":true,"default":"#8b5cf6","description":"Secondary accent color (hex)"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border style for gallery photos"}},"layout_structure":{"sections":["hero_center","couple_intro","event_details","precious_moments_gallery","live_stream","studio_details"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),ek=JSON.parse('{"layout_id":"layout_3","name":"Horizontal Timeline","description":"Interactive horizontal scrolling journey on desktop, beautiful vertical timeline on mobile. Tells a chronological love story.","version":"2.0","thumbnail":"/layout-previews/layout3.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Hero photo at start of timeline","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":10,"description":"Photos scattered along the timeline","supports_border":true}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Opening tagline"},"description":{"required":false,"max_length":400,"description":"Love story narrative"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for hero photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for timeline photos"}}},"style_inputs":{"font":{"required":true,"default":"Lato","description":"Primary font family"},"primaryColor":{"required":true,"default":"#be185d","description":"Timeline connector color"}},"layout_structure":{"sections":["horizontal_scroll_container","hero_section","story_card","moments_scattered","event_details_card","media_cta"]}}'),eS=JSON.parse('{"layout_id":"layout_4","name":"Modern Scrapbook","description":"A warm, personal layout designed like a handcrafted scrapbook. Features taped photos, handwritten fonts, stickers, and a textured paper feel.","version":"2.0","thumbnail":"/layout-previews/layout4.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main Polaroid Photo","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":12,"description":"Scattered polaroid photos","supports_border":true}},"videos":{"preWeddingVideo":{"required":false,"description":"Video tape style embed","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":60,"description":"Notebook header"},"description":{"required":false,"max_length":800,"description":"Handwritten note"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for main photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery photos"}}},"style_inputs":{"font":{"required":true,"default":"Indie Flower","description":"Handwriting font family"},"primaryColor":{"required":true,"default":"#44403c","description":"Ink color"}},"layout_structure":{"sections":["polaroid_hero","notebook_story","ticket_stubs_details","scattered_gallery","video_tape","footer"]}}'),eC=JSON.parse('{"layout_id":"layout_5","name":"Minimalist Card","description":"Ultra-clean card-based design with emphasis on negative space and elegant simplicity. Modern minimalist aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout5.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main couple photo in card","supports_border":true,"default_position":"center","aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":9,"description":"Minimal gallery (3x3 grid)","supports_border":false,"layout_style":["grid"]},"studioImage":{"required":false,"description":"Studio logo minimal","supports_border":false}},"videos":{"preWeddingVideo":{"required":false,"description":"Video in clean card","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":80,"description":"Brief welcome text"},"description":{"required":false,"max_length":300,"description":"Short description only"}},"studio_info":{"studioName":{"required":false,"description":"Studio name"}},"backgrounds":{"heroBackground":{"required":false,"description":"Subtle background"}}},"style_inputs":{"font":{"required":true,"default":"Montserrat","description":"Clean modern font"},"primaryColor":{"required":true,"default":"#000000","description":"Primary color (typically black/dark)"},"secondaryColor":{"required":true,"default":"#737373","description":"Secondary gray tone"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"}},"layout_structure":{"sections":["hero_card","info_card","gallery_card","live_card","footer_card"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eZ=JSON.parse('{"layout_id":"layout_6","name":"Romantic Overlay","description":"Full-screen couple photo with elegant text overlay, floating transparent cards, and dreamy romantic aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout6.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Full-screen background couple photo","supports_border":false,"default_position":"background","aspect_ratio":"landscape"},"bridePhoto":{"required":false,"description":"Bride photo (circular overlay)","supports_border":false,"aspect_ratio":"square"},"groomPhoto":{"required":false,"description":"Groom photo (circular overlay)","supports_border":false,"aspect_ratio":"square"},"preciousMoments":{"required":false,"type":"array","max_count":6,"description":"Floating card gallery (limited to 6)","supports_border":true,"layout_style":["grid"]}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Short, impactful romantic message"},"description":{"required":false,"max_length":300,"description":"Love story in floating card"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"},"studioContact":{"required":false,"description":"Studio contact information"}},"backgrounds":{"heroBackground":{"required":false,"description":"Alternative to couple photo as background"}}},"style_inputs":{"font":{"required":true,"default":"Pinyon Script","description":"Primary font family (script recommended)"},"primaryColor":{"required":true,"default":"#fbbf24","description":"Primary accent color (hex)"},"secondaryColor":{"required":true,"default":"#f59e0b","description":"Secondary accent color (hex)"}},"border_slots":{"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border style for gallery photos"}},"layout_structure":{"sections":["hero_fullscreen_overlay","description_card","precious_moments_floating","video_story","studio_details"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eP=JSON.parse('{"layout_id":"layout_7","name":"Editorial Grid","description":"Avant-garde broken grid layout. Asymmetrical image placement, sticky hero, brutalist typography, and museum-like aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout7.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Sticky hero background image","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":8,"description":"Asymmetrical gallery images","supports_border":true}},"videos":{"preWeddingVideo":{"required":false,"description":"Full-width motion picture","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":30,"description":"Top corner label"},"description":{"required":false,"max_length":600,"description":"Exhibition note (main text)"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for hero image"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery images"}}},"style_inputs":{"font":{"required":true,"default":"Space Grotesk","description":"Primary font family (Sans Serif recommended)"},"primaryColor":{"required":true,"default":"#000000","description":"Primary text color"}},"layout_structure":{"sections":["sticky_parallax_hero","exhibition_intro","asymmetrical_gallery","brutalist_details","cinema_video","footer"]}}'),eE=JSON.parse('{"layout_id":"layout_8","name":"Zen Minimalist","description":"Ultra-minimalist vertical flow with maximum white space, large impactful typography, and single-column layout focused on essential elements.","version":"2.0","thumbnail":"/layout-previews/layout8.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Primary couple photo (full-width)","supports_border":true,"aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":3,"description":"Three-column minimal gallery (limited to 3)","supports_border":false,"layout_style":["three-column"]}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Simple, elegant message"},"description":{"required":false,"max_length":300,"description":"Minimal love story"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"}}},"style_inputs":{"font":{"required":true,"default":"CINZEL","description":"Primary font family (serif recommended)"},"primaryColor":{"required":true,"default":"#18181b","description":"Primary text color (dark recommended)"},"secondaryColor":{"required":true,"default":"#71717a","description":"Secondary text color (gray recommended)"}},"layout_structure":{"sections":["hero_minimal","couple_photo_fullwidth","description_centered","event_details_vertical","precious_moments_three_column","video_story","studio_details_minimal"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}');ep.default,eg.default,ef.default,ev.default,ej.default,eb.default,ey.default,eN.default;let eM={layout_1:ew,layout_2:e_,layout_3:ek,layout_4:eS,layout_5:eC,layout_6:eZ,layout_7:eP,layout_8:eE},ez={layout_1:{bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride's individual photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom's individual photo"},couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Gallery photos with precious moments"},studioImage:{name:"studioImage",required:!1,supports_border:!0,max_count:1,description:"Studio partner logo/photo"}},layout_2:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo (hero image)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Gallery photos"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio partner logo"}},layout_3:{bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride's individual photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom's individual photo"},couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Horizontal scrolling gallery"}},layout_4:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo for magazine cover"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!1,max_count:1,description:"Bride feature photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!1,max_count:1,description:"Groom feature photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Gallery in magazine grid layout"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio logo for credits"}},layout_5:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Main couple photo in card"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Minimal gallery (3x3 grid max)"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio logo minimal"}},layout_6:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Full-screen background couple photo"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!1,max_count:1,description:"Bride photo (circular overlay)"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!1,max_count:1,description:"Groom photo (circular overlay)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Floating card gallery"}},layout_7:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Large feature photo in grid"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride photo in offset grid position"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom photo in offset grid position"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Staggered grid gallery"}},layout_8:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Primary couple photo (full-width)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:3,description:"Three-column minimal gallery (max 3)"}}},eB={layout_1:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for bride/groom photos (shared, groom mirrored)"},coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"},studioBorder:{name:"studioBorder",applies_to:["studioImage"],description:"Border for studio image"}},layout_2:{coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"}},layout_3:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for individual photos"},coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"}},layout_4:{coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for cover photo"}},layout_5:{},layout_6:{},layout_7:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for individual photos"}},layout_8:{}},eF={layout_1:{layout_id:"layout_1",name:"Classic Split Hero",description:"Side-by-side bride and groom photos with centered couple photo below",supports_youtube:!0,supports_studio_image:!0},layout_2:{layout_id:"layout_2",name:"Center Focus",description:"Large centered couple photo as hero with gallery below",supports_youtube:!0,supports_studio_image:!0},layout_3:{layout_id:"layout_3",name:"Horizontal Timeline",description:"Journey-style layout with bride and groom photos connected by timeline",supports_youtube:!0,supports_studio_image:!0},layout_4:{layout_id:"layout_4",name:"Magazine Style",description:"Editorial magazine-inspired layout with multi-column text and images",supports_youtube:!0,supports_studio_image:!0},layout_5:{layout_id:"layout_5",name:"Minimalist Card",description:"Ultra-clean card-based design with emphasis on negative space",supports_youtube:!0,supports_studio_image:!0},layout_6:{layout_id:"layout_6",name:"Romantic Overlay",description:"Full-screen couple photo with elegant text overlay and floating cards",supports_youtube:!0,supports_studio_image:!0},layout_7:{layout_id:"layout_7",name:"Editorial Grid",description:"Asymmetric grid layout inspired by editorial design with bold typography",supports_youtube:!0,supports_studio_image:!0},layout_8:{layout_id:"layout_8",name:"Zen Minimalist",description:"Ultra-minimalist vertical flow with maximum white space",supports_youtube:!0,supports_studio_image:!0}};function eA(e){var s;let t=ez[e]||{},a=eB[e]||{},l=eF[e]||null,r=Object.keys(t).length,i=Object.keys(a).length,o=(null===(s=t.preciousMoments)||void 0===s?void 0:s.max_count)||0;return{photoPlaceholderCount:r,borderSlotCount:i,hasBridePhoto:!!t.bridePhoto,hasGroomPhoto:!!t.groomPhoto,hasCouplePhoto:!!t.couplePhoto,hasPreciousMoments:!!t.preciousMoments,preciousMomentsMax:o,hasStudioImage:!!t.studioImage,supportsYouTube:(null==l?void 0:l.supports_youtube)||!1,supportsBorders:i>0,layoutName:(null==l?void 0:l.name)||e,layoutDescription:(null==l?void 0:l.description)||""}}var eT=t(71561);let eU=[{name:"Inter",fontFamily:"Inter, sans-serif",googleFont:"Inter:wght@400;600;700"},{name:"Great Vibes",fontFamily:"'Great Vibes', cursive",googleFont:"Great+Vibes"},{name:"Playfair Display",fontFamily:"'Playfair Display', serif",googleFont:"Playfair+Display:wght@400;600;700"},{name:"Cinzel",fontFamily:"'Cinzel', serif",googleFont:"Cinzel:wght@400;600;700"},{name:"Montserrat",fontFamily:"'Montserrat', sans-serif",googleFont:"Montserrat:wght@400;600;700"},{name:"Lato",fontFamily:"'Lato', sans-serif",googleFont:"Lato:wght@400;700"},{name:"Caveat",fontFamily:"'Caveat', cursive",googleFont:"Caveat:wght@400;700"},{name:"Bebas Neue",fontFamily:"'Bebas Neue', cursive",googleFont:"Bebas+Neue"},{name:"Rozha One",fontFamily:"'Rozha One', serif",googleFont:"Rozha+One"},{name:"Pinyon Script",fontFamily:"'Pinyon Script', cursive",googleFont:"Pinyon+Script"}];function eO(e){var s,t,r,i,n,d,c,x,p,g,f,v,j,y;let{weddingId:N,wedding:w}=e,{updateFont:_}=(0,ex.j)(),{updateBorder:k}=(0,eh.P)(),[S,C]=(0,l.useState)(!1),[Z,P]=(0,l.useState)(!1),[z,A]=(0,l.useState)(null),O=(0,l.useRef)({}),[D,R]=(0,l.useState)({}),[q,I]=(0,l.useState)(!1),[L,V]=(0,l.useState)(!1),[G,W]=(0,l.useState)({layout_page_background_id:null,stream_page_background_id:null}),[H,K]=(0,l.useState)([]),[X,J]=(0,l.useState)([]),[Q,$]=(0,l.useState)(!0),[ee,es]=(0,l.useState)([]),[et,ea]=(0,l.useState)(!1),[el,ep]=(0,l.useState)("layout_1");(0,l.useEffect)(()=>{ef(),ej(),eb(),ey(),eN(),eg()},[N]);let eg=()=>{let e=eU.map(e=>e.googleFont).join("&family="),s=document.createElement("link");s.href="https://fonts.googleapis.com/css2?family=".concat(e,"&display=swap"),s.rel="stylesheet",document.head.appendChild(s)},ef=async()=>{try{let e=(await M.default.get("/api/weddings/".concat(N,"/theme"))).data,s=e.layout_id||e.theme_id||"layout_1";ep(s),A({layout_id:s,custom_font:e.custom_font||"Great Vibes",primary_color:e.primary_color||"#f43f5e",secondary_color:e.secondary_color||"#a855f7",pre_wedding_video:e.pre_wedding_video||"",studio_details:e.studio_details||{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:e.custom_messages||{welcome_text:"Welcome to our big day",description:""},theme_assets:e.theme_assets||{borders:{},background_image_id:null}})}catch(e){console.error("Error loading layout:",e),E.toast.error("Failed to load layout settings"),A({layout_id:"layout_1",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:{welcome_text:"Welcome to our big day",description:""},theme_assets:{borders:{},background_image_id:null}})}},ev=e=>{let s=[];return Object.keys(e).forEach(t=>{let a=e[t];if(Array.isArray(a))a.forEach((e,a)=>{if(e){let l=e.retryCount>=e.maxRetries,r=e.file_id&&e.file_id.startsWith("file_")&&["8","12","13","14","52","53","54","55","56","57"].includes(e.file_id.replace("file_","").replace(".jpg","")),i=e.retryCount>0&&!e.url;(l||r||i)&&s.push({slotName:t,index:a,photo:e})}});else if(a){let e=a.retryCount>=a.maxRetries,l=a.file_id&&a.file_id.startsWith("file_")&&["8","12","13","14","52","53","54","55","56","57"].includes(a.file_id.replace("file_","").replace(".jpg","")),r=a.retryCount>0&&!a.url;(e||l||r)&&s.push({slotName:t,index:0,photo:a})}}),s},ej=async()=>{try{I(!0),V(!1);let e=(await M.default.get("/api/weddings/".concat(N,"/layout-photos"))).data.photos||{},s=(0,em.bR)();console.log("[LOAD_LAYOUT_PHOTOS] Received photos from API:",Object.keys(e)),Object.keys(e).forEach(t=>{let a=e[t];Array.isArray(a)?a.forEach((e,a)=>{e&&e.url&&(e.url.startsWith("/api/")?(e.url="".concat(s).concat(e.url),console.log("[LOAD_LAYOUT_PHOTOS] ".concat(t,"[").concat(a,"]: Prepended base URL:"),e.url)):(e.url.startsWith("http://")||e.url.startsWith("https://"))&&console.log("[LOAD_LAYOUT_PHOTOS] ".concat(t,"[").concat(a,"]: Keeping absolute URL:"),e.url),e.retryCount=0,e.maxRetries=em.ZP.IMAGE.MAX_RETRIES||2)}):a&&a.url&&(a.url.startsWith("/api/")?(a.url="".concat(s).concat(a.url),console.log("[LOAD_LAYOUT_PHOTOS] ".concat(t,": Prepended base URL:"),a.url)):(a.url.startsWith("http://")||a.url.startsWith("https://"))&&console.log("[LOAD_LAYOUT_PHOTOS] ".concat(t,": Keeping absolute URL:"),a.url),a.retryCount=0,a.maxRetries=em.ZP.IMAGE.MAX_RETRIES||2)}),R(e),console.log("[LOAD_LAYOUT_PHOTOS] Photos loaded successfully")}catch(e){console.error("[LOAD_LAYOUT_PHOTOS] Error loading layout photos:",e),R({}),("ERR_NETWORK"===e.code||e.message.includes("Network Error"))&&V(!0)}finally{I(!1)}},eb=async()=>{try{console.log("[LOAD_BACKGROUNDS] Loading backgrounds for wedding:",N);let e=await M.default.get("/api/weddings/".concat(N,"/backgrounds"));console.log("[LOAD_BACKGROUNDS] API Response:",e.data);let s={layout_page_background_id:e.data.layout_page_background_id||null,stream_page_background_id:e.data.stream_page_background_id||null,layout_page_background_url:e.data.layout_page_background_url||null,stream_page_background_url:e.data.stream_page_background_url||null};W(s),console.log("[LOAD_BACKGROUNDS] State updated:",s),console.log("[LOAD_BACKGROUNDS] Layout preview URL:",s.layout_page_background_url),console.log("[LOAD_BACKGROUNDS] Stream preview URL:",s.stream_page_background_url)}catch(s){var e;console.error("[LOAD_BACKGROUNDS] Error:",s),console.error("[LOAD_BACKGROUNDS] Error details:",(null===(e=s.response)||void 0===e?void 0:e.data)||s.message),W({layout_page_background_id:null,stream_page_background_id:null,layout_page_background_url:null,stream_page_background_url:null})}},ey=async()=>{try{var e,s;$(!0);let[t,a]=await Promise.all([M.default.get("/api/borders"),M.default.get("/api/backgrounds")]);K(t.data||[]),J(a.data||[]),console.log("[THEME_MANAGER] Loaded borders:",(null===(e=t.data)||void 0===e?void 0:e.length)||0),console.log("[THEME_MANAGER] Loaded backgrounds:",(null===(s=a.data)||void 0===s?void 0:s.length)||0)}catch(e){console.error("Error loading layout assets:",e),K([]),J([])}finally{$(!1)}},eN=async()=>{try{var e;ea(!0);let s=await M.default.get("/api/profile/me");es((null===(e=s.data)||void 0===e?void 0:e.studios)||[])}catch(e){console.error("Error loading studios:",e),es([])}finally{ea(!1)}},ew=async e=>{if(!(Object.keys(D).length>0)||window.confirm("You have existing photos. Changing the layout may affect how they are displayed. Continue?"))try{C(!0),ep(e),await M.default.put("/api/weddings/".concat(N,"/theme"),{layout_id:e}),E.toast.success("Layout changed successfully!"),ef(),ej()}catch(e){console.error("Error changing layout:",e),E.toast.error("Failed to change layout")}finally{C(!1)}},e_=async e=>{try{C(!0),await M.default.put("/api/weddings/".concat(N,"/theme"),e),E.toast.success("Settings updated!"),ef()}catch(e){console.error("Error updating layout:",e),E.toast.error("Failed to update settings")}finally{C(!1)}},ek=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;console.log("handlePhotoUpload called with:",{placeholder:e,fileName:null==s?void 0:s.name,retryCount:t});try{if(P(!0),!s){console.error("No file selected"),E.toast.error("No file selected");return}if(s.size>10485760){E.toast.error("File too large (".concat((s.size/1048576).toFixed(2),"MB). Maximum size is 10MB"));return}if(!s.type.startsWith("image/")){E.toast.error("Only image files are allowed");return}let t=new FormData;t.append("placeholder",e),t.append("file",s);let a=E.toast.loading("Uploading photo to ".concat(e,"..."));await M.default.post("/api/weddings/".concat(N,"/layout-photos/upload"),t,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5}),E.toast.dismiss(a),E.toast.success("Photo uploaded to ".concat(e,"!"),{duration:3e3,icon:""}),ej()}catch(i){var a,l;if(console.error("Error uploading photo:",i),("ECONNABORTED"===i.code||i.message.includes("timeout"))&&t<2){E.toast.warning("Upload timeout. Retrying... (".concat(t+1,"/").concat(2,")")),setTimeout(()=>ek(e,s,t+1),2e3);return}let r="Failed to upload photo";if(null===(l=i.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.detail){let e=i.response.data.detail;"string"==typeof e?r=e:"object"==typeof e&&e.error&&(r=e.error)}else i.message&&(r=i.message);E.toast.error(r,{duration:5e3,action:t<2?{label:"Retry",onClick:()=>ek(e,s,t+1)}:void 0})}finally{P(!1)}},eS=async(e,s)=>{if(window.confirm("Are you sure you want to delete this photo?"))try{let t=E.toast.loading("Deleting photo...");await M.default.delete("/api/weddings/".concat(N,"/layout-photos/").concat(e,"/").concat(s)),E.toast.dismiss(t),E.toast.success("Photo deleted!",{duration:2e3,icon:"\uD83D\uDDD1"}),ej()}catch(s){var t,a;console.error("Error deleting photo:",s);let e="Failed to delete photo";if(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail){let t=s.response.data.detail;"string"==typeof t?e=t:"object"==typeof t&&t.error&&(e=t.error)}E.toast.error(e,{duration:4e3})}},eC=async e=>{try{C(!0),console.log("[BACKGROUND_UPDATE] Updating backgrounds:",e),await M.default.put("/api/weddings/".concat(N,"/backgrounds"),e),console.log("[BACKGROUND_UPDATE] Background update API call successful"),E.toast.success("Background updated! Refreshing...",{duration:2e3}),await new Promise(e=>setTimeout(e,500)),await eb(),console.log("[BACKGROUND_UPDATE] Backgrounds reloaded"),window.dispatchEvent(new CustomEvent("wedding-backgrounds-updated",{detail:{weddingId:N,updates:e,timestamp:Date.now()}})),setTimeout(()=>{console.log("[BACKGROUND_UPDATE] Forcing page reload to apply background changes"),window.location.reload()},1e3)}catch(e){var s,t;console.error("[BACKGROUND_UPDATE] Error updating backgrounds:",e),E.toast.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to update backgrounds")}finally{C(!1)}},eZ=z||{layout_id:"layout_1",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:{welcome_text:"Welcome to our big day",description:""},theme_assets:{borders:{},background_image_id:null}},eP=eF[el]||null,eE=ez[el]||{},eO=eB[el]||{};if(eA(el),!z)return(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 animate-spin text-rose-500"})});let eD=Object.keys(eM).map(e=>({id:e,...eM[e]}));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(ei.Z,{className:"w-5 h-5"}),"Wedding Layout"]}),(0,a.jsx)(o.SZ,{children:"Choose a layout structure for your wedding page"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:eD.map(e=>{let s=e.layout_id===el,t=eA(e.layout_id);return(0,a.jsxs)("button",{"data-testid":"layout-card-".concat(e.layout_id),onClick:()=>ew(e.layout_id),disabled:S,className:"relative p-4 rounded-lg border-2 text-left transition-all group ".concat(s?"border-rose-500 bg-rose-50":"border-gray-200 hover:border-rose-300"," ").concat(S?"opacity-50 cursor-not-allowed":""),children:[(0,a.jsx)("div",{className:"mb-3 aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded overflow-hidden",children:e.thumbnail?(0,a.jsx)("img",{src:e.thumbnail,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(ei.Z,{className:"w-12 h-12 text-gray-300"})})}),(0,a.jsx)("div",{className:"font-semibold text-sm",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1",children:[t.supportsYouTube&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-100 text-red-700 text-[10px] rounded-full",children:[(0,a.jsx)(eo.Z,{className:"w-2.5 h-2.5"}),"YouTube"]}),t.supportsBorders&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-[10px] rounded-full",children:[(0,a.jsx)(en.Z,{className:"w-2.5 h-2.5"}),"Borders"]}),t.photoPlaceholderCount&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] rounded-full",children:[(0,a.jsx)(b.Z,{className:"w-2.5 h-2.5"}),t.photoPlaceholderCount," slots"]})]}),s&&(0,a.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 bg-rose-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(ed.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/90 rounded-lg p-3 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:(0,a.jsxs)("div",{className:"text-white text-xs space-y-1",children:[(0,a.jsx)("p",{className:"font-semibold",children:t.layoutName}),(0,a.jsx)("p",{className:"text-gray-300 text-[10px]",children:t.layoutDescription}),(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-2 mt-2 space-y-1",children:[t.hasBridePhoto&&(0,a.jsx)("p",{children:" Bride photo"}),t.hasGroomPhoto&&(0,a.jsx)("p",{children:" Groom photo"}),t.hasCouplePhoto&&(0,a.jsx)("p",{children:" Couple photo"}),t.hasPreciousMoments&&(0,a.jsxs)("p",{children:[" Gallery (max ",t.preciousMomentsMax,")"]})]})]})})]},e.layout_id)})})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"Welcome Message & Description"}),(0,a.jsx)(o.SZ,{children:"Customize the text content for your wedding page"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{children:"Welcome Message"}),(0,a.jsx)(Y.I,{value:(null===(s=eZ.custom_messages)||void 0===s?void 0:s.welcome_text)||"",onChange:e=>e_({custom_messages:{...eZ.custom_messages,welcome_text:e.target.value}}),placeholder:"Welcome to our big day",disabled:S})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{children:"Description"}),(0,a.jsx)(F.g,{value:(null===(t=eZ.custom_messages)||void 0===t?void 0:t.description)||"",onChange:e=>e_({custom_messages:{...eZ.custom_messages,description:e.target.value}}),placeholder:"Share your love story...",rows:4,disabled:S})]})]})]}),(null==eP?void 0:eP.supports_youtube)&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(eo.Z,{className:"w-5 h-5"}),"Pre-Wedding Video"]}),(0,a.jsx)(o.SZ,{children:"Add a YouTube video (supported by this layout)"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{children:"YouTube URL"}),(0,a.jsx)(Y.I,{value:eZ.pre_wedding_video||"",onChange:e=>{let s=e.target.value;e_({pre_wedding_video:((0,eT.yk)(s)?(0,eT.Tc)(s):s)||s})},placeholder:"https://youtube.com/watch?v=... or https://youtu.be/...",disabled:S}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Supports: youtube.com/watch?v=, youtu.be/, and embed URLs"})]}),eZ.pre_wedding_video&&(0,eT.yk)(eZ.pre_wedding_video)&&(0,a.jsx)("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:(0,a.jsx)("iframe",{src:(0,eT.Tc)(eZ.pre_wedding_video),title:"Pre-wedding video preview",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5"}),"Photos"]}),(0,a.jsx)(o.SZ,{children:"Upload photos based on your selected layout's placeholders"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Selected Layout:"})," ",null==eP?void 0:eP.name]}),(0,a.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:null==eP?void 0:eP.description})]}),q?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Loading photos..."]}):(0,a.jsxs)(a.Fragment,{children:[(()=>{let e=ev(D);return e.length>0?(0,a.jsxs)(u.bZ,{variant:"destructive",className:"mb-4",children:[(0,a.jsx)(U.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Broken Photo References Detected:"})," ",e.length," photo(s) reference files that no longer exist on Telegram."]}),(0,a.jsx)("div",{className:"space-y-1",children:e.map(e=>{let{slotName:s,index:t,photo:l}=e;return(0,a.jsxs)("div",{className:"text-xs flex items-center justify-between",children:[(0,a.jsxs)("span",{children:[s," ",t>0?"(".concat(t+1,")"):""]}),(0,a.jsx)("button",{onClick:()=>{window.confirm("Clear broken photo from ".concat(s).concat(t>0?" (".concat(t+1,")"):"","?"))&&eS(s,t)},className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Clear"})]},"".concat(s,"-").concat(t))})}),(0,a.jsx)("button",{onClick:()=>{window.confirm("Clear all ".concat(e.length," broken photo references?"))&&e.forEach(e=>{let{slotName:s,index:t}=e;eS(s,t)})},className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 mt-2",children:"Clear All Broken Photos"})]})})]}):null})(),L&&(0,a.jsxs)(u.bZ,{variant:"destructive",className:"mb-4",children:[(0,a.jsx)(U.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{children:[(0,a.jsx)("strong",{children:"Photo Loading Issue:"})," Unable to load photos from server. This may be due to network connectivity or server issues. Photos will show as placeholders until the issue is resolved."]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(eE).map(e=>{let[s,t]=e,l=D[s],r="preciousMoments"===s,i=r?(null==l?void 0:l.length)||0:l?1:0,o=t.max_count,n=i<o,d="border-gray-300 bg-gray-50 text-gray-600";return s.includes("bride")?d="border-pink-300 bg-pink-50 text-pink-600":s.includes("groom")?d="border-blue-300 bg-blue-50 text-blue-600":s.includes("couple")?d="border-purple-300 bg-purple-50 text-purple-600":s.includes("precious")||s.includes("Moments")?d="border-green-300 bg-green-50 text-green-600":s.includes("studio")&&(d="border-amber-300 bg-amber-50 text-amber-600"),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"aspect-square rounded-lg border-2 border-dashed ".concat(d," hover:border-rose-500 hover:bg-rose-50 transition-colors cursor-pointer flex flex-col items-center justify-center gap-2 group"),children:[(0,a.jsx)("input",{type:"file",accept:"image/*",className:"hidden","data-testid":"upload-".concat(s),multiple:r,ref:e=>{e&&(O.current[s]=e)},disabled:Z,onChange:e=>{let t=Array.from(e.target.files||[]);if(!t.length){e.target.value="";return}if(r){if(i>=o){E.toast.error("Gallery is full. Delete a photo to add more."),e.target.value="";return}let a=o-i,l=t.slice(0,a);t.length>a&&E.toast.warning("Only ".concat(a," photo(s) can be added. Extra files were ignored.")),(async()=>{for(let e of l)console.log("File selected for upload:",e.name,"to slot:",s),await ek(s,e)})()}else{let e=t[0];console.log("File selected for upload:",e.name,"to slot:",s),ek(s,e)}e.target.value=""}}),Z?(0,a.jsx)(m.Z,{className:"w-6 h-6 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec.Z,{className:"w-6 h-6 mb-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-center px-2",children:t.description.split(" ").slice(0,2).join(" ")}),t.required&&(0,a.jsx)("span",{className:"text-[10px] text-red-500 font-semibold",children:"Required"}),!n&&(0,a.jsx)("span",{className:"text-[10px] text-gray-500",children:r?"Full":"Replace"}),r&&(0,a.jsxs)("span",{className:"text-[10px] mt-0.5",children:[i,"/",o]})]})]}),l&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-1 cursor-pointer",onClick:()=>{if(Z)return;let e=O.current[s];e&&e.click()},children:Array.isArray(l)?l.map((e,l)=>(0,a.jsxs)("div",{className:"relative group aspect-square","data-testid":"photo-".concat(s,"-").concat(l),children:[(0,a.jsx)("img",{src:e.url||e,alt:t.description,className:"w-full h-full object-cover rounded border",onError:s=>{if(console.error("Photo failed to load:",e.url||e,s),e.fallbackUrl&&e.retryCount<e.maxRetries){console.log("Retrying with fallback URL (attempt ".concat(e.retryCount+1,"/").concat(e.maxRetries,"):"),e.fallbackUrl),e.retryCount++,s.target.src=e.fallbackUrl;return}L||(V(!0),console.warn("Photo connectivity issue detected - showing user warning")),s.target.style.display="none",s.target.nextSibling.style.display="flex"},onLoad:s=>{console.log("Photo loaded successfully:",e.url||e),s.target.nextSibling.style.display="none"}}),(0,a.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded border",style:{display:"none"},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation();let a=e.photo_id||"photo-".concat(l);console.log("Deleting photo:",{slotName:s,photoId:a,photo:e}),eS(s,a)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":"delete-".concat(s,"-").concat(l),children:(0,a.jsx)(T.Z,{className:"w-3 h-3"})})]},e.photo_id||l)):(0,a.jsxs)("div",{className:"relative group aspect-square","data-testid":"photo-".concat(s),children:[(0,a.jsx)("img",{src:l.url||l,alt:t.description,className:"w-full h-full object-cover rounded border",onError:e=>{if(console.error("Photo failed to load:",l.url||l,e),l.fallbackUrl&&l.retryCount<l.maxRetries){console.log("Retrying with fallback URL (attempt ".concat(l.retryCount+1,"/").concat(l.maxRetries,"):"),l.fallbackUrl),l.retryCount++,e.target.src=l.fallbackUrl;return}L||(V(!0),console.warn("Photo connectivity issue detected - showing user warning")),e.target.style.display="none",e.target.nextSibling.style.display="flex"},onLoad:e=>{console.log("Photo loaded successfully:",l.url||l),e.target.nextSibling.style.display="none"}}),(0,a.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded border",style:{display:"none"},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),eS(s,l.photo_id||"0")},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":"delete-".concat(s),children:(0,a.jsx)(T.Z,{className:"w-3 h-3"})})]})})]},s)})}),(()=>{let e=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=ez[e]||{},a=[];for(let[e,l]of Object.entries(t))l.required&&!s[e]&&a.push({name:e,description:l.description});return{isValid:0===a.length,missingRequired:a}}(el,D);return e.isValid?(0,a.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[(0,a.jsx)(ed.Z,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("p",{className:"text-xs text-green-800 font-medium",children:"All required photos uploaded!"})]}):(0,a.jsxs)("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-2",children:[(0,a.jsx)(U.Z,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-xs text-amber-800",children:[(0,a.jsx)("p",{className:"font-semibold mb-1",children:"Missing required photos:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-0.5",children:e.missingRequired.map(e=>(0,a.jsx)("li",{children:e.description},e.name))})]})]})})()]})]})]}),Object.keys(eO).length>0&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(en.Z,{className:"w-5 h-5"}),"Photo Borders"]}),(0,a.jsx)(o.SZ,{children:"Customize borders for photos (based on layout support)"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:Q?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Loading borders..."]}):0===H.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800",children:"No borders available"}),(0,a.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload borders first"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(eO).map(e=>{var s,t;let[l,r]=e,i=null;"brideGroomBorder"===l?i="bride_groom_border_id":"coupleBorder"===l?i="couple_border_id":"preciousMomentsBorder"===l?i="precious_moments_border_id":"studioBorder"===l&&(i="studio_border_id");let o=null===(t=eZ.theme_assets)||void 0===t?void 0:null===(s=t.borders)||void 0===s?void 0:s[i],n=H.find(e=>e.id===o);return(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-lg border",children:[(0,a.jsxs)(B._,{className:"text-xs font-medium flex items-center justify-between",children:[(0,a.jsx)("span",{children:r.description}),"brideGroomBorder"===l&&(0,a.jsx)("span",{className:"text-[10px] text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:"Groom mirrored"})]}),(0,a.jsxs)(er.Ph,{value:o||"none",onValueChange:e=>{var s;e_({theme_assets:{...eZ.theme_assets,borders:{...null===(s=eZ.theme_assets)||void 0===s?void 0:s.borders,[i]:"none"===e?null:e}}}),k(i,"none"===e?null:e)},children:[(0,a.jsx)(er.i4,{className:"text-xs bg-white","data-testid":"border-selector-".concat(l),children:(0,a.jsx)(er.ki,{placeholder:"Select border"})}),(0,a.jsxs)(er.Bw,{children:[(0,a.jsx)(er.Ql,{value:"none",children:"None"}),H.filter(e=>{var s,t,a,r,i,o;return"brideGroomBorder"===l||("coupleBorder"===l?(null===(s=e.tags)||void 0===s?void 0:s.includes("couple"))||!(null===(t=e.tags)||void 0===t?void 0:t.includes("individual")):"preciousMomentsBorder"===l?(null===(a=e.tags)||void 0===a?void 0:a.includes("gallery"))||!(null===(r=e.tags)||void 0===r?void 0:r.includes("individual")):"studioBorder"!==l||(null===(i=e.tags)||void 0===i?void 0:i.includes("minimal"))||(null===(o=e.tags)||void 0===o?void 0:o.includes("studio")))}).map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&(0,a.jsx)("img",{src:e.cdn_url,alt:e.name,className:"w-8 h-8 object-cover rounded border"}),(0,a.jsx)("span",{children:e.name}),e.tags&&e.tags.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tags.join(", "),")"]})]})},e.id))]})]}),(null==n?void 0:n.cdn_url)&&(0,a.jsx)("div",{className:"mt-2 p-2 bg-white rounded border",children:(0,a.jsx)("img",{src:n.cdn_url,alt:"Preview",className:"w-full h-20 object-contain"})})]},l)})})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),"Stream Border"]}),(0,a.jsx)(o.SZ,{children:"Add a decorative border around the video player during live stream"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:Q?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Loading borders..."]}):0===H.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800",children:"No borders available"}),(0,a.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload borders first"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{className:"text-sm font-medium",children:"Border for Video Player"}),(0,a.jsxs)(er.Ph,{value:(null===(i=eZ.theme_assets)||void 0===i?void 0:null===(r=i.borders)||void 0===r?void 0:r.stream_border_id)||"none",onValueChange:e=>{var s;e_({theme_assets:{...eZ.theme_assets,borders:{...null===(s=eZ.theme_assets)||void 0===s?void 0:s.borders,stream_border_id:"none"===e?null:e}}})},children:[(0,a.jsx)(er.i4,{className:"text-xs bg-white","data-testid":"border-selector-stream",children:(0,a.jsx)(er.ki,{placeholder:"Select border for stream"})}),(0,a.jsxs)(er.Bw,{children:[(0,a.jsx)(er.Ql,{value:"none",children:"None"}),H.map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&(0,a.jsx)("img",{src:e.cdn_url,alt:e.name,className:"w-8 h-8 object-cover rounded border"}),(0,a.jsx)("span",{children:e.name}),e.tags&&e.tags.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tags.join(", "),")"]})]})},e.id))]})]}),(()=>{var e,s;let t=null===(s=eZ.theme_assets)||void 0===s?void 0:null===(e=s.borders)||void 0===e?void 0:e.stream_border_id,l=H.find(e=>e.id===t);return(null==l?void 0:l.cdn_url)?(0,a.jsxs)("div",{className:"mt-2 p-2 bg-white rounded border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),(0,a.jsx)("img",{src:l.cdn_url,alt:"Stream Border Preview",className:"w-full h-20 object-contain"})]}):null})(),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"This border will appear around the video player during live streaming"})]})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5"}),"Background Images"]}),(0,a.jsx)(o.SZ,{children:"Set separate backgrounds for layout page and stream page"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:Q?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Loading backgrounds..."]}):0===X.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800",children:"No backgrounds available"}),(0,a.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload backgrounds first"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{className:"text-sm font-semibold",children:"Layout Page Background"}),(0,a.jsxs)(er.Ph,{value:G.layout_page_background_id||"none",onValueChange:e=>{eC({layout_page_background_id:"none"===e?null:e})},children:[(0,a.jsx)(er.i4,{className:"bg-white","data-testid":"layout-background-selector",children:(0,a.jsx)(er.ki,{placeholder:"Select background for layout page"})}),(0,a.jsxs)(er.Bw,{children:[(0,a.jsx)(er.Ql,{value:"none",children:"None"}),X.map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&(0,a.jsx)("img",{src:e.cdn_url,alt:e.name,className:"w-12 h-8 object-cover rounded border"}),(0,a.jsx)("span",{children:e.name})]})},e.id))]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[G.layout_page_background_id&&!G.layout_page_background_url&&(0,a.jsx)("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-700",children:"Background selected but URL not loaded. Check console for details."}),G.layout_page_background_url&&(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),(0,a.jsx)("img",{src:G.layout_page_background_url,alt:"Layout Background",className:"w-full h-32 object-cover rounded",onError:e=>{console.error("[BACKGROUND_IMAGE_ERROR] Failed to load:",G.layout_page_background_url),e.target.style.display="none"}}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1 break-all",children:["URL: ",G.layout_page_background_url]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{className:"text-sm font-semibold",children:"Stream Page Background"}),(0,a.jsxs)(er.Ph,{value:G.stream_page_background_id||"none",onValueChange:e=>{eC({stream_page_background_id:"none"===e?null:e})},children:[(0,a.jsx)(er.i4,{className:"bg-white","data-testid":"stream-background-selector",children:(0,a.jsx)(er.ki,{placeholder:"Select background for stream page"})}),(0,a.jsxs)(er.Bw,{children:[(0,a.jsx)(er.Ql,{value:"none",children:"None"}),X.map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&(0,a.jsx)("img",{src:e.cdn_url,alt:e.name,className:"w-12 h-8 object-cover rounded border"}),(0,a.jsx)("span",{children:e.name})]})},e.id))]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[G.stream_page_background_id&&!G.stream_page_background_url&&(0,a.jsx)("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-700",children:"Background selected but URL not loaded. Check console for details."}),G.stream_page_background_url&&(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),(0,a.jsx)("img",{src:G.stream_page_background_url,alt:"Stream Background",className:"w-full h-32 object-cover rounded",onError:e=>{console.error("[BACKGROUND_IMAGE_ERROR] Failed to load:",G.stream_page_background_url),e.target.style.display="none"}}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1 break-all",children:["URL: ",G.stream_page_background_url]})]})]})]})]})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(eu.Z,{className:"w-5 h-5"}),"Studio Partner"]}),(0,a.jsx)(o.SZ,{children:"Select a studio from your profile (optional)"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:et?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Loading studios..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(er.Ph,{value:(null===(n=eZ.studio_details)||void 0===n?void 0:n.studio_id)||"none",onValueChange:async e=>{if("none"===e)e_({studio_details:{studio_id:"",name:"",logo_url:"",default_image_url:"",website:"",email:"",phone:"",address:"",contact:"",show_details:!1}});else{let s=ee.find(s=>s.id===e);s&&(e_({studio_details:{studio_id:s.id,name:s.name||"",logo_url:s.logo_url||"",default_image_url:s.default_image_url||"",website:s.website||"",email:s.email||"",phone:s.phone||"",address:s.address||"",contact:s.contact||"",show_details:!0}}),s.default_image_url&&E.toast.success("Studio selected with image!"))}},disabled:S||0===ee.length,children:[(0,a.jsx)(er.i4,{className:"bg-white","data-testid":"studio-selector",children:(0,a.jsx)(er.ki,{placeholder:0===ee.length?"No studios available - Create one in Profile":"Select a studio"})}),(0,a.jsxs)(er.Bw,{children:[(0,a.jsx)(er.Ql,{value:"none",children:"None"}),ee.map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.default_image_url&&(0,a.jsx)("img",{src:e.default_image_url,alt:e.name,className:"w-8 h-8 object-cover rounded"}),(0,a.jsx)("span",{children:e.name})]})},e.id))]})]}),0===ee.length&&(0,a.jsx)("p",{className:"text-xs text-amber-600",children:"Go to Profile  Studios to create a studio first"})]}),(null===(d=eZ.studio_details)||void 0===d?void 0:d.studio_id)&&(null===(c=eZ.studio_details)||void 0===c?void 0:c.studio_id)!==""&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Preview:"}),(null===(x=eZ.studio_details)||void 0===x?void 0:x.default_image_url)?(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("img",{src:eZ.studio_details.default_image_url,alt:"Studio",className:"w-full h-32 object-cover rounded"})}):(0,a.jsxs)("div",{className:"h-32 mx-auto flex flex-col items-center justify-center bg-gray-100 rounded mb-3",children:[(0,a.jsx)(eu.Z,{className:"w-8 h-8 text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-400 text-xs text-center mt-1",children:"No studio image"})]}),(null===(p=eZ.studio_details)||void 0===p?void 0:p.show_details)&&(0,a.jsxs)("div",{className:"text-center text-sm space-y-1",children:[(null===(g=eZ.studio_details)||void 0===g?void 0:g.name)&&(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:eZ.studio_details.name}),(null===(f=eZ.studio_details)||void 0===f?void 0:f.email)&&(0,a.jsx)("p",{className:"text-gray-600",children:eZ.studio_details.email}),(null===(v=eZ.studio_details)||void 0===v?void 0:v.phone)&&(0,a.jsx)("p",{className:"text-gray-600",children:eZ.studio_details.phone})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(B._,{className:"text-sm font-medium text-purple-900",children:"Show Studio Details"}),(0,a.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:"Display contact info along with logo"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return e_({studio_details:{...eZ.studio_details,show_details:!(null===(e=eZ.studio_details)||void 0===e?void 0:e.show_details)}})},className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat((null===(j=eZ.studio_details)||void 0===j?void 0:j.show_details)?"bg-purple-600":"bg-gray-300"),disabled:S,"data-testid":"studio-details-toggle",children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat((null===(y=eZ.studio_details)||void 0===y?void 0:y.show_details)?"translate-x-6":"translate-x-1")})})]})]})]})})]})]})}var eD=t(67783),eR=t(19178),eq=t(9229),eI=t(55404),eL=t(42555);function eV(e){var s,t,r;let{weddingId:n,wedding:d,onStatusChange:c}=e,[x,h]=(0,l.useState)(!1),[p,f]=(0,l.useState)(null),[v,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{var e;if((null==d?void 0:d.streaming_type)==="youtube"&&(null==d?void 0:null===(e=d.youtube_settings)||void 0===e?void 0:e.broadcast_id)){b();let e=setInterval(b,1e4);return()=>clearInterval(e)}},[null==d?void 0:null===(s=d.youtube_settings)||void 0===s?void 0:s.broadcast_id]);let b=async()=>{try{j(!0);let e=await M.default.get("/api/youtube/status/".concat(n));f(e.data)}catch(e){console.error("Error fetching broadcast status:",e)}finally{j(!1)}},y=async e=>{try{if(h(!0),await M.default.post("/api/youtube/transition",{broadcast_id:d.youtube_settings.broadcast_id,status:e}),E.toast.success("Broadcast transitioned to ".concat(e)),await b(),c&&c(),"complete"===e)try{await M.default.post("/api/youtube/save-video-to-media/".concat(n)),E.toast.success("YouTube video saved to media gallery!")}catch(e){console.error("Error saving video to media:",e),E.toast.error("Broadcast ended but failed to save video to gallery")}}catch(a){var s,t;console.error("Error transitioning broadcast:",a),E.toast.error((null===(t=a.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to transition to ".concat(e))}finally{h(!1)}};if(!(null==d?void 0:null===(t=d.youtube_settings)||void 0===t?void 0:t.broadcast_id))return null;let N=(null==p?void 0:p.life_cycle_status)||"unknown",_="complete"===N;return(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(eq.Z,{className:"w-5 h-5 text-red-600"}),"YouTube Broadcast Controls"]}),(0,a.jsx)(o.SZ,{children:"Manage your YouTube Live broadcast status"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat((()=>{switch(N){case"live":return"bg-red-500 animate-pulse";case"testing":return"bg-yellow-500";case"complete":return"bg-gray-500";default:return"bg-blue-500"}})())}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:(()=>{switch(N){case"ready":return"Ready to Go Live";case"testing":return"Testing (Private)";case"live":return"LIVE";case"complete":return"Ended";case"revoked":return"Cancelled";default:return N}})()}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"live"===N?"Your stream is live on YouTube":"testing"===N?"Stream is in testing mode (not visible to public)":_?"Broadcast has ended":"Broadcast is ready to start"})]})]}),v&&(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin text-gray-400"})]}),(null===(r=d.youtube_settings)||void 0===r?void 0:r.youtube_video_url)&&(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(eq.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"View on YouTube"}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>window.open(d.youtube_settings.youtube_video_url,"_blank"),children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Open"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 pt-4 border-t",children:["ready"===N&&(0,a.jsxs)(i.z,{onClick:()=>y("testing"),disabled:x,className:"w-full bg-yellow-500 hover:bg-yellow-600",children:[x?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(eo.Z,{className:"w-4 h-4 mr-2"}),"Start Testing (Private)"]}),("testing"===N||"ready"===N)&&(0,a.jsxs)(i.z,{onClick:()=>y("live"),disabled:x,className:"w-full bg-red-600 hover:bg-red-700",children:[x?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(eI.Z,{className:"w-4 h-4 mr-2"}),"Go Live on YouTube"]}),("live"===N||"testing"===N)&&(0,a.jsxs)(i.z,{onClick:()=>{confirm("Are you sure you want to end the YouTube broadcast? This will make it available as a video on your channel.")&&y("complete")},disabled:x,variant:"destructive",className:"w-full",children:[x?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(eL.Z,{className:"w-4 h-4 mr-2"}),"End Broadcast"]}),_&&(0,a.jsxs)(u.bZ,{className:"bg-green-50 border-green-200",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(u.X,{className:"text-green-800",children:"Broadcast ended successfully. Video is now available on your YouTube channel."})]})]}),!_&&(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(U.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{className:"text-xs",children:[(0,a.jsx)("strong",{children:"How it works:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Testing:"})," Start OBS and test privately before going live"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Go Live:"})," Make your stream visible to the public on YouTube"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"End:"})," Finish the broadcast and save the recording"]})]})]})]})]})]})}var eG=t(40933);function eY(e){var s,t;let{weddingId:r,wedding:n}=e,[c,x]=(0,l.useState)([]),[h,p]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1);(0,l.useEffect)(()=>{var e;(null==n?void 0:null===(e=n.youtube_settings)||void 0===e?void 0:e.auth_connected)&&f&&j()},[f,null==n?void 0:null===(s=n.youtube_settings)||void 0===s?void 0:s.auth_connected]);let j=async()=>{try{p(!0);let e=await M.default.get("/api/youtube/broadcasts");x(e.data.broadcasts||[])}catch(e){console.error("Error fetching broadcasts:",e),E.toast.error("Failed to load YouTube broadcasts")}finally{p(!1)}};if(!(null==n?void 0:null===(t=n.youtube_settings)||void 0===t?void 0:t.auth_connected))return null;let b=e=>{let s={ready:{color:"bg-blue-500",text:"Ready"},testing:{color:"bg-yellow-500",text:"Testing"},live:{color:"bg-red-500",text:"Live"},complete:{color:"bg-green-500",text:"Completed"},revoked:{color:"bg-gray-500",text:"Cancelled"}}[e]||{color:"bg-gray-400",text:e};return(0,a.jsx)(d.C,{className:"".concat(s.color," text-white"),children:s.text})};return(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(eq.Z,{className:"w-5 h-5 text-red-600"}),"Your YouTube Broadcasts"]}),(0,a.jsx)(o.SZ,{children:"View and manage your previous YouTube Live streams"})]}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{v(!f),f||j()},children:[f?"Hide":"Show"," Broadcasts"]})]})}),f&&(0,a.jsxs)(o.aY,{className:"space-y-4",children:[h?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 animate-spin text-rose-500"})}):0===c.length?(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(eq.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{children:"No previous broadcasts found. Create your first YouTube broadcast to get started!"})]}):(0,a.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[e.thumbnail_url&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("img",{src:e.thumbnail_url,alt:e.title,className:"w-32 h-20 object-cover rounded"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm line-clamp-2",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:e.description})]}),b(e.life_cycle_status)]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-xs text-gray-600",children:[e.scheduled_start_time&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(S.Z,{className:"w-3 h-3"}),(0,z.WU)(new Date(e.scheduled_start_time),"MMM d, yyyy")]}),e.actual_start_time&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eG.Z,{className:"w-3 h-3"}),"Started: ",(0,z.WU)(new Date(e.actual_start_time),"p")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>window.open(e.youtube_video_url,"_blank"),children:[(0,a.jsx)(g.Z,{className:"w-3 h-3 mr-1"}),"View on YouTube"]}),"complete"===e.life_cycle_status&&(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:async()=>{try{await M.default.post("/api/youtube/save-video-to-media/".concat(r),{broadcast_id:e.broadcast_id}),E.toast.success("Video added to media gallery!")}catch(e){E.toast.error("Failed to add video to gallery")}},children:[(0,a.jsx)(eq.Z,{className:"w-3 h-3 mr-1"}),"Add to Gallery"]})]})]})]})},e.broadcast_id))}),c.length>0&&(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:j,disabled:h,className:"w-full",children:[h?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Refresh List"]})]})]})}var eW=t(22468);function eH(e){var s,t,r,n,c;let{weddingId:u,currentTemplateId:x,onTemplateAssigned:p}=e,[g,f]=(0,l.useState)([]),[v,j]=(0,l.useState)(!0),[b,y]=(0,l.useState)(x||""),[w,_]=(0,l.useState)(!1),[k,S]=(0,l.useState)(null),[C,Z]=(0,l.useState)(!1),[P,z]=(0,l.useState)(null),[B,F]=(0,l.useState)([]),[A,U]=(0,l.useState)(!1);(0,l.useEffect)(()=>{O(),D()},[u]);let O=async()=>{try{j(!0),console.log("Loading templates from /api/video-templates");let e=await M.default.get("/api/video-templates");console.log("Templates loaded:",e.data),f(e.data||[])}catch(e){console.error("Failed to load templates:",e),E.toast.error("Failed to load video templates")}finally{j(!1)}},D=async()=>{try{let s=await M.default.get("/api/weddings/".concat(u,"/template-assignment"));if(console.log("Current assignment:",s.data),s.data.assignment_id){var e;S(s.data),y((null===(e=s.data.template)||void 0===e?void 0:e.id)||"")}}catch(e){console.error("Failed to load current assignment:",e)}},R=async e=>{let s=g.find(s=>s.id===e);if(s){z(s),Z(!0);try{var t;U(!0);let s=await M.default.post("/api/video-templates/".concat(e,"/preview"),{wedding_id:u});console.log("Preview overlays:",s.data),F((null===(t=s.data.preview_data)||void 0===t?void 0:t.overlays)||[])}catch(e){console.error("Failed to load preview overlays:",e),E.toast.error("Failed to load overlay preview"),F([])}finally{U(!1)}}},q=async()=>{if(!b){E.toast.error("Please select a template");return}try{_(!0),console.log("Assigning template:",{template_id:b,slot:1,customizations:{color_overrides:{},font_overrides:{}}}),await M.default.post("/api/weddings/".concat(u,"/assign-template"),{template_id:b,slot:1,customizations:{color_overrides:{},font_overrides:{}}}),E.toast.success("Template assigned successfully!"),D(),p&&p()}catch(a){var e,s,t;console.error("Failed to assign template:",a),console.error("Error response:",null===(e=a.response)||void 0===e?void 0:e.data),E.toast.error((null===(t=a.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to assign template")}finally{_(!1)}},I=async()=>{if(confirm("Are you sure you want to remove the assigned template?"))try{_(!0),await M.default.delete("/api/weddings/".concat(u,"/template-assignment")),E.toast.success("Template removed successfully"),S(null),y(""),p&&p()}catch(t){var e,s;console.error("Failed to remove template:",t),E.toast.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"Failed to remove template")}finally{_(!1)}};return v?(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),"Video Template"]}),(0,a.jsx)(o.SZ,{children:"Select a video template for your wedding layout"})]}),(0,a.jsx)(o.aY,{children:(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 animate-spin text-rose-500"})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Zb,{"data-testid":"template-selector-card",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),"Video Template"]}),(0,a.jsx)(o.SZ,{children:"Select a video template to use for your wedding layout"})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[k&&k.template&&(0,a.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(eW.Z,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("p",{className:"font-semibold text-green-900",children:"Template Assigned"})]}),(0,a.jsx)("p",{className:"text-sm text-green-800",children:k.template.name}),(0,a.jsx)("p",{className:"text-xs text-green-600 mt-1",children:k.template.description}),k.template.tags&&k.template.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:k.template.tags.map(e=>(0,a.jsx)(d.C,{variant:"outline",className:"text-xs bg-white",children:e},e))})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>R(k.template.id),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:I,disabled:w,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,a.jsx)(T.Z,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Select Template"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(er.Ph,{value:b,onValueChange:y,"data-testid":"template-dropdown",children:[(0,a.jsx)(er.i4,{className:"flex-1",children:(0,a.jsx)(er.ki,{placeholder:"Choose a video template..."})}),(0,a.jsx)(er.Bw,{children:0===g.length?(0,a.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"No templates available. Create templates in Admin panel."}):g.map(e=>(0,a.jsx)(er.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"truncate",children:e.name}),e.category&&(0,a.jsx)(d.C,{variant:"secondary",className:"text-xs",children:e.category})]})},e.id))})]}),b&&(0,a.jsx)(i.z,{variant:"outline",size:"icon",onClick:()=>R(b),title:"Preview Template",children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})]})]}),b&&(0,a.jsx)("div",{className:"p-3 bg-gray-50 border rounded-lg",children:(()=>{let e=g.find(e=>e.id===b);return e?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),e.video_data&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2 grid grid-cols-2 gap-2",children:[(0,a.jsxs)("p",{children:["Duration: ",e.video_data.duration_seconds,"s"]}),(0,a.jsxs)("p",{children:["Resolution: ",e.video_data.width,"x",e.video_data.height]})]}),e.tags&&e.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map(e=>(0,a.jsx)(d.C,{variant:"outline",className:"text-xs",children:e},e))})]}):null})()}),(0,a.jsx)(i.z,{onClick:q,disabled:!b||w||0===g.length,className:"w-full","data-testid":"assign-template-btn",children:w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Assigning..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eW.Z,{className:"w-4 h-4 mr-2"}),k?"Change Template":"Assign Template"]})})]}),(0,a.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-blue-900",children:[(0,a.jsx)("strong",{children:"Note:"})," Video templates will be used to generate personalized videos with your wedding information automatically populated."]})})]})]}),(0,a.jsx)(G.Vq,{open:C,onOpenChange:Z,children:(0,a.jsxs)(G.cZ,{className:"max-w-4xl",children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Template Preview"}),(0,a.jsxs)(G.Be,{children:[null==P?void 0:P.name," - ",null==P?void 0:P.description]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[P&&P.video_data&&(0,a.jsxs)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden relative",children:[(0,a.jsx)("video",{src:P.video_data.original_url,poster:null===(s=P.preview_thumbnail)||void 0===s?void 0:s.url,width:"100%",height:"100%",controls:!0,playsInline:!0,controlsList:"nodownload",className:"w-full h-full object-contain"}),!A&&B.length>0&&(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:B.map((e,s)=>{var t,l,r,i,o,n;return(0,a.jsx)("div",{className:"absolute",style:{left:"".concat((null===(t=e.position)||void 0===t?void 0:t.x)||0,"%"),top:"".concat((null===(l=e.position)||void 0===l?void 0:l.y)||0,"%"),transform:"translate(-50%, -50%)",fontSize:"".concat((null===(r=e.style)||void 0===r?void 0:r.font_size)||24,"px"),fontFamily:(null===(i=e.style)||void 0===i?void 0:i.font_family)||"Arial",color:(null===(o=e.style)||void 0===o?void 0:o.color)||"#FFFFFF",fontWeight:(null===(n=e.style)||void 0===n?void 0:n.font_weight)||"normal",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",textAlign:"center",maxWidth:"80%"},children:e.text},e.id||s)})}),A&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 animate-spin text-white"})})]}),B.length>0&&(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Dynamic Overlays Preview (populated with your wedding data):"}),(0,a.jsx)("div",{className:"space-y-1",children:B.map((e,s)=>(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[" ",e.data_source,": ",(0,a.jsx)("span",{className:"font-semibold",children:e.text})]},s))})]}),P&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Category"}),(0,a.jsx)("p",{className:"font-medium",children:P.category||"General"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Duration"}),(0,a.jsxs)("p",{className:"font-medium",children:[null===(t=P.video_data)||void 0===t?void 0:t.duration_seconds,"s"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Resolution"}),(0,a.jsxs)("p",{className:"font-medium",children:[null===(r=P.video_data)||void 0===r?void 0:r.width,"x",null===(n=P.video_data)||void 0===n?void 0:n.height]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Text Overlays"}),(0,a.jsxs)("p",{className:"font-medium",children:[(null===(c=P.text_overlays)||void 0===c?void 0:c.length)||0," overlays"]})]})]}),P&&P.tags&&P.tags.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:P.tags.map(e=>(0,a.jsx)(d.C,{variant:"outline",children:e},e))})]})]})]})})]})}var eK=t(85398),eX=t(23395),eJ=t(38733),eQ=t(12515),e$=t(3522),e0=t(69093),e1=t(24841),e2=t(16653),e4=t(98156);function e5(e){let{weddingId:s}=e,[t,r]=(0,l.useState)(!0),[c,u]=(0,l.useState)([]),[m,x]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[g,f]=(0,l.useState)([]),[j,b]=(0,l.useState)([]),[y,N]=(0,l.useState)(null),[w,_]=(0,l.useState)(!1),[k,S]=(0,l.useState)(0),[C,Z]=(0,l.useState)(0),[P,z]=(0,l.useState)(70),[B,F]=(0,l.useState)(85),[A,T]=(0,l.useState)(80),[U,O]=(0,l.useState)(!1),[D,R]=(0,l.useState)(!1),[q,I]=(0,l.useState)(!1),L=(0,l.useRef)(null);(0,l.useEffect)(()=>{V()},[]),(0,l.useEffect)(()=>{L.current&&(L.current.volume=P/100*(B/100))},[P,B]);let V=async()=>{try{r(!0);let[e,t,a,l]=await Promise.all([M.default.get("/api/admin/music/library?category=background_music&limit=100"),M.default.get("/api/admin/music/library?category=sound_effect&limit=100"),M.default.get("/api/admin/music/library?category=transition&limit=100"),M.default.get("/api/admin/music/library?category=emotion&limit=100")]);u(e.data),x(t.data),p(a.data),f(l.data);try{let e=await M.default.get("/api/weddings/".concat(s,"/music/playlist"));b(e.data.music_playlist||[])}catch(e){console.log("No playlist found for wedding")}}catch(e){console.error("Failed to load music data:",e),E.toast.error("Failed to load music library")}finally{r(!1)}},G=e=>{L.current&&(L.current.src=e.file_url,L.current.play(),N(e),_(!0))},Y=()=>{let e=c.findIndex(e=>e.id===(null==y?void 0:y.id));e<c.length-1&&G(c[e+1])},W=e=>{let s=new Audio(e.file_url);s.volume=A/100*(B/100),s.play(),E.toast.success("Playing: ".concat(e.title))},H=e=>!e||isNaN(e)?"0:00":"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));return(0,a.jsxs)(o.Zb,{className:"h-full",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),"Music & Audio Control"]}),(0,a.jsx)(o.SZ,{children:"Control background music and sound effects for your stream"})]}),(0,a.jsxs)(o.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-rose-50 to-purple-50 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Master Audio"}),(0,a.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>O(!U),children:U?(0,a.jsx)(eX.Z,{className:"w-4 h-4"}):(0,a.jsx)(eJ.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eQ.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)(eK.i,{value:[B],onValueChange:e=>F(e[0]),max:100,step:1,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium w-12 text-right",children:[B,"%"]})]})})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Background Music"}),(0,a.jsxs)(d.C,{variant:"outline",children:[c.length," tracks"]})]}),y?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md",children:[(0,a.jsx)("p",{className:"font-medium",children:y.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:y.artist||"Unknown Artist"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(eK.i,{value:[k],onValueChange:e=>{L.current&&(L.current.currentTime=e[0],S(e[0]))},max:C||100,step:1,className:"w-full"}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:H(k)}),(0,a.jsx)("span",{children:H(C)})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>R(!D),className:D?"bg-rose-100":"",children:(0,a.jsx)(e$.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>{let e=c.findIndex(e=>e.id===(null==y?void 0:y.id));e>0&&G(c[e-1])},children:(0,a.jsx)(e0.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",onClick:()=>{L.current&&(w?L.current.pause():L.current.play(),_(!w))},className:"bg-rose-500 hover:bg-rose-600",children:w?(0,a.jsx)(e1.Z,{className:"w-4 h-4"}):(0,a.jsx)(eo.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"outline",onClick:Y,children:(0,a.jsx)(e2.Z,{className:"w-4 h-4"})}),(0,a.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>I(!q),className:q?"bg-rose-100":"",children:(0,a.jsx)(e4.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eJ.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)(eK.i,{value:[P],onValueChange:e=>z(e[0]),max:100,step:1,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium w-12 text-right",children:[P,"%"]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(v.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No track playing"})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Available Tracks"}),(0,a.jsx)("div",{className:"max-h-48 overflow-y-auto space-y-1",children:c.slice(0,10).map(e=>(0,a.jsxs)("button",{onClick:()=>G(e),className:"w-full text-left p-2 rounded hover:bg-gray-100 transition-colors ".concat((null==y?void 0:y.id)===e.id?"bg-rose-50 border border-rose-200":""),children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.artist||"Unknown"})]},e.id))})]})]}),(0,a.jsxs)(n.mQ,{defaultValue:"effects",className:"w-full",children:[(0,a.jsxs)(n.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(n.SP,{value:"effects",children:"Effects"}),(0,a.jsx)(n.SP,{value:"transitions",children:"Transitions"}),(0,a.jsx)(n.SP,{value:"emotions",children:"Emotions"})]}),(0,a.jsxs)(n.nU,{value:"effects",className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Sound Effects"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eQ.Z,{className:"w-3 h-3 text-gray-500"}),(0,a.jsx)(eK.i,{value:[A],onValueChange:e=>T(e[0]),max:100,step:1,className:"w-24"}),(0,a.jsxs)("span",{className:"text-xs w-8",children:[A,"%"]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:m.slice(0,8).map(e=>(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>W(e),className:"justify-start",children:[(0,a.jsx)(eo.Z,{className:"w-3 h-3 mr-2"}),e.title]},e.id))})]}),(0,a.jsx)(n.nU,{value:"transitions",className:"space-y-3",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:h.slice(0,8).map(e=>(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>W(e),className:"justify-start",children:[(0,a.jsx)(eo.Z,{className:"w-3 h-3 mr-2"}),e.title]},e.id))})}),(0,a.jsx)(n.nU,{value:"emotions",className:"space-y-3",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:g.slice(0,8).map(e=>(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>W(e),className:"justify-start",children:[(0,a.jsx)(eo.Z,{className:"w-3 h-3 mr-2"}),e.title]},e.id))})})]}),(0,a.jsx)("audio",{ref:L,onTimeUpdate:()=>{L.current&&(S(L.current.currentTime),Z(L.current.duration))},onEnded:()=>{_(!1),q?(L.current.play(),_(!0)):Y()}})]})]})}var e3=t(6649),e6=t(52064),e8=t(59061),e7=t(54817);function e9(e){let{isOpen:s,onClose:t,onSelect:r,weddingId:o,maxSelection:c=1,allowedTypes:u=["photo","video"],selectedMedia:x=[],category:p=null,currentCategoryCount:g=0}=e,[f,v]=(0,l.useState)(!1),[j,y]=(0,l.useState)([]),[N,w]=(0,l.useState)([]),[_,k]=(0,l.useState)(""),[S,C]=(0,l.useState)(x),[Z,P]=(0,l.useState)("all");(0,l.useEffect)(()=>{s&&o&&z()},[s,o]),(0,l.useEffect)(()=>{B()},[j,_,Z]);let z=async()=>{try{v(!0);let e=await M.default.get("/api/media/gallery/".concat(o));if(!e.data){console.error("No media data received:",e),E.toast.error("No media data received"),y([]);return}let s=Array.isArray(e.data)?e.data:e.data.media||[];if(!Array.isArray(s)){console.error("Invalid media data format:",e.data),E.toast.error("Invalid media data format"),y([]);return}let t=s.filter(e=>u.includes(e.media_type));y(t)}catch(a){var e,s;console.error("Error loading media:",a);let t=(null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||a.message||"Failed to load media gallery";E.toast.error(t),y([])}finally{v(!1)}},B=()=>{let e=[...j];"photos"===Z?e=e.filter(e=>"photo"===e.media_type):"videos"===Z&&(e=e.filter(e=>"video"===e.media_type)),_&&(e=e.filter(e=>{var s;return null===(s=e.caption)||void 0===s?void 0:s.toLowerCase().includes(_.toLowerCase())})),w(e)},F=e=>{if(S.some(s=>s.id===e.id))C(S.filter(s=>s.id!==e.id));else{if("moment"===p&&g+S.length+1>5){E.toast.error("Maximum 5 precious moments allowed across all layouts");return}1===c?C([e]):S.length<c?C([...S,e]):E.toast.warning("You can select up to ".concat(c," items"))}},A=j.filter(e=>"photo"===e.media_type).length,U=j.filter(e=>"video"===e.media_type).length;return(0,a.jsx)(G.Vq,{open:s,onOpenChange:t,children:(0,a.jsxs)(G.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(G.fK,{children:[(0,a.jsx)(G.$N,{children:"Select Media from Gallery"}),(0,a.jsxs)(G.Be,{children:["Choose ",1===c?"a photo":"up to ".concat(c," photos")," from your uploaded media"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(e7.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)(Y.I,{type:"text",placeholder:"Search by caption...",value:_,onChange:e=>k(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(n.mQ,{value:Z,onValueChange:P,children:[(0,a.jsxs)(n.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(n.SP,{value:"all",children:["All (",j.length,")"]}),(0,a.jsxs)(n.SP,{value:"photos",disabled:!u.includes("photo"),children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),"Photos (",A,")"]}),(0,a.jsxs)(n.SP,{value:"videos",disabled:!u.includes("video"),children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-1"}),"Videos (",U,")"]}),(0,a.jsxs)(n.SP,{value:"upload",children:[(0,a.jsx)(ec.Z,{className:"w-4 h-4 mr-1"}),"Upload New"]})]}),(0,a.jsx)(n.nU,{value:"upload",className:"mt-4",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsx)(O,{weddingId:o,onUploadComplete:e=>{z(),P("all"),E.toast.success("Media uploaded! Select it from the gallery.")}})})}),(0,a.jsx)(n.nU,{value:"all",className:"mt-4",children:f?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}):0===N.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(b.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No media found"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Upload some photos or videos first"})]}):(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:N.map(e=>{let s=S.some(s=>s.id===e.id);return(0,a.jsxs)("div",{onClick:()=>F(e),className:"relative aspect-square cursor-pointer rounded-lg overflow-hidden border-2 transition-all ".concat(s?"border-rose-500 ring-2 ring-rose-200":"border-gray-200 hover:border-rose-300"),children:["photo"===e.media_type?(0,a.jsx)("img",{src:e.cdn_url||e.file_url||e.url,alt:e.caption||"Media",className:"w-full h-full object-cover",onError:s=>{console.error("Image load error:",s),console.error("Failed image URL:",e.cdn_url||e.file_url||e.url),s.target.style.display="none",s.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center bg-gray-100"><span class="text-gray-400 text-xs">Image Error</span></div>'}}):(0,a.jsxs)("div",{className:"relative w-full h-full bg-gray-100 flex items-center justify-center",children:[(0,a.jsx)(h.Z,{className:"w-8 h-8 text-gray-400"}),e.thumbnail_url&&(0,a.jsx)("img",{src:e.thumbnail_url,alt:e.caption||"Video",className:"absolute inset-0 w-full h-full object-cover"})]}),s&&(0,a.jsx)("div",{className:"absolute inset-0 bg-rose-500 bg-opacity-20 flex items-center justify-center",children:(0,a.jsx)("div",{className:"bg-rose-500 text-white rounded-full p-2",children:(0,a.jsx)(eW.Z,{className:"w-5 h-5"})})}),e.caption&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:(0,a.jsx)("p",{className:"text-white text-xs truncate",children:e.caption})})]},e.id)})})})]}),S.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-rose-50 rounded-lg border border-rose-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(d.C,{variant:"default",className:"bg-rose-500",children:[S.length," selected"]}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:c>1&&"(Maximum: ".concat(c,")")})]}),(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>C([]),className:"text-rose-600 hover:text-rose-700",children:[(0,a.jsx)(T.Z,{className:"w-4 h-4 mr-1"}),"Clear"]})]})]}),(0,a.jsxs)(G.cN,{children:[(0,a.jsx)(i.z,{variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsxs)(i.z,{onClick:()=>{r(S),t()},disabled:0===S.length,className:"bg-rose-500 hover:bg-rose-600",children:[(0,a.jsx)(eW.Z,{className:"w-4 h-4 mr-2"}),"Select ",S.length>0&&"(".concat(S.length,")")]})]})]})})}var se=t(25797),ss=t(55430),st=t(77700),sa=t(82897);function sl(e){let{slides:s,selectedIndex:t,onSelect:l,onAddPhotos:r,onDeleteSlide:o}=e;return(0,a.jsxs)("div",{className:"w-64 border-r bg-white flex flex-col h-full flex-shrink-0",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"font-semibold text-sm",children:["Slides (",s.length,")"]}),(0,a.jsxs)(i.z,{size:"sm",variant:"outline",onClick:r,children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 mr-1"})," Add"]})]}),(0,a.jsx)(se.x,{className:"flex-1",children:(0,a.jsxs)("div",{className:"p-2 space-y-2",children:[s.map((e,s)=>{let r=t===s,n=(0,sa.Pc)(e.transition),d=e.animation&&"none"!==e.animation;return(0,a.jsxs)("div",{className:(0,st.cn)("relative group flex gap-3 p-2 rounded-lg cursor-pointer border transition-all",r?"bg-blue-50 border-blue-500 shadow-sm":"hover:bg-gray-50 border-transparent hover:border-gray-200"),onClick:()=>l(s),children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1 min-w-[20px]",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-500",children:s+1}),n&&(0,a.jsx)("div",{title:"Has Transition",className:"w-4 h-4 rounded-full bg-purple-100 flex items-center justify-center",children:(0,a.jsx)(ss.Z,{className:"w-2.5 h-2.5 text-purple-600"})}),d&&(0,a.jsx)("div",{title:"Has Effect",className:"w-4 h-4 rounded-full bg-orange-100 flex items-center justify-center",children:(0,a.jsx)(y.Z,{className:"w-2.5 h-2.5 text-orange-600"})})]}),(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded overflow-hidden flex-shrink-0 border",children:e.media_url?(0,a.jsx)("img",{src:e.media_url,alt:"Slide ".concat(s+1),className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-300",children:"No Img"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[(0,a.jsx)("p",{className:"text-xs font-medium truncate",children:"none"===e.transition?"No Transition":e.transition}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-500 truncate",children:[e.duration,"s  ","none"!==e.animation?e.animation:"No Effect"]})]}),(0,a.jsx)(i.z,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 text-red-500 hover:bg-red-50 absolute top-1 right-1",onClick:e=>{e.stopPropagation(),o(s)},children:(0,a.jsx)(V.Z,{className:"w-3 h-3"})})]},s)}),0===s.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500 text-sm",children:'No slides yet. Click "Add" to start.'})]})})]})}var sr=t(7568);let si=sr.fC,so=sr.xz;sr.ee;let sn=l.forwardRef((e,s)=>{let{className:t,align:l="center",sideOffset:r=4,...i}=e;return(0,a.jsx)(sr.h_,{children:(0,a.jsx)(sr.VY,{ref:s,align:l,sideOffset:r,className:(0,st.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...i})})});function sd(e){let{selectedSlide:s,onUpdateSlide:t,onApplyToAll:r,onApplyRandom:o,musicUrl:d,onSelectMusic:c}=e,[u,m]=(0,l.useState)("transitions"),x=[{id:"entrance",label:"Entrance",icon:eo.Z},{id:"exit",label:"Exit",icon:ss.Z},{id:"transitions",label:"Transitions",icon:y.Z},{id:"effects",label:"Special Effects",icon:y.Z}],h=sa.Hx,p=(e,l)=>{let r="transition"===l?(null==s?void 0:s.transition)===e.value:(null==s?void 0:s.animation)===e.value;return(0,a.jsxs)(i.z,{variant:r?"default":"outline",className:"w-[140px] h-[60px] flex flex-col items-center justify-center gap-1 relative overflow-hidden shrink-0 p-0",onClick:()=>t(l,e.value),title:e.label,children:[e.preview?(0,a.jsx)("img",{src:e.preview,alt:e.label,className:"absolute inset-0 w-full h-full object-cover opacity-100"}):(0,a.jsx)("span",{className:"relative z-10 text-xs font-medium truncate w-full text-center px-1",children:e.label}),r&&(0,a.jsx)("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full z-20 shadow-sm border border-white"})]},e.value)};return(0,a.jsxs)("div",{className:"border-b bg-white shadow-sm z-20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b",children:[(0,a.jsx)(n.mQ,{value:u,onValueChange:m,className:"w-auto",children:(0,a.jsx)(n.dr,{children:x.map(e=>(0,a.jsxs)(n.SP,{value:e.id,className:"gap-2",children:[(0,a.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 border-r pr-4",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:c,className:"text-sm truncate max-w-[150px]",children:d?"Change Music":"Select Background Music"}),d&&(0,a.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>{},children:(0,a.jsx)(eo.Z,{className:"w-3 h-3"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eG.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("div",{className:"w-24",children:[(0,a.jsxs)(B._,{className:"text-[10px] text-gray-500 mb-1 block",children:["Duration: ",(null==s?void 0:s.duration)||5,"s"]}),(0,a.jsx)(eK.i,{value:[(null==s?void 0:s.duration)||5],min:1,max:30,step:.5,onValueChange:e=>{let[s]=e;return t("duration",s)}})]})]}),(0,a.jsxs)(si,{children:[(0,a.jsx)(so,{asChild:!0,children:(0,a.jsx)(i.z,{variant:"outline",size:"sm",children:"Settings"})}),(0,a.jsxs)(sn,{className:"w-64 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{children:"Transition Duration"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eK.i,{value:[(null==s?void 0:s.transition_duration)||1],min:.1,max:5,step:.1,onValueChange:e=>{let[s]=e;return t("transition_duration",s)}}),(0,a.jsxs)("span",{className:"text-xs w-8",children:[(null==s?void 0:s.transition_duration)||1,"s"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(B._,{children:"Apply to All"}),(0,a.jsx)(i.z,{size:"sm",onClick:r,children:"Apply"})]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"h-[160px] bg-gray-50/50 p-4 flex gap-4",children:[(0,a.jsxs)(se.x,{className:"flex-1 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"flex gap-2 h-full",children:(0,a.jsx)("div",{className:"grid grid-rows-2 grid-flow-col gap-2 min-w-max",style:{gridTemplateRows:"repeat(2, 60px)"},children:"entrance"===u||"exit"===u?h.map(e=>p(e,"transition")):"transitions"===u?sa.U6.map(e=>p(e,"transition")):"effects"===u?[{value:"none",label:"None"},{value:"ken_burns",label:"Ken Burns"},{value:"random",label:"Random"}].map(e=>p(e,"animation")):null})}),(0,a.jsx)(se.B,{orientation:"horizontal"})]}),"transitions"===u&&(0,a.jsx)("div",{className:"flex flex-col justify-center border-l pl-4 shrink-0",children:(0,a.jsxs)(i.z,{variant:"outline",className:"h-full flex flex-col gap-2 w-24 border-dashed",onClick:o,title:"Apply Random Transitions to All Slides",children:[(0,a.jsx)(e$.Z,{className:"w-6 h-6 text-purple-600"}),(0,a.jsx)("span",{className:"text-xs font-medium text-center whitespace-normal",children:"Apply Random"})]})})]})]})}function sc(e){let{albumId:s,onBack:t}=e,[r,n]=(0,l.useState)(null),[d,c]=(0,l.useState)([]),[u,h]=(0,l.useState)(!0),[p,g]=(0,l.useState)(!1),[f,j]=(0,l.useState)(0),[b,y]=(0,l.useState)(!1),[N,w]=(0,l.useState)(!1),[_,k]=(0,l.useState)(!1),[S,C]=(0,l.useState)([]);(0,l.useEffect)(()=>{s&&Z()},[s]);let Z=async()=>{try{h(!0);let e=await M.default.get("/api/albums/detail/".concat(s));n(e.data),c(e.data.slides||[])}catch(e){console.error("Error fetching album details:",e),E.toast.error("Failed to load album details")}finally{h(!1)}},P=async()=>{g(!0);try{await M.default.put("/api/albums/".concat(s),{slides:d,music_url:r.music_url}),E.toast.success("Album saved successfully")}catch(e){E.toast.error("Failed to save album")}finally{g(!1)}},z=async()=>{try{let e=await M.default.get("/api/music/library");C(e.data.music||[]),k(!0)}catch(e){E.toast.error("Failed to load music library")}},B=e=>{n({...r,music_url:e}),k(!1),E.toast.success("Music selected!")};return u?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)(m.Z,{className:"animate-spin"})}):r?(0,a.jsxs)("div",{className:"flex flex-col h-[calc(100vh-64px)] bg-gray-50 overflow-hidden",children:[b&&(0,a.jsx)(e6.Z,{album:{...r,slides:d},onClose:()=>y(!1)}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-white border-b shrink-0 z-30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i.z,{variant:"ghost",size:"icon",onClick:t,children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-bold",children:r.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[d.length," photos"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>y(!0),children:[(0,a.jsx)(eo.Z,{className:"w-3 h-3 mr-2"}),"Full Preview"]}),(0,a.jsxs)(i.z,{size:"sm",onClick:P,disabled:p,children:[(0,a.jsx)(e8.Z,{className:"w-3 h-3 mr-2"}),p?"Saving...":"Save"]})]})]}),(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)(sd,{selectedSlide:d[f],onUpdateSlide:(e,s)=>{if(f<0||f>=d.length)return;let t=[...d];t[f]={...t[f],[e]:s},c(t)},onApplyToAll:()=>{if(f<0)return;let e=d[f];confirm("Apply current slide settings (Duration, Transition, Animation) to ALL slides?")&&(c(d.map(s=>({...s,duration:e.duration,transition:e.transition,transition_duration:e.transition_duration,animation:e.animation}))),E.toast.success("Settings applied to all slides"))},onApplyRandom:()=>{confirm("Randomize transitions for all slides? This will overwrite existing transitions.")&&(c(d.map(e=>{let s=sa.U6[Math.floor(Math.random()*sa.U6.length)];return{...e,transition:s.value}})),E.toast.success("Random transitions applied to all slides!"))},musicUrl:r.music_url,onSelectMusic:z})}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsx)(sl,{slides:d,selectedIndex:f,onSelect:j,onAddPhotos:()=>w(!0),onDeleteSlide:e=>{let s=[...d];s.splice(e,1),c(s),f>=s.length&&j(Math.max(0,s.length-1))}}),(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 flex items-center justify-center relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px"}}),d.length>0?(0,a.jsx)("div",{className:"w-full h-full relative",children:(0,a.jsx)(e6.Z,{album:{...r,slides:d},autoPlay:!1,embedded:!0,controlledIndex:f,onIndexChange:j,showControls:!0})}):(0,a.jsxs)("div",{className:"text-gray-500 flex flex-col items-center",children:[(0,a.jsx)("p",{children:"No photos added yet"}),(0,a.jsx)(i.z,{variant:"outline",className:"mt-4",onClick:()=>w(!0),children:"Add Photos"})]})]})]}),(0,a.jsx)(e9,{isOpen:N,onClose:()=>w(!1),weddingId:r.wedding_id,onSelect:e=>{let s=e.map((e,s)=>({media_id:e.id,media_url:e.cdn_url||e.file_url||e.url,order:d.length+s,duration:5,transition:"fade",transition_duration:1,animation:"none"}));c([...d,...s]),w(!1)},maxSelection:50,allowedTypes:["photo"]}),(0,a.jsx)(G.Vq,{open:_,onOpenChange:k,children:(0,a.jsxs)(G.cZ,{className:"max-w-2xl max-h-[600px]",children:[(0,a.jsx)(G.fK,{children:(0,a.jsx)(G.$N,{children:"Select Music from Library"})}),(0,a.jsx)("div",{className:"overflow-y-auto space-y-2 max-h-[500px]",children:0===S.length?(0,a.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No music available in library"}):S.map(e=>(0,a.jsx)(o.Zb,{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>B(e.file_url),children:(0,a.jsxs)(o.aY,{className:"p-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.title||"Untitled"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.duration?"".concat(Math.floor(e.duration/60),":").concat(String(Math.floor(e.duration%60)).padStart(2,"0")):"Unknown duration"})]}),r.music_url===e.file_url&&(0,a.jsx)(eW.Z,{className:"w-5 h-5 text-green-500"}),(0,a.jsx)(v.Z,{className:"w-5 h-5 text-gray-400"})]})},e.id))})]})})]}):(0,a.jsx)("div",{children:"Album not found"})}function su(e){let{weddingId:s}=e,[t,r]=(0,l.useState)([]),[n,d]=(0,l.useState)(!0),[c,u]=(0,l.useState)(null),[m,x]=(0,l.useState)(null),[h,p]=(0,l.useState)(!1),[g,f]=(0,l.useState)("");(0,l.useEffect)(()=>{s&&v()},[s]);let v=async()=>{try{d(!0);let e=await M.default.get("/api/albums/".concat(s));r(e.data)}catch(e){console.error("Error fetching albums:",e),E.toast.error("Failed to load albums")}finally{d(!1)}},j=async()=>{if(g.trim())try{await M.default.post("/api/albums/",{wedding_id:s,title:g}),E.toast.success("Album created successfully"),f(""),p(!1),v()}catch(e){console.error("Error creating album:",e),E.toast.error("Failed to create album")}},y=async e=>{if(confirm("Are you sure you want to delete this album?"))try{await M.default.delete("/api/albums/".concat(e)),E.toast.success("Album deleted"),v()}catch(e){E.toast.error("Failed to delete album")}};return c?(0,a.jsx)(sc,{albumId:c.id,onBack:()=>{u(null),v()}}):(0,a.jsxs)("div",{className:"space-y-6",children:[m&&(0,a.jsx)(e6.Z,{album:m,onClose:()=>x(null)}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Photo Albums"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Create albums to organize photos and create slideshows"})]}),(0,a.jsxs)(G.Vq,{open:h,onOpenChange:p,children:[(0,a.jsx)(G.hg,{asChild:!0,children:(0,a.jsxs)(i.z,{children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 mr-2"}),"Create Album"]})}),(0,a.jsxs)(G.cZ,{children:[(0,a.jsx)(G.fK,{children:(0,a.jsx)(G.$N,{children:"Create New Album"})}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B._,{children:"Album Title"}),(0,a.jsx)(Y.I,{value:g,onChange:e=>f(e.target.value),placeholder:"e.g., Reception Highlights"})]})}),(0,a.jsxs)(G.cN,{children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,a.jsx)(i.z,{onClick:j,disabled:!g.trim(),children:"Create Album"})]})]})]})]}),n?(0,a.jsx)("div",{className:"text-center py-12",children:"Loading albums..."}):0===t.length?(0,a.jsx)(o.Zb,{className:"border-dashed",children:(0,a.jsxs)(o.aY,{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:(0,a.jsx)(b.Z,{className:"w-6 h-6 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No albums yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1 max-w-sm mx-auto",children:"Create your first album to start organizing photos and building slideshows."}),(0,a.jsxs)(i.z,{className:"mt-4",onClick:()=>p(!0),children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 mr-2"}),"Create Album"]})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>{var s;return(0,a.jsxs)(o.Zb,{className:"overflow-hidden group hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"aspect-video bg-gray-100 relative",children:[e.cover_photo_url?(0,a.jsx)("img",{src:e.cover_photo_url,alt:e.title,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:(0,a.jsx)(b.Z,{className:"w-8 h-8 text-gray-300"})}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100",children:[(0,a.jsxs)(i.z,{variant:"secondary",size:"sm",onClick:()=>u(e),children:[(0,a.jsx)(e3.Z,{className:"w-4 h-4 mr-2"}),"Manage"]}),(0,a.jsxs)(i.z,{size:"sm",onClick:async()=>{try{let s=await M.default.get("/api/albums/detail/".concat(e.id));x(s.data)}catch(e){E.toast.error("Could not load preview")}},children:[(0,a.jsx)(eo.Z,{className:"w-4 h-4 mr-2"}),"Play"]})]})]}),(0,a.jsx)(o.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold truncate",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(null===(s=e.slides)||void 0===s?void 0:s.length)||0," photos"]})]}),(0,a.jsx)(i.z,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-red-500",onClick:()=>y(e.id),children:(0,a.jsx)(V.Z,{className:"w-4 h-4"})})]})})]},e.id)})})]})}function sm(e){var s,t,B,F,A,T,U,I,L,V,G;let{params:Y}=e,{user:H,loading:K}=(0,r.a)(),X=(0,P.useRouter)(),J=Y.id,[Q,$]=(0,l.useState)(null),[ee,es]=(0,l.useState)(!0),[et,ea]=(0,l.useState)(!1),[er,ei]=(0,l.useState)(0),[eo,en]=(0,l.useState)(0),[ed,ec]=(0,l.useState)(null),[eu,em]=(0,l.useState)(!1),[ex,eh]=(0,l.useState)("weblive"),[ep,eg]=(0,l.useState)(!1),ef=(0,P.useSearchParams)(),ev=(0,P.usePathname)(),ej=ef.get("tab")||"stream",eb=(null==H?void 0:H.subscription_plan)==="monthly"||(null==H?void 0:H.subscription_plan)==="yearly";(0,l.useEffect)(()=>{K||H?H&&J&&ey():X.push("/login");let e=e=>{var s;console.log("[FIX 4] Background update event received in manage page:",e.detail),(null===(s=e.detail)||void 0===s?void 0:s.updates)&&($(s=>({...s,backgrounds:{...s.backgrounds,...e.detail.updates}})),console.log("[FIX 4] Wedding backgrounds updated in state (no page refresh)"))};return window.addEventListener("wedding-backgrounds-updated",e),()=>{window.removeEventListener("wedding-backgrounds-updated",e)}},[H,K,J]);let ey=async()=>{try{es(!0),console.log("DEBUG: Loading wedding with ID:",J);let e=(await M.default.get("/api/weddings/".concat(J))).data;if(console.log("DEBUG: Wedding data received:",e),!e||"object"!=typeof e){console.error("Invalid wedding data received:",e),E.toast.error("Invalid wedding data received"),X.push("/dashboard");return}if(H&&H.id&&e.creator_id!==H.id){E.toast.error("You do not have permission to manage this wedding"),X.push("/dashboard");return}console.log("DEBUG: Theme settings before processing:",e.theme_settings),e.theme_settings&&"object"==typeof e.theme_settings?(e.theme_settings.studio_details&&"object"==typeof e.theme_settings.studio_details||(e.theme_settings.studio_details={studio_id:"",name:"",logo_url:"",contact:""}),e.theme_settings.custom_messages&&"object"==typeof e.theme_settings.custom_messages||(e.theme_settings.custom_messages={welcome_text:"Welcome to our big day",description:""}),Array.isArray(e.theme_settings.cover_photos)||(e.theme_settings.cover_photos=[])):(console.log("DEBUG: Creating default theme_settings"),e.theme_settings={theme_id:"floral_garden",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",cover_photos:[],studio_details:{studio_id:"",name:"",logo_url:"",contact:""},custom_messages:{welcome_text:"Welcome to our big day",description:""}}),console.log("DEBUG: Final theme_settings:",e.theme_settings),console.log("DEBUG: Cover photos count:",e.theme_settings.cover_photos.length),console.log("DEBUG: Theme assets:",e.theme_settings.theme_assets),$(e),ea("live"===e.status),ei(e.viewers_count||0);let s=e.streaming_type||"weblive";console.log("DEBUG: Wedding streaming_type:",e.streaming_type),console.log("DEBUG: Setting localStreamingType to:",s),console.log("DEBUG: skipStreamingTypeUpdate:",ep),ep?eg(!1):eh(s)}catch(r){var e,s,t,a;console.error("Error loading wedding:",r);let l=(null===(s=r.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||r.message||"Failed to load wedding details";E.toast.error(l),((null===(t=r.response)||void 0===t?void 0:t.status)===401||(null===(a=r.response)||void 0===a?void 0:a.status)===403)&&X.push("/dashboard")}finally{es(!1)}},eN=(e,s)=>{navigator.clipboard.writeText(e),E.toast.success("".concat(s," copied to clipboard!"))},ew=async()=>{try{let e=await M.default.get("/api/weddings/".concat(J,"/settings"));ec(e.data)}catch(e){console.error("Error loading settings:",e)}},e_=async(e,s)=>{try{em(!0),await M.default.put("/api/weddings/".concat(J,"/settings"),{[e]:s}),E.toast.success("Settings updated"),ew()}catch(e){console.error("Error updating settings:",e),E.toast.error("Failed to update settings")}finally{em(!1)}};if((0,l.useEffect)(()=>{J&&H&&ew()},[J,H]),K||ee)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 animate-spin text-rose-500"})});if(!Q)return null;let ek="".concat(window.location.origin,"/weddings/").concat(J);return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50",children:[(0,a.jsx)("nav",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200 sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(Z.default,{href:"/dashboard",children:(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Dashboard"]})}),(0,a.jsx)(c.Z,{orientation:"vertical",className:"h-6"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-rose-500 to-purple-600 p-2 rounded-lg",children:(0,a.jsx)(h.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-bold",children:"Manage Wedding"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:Q.title})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[Q.is_locked&&(0,a.jsxs)(d.C,{variant:"destructive",className:"gap-1",children:[(0,a.jsx)(p.Z,{className:"w-3 h-3"}),"Locked"]}),(0,a.jsx)(d.C,{variant:et?"default":"secondary",className:et?"bg-red-500 animate-pulse":"",children:et?"LIVE":Q.status}),(0,a.jsx)(Z.default,{href:"/weddings/".concat(J),target:"_blank",children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"View Public Page"]})})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6 ".concat("stream"===ej?"lg:col-span-2":"lg:col-span-3"),children:[Q.is_locked&&(0,a.jsxs)(u.bZ,{variant:"destructive",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsxs)(u.X,{children:["This wedding is locked because your premium subscription has expired.",(0,a.jsx)(Z.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade to Premium"})," to unlock and start streaming."]})]}),(0,a.jsxs)(n.mQ,{value:ej,onValueChange:e=>{let s=new URLSearchParams(ef);s.set("tab",e),X.push("".concat(ev,"?").concat(s.toString()))},className:"w-full",children:[(0,a.jsxs)(n.dr,{className:"grid w-full grid-cols-5",children:[(0,a.jsxs)(n.SP,{value:"stream",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Stream"]}),(0,a.jsxs)(n.SP,{value:"stream-view",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Stream View"]}),(0,a.jsxs)(n.SP,{value:"layout",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Layout"]}),(0,a.jsxs)(n.SP,{value:"media",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Media"]}),(0,a.jsxs)(n.SP,{value:"settings",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),(0,a.jsxs)(n.nU,{value:"stream",className:"space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"Streaming Type"}),(0,a.jsx)(o.SZ,{children:"Choose between WebLive custom RTMP or YouTube Live Streaming"})]}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"streamingType",value:"weblive",checked:"weblive"===ex,onChange:async e=>{if("live"===Q.status||"paused"===Q.status){E.toast.error("Cannot change streaming type during an active stream");return}eh("weblive");try{let e=await M.default.put("/api/weddings/".concat(J,"/streaming-type?streaming_type=weblive"));console.log("DEBUG: Streaming type update response:",e.data),E.toast.success("Switched to WebLive Streaming"),eg(!0),console.log("DEBUG: API call successful, keeping local state")}catch(e){var s,t;console.error("DEBUG: Failed to update streaming type:",e),E.toast.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to update streaming type"),eh(ex)}},disabled:"live"===Q.status||"paused"===Q.status,className:"w-4 h-4 text-rose-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"WebLive Streaming (Default)"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"streamingType",value:"youtube",checked:"youtube"===ex,onChange:async e=>{if("live"===Q.status||"paused"===Q.status){E.toast.error("Cannot change streaming type during an active stream");return}console.log("DEBUG: Changing streaming type from",ex,"to youtube"),eh("youtube");try{let e=await M.default.put("/api/weddings/".concat(J,"/streaming-type?streaming_type=youtube"));console.log("DEBUG: Streaming type update response:",e.data),E.toast.success("Switched to YouTube Live Streaming"),eg(!0),console.log("DEBUG: API call successful, keeping local state")}catch(e){var s,t;console.error("DEBUG: Failed to update streaming type:",e),E.toast.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to update streaming type"),eh(ex)}},disabled:"live"===Q.status||"paused"===Q.status,className:"w-4 h-4 text-red-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"YouTube Live Streaming"})]})]}),("live"===Q.status||"paused"===Q.status)&&(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{className:"text-sm",children:"Streaming type is locked during an active stream. End the stream to switch modes."})]})]})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),"Live Stream Status"]}),(0,a.jsx)(o.SZ,{children:"Manage your wedding stream lifecycle - OBS controls stream presence, you control when it ends"})]}),(0,a.jsxs)(o.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("live"===Q.status?"bg-red-500 animate-pulse":"paused"===Q.status?"bg-yellow-500":"bg-gray-400")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:"live"===Q.status?"LIVE":"paused"===Q.status?"PAUSED":"ENDED"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"live"===Q.status?"Streaming in progress":"paused"===Q.status?"Stream paused - waiting for OBS reconnect":"Stream has ended"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Viewers"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:er})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-blue-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(et?"bg-green-500":"bg-gray-400")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"OBS Status"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:et?"OBS is connected and streaming":"OBS is disconnected"}),(0,a.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"OBS start/stop controls stream presence only"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-purple-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4 text-purple-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Viewer Experience"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"live"===Q.status?"Viewers see live stream":"paused"===Q.status?'Viewers see "Be Right Back" screen':"Viewers see replay and highlights"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-rose-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 text-rose-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Host Control"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Only you can end the live stream"})]})]}),("live"===Q.status||"paused"===Q.status)&&(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)(i.z,{variant:"destructive",size:"lg",className:"w-full",onClick:async()=>{if(confirm("Are you sure you want to end the live stream? This will finalize the recording and show replay to viewers. This action cannot be undone."))try{es(!0),await ey(),await M.default.post("/api/weddings/".concat(J,"/live/end")),E.toast.success("Live stream ended successfully! Recording is being processed."),ey()}catch(a){var e,s,t;console.error("Error ending live stream:",a),(null===(t=a.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:null===(e=s.detail)||void 0===e?void 0:e.includes("Cannot end from"))?E.toast.error("Cannot end live stream: Stream is not currently active"):E.toast.error("Failed to end live stream")}finally{es(!1)}},disabled:ee,children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 ".concat(ee?"animate-spin":"")}),"End Live Stream"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"This will merge recordings, upload to CDN, and show replay to viewers"})]}),"ended"===Q.status&&(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)(w.Z,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"font-semibold text-green-800",children:"Stream Successfully Ended"}),(0,a.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Recording has been processed and is available for replay"}),Q.recording_url&&(0,a.jsx)(i.z,{variant:"outline",className:"mt-3",asChild:!0,children:(0,a.jsxs)("a",{href:Q.recording_url,target:"_blank",children:[(0,a.jsx)(Play,{className:"w-4 h-4 mr-2"}),"View Recording"]})})]})})]})]}),"weblive"===ex&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"WebLive - RTMP Credentials"}),(0,a.jsx)(o.SZ,{children:"Use these credentials in OBS Studio or your streaming software"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:Q.stream_credentials?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Server URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:Q.stream_credentials.rtmp_url,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>eN(Q.stream_credentials.rtmp_url,"Server URL"),children:(0,a.jsx)(_.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"password",value:Q.stream_credentials.stream_key,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>eN(Q.stream_credentials.stream_key,"Stream Key"),children:(0,a.jsx)(_.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{className:"text-sm",children:"Keep your stream key private! Anyone with this key can stream to your wedding."})]})]}):(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Loading credentials..."})})]}),"youtube"===ex&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"YouTube Account"}),(0,a.jsx)(o.SZ,{children:"Connect your YouTube account to stream live"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:(null===(s=Q.youtube_settings)||void 0===s?void 0:s.auth_connected)?(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-green-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-green-800",children:"YouTube Connected"}),(0,a.jsx)("p",{className:"text-sm text-green-600",children:"Ready to stream"})]})]}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("Are you sure you want to disconnect YouTube?"))try{await M.default.get("/api/youtube/disconnect/".concat(J)),E.toast.success("YouTube disconnected"),ey()}catch(e){E.toast.error("Failed to disconnect YouTube")}},children:"Disconnect"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(u.bZ,{children:(0,a.jsx)(u.X,{children:"Connect your YouTube account to enable live streaming to your YouTube channel"})}),(0,a.jsxs)(i.z,{onClick:async()=>{try{es(!0);let e=await M.default.post("/api/youtube/connect",{wedding_id:J});sessionStorage.setItem("youtube_state",e.data.state),sessionStorage.setItem("youtube_wedding_id",J),window.location.href=e.data.oauth_url}catch(e){E.toast.error("Failed to initiate YouTube connection"),es(!1)}},disabled:ee,className:"w-full bg-red-600 hover:bg-red-700",children:[ee?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Connect YouTube Account"]})]})})]}),(null===(t=Q.youtube_settings)||void 0===t?void 0:t.auth_connected)&&(null===(B=Q.youtube_settings)||void 0===B?void 0:B.broadcast_id)&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"YouTube - RTMP Credentials"}),(0,a.jsx)(o.SZ,{children:"Use these credentials in OBS Studio to stream to YouTube"})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:Q.stream_credentials&&(null===(F=Q.youtube_settings)||void 0===F?void 0:F.stream_id)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Stream Server URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:Q.stream_credentials.rtmp_url||"rtmp://a.rtmp.youtube.com/live2",readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>eN(Q.stream_credentials.rtmp_url||"rtmp://a.rtmp.youtube.com/live2","Server URL"),children:(0,a.jsx)(_.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"password",value:Q.stream_credentials.stream_key||"",readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{var e;(null===(e=Q.stream_credentials)||void 0===e?void 0:e.stream_key)?eN(Q.stream_credentials.stream_key,"Stream Key"):E.toast.error("Stream key not available")},children:(0,a.jsx)(_.Z,{className:"w-4 h-4"})})]})]}),(null===(A=Q.youtube_settings)||void 0===A?void 0:A.youtube_video_url)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"YouTube Video URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:Q.youtube_settings.youtube_video_url,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>window.open(Q.youtube_settings.youtube_video_url,"_blank"),children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(u.bZ,{children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{className:"text-sm",children:"Stream to YouTube using these credentials. Your stream will be visible on your YouTube channel."})]})]}):(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"No broadcast created yet"}),(0,a.jsxs)(i.z,{onClick:async()=>{try{es(!0),await M.default.post("/api/youtube/create-broadcast/".concat(J)),E.toast.success("YouTube broadcast created successfully"),ey()}catch(t){var e,s;E.toast.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"Failed to create broadcast")}finally{es(!1)}},disabled:ee,children:[ee?(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Create YouTube Broadcast"]})]})})]}),(null===(T=Q.youtube_settings)||void 0===T?void 0:T.auth_connected)&&(null===(U=Q.youtube_settings)||void 0===U?void 0:U.broadcast_id)&&(0,a.jsx)(eV,{weddingId:J,wedding:Q,onStatusChange:ey}),(null===(I=Q.youtube_settings)||void 0===I?void 0:I.auth_connected)&&(0,a.jsx)(eY,{weddingId:J,wedding:Q})]}),(0,a.jsx)(q.Z,{weddingId:J,isPremium:eb,isLive:et}),(0,a.jsx)(W,{weddingId:J,isPremium:eb,rtmpUrl:null==Q?void 0:null===(L=Q.stream_credentials)||void 0===L?void 0:L.rtmp_url}),et&&(0,a.jsx)(eR.Z,{weddingId:J})]}),(0,a.jsxs)(n.nU,{value:"stream-view",className:"space-y-6",children:[(0,a.jsx)(o.Zb,{children:(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),"Stream View - Multi-Camera & Music Control"]}),(0,a.jsx)(o.SZ,{children:"Manage cameras and control music/audio for your live stream"})]})}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)(W,{weddingId:J,isPremium:eb,rtmpUrl:null==Q?void 0:null===(V=Q.stream_credentials)||void 0===V?void 0:V.rtmp_url})}),(0,a.jsx)("div",{children:(0,a.jsx)(e5,{weddingId:J})})]})]}),(0,a.jsxs)(n.nU,{value:"layout",className:"space-y-6",children:[(0,a.jsx)(eH,{weddingId:J,currentTemplateId:null==Q?void 0:null===(G=Q.template_assignment)||void 0===G?void 0:G.template_id,onTemplateAssigned:()=>{E.toast.success("Template assigned! Your wedding data will be automatically populated."),ey()}}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5"}),"Wedding Layout Customization"]}),(0,a.jsx)(o.SZ,{children:"Select a layout structure, upload photos by category, and customize borders & styles"})]}),(0,a.jsx)(o.aY,{children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Choose your layout structure and customize photos, colors, fonts, and borders below."})})]}),(0,a.jsx)(eO,{weddingId:J,wedding:Q})]}),(0,a.jsx)(n.nU,{value:"media",className:"space-y-6",children:(0,a.jsxs)(n.mQ,{defaultValue:"albums",className:"w-full",children:[(0,a.jsxs)(n.dr,{className:"w-full justify-start border-b rounded-none p-0 h-auto bg-transparent gap-6",children:[(0,a.jsx)(n.SP,{value:"albums",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-rose-500 data-[state=active]:bg-transparent px-0 py-2",children:"Albums & Slideshows"}),(0,a.jsx)(n.SP,{value:"gallery",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-rose-500 data-[state=active]:bg-transparent px-0 py-2",children:"All Media Gallery"})]}),(0,a.jsx)(n.nU,{value:"albums",className:"mt-6",children:(0,a.jsx)(su,{weddingId:J})}),(0,a.jsxs)(n.nU,{value:"gallery",className:"mt-6 space-y-6",children:[(0,a.jsx)(el,{weddingId:J,onFolderSelect:e=>{console.log("Selected folder:",e)}}),(0,a.jsx)(O,{weddingId:J,onUploadComplete:()=>{en(e=>e+1),E.toast.success("Media uploaded successfully!")}}),(0,a.jsx)(D.Z,{weddingId:J,isCreator:!0},eo)]})]})}),(0,a.jsxs)(n.nU,{value:"settings",className:"space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{children:"Wedding Details"})}),(0,a.jsx)(o.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Couple"}),(0,a.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(k.Z,{className:"w-5 h-5 text-rose-500"}),Q.bride_name," & ",Q.groom_name]})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date & Time"}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4 text-gray-400"}),(0,z.WU)(new Date(Q.scheduled_date),"PPP")]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 ml-6",children:(0,z.WU)(new Date(Q.scheduled_date),"p")})]}),Q.location&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Location"}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"w-4 h-4 text-gray-400"}),Q.location]})]})]}),Q.description&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-700 mt-1",children:Q.description})]})]})]})})]}),ed&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"Media & Access Settings"}),(0,a.jsx)(o.SZ,{children:"Control how guests interact with your wedding content"})]}),(0,a.jsxs)(o.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Auto Delete Media"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Automatically delete media after a specified period"})]}),(0,a.jsx)("button",{onClick:()=>e_("auto_delete_media",!ed.auto_delete_media),disabled:eu,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(ed.auto_delete_media?"bg-rose-500":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(ed.auto_delete_media?"translate-x-6":"translate-x-1")})})]}),ed.auto_delete_media&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Delete after (days)"}),(0,a.jsx)("input",{type:"number",min:"1",max:"365",value:ed.auto_delete_days,onChange:e=>e_("auto_delete_days",parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-md"})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Enable Download"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Allow guests to download photos and videos"})]}),(0,a.jsx)("button",{onClick:()=>e_("enable_download",!ed.enable_download),disabled:eu,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(ed.enable_download?"bg-rose-500":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(ed.enable_download?"translate-x-6":"translate-x-1")})})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Enable Sharing/Embed"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Allow guests to share wedding page and embed media"})]}),(0,a.jsx)("button",{onClick:()=>e_("enable_sharing",!ed.enable_sharing),disabled:eu,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(ed.enable_sharing?"bg-rose-500":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(ed.enable_sharing?"translate-x-6":"translate-x-1")})})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Viewer Limit"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Maximum number of concurrent viewers (leave empty for unlimited)"})]})}),(0,a.jsx)("input",{type:"number",min:"0",placeholder:"Unlimited",value:ed.viewer_limit||"",onChange:e=>e_("viewer_limit",e.target.value?parseInt(e.target.value):null),className:"w-full px-3 py-2 border rounded-md"})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Playback Quality Options"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Quality options available to viewers"}),(0,a.jsxs)("select",{value:ed.playback_quality,onChange:e=>e_("playback_quality",e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[(0,a.jsx)("option",{value:"auto",children:"Auto (Adaptive)"}),(0,a.jsx)("option",{value:"720p",children:"720p Maximum"}),(0,a.jsx)("option",{value:"1080p",children:"1080p Maximum"}),(0,a.jsx)("option",{value:"4K",children:"4K Maximum"})]})]})]})]})]})]})]}),"stream"===ej&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{className:"text-lg",children:"Share Your Wedding"})}),(0,a.jsxs)(o.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md border",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Public URL"}),(0,a.jsx)("p",{className:"text-sm font-mono break-all",children:ek})]}),(0,a.jsxs)(i.z,{variant:"outline",className:"w-full",onClick:()=>eN(ek,"Wedding URL"),children:[(0,a.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]}),(0,a.jsx)(R.Z,{token:(null==H?void 0:H.access_token)||localStorage.getItem("token")}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{className:"text-lg",children:"Quick Stats"})}),(0,a.jsxs)(o.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,a.jsx)(d.C,{variant:et?"default":"secondary",children:Q.status})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Current Viewers"}),(0,a.jsx)("span",{className:"font-semibold",children:er})]}),(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Total Views"}),(0,a.jsx)("span",{className:"font-semibold",children:Q.viewers_count||0})]})]})]})]})]})})]})}function sx(e){let{params:s}=e;return(0,a.jsx)(eD.w,{children:(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}),children:(0,a.jsx)(sm,{params:s})})})}sn.displayName=sr.VY.displayName,t(80492)},90223:function(e,s,t){"use strict";t.d(s,{Z:function(){return g}});var a=t(57437),l=t(2265),r=t(38472),i=t(32816),o=t(10273),n=t(56360),d=t(46290),c=t(76780),u=t(53225),m=t(11980),x=t(87138),h=t(20357);let p=h.env.NEXT_PUBLIC_API_URL||h.env.NEXT_PUBLIC_BACKEND_URL;function g(e){let{token:s}=e,[t,h]=(0,l.useState)(null),[g,f]=(0,l.useState)(!0);(0,l.useEffect)(()=>{s&&v()},[s]);let v=async()=>{try{let e=await r.Z.get("".concat(p,"/api/plan/storage/stats"),{headers:{Authorization:"Bearer ".concat(s)}});h(e.data)}catch(e){console.error("Error fetching storage stats:",e)}finally{f(!1)}};if(g)return(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),"Storage"]})}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded w-full"})]})})]});if(!t)return null;let{storage_used_formatted:j,storage_limit_formatted:b,percentage_used:y,is_over_limit:N,plan:w}=t,_=y>80&&!N;return(0,a.jsxs)(o.Zb,{className:N?"border-red-500":_?"border-yellow-500":"",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),"Storage Usage"]}),(0,a.jsxs)(o.SZ,{children:[j," of ",b," used"]})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.E,{value:Math.min(y,100),className:"h-3 ".concat(N?"bg-red-100":_?"bg-yellow-100":"bg-gray-100")}),(0,a.jsxs)("p",{className:"text-sm text-right ".concat(N?"text-red-600 font-semibold":_?"text-yellow-600":"text-gray-500"),children:[y.toFixed(1),"% used"]})]}),N&&(0,a.jsxs)(m.bZ,{variant:"destructive",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)(m.X,{children:"You've exceeded your storage limit. Uploads are blocked until you upgrade or delete files."})]}),_&&(0,a.jsxs)(m.bZ,{className:"border-yellow-500 bg-yellow-50",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsx)(m.X,{className:"text-yellow-800",children:"You're approaching your storage limit. Consider upgrading to Premium for 200GB storage."})]}),t.breakdown&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:[" Media items: ",t.breakdown.media_items]}),(0,a.jsxs)("p",{children:[" Photobooth photos: ",t.breakdown.photobooth_photos]}),(0,a.jsxs)("p",{children:[" Recordings: ",t.breakdown.recordings]})]}),"free"===w&&(0,a.jsx)(x.default,{href:"/pricing",children:(0,a.jsx)(n.z,{className:"w-full",variant:N?"destructive":"default",children:"Upgrade to Premium - 200GB Storage"})})]})]})}},87611:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var a=t(57437),l=t(2265),r=t(71229),i=t(91231),o=t(47870);function n(e){let{weddingData:s={},layoutConfig:t={},onEnter:n}=e,[d,c]=(0,l.useState)(!1),[u,m]=(0,l.useState)("16:9");(0,l.useEffect)(()=>{c(!0)},[]);let{bride_name:x="",groom_name:h="",event_date:p="",event_time:g="",venue:f=""}=s,{font:v="Playfair Display",primaryColor:j="#1e3a8a",couplePhoto:b=null,preciousMoments:y=[],studioDetails:N={},preWeddingVideo:w=null,borders:_={},borderMasks:k={},templateVideoWeddingId:S=null,hasTemplateVideo:C=!1}=t,Z={hidden:{y:40,opacity:0},visible:{y:0,opacity:1,transition:{duration:.8}}};return((0,l.useEffect)(()=>{if(C){let e=()=>{let e=document.querySelector("video");if(e){let s=()=>{let s=e.videoWidth/e.videoHeight;console.log("[Layout1] Video dimensions:",e.videoWidth,"x",e.videoHeight,"Aspect:",s),s<1?m("9:16"):m("16:9")};e.readyState>=1?s():e.addEventListener("loadedmetadata",s)}};e();let s=setTimeout(e,500);return()=>clearTimeout(s)}},[C,S]),d)?(0,a.jsxs)("div",{className:"min-h-screen",style:{fontFamily:v,color:j},children:[C&&S&&(0,a.jsx)("section",{className:"w-full min-h-screen flex items-center justify-center backdrop-blur-sm p-4 md:p-8",children:(0,a.jsx)("div",{className:"w-full mx-auto transition-all duration-300 ".concat("9:16"===u?"max-w-md aspect-[9/16]":"max-w-6xl aspect-[16/9]"),children:(0,a.jsx)(o.Z,{weddingId:S,className:"w-full h-full"})})}),(null==b?void 0:b.url)&&(0,a.jsx)("section",{className:"w-full min-h-[50vh] md:min-h-[60vh] py-8 md:py-16 flex items-center justify-center",children:(0,a.jsx)(r.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Z,className:"w-full max-w-6xl mx-auto px-4 md:px-8",children:(0,a.jsx)("div",{className:"relative w-full aspect-[16/9] md:aspect-[21/9] overflow-hidden",children:(0,a.jsx)(i.Z,{src:b.url,alt:"Couple",maskUrl:null==_?void 0:_.couple,maskData:null==k?void 0:k.couple,aspectRatio:"custom",className:"w-full h-full object-cover"})})})}),w&&(0,a.jsx)("section",{className:"w-full min-h-[50vh] md:min-h-[60vh] backdrop-blur-sm py-8 md:py-16 flex items-center justify-center",children:(0,a.jsx)(r.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Z,className:"w-full max-w-6xl mx-auto px-4 md:px-8",children:(0,a.jsx)("div",{className:"aspect-video w-full bg-black/30 rounded-lg overflow-hidden shadow-2xl",children:(0,a.jsx)("iframe",{src:w,className:"w-full h-full",allowFullScreen:!0,title:"Wedding Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})})})}),(null==N?void 0:N.default_image_url)&&(0,a.jsx)("section",{className:"w-full min-h-[40vh] md:min-h-[50vh] backdrop-blur-sm py-12 md:py-20 flex items-center justify-center",children:(0,a.jsx)(r.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Z,className:"w-full max-w-5xl mx-auto px-4 md:px-8 text-center",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-8 md:p-16 shadow-2xl border border-white/20",children:[(0,a.jsx)("img",{src:N.default_image_url,className:"w-full max-w-md mx-auto mb-6 rounded-lg filter drop-shadow-lg object-cover",alt:"Studio"}),(0,a.jsx)("h3",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold uppercase tracking-widest mb-4",children:"Stand Out With World-Class Video Production"}),(0,a.jsx)("p",{className:"text-white/90 text-sm md:text-base lg:text-lg font-light",children:"Your Story Deserves To Be Heard"})]})})}),(null==y?void 0:y.length)>0&&(0,a.jsx)("section",{className:"w-full min-h-screen backdrop-blur-sm py-12 md:py-20",children:(0,a.jsxs)(r.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Z,className:"w-full max-w-7xl mx-auto px-4 md:px-8",children:[(0,a.jsx)("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12 md:mb-16 text-white drop-shadow-lg",style:{color:j},children:"Precious Moments"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 lg:gap-10",children:y.map((e,s)=>(0,a.jsx)(r.E.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{delay:.1*s,duration:.5},className:"relative group",children:(0,a.jsxs)("div",{className:"bg-white/95 backdrop-blur-md p-3 md:p-4 shadow-xl rounded-sm hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",children:[(0,a.jsx)("div",{className:"aspect-square overflow-hidden bg-gray-100",children:(0,a.jsx)(i.Z,{src:e.url,maskUrl:null==_?void 0:_.preciousMoments,maskData:null==k?void 0:k.preciousMoments,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",aspectRatio:"1:1"})}),(0,a.jsx)("div",{className:"h-8 md:h-10 bg-white"})]})},s))})]})}),(0,a.jsx)("footer",{className:"w-full bg-black/50 backdrop-blur-md text-white py-8 text-center",children:(0,a.jsx)("p",{className:"text-sm md:text-base",children:"\xa9 2025 - Crafted with "})})]}):null}},9036:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var a=t(57437),l=t(2265),r=t(64042),i=t(24241),o=t(49321),n=t(98094),d=t(71976),c=t(40933),u=t(88319),m=t(44763),x=t(71229),h=t(91231),p=t(47870),g=t(26378),f=t(48571),v=t(67159);function j(e){let{weddingData:s={},layoutConfig:t={},onEnter:j}=e,[b,y]=(0,l.useState)(!1),N=(0,l.useRef)(null),{scrollYProgress:w}=(0,u.v)(),_=(0,m.H)(w,[.2,.8],["0%","-100%"]);(0,l.useEffect)(()=>{y(!0)},[]);let{bride_name:k="",groom_name:S="",event_date:C="",event_time:Z="",venue:P="",playback_url:E="",recording_url:M=""}=s,{font:z="Lato",primaryColor:B="#be185d",secondaryColor:F="#fbcfe8",welcomeMessage:A="Our Journey",description:T="",couplePhoto:U=null,preciousMoments:O=[],studioDetails:D={},preWeddingVideo:R=null,borders:q={},borderMasks:I={},templateVideoWeddingId:L=null,hasTemplateVideo:V=!1}=t;return b?(0,a.jsxs)("div",{className:"bg-white min-h-screen overflow-x-hidden",style:{fontFamily:z,color:"#333"},children:[(0,a.jsxs)("div",{className:"lg:hidden",children:[(0,a.jsxs)("div",{className:"min-h-screen relative flex items-center justify-center p-8 bg-pink-50 text-center",children:[V&&L?(0,a.jsx)("div",{className:"w-full max-w-2xl mx-auto relative z-10",children:(0,a.jsx)("div",{className:"aspect-video w-full rounded-2xl overflow-hidden shadow-2xl bg-white/50 backdrop-blur-xl p-2",children:(0,a.jsx)(p.Z,{weddingId:L,className:"w-full h-full"})})}):(0,a.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,a.jsx)("div",{className:"w-20 h-1 bg-pink-400 mx-auto"}),(0,a.jsxs)("h1",{className:"text-4xl font-bold text-pink-900",children:[k," ",(0,a.jsx)("br",{}),"&",(0,a.jsx)("br",{})," ",S]}),(0,a.jsx)("div",{className:"text-pink-700 uppercase tracking-widest text-sm",children:A}),(null==U?void 0:U.url)&&(0,a.jsx)("div",{className:"mt-8 rounded-full w-64 h-64 mx-auto overflow-hidden border-4 border-white shadow-xl",children:(0,a.jsx)(h.Z,{src:U.url,aspectRatio:"1:1",maskUrl:null==q?void 0:q.couple,className:"w-full h-full object-cover"})})]}),(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-pink-200 rounded-bl-full opacity-50"})]}),(0,a.jsxs)("div",{className:"px-6 py-20 relative",children:[(0,a.jsx)("div",{className:"absolute left-10 top-0 bottom-0 w-0.5 bg-pink-200"}),T&&(0,a.jsxs)("div",{className:"mb-16 relative pl-12",children:[(0,a.jsx)("div",{className:"absolute left-0 top-2 w-8 h-8 rounded-full bg-pink-500 border-4 border-white shadow flex items-center justify-center",children:(0,a.jsx)(r.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-pink-900 mb-2",children:"Our Story"}),(0,a.jsx)("div",{className:"text-gray-600 leading-relaxed bg-gray-50 p-4 rounded-lg border border-pink-100",children:T})]}),null==O?void 0:O.map((e,s)=>(0,a.jsxs)("div",{className:"mb-16 relative pl-12",children:[(0,a.jsx)("div",{className:"absolute left-3 top-8 w-2 h-2 rounded-full bg-pink-300"}),(0,a.jsx)("div",{className:"rounded-2xl overflow-hidden shadow-lg border border-gray-100",children:(0,a.jsx)("img",{src:e.url,className:"w-full h-auto"})})]},s)),(0,a.jsxs)("div",{className:"mb-16 relative pl-12",children:[(0,a.jsx)("div",{className:"absolute left-0 top-2 w-8 h-8 rounded-full bg-pink-900 border-4 border-white shadow flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{className:"bg-pink-900 text-white p-6 rounded-2xl shadow-xl",children:[C&&(()=>{try{let e=(0,g.D)(C);if(!(0,f.J)(e))return(0,a.jsx)("h3",{className:"text-2xl font-bold mb-1",children:"Date TBD"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold mb-1",children:(0,v.WU)(e,"MMMM dd")}),(0,a.jsxs)("div",{className:"opacity-80 mb-4",children:[(0,v.WU)(e,"yyyy"),"  ",Z]})]})}catch(e){return console.error("Invalid date:",C,e),(0,a.jsx)("h3",{className:"text-2xl font-bold mb-1",children:"Date TBD"})}})(),P&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm border-t border-white/20 pt-4",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"})," ",P]})]})]}),(E||M||j)&&(0,a.jsxs)("div",{className:"relative pl-12",children:[(0,a.jsx)("div",{className:"absolute left-0 top-2 w-8 h-8 rounded-full bg-black border-4 border-white shadow flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("button",{onClick:j,className:"w-full bg-black text-white py-4 rounded-xl font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-transform",children:j?"Join Live Stream":"Watch Video"})]})]})]}),(0,a.jsx)("div",{className:"hidden lg:block h-[500vh] relative",ref:N,children:(0,a.jsxs)("div",{className:"sticky top-0 h-screen overflow-hidden bg-gray-50 flex items-center",children:[(0,a.jsx)(x.E.div,{className:"absolute top-1/2 left-0 right-0 h-1 bg-gray-200 -z-10",children:(0,a.jsx)(x.E.div,{className:"h-full bg-pink-500 origin-left",style:{scaleX:w}})}),(0,a.jsxs)(x.E.div,{style:{x:_},className:"flex items-center gap-[40vw] px-[10vw]",children:[(0,a.jsxs)("div",{className:"w-[80vw] shrink-0 grid grid-cols-2 gap-12 items-center",children:[(0,a.jsx)("div",{className:"relative",children:U?(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("div",{className:"absolute -inset-4 bg-pink-200 rounded-full blur-xl opacity-50"}),(0,a.jsx)(h.Z,{src:U.url,maskUrl:null==q?void 0:q.couple,aspectRatio:"4:5",className:"w-full h-[70vh] object-cover shadow-2xl rounded-3xl"})]}):(0,a.jsx)("div",{className:"h-[60vh] bg-gray-200 rounded-3xl"})}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"text-pink-600 font-bold tracking-[0.4em] uppercase",children:"The Wedding Of"}),(0,a.jsxs)("h1",{className:"text-9xl font-black text-slate-900 leading-[0.8]",children:[k.split(" ")[0]," ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-pink-500",children:"&"})," ",(0,a.jsx)("br",{}),S.split(" ")[0]]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-gray-500",children:[(0,a.jsx)("div",{className:"w-12 h-px bg-gray-400"}),(0,a.jsx)("div",{children:"Scroll to Explore"}),(0,a.jsx)(x.E.div,{animate:{x:[0,5,0]},transition:{repeat:1/0,duration:1.5},children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]})]})]}),T&&(0,a.jsxs)("div",{className:"w-[40vw] shrink-0 bg-white p-12 rounded-3xl shadow-2xl border-t-8 border-pink-500 relative",children:[(0,a.jsx)("div",{className:"absolute -top-6 left-12 bg-pink-500 text-white p-4 rounded-full",children:(0,a.jsx)(r.Z,{className:"w-6 h-6"})}),(0,a.jsx)("h3",{className:"text-3xl font-bold mb-6 mt-4",children:"How We Met"}),(0,a.jsx)("div",{className:"text-xl leading-relaxed text-gray-600",children:T})]}),null==O?void 0:O.map((e,s)=>(0,a.jsx)("div",{className:"w-[25vw] shrink-0 ".concat(s%2==0?"-mt-24":"mt-24"),children:(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-xl transform rotate-2 hover:rotate-0 transition-transform duration-500",children:[(0,a.jsx)(h.Z,{src:e.url,maskUrl:null==q?void 0:q.preciousMoments,className:"w-full aspect-[3/4] object-cover rounded-lg"}),(0,a.jsxs)("div",{className:"text-center mt-4 font-handwriting text-gray-400",children:["Moment ",s+1]})]})},s)),(0,a.jsx)("div",{className:"w-[50vw] shrink-0 flex items-center gap-12",children:(0,a.jsxs)("div",{className:"w-full bg-slate-900 text-white p-16 rounded-[3rem] shadow-2xl relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-pink-500 rounded-full blur-[100px] opacity-20"}),(0,a.jsxs)("div",{className:"relative z-10 grid grid-cols-2 gap-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-pink-400 uppercase tracking-widest text-sm mb-2",children:"Save The Date"}),C&&(()=>{try{let e=(0,g.D)(C);if(!(0,f.J)(e))return(0,a.jsx)("h2",{className:"text-7xl font-bold mb-4",children:"TBD"});return(0,a.jsx)("h2",{className:"text-7xl font-bold mb-4",children:(0,v.WU)(e,"dd.MM")})}catch(e){return console.error("Invalid date:",C,e),(0,a.jsx)("h2",{className:"text-7xl font-bold mb-4",children:"TBD"})}})(),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"})," ",Z]})]}),(0,a.jsxs)("div",{className:"border-l border-white/10 pl-12",children:[(0,a.jsx)("div",{className:"text-pink-400 uppercase tracking-widest text-sm mb-2",children:"Location"}),(0,a.jsx)("h3",{className:"text-3xl font-bold mb-4 leading-tight",children:P}),(0,a.jsxs)("button",{className:"flex items-center gap-2 text-sm border-b border-white/30 pb-1 hover:text-pink-400 transition-colors",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"})," Get Directions"]})]})]})]})}),(0,a.jsx)("div",{className:"w-[60vw] shrink-0 flex items-center justify-center",children:E||M||j?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block p-1 rounded-full border-2 border-dashed border-pink-300 mb-8 relative",children:(0,a.jsx)("div",{className:"w-32 h-32 rounded-full bg-pink-500 flex items-center justify-center animate-pulse",children:(0,a.jsx)(n.Z,{className:"w-12 h-12 text-white fill-current ml-1"})})}),(0,a.jsx)("h2",{className:"text-5xl font-bold mb-8",children:"Ready to Celebrate?"}),(0,a.jsx)("button",{onClick:j,className:"bg-black text-white px-12 py-6 rounded-full text-xl font-bold hover:scale-105 transition-transform shadow-xl",children:"ENTER LIVE EVENT"})]}):(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("h2",{className:"text-6xl font-black text-gray-200 uppercase",children:["See You",(0,a.jsx)("br",{}),"There"]})})})]})]})})]}):null}},18814:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var a=t(57437),l=t(2265),r=t(64042),i=t(62483),o=t(42365),n=t(40933),d=t(49321),c=t(98094),u=t(71229),m=t(91231),x=t(47870),h=t(26378),p=t(48571),g=t(67159);function f(e){let{weddingData:s={},layoutConfig:t={},onEnter:f}=e,[v,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{j(!0)},[]);let{bride_name:b="",groom_name:y="",event_date:N="",event_time:w="",venue:_="",playback_url:k="",recording_url:S=""}=s,{font:C="Indie Flower",primaryColor:Z="#44403c",secondaryColor:P="#78716c",welcomeMessage:E="Our Scrapbook",description:M="",couplePhoto:z=null,preciousMoments:B=[],studioDetails:F={},preWeddingVideo:A=null,borders:T={},borderMasks:U={},templateVideoWeddingId:O=null,hasTemplateVideo:D=!1}=t,R=e=>e%2==0?2:-2;return v?(0,a.jsxs)("div",{className:"min-h-screen bg-[#fdf6e3] overflow-x-hidden selection:bg-yellow-200",style:{fontFamily:C,color:Z,backgroundImage:'url("https://www.transparenttextures.com/patterns/cardboard-flat.png")'},children:[(0,a.jsxs)("section",{className:"min-h-screen flex flex-col items-center justify-center p-8 relative",children:[(0,a.jsx)("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 w-48 h-12 bg-yellow-200/80 rotate-1 transform skew-x-12 z-10"}),(0,a.jsxs)("div",{className:"bg-white p-6 pb-20 shadow-xl transform -rotate-1 max-w-2xl w-full border border-gray-200 relative",children:[D&&O?(0,a.jsx)("div",{className:"aspect-[4/5] bg-transparent overflow-hidden relative flex items-center justify-center",children:(0,a.jsx)(x.Z,{weddingId:O,className:"w-full h-full"})}):(null==z?void 0:z.url)?(0,a.jsx)("div",{className:"aspect-[4/5] bg-gray-100 overflow-hidden relative",children:(0,a.jsx)(m.Z,{src:z.url,maskUrl:null==T?void 0:T.couple,maskData:null==U?void 0:U.couple,aspectRatio:"custom",className:"w-full h-full object-cover filter sepia-[0.2]",style:{height:"100%"}})}):(0,a.jsx)("div",{className:"aspect-[4/5] bg-gray-100 flex items-center justify-center",children:(0,a.jsx)(r.Z,{className:"w-20 h-20 text-gray-300"})}),!D&&(0,a.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:[(0,a.jsxs)("h1",{className:"text-5xl font-bold mb-1",style:{fontFamily:"Caveat, cursive"},children:[b," & ",y]}),N&&(()=>{try{let e=(0,h.D)(N);if(!(0,p.J)(e))return null;return(0,a.jsx)("p",{className:"text-xl text-gray-500",children:(0,g.WU)(e,"MMMM do, yyyy")})}catch(e){return console.error("Invalid date:",N,e),null}})()]}),(0,a.jsx)("div",{className:"absolute -top-6 -right-6 text-red-400 transform rotate-12",children:(0,a.jsx)(r.Z,{className:"w-16 h-16 fill-current"})})]}),(0,a.jsx)("div",{className:"absolute bottom-8 animate-bounce",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 text-gray-400"})})]}),M&&(0,a.jsx)("section",{className:"py-20 px-4 max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white p-12 shadow-lg relative transform rotate-1 border border-gray-100",style:{backgroundImage:"linear-gradient(#e5e7eb 1px, transparent 1px)",backgroundSize:"100% 2rem"},children:[(0,a.jsx)("div",{className:"absolute -top-4 right-12 text-gray-400",children:(0,a.jsx)(o.Z,{className:"w-12 h-12"})}),(0,a.jsx)("h2",{className:"text-4xl font-bold mb-8 text-center",style:{fontFamily:"Caveat, cursive"},children:E}),(0,a.jsx)("div",{className:"text-2xl leading-[2rem] font-handwriting text-gray-700",children:M})]})}),(0,a.jsx)("section",{className:"py-20 px-4",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto grid md:grid-cols-2 gap-12",children:[(0,a.jsxs)("div",{className:"bg-[#ffedd5] p-8 border-2 border-dashed border-orange-300 relative transform -rotate-2",children:[(0,a.jsx)("div",{className:"absolute -left-3 top-1/2 w-6 h-6 bg-[#fdf6e3] rounded-full"}),(0,a.jsx)("div",{className:"absolute -right-3 top-1/2 w-6 h-6 bg-[#fdf6e3] rounded-full"}),(0,a.jsx)("h3",{className:"text-xl uppercase tracking-widest text-orange-800 mb-4 font-bold",children:"Save the Date"}),N&&(()=>{try{let e=(0,h.D)(N);if(!(0,p.J)(e))return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-6xl font-black text-orange-900",children:"TBD"})});return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-6xl font-black text-orange-900",children:(0,g.WU)(e,"dd")}),(0,a.jsx)("p",{className:"text-3xl text-orange-800",children:(0,g.WU)(e,"MMMM")}),(0,a.jsxs)("p",{className:"text-xl mt-2 flex items-center justify-center gap-2",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5"})," ",w]})]})}catch(e){return console.error("Invalid date:",N,e),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-6xl font-black text-orange-900",children:"TBD"})})}})()]}),(0,a.jsxs)("div",{className:"bg-[#e0f2fe] p-8 border-2 border-dashed border-blue-300 relative transform rotate-1",children:[(0,a.jsx)("div",{className:"absolute -left-3 top-1/2 w-6 h-6 bg-[#fdf6e3] rounded-full"}),(0,a.jsx)("div",{className:"absolute -right-3 top-1/2 w-6 h-6 bg-[#fdf6e3] rounded-full"}),(0,a.jsx)("h3",{className:"text-xl uppercase tracking-widest text-blue-800 mb-4 font-bold",children:"Location"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"w-12 h-12 mx-auto text-blue-600 mb-4"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-900",children:_}),(0,a.jsx)("p",{className:"mt-4 text-blue-700",children:"Can't wait to see you there!"})]})]})]})}),(null==B?void 0:B.length)>0&&(0,a.jsxs)("section",{className:"py-20 px-4 overflow-hidden",children:[(0,a.jsx)("h2",{className:"text-center text-4xl mb-16",style:{fontFamily:"Caveat, cursive"},children:"Favorite Moments"}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto flex flex-wrap justify-center gap-8",children:B.map((e,s)=>(0,a.jsxs)(u.E.div,{whileHover:{scale:1.1,rotate:0,zIndex:10},className:"bg-white p-3 shadow-md pb-12 relative w-64 transform transition-all duration-300",style:{rotate:"".concat(R(s),"deg")},children:[(0,a.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-24 h-6 bg-pink-200/80"}),(0,a.jsx)("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:(0,a.jsx)(m.Z,{src:e.url,maskUrl:null==T?void 0:T.preciousMoments,className:"w-full h-full object-cover"})})]},s))})]}),A&&(0,a.jsx)("section",{className:"py-20 px-4",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto bg-black p-4 rounded-xl shadow-2xl transform rotate-1",children:[(0,a.jsxs)("div",{className:"bg-gray-800 p-1 mb-2 rounded flex justify-between px-4 text-white font-mono text-xs",children:[(0,a.jsx)("span",{children:"REC "}),(0,a.jsx)("span",{children:"00:04:20"}),(0,a.jsx)("span",{children:"BAT [||||]"})]}),(0,a.jsx)("div",{className:"aspect-video",children:(0,a.jsx)("iframe",{src:A,className:"w-full h-full rounded",allowFullScreen:!0})})]})}),(0,a.jsxs)("footer",{className:"py-20 text-center relative",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-4 bg-[url('https://www.transparenttextures.com/patterns/zipper.png')] opacity-20"}),(k||S||f)&&(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsxs)("button",{onClick:f,className:"bg-red-500 text-white px-8 py-4 rounded-full font-bold text-xl shadow-lg hover:bg-red-600 transition-colors transform hover:-rotate-1",children:[(0,a.jsx)(c.Z,{className:"inline w-6 h-6 mr-2"})," Watch Live"]})}),(0,a.jsx)("p",{className:"text-2xl",style:{fontFamily:"Caveat, cursive"},children:"With Love,"}),(0,a.jsxs)("h2",{className:"text-4xl font-bold mt-2",children:[b," & ",y]}),(null==F?void 0:F.name)&&(0,a.jsx)("div",{className:"mt-12 text-gray-500 text-sm",children:(0,a.jsxs)("p",{children:["Memories captured by ",F.name]})})]})]}):null}},94835:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(57437),l=t(2265),r=t(49321),i=t(4436),o=t(71976),n=t(71229),d=t(91231),c=t(47870),u=t(26378),m=t(48571),x=t(67159);function h(e){let{weddingData:s={},layoutConfig:t={},onEnter:h}=e,[p,g]=(0,l.useState)(!1);(0,l.useRef)(null),(0,l.useEffect)(()=>{g(!0)},[]);let{bride_name:f="",groom_name:v="",event_date:j="",event_time:b="",venue:y="",playback_url:N="",recording_url:w=""}=s,{font:_="Montserrat",primaryColor:k="#1a1a1a",secondaryColor:S="#666666",welcomeMessage:C="Together",description:Z="",couplePhoto:P=null,preciousMoments:E=[],studioDetails:M={},preWeddingVideo:z=null,heroBackground:B=null,borders:F={},borderMasks:A={},templateVideoWeddingId:T=null,hasTemplateVideo:U=!1}=t,O={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.16,1,.3,1]}}};return p?(0,a.jsx)("div",{className:"min-h-screen py-12 px-4 sm:px-6 md:px-12 selection:bg-gray-200",style:{backgroundColor:"#f4f4f5",fontFamily:_,color:k,backgroundImage:"radial-gradient(#e4e4e7 1px, transparent 1px)",backgroundSize:"32px 32px"},children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-7 space-y-8",children:[(0,a.jsxs)(n.E.div,{initial:"hidden",animate:"visible",variants:O,className:"bg-white p-8 sm:p-12 shadow-2xl relative overflow-hidden group",style:{borderRadius:"2px"},children:[(0,a.jsx)("div",{className:"absolute -left-3 top-1/2 w-6 h-12 bg-[#f4f4f5] rounded-r-full"}),(0,a.jsx)("div",{className:"absolute -right-3 top-1/2 w-6 h-12 bg-[#f4f4f5] rounded-l-full"}),(0,a.jsxs)("div",{className:"flex flex-col h-full justify-between min-h-[500px]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start border-b border-gray-100 pb-8 mb-8",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs font-bold tracking-[0.2em] uppercase text-gray-400",children:"Invitation"}),(0,a.jsx)("p",{className:"text-xs font-bold tracking-[0.2em] uppercase text-gray-400",children:"No. 001"})]}),j&&(()=>{try{let e=(0,u.D)(j);if(!(0,m.J)(e))return(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("p",{className:"text-4xl font-light tabular-nums tracking-tighter",style:{color:k},children:"TBD"})});return(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-4xl font-light tabular-nums tracking-tighter",style:{color:k},children:(0,x.WU)(e,"dd.MM")}),(0,a.jsx)("p",{className:"text-xs font-bold tracking-[0.2em] uppercase text-gray-400",children:(0,x.WU)(e,"yyyy")})]})}catch(e){return console.error("Invalid date:",j,e),null}})()]}),(0,a.jsxs)("div",{className:"py-12 text-center lg:text-left relative",children:[(0,a.jsx)(n.E.h1,{className:"text-6xl sm:text-7xl md:text-8xl font-medium leading-none tracking-tight mix-blend-exclusion",style:{color:k},whileHover:{scale:1.02,x:20},transition:{type:"spring",stiffness:300},children:f}),(0,a.jsx)("span",{className:"text-4xl font-light italic text-gray-300 block my-4 ml-12",children:"&"}),(0,a.jsx)(n.E.h1,{className:"text-6xl sm:text-7xl md:text-8xl font-medium leading-none tracking-tight pl-8 sm:pl-20",style:{color:k},whileHover:{scale:1.02,x:20},transition:{type:"spring",stiffness:300},children:v})]}),(0,a.jsxs)("div",{className:"border-t border-gray-100 pt-8 mt-8 flex flex-col sm:flex-row justify-between items-end gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium mb-2",children:C}),y&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(r.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"uppercase tracking-wide",children:y})]})]}),b&&(0,a.jsx)("div",{className:"bg-black text-white px-6 py-2 rounded-full text-sm font-bold tracking-widest",children:b})]})]})]}),U&&T?(0,a.jsx)(n.E.div,{variants:O,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"bg-white p-4 shadow-xl",children:(0,a.jsx)("div",{className:"aspect-[16/10] overflow-hidden bg-transparent relative flex items-center justify-center",children:(0,a.jsx)(c.Z,{weddingId:T,className:"w-full h-full"})})}):(null==P?void 0:P.url)?(0,a.jsx)(n.E.div,{variants:O,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"bg-white p-4 shadow-xl",children:(0,a.jsxs)("div",{className:"aspect-[16/10] overflow-hidden bg-gray-100 relative",children:[(0,a.jsx)(d.Z,{src:P.url,alt:"".concat(f," & ").concat(v),maskUrl:null==F?void 0:F.couple,maskData:null==A?void 0:A.couple,aspectRatio:"16:10",className:"w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-700"}),(0,a.jsx)("div",{className:"absolute bottom-6 left-6 bg-white/90 backdrop-blur px-4 py-2",children:(0,a.jsx)("p",{className:"text-xs font-bold tracking-widest uppercase",children:"The Couple"})})]})}):null,z&&(0,a.jsxs)(n.E.div,{variants:O,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"bg-black text-white p-8 sm:p-12 shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-light uppercase tracking-widest",children:"Our Story"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),(0,a.jsx)("div",{className:"aspect-video w-full border border-white/20",children:(0,a.jsx)("iframe",{src:z,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-5 space-y-8 lg:mt-24",children:[Z&&(0,a.jsxs)(n.E.div,{variants:O,initial:"hidden",animate:"visible",transition:{delay:.2},className:"bg-white p-8 shadow-lg border-l-4",style:{borderColor:k},children:[(0,a.jsx)("h3",{className:"text-xs font-bold uppercase tracking-widest mb-4 text-gray-400",children:"A Note"}),(0,a.jsx)("p",{className:"text-lg leading-relaxed font-light text-gray-800",children:Z})]}),(N||w||h)&&(0,a.jsxs)(n.E.div,{variants:O,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"bg-[#1a1a1a] text-white p-8 relative overflow-hidden group cursor-pointer",onClick:h,children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity",children:(0,a.jsx)(i.Z,{className:"w-32 h-32 rotate-12"})}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsx)("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Digital Access"})]}),(0,a.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"Live Stream"}),(0,a.jsx)("p",{className:"text-gray-400 mb-8 text-sm",children:"Join the celebration from anywhere."}),h?(0,a.jsxs)("button",{className:"flex items-center gap-4 text-white hover:gap-6 transition-all",children:[(0,a.jsx)("span",{className:"uppercase tracking-widest text-sm border-b border-white pb-1",children:"Enter Event"}),(0,a.jsx)(o.Z,{className:"w-4 h-4"})]}):(0,a.jsx)("div",{className:"bg-white/10 p-2 rounded",children:(0,a.jsx)("p",{className:"text-xs text-center",children:"Video Player Loaded"})})]})]}),(null==E?void 0:E.length)>0&&(0,a.jsxs)(n.E.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-2 gap-4",children:[E.slice(0,4).map((e,s)=>(0,a.jsx)(n.E.div,{variants:O,className:"aspect-square bg-white p-2 shadow-md hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)("div",{className:"w-full h-full bg-gray-100 overflow-hidden relative",children:(0,a.jsx)("img",{src:e.url,alt:"Moment",className:"w-full h-full object-cover filter sepia-[0.2] hover:sepia-0 transition-all"})})},s)),E.length>4&&(0,a.jsx)(n.E.div,{variants:O,className:"col-span-2 text-center py-4",children:(0,a.jsxs)("p",{className:"text-xs uppercase tracking-widest text-gray-500",children:["+ ",E.length-4," More Moments"]})})]}),(0,a.jsxs)(n.E.div,{variants:O,initial:"hidden",whileInView:"visible",className:"text-center py-12 opacity-40",children:[(0,a.jsx)("div",{className:"h-12 w-3/4 mx-auto bg-[url('https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/UPC-A-036000291452.svg/2560px-UPC-A-036000291452.svg.png')] bg-contain bg-no-repeat bg-center grayscale"}),(0,a.jsxs)("p",{className:"mt-2 text-[10px] uppercase tracking-[0.3em]",children:["Admit One  ",j||"2025"]})]}),(null==M?void 0:M.default_image_url)&&(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-8 text-center grayscale opacity-60 hover:grayscale-0 hover:opacity-100 transition-all",children:[(0,a.jsx)("img",{src:M.default_image_url,className:"w-32 h-32 mx-auto mb-2 rounded object-cover",alt:"Studio"}),(0,a.jsx)("p",{className:"text-[10px] uppercase",children:M.name})]})]})]})}):null}},8209:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var a=t(57437),l=t(2265),r=t(42421),i=t(33907),o=t(40933),n=t(49321),d=t(98094),c=t(88319),u=t(44763),m=t(71229),x=t(44512);t(91231);var h=t(47870),p=t(26378),g=t(48571),f=t(67159);function v(e){let{weddingData:s={},layoutConfig:t={},onEnter:v}=e,[j,b]=(0,l.useState)(!1);(0,l.useRef)(null);let{scrollYProgress:y}=(0,c.v)();(0,u.H)(y,[0,1],[0,200]);let N=(0,u.H)(y,[0,1],[1.1,1.3]);(0,l.useEffect)(()=>{b(!0)},[]);let{bride_name:w="",groom_name:_="",event_date:k="",event_time:S="",venue:C="",playback_url:Z="",recording_url:P=""}=s,{font:E="Pinyon Script",primaryColor:M="#fbbf24",secondaryColor:z="#f59e0b",welcomeMessage:B="Forever Starts Today",description:F="",couplePhoto:A=null,bridePhoto:T=null,groomPhoto:U=null,preciousMoments:O=[],studioDetails:D={},heroBackground:R=null,preWeddingVideo:q=null,borders:I={},borderMasks:L={},templateVideoWeddingId:V=null,hasTemplateVideo:G=!1}=t,Y={animate:{y:[0,-20,0],transition:{duration:6,repeat:1/0,ease:"easeInOut"}}};return j?(0,a.jsxs)("div",{className:"min-h-screen bg-black overflow-x-hidden",children:[(0,a.jsxs)("div",{className:"fixed inset-0 z-0",children:[(null==A?void 0:A.url)?(0,a.jsx)(m.E.div,{className:"w-full h-full bg-cover bg-center",style:{backgroundImage:"url(".concat(A.url,")"),scale:N}}):(0,a.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-gray-900 to-black"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-black/20 to-black/90"}),(0,a.jsx)("div",{className:"absolute inset-0 backdrop-blur-[2px]"})]}),(0,a.jsxs)("div",{className:"relative z-10 w-full",children:[(0,a.jsxs)("section",{className:"min-h-screen flex flex-col items-center justify-center px-4 text-center relative",children:[G&&V?(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-30",children:(0,a.jsx)("div",{className:"w-full max-w-4xl mx-auto aspect-video",children:(0,a.jsx)(h.Z,{weddingId:V,className:"w-full h-full"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.E.div,{className:"absolute top-1/4 left-1/4 w-64 h-64 rounded-full blur-[100px] opacity-30",style:{background:M},animate:{x:[0,50,0],y:[0,30,0]},transition:{duration:10,repeat:1/0}}),(0,a.jsxs)(m.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:1},className:"relative z-20",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl md:text-3xl tracking-[0.3em] uppercase text-white/80 mb-6 font-light",style:{textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:B}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(m.E.h1,{className:"text-6xl sm:text-7xl md:text-9xl text-white drop-shadow-2xl",style:{fontFamily:E,color:M},initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.8},children:w}),(0,a.jsx)(m.E.span,{className:"text-4xl text-white/90 my-2",style:{fontFamily:E},initial:{scale:0},animate:{scale:1},transition:{delay:.8},children:"&"}),(0,a.jsx)(m.E.h1,{className:"text-6xl sm:text-7xl md:text-9xl text-white drop-shadow-2xl",style:{fontFamily:E,color:M},initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.8},children:_})]}),j&&k&&(()=>{try{let e=(0,p.D)(k);if(!(0,g.J)(e))return null;return(0,a.jsx)(m.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-12 inline-block",children:(0,a.jsx)("div",{className:"px-8 py-3 rounded-full border border-white/30 bg-white/10 backdrop-blur-md shadow-lg",children:(0,a.jsx)("span",{className:"text-xl sm:text-2xl text-white font-light tracking-wide",children:(0,f.WU)(e,"MMMM do, yyyy")})})})}catch(e){return console.error("Invalid date:",k,e),null}})()]})]}),(0,a.jsx)(m.E.div,{className:"absolute bottom-10",animate:{y:[0,10,0],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:(0,a.jsx)(r.Z,{className:"w-8 h-8 text-white/50"})})]}),(T||U)&&(0,a.jsx)("section",{className:"py-20 px-4",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto grid md:grid-cols-2 gap-12 sm:gap-24",children:[(null==T?void 0:T.url)&&(0,a.jsx)(m.E.div,{variants:Y,animate:"animate",className:"relative",children:(0,a.jsxs)("div",{className:"aspect-[4/5] rounded-t-[10rem] rounded-b-[2rem] overflow-hidden border border-white/20 shadow-2xl relative group",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent z-10"}),(0,a.jsx)("img",{src:T.url,className:"w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110"}),(0,a.jsx)("h3",{className:"absolute bottom-8 left-0 right-0 text-center text-4xl text-white z-20",style:{fontFamily:E},children:w})]})}),(null==U?void 0:U.url)&&(0,a.jsx)(m.E.div,{variants:Y,animate:"animate",className:"relative md:mt-24",children:(0,a.jsxs)("div",{className:"aspect-[4/5] rounded-t-[10rem] rounded-b-[2rem] overflow-hidden border border-white/20 shadow-2xl relative group",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent z-10"}),(0,a.jsx)("img",{src:U.url,className:"w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110"}),(0,a.jsx)("h3",{className:"absolute bottom-8 left-0 right-0 text-center text-4xl text-white z-20",style:{fontFamily:E},children:_})]})})]})}),(0,a.jsx)("section",{className:"py-20 px-4",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl border border-white/10 p-8 sm:p-16 rounded-3xl shadow-2xl text-center relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-br from-white/10 via-transparent to-transparent rotate-45 pointer-events-none"}),(0,a.jsx)(i.Z,{className:"w-10 h-10 mx-auto mb-8 text-white/60"}),F&&(0,a.jsxs)("div",{className:"text-xl sm:text-3xl text-white leading-relaxed mb-12 font-light",children:['"',F,'"']}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-3 gap-8 border-t border-white/10 pt-12",children:[S&&(0,a.jsxs)("div",{className:"text-white",children:[(0,a.jsx)(o.Z,{className:"w-6 h-6 mx-auto mb-2 text-white/70"}),(0,a.jsx)("p",{className:"uppercase tracking-widest text-xs opacity-60 mb-1",children:"Time"}),(0,a.jsx)("p",{className:"text-lg",children:S})]}),C&&(0,a.jsxs)("div",{className:"text-white sm:col-span-2",children:[(0,a.jsx)(n.Z,{className:"w-6 h-6 mx-auto mb-2 text-white/70"}),(0,a.jsx)("p",{className:"uppercase tracking-widest text-xs opacity-60 mb-1",children:"Venue"}),(0,a.jsx)("p",{className:"text-lg",children:C})]})]})]})})}),(null==O?void 0:O.length)>0&&(0,a.jsxs)("section",{className:"py-20 overflow-hidden",children:[(0,a.jsx)(m.E.h2,{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1},className:"text-center text-5xl sm:text-6xl text-white mb-16",style:{fontFamily:E,color:M},children:"Memories"}),(0,a.jsx)("div",{className:"px-4",children:(0,a.jsx)(x.Z,{photos:O.map(e=>({...e,border_url:(null==I?void 0:I.preciousMoments)||null})),layout:"carousel",className:"max-w-7xl mx-auto"})})]}),(Z||P||v)&&(0,a.jsxs)("section",{className:"py-32 px-4 text-center",children:[(0,a.jsxs)(m.E.div,{whileHover:{scale:1.05},className:"inline-block relative group",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-full blur-xl opacity-50 group-hover:opacity-100 transition-opacity",style:{background:M}}),(0,a.jsxs)("button",{onClick:v,className:"relative px-12 py-6 rounded-full bg-white text-black text-xl font-bold tracking-wide shadow-2xl flex items-center gap-4",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 fill-black"}),v?"ENTER LIVE EVENT":"WATCH VIDEO"]})]}),Z&&!v&&(0,a.jsx)("div",{className:"mt-12 max-w-4xl mx-auto aspect-video rounded-2xl overflow-hidden shadow-2xl border border-white/20",children:(0,a.jsx)("video",{src:Z,controls:!0,className:"w-full h-full"})})]}),(0,a.jsxs)("footer",{className:"py-12 border-t border-white/10 text-center text-white/40",children:[(0,a.jsx)("p",{className:"text-sm uppercase tracking-widest",children:"With Love"}),(null==D?void 0:D.name)&&(0,a.jsxs)("p",{className:"mt-4 text-xs",children:["Photography by ",D.name]})]})]})]}):null}},59451:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(57437),l=t(2265),r=t(62483),i=t(82755),o=t(88319),n=t(44763),d=t(71229),c=t(91231),u=t(47870),m=t(67159),x=t(26378);function h(e){let{weddingData:s={},layoutConfig:t={},onEnter:h}=e,[p,g]=(0,l.useState)(!1),{scrollYProgress:f}=(0,o.v)(),v=(0,n.H)(f,[0,1],[0,-100]);(0,l.useEffect)(()=>{g(!0)},[]);let{bride_name:j="",groom_name:b="",event_date:y="",event_time:N="",venue:w="",playback_url:_="",recording_url:k=""}=s,{font:S="Space Grotesk",primaryColor:C="#000000",secondaryColor:Z="#4b5563",welcomeMessage:P="The Wedding",description:E="",couplePhoto:M=null,preciousMoments:z=[],studioDetails:B={},preWeddingVideo:F=null,borders:A={},borderMasks:T={},templateVideoWeddingId:U=null,hasTemplateVideo:O=!1}=t;return p?(0,a.jsxs)("div",{className:"min-h-screen bg-stone-50 overflow-x-hidden",style:{fontFamily:S,color:C},children:[(0,a.jsxs)("header",{className:"fixed top-0 left-0 w-full z-50 p-6 flex justify-between items-start mix-blend-difference text-white pointer-events-none",children:[(0,a.jsx)("div",{className:"text-xs font-bold uppercase tracking-widest",children:P}),(0,a.jsx)("div",{className:"text-xs font-bold uppercase tracking-widest text-right",children:y?(0,m.WU)((0,x.D)(y),"dd.MM.yy"):"2025"})]}),(0,a.jsx)("section",{className:"relative min-h-[120vh]",children:(0,a.jsx)("div",{className:"sticky top-0 h-screen flex flex-col justify-center items-center overflow-hidden",children:O&&U?(0,a.jsx)("div",{className:"relative z-30 w-[80vw] h-[70vh] md:w-[60vw] md:h-[80vh] flex items-center justify-center",children:(0,a.jsx)(u.Z,{weddingId:U,className:"w-full h-full"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-between p-12 z-0 opacity-10",children:[(0,a.jsx)("h1",{className:"text-[15vw] leading-none font-bold text-transparent stroke-black border-text",style:{WebkitTextStroke:"2px ".concat(C)},children:j.split(" ")[0]}),(0,a.jsx)("h1",{className:"text-[15vw] leading-none font-bold text-right text-transparent stroke-black border-text",style:{WebkitTextStroke:"2px ".concat(C)},children:b.split(" ")[0]})]}),(null==M?void 0:M.url)&&(0,a.jsx)(d.E.div,{className:"relative z-10 w-[80vw] h-[70vh] md:w-[40vw] md:h-[80vh] bg-gray-200 shadow-2xl",style:{y:v},children:(0,a.jsx)(c.Z,{src:M.url,maskUrl:null==A?void 0:A.couple,maskData:null==T?void 0:T.couple,className:"w-full h-full object-cover grayscale contrast-125",aspectRatio:"custom",style:{height:"100%"}})}),(0,a.jsx)("div",{className:"absolute z-20 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center mix-blend-difference text-white",children:(0,a.jsxs)("h2",{className:"text-4xl md:text-6xl font-bold mb-4",children:[j," ",(0,a.jsx)("span",{className:"text-2xl font-light italic",children:"&"})," ",b]})})]})})}),(0,a.jsxs)("section",{className:"max-w-7xl mx-auto px-6 py-24",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-12 gap-12 items-start mb-32",children:[(0,a.jsxs)("div",{className:"md:col-span-4 sticky top-24",children:[(0,a.jsx)("div",{className:"w-12 h-1 bg-black mb-8"}),(0,a.jsx)("p",{className:"text-sm uppercase tracking-widest font-bold mb-2",children:"Exhibition Note"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Curated by Fate"})]}),(0,a.jsx)("div",{className:"md:col-span-8",children:E&&(0,a.jsx)("div",{className:"text-3xl md:text-5xl font-light leading-tight indent-24",children:E})})]}),(null==z?void 0:z.length)>0&&(0,a.jsx)("div",{className:"space-y-32 mb-32",children:z.map((e,s)=>(0,a.jsx)("div",{className:"flex ".concat(s%2==0?"justify-start":"justify-end"),children:(0,a.jsxs)("div",{className:"relative w-full md:w-2/3 ".concat(s%2==0?"md:pr-24":"md:pl-24"),children:[(0,a.jsxs)("div",{className:"absolute -top-12 text-6xl font-bold opacity-10 font-serif",children:["0",s+1]}),(0,a.jsxs)("div",{className:"aspect-[4/3] bg-gray-200 relative group overflow-hidden",children:[(0,a.jsx)(c.Z,{src:e.url,maskUrl:null==A?void 0:A.preciousMoments,className:"w-full h-full object-cover transition-all duration-700 group-hover:scale-105 group-hover:grayscale-0 grayscale"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full bg-black text-white p-4 translate-y-full group-hover:translate-y-0 transition-transform duration-300",children:(0,a.jsxs)("p",{className:"text-xs uppercase tracking-widest",children:["Figure ",s+1]})})]})]})},s))}),(0,a.jsx)("div",{className:"border-t-2 border-black pt-12 mb-32",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-6xl font-bold mb-8",children:"Details"}),(0,a.jsx)(r.Z,{className:"w-12 h-12"})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"group border-b border-gray-300 pb-8 hover:border-black transition-colors cursor-default",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-widest text-gray-500 mb-2 group-hover:text-black",children:"When"}),(0,a.jsx)("p",{className:"text-3xl md:text-4xl",children:y?(0,m.WU)((0,x.D)(y),"MMMM do, yyyy"):"Date TBD"}),(0,a.jsx)("p",{className:"text-xl text-gray-600",children:N})]}),(0,a.jsxs)("div",{className:"group border-b border-gray-300 pb-8 hover:border-black transition-colors cursor-default",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-widest text-gray-500 mb-2 group-hover:text-black",children:"Where"}),(0,a.jsx)("p",{className:"text-3xl md:text-4xl",children:w||"Location TBD"})]}),(_||k||h)&&(0,a.jsxs)("div",{className:"group pt-8 cursor-pointer",onClick:h,children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-widest text-gray-500 group-hover:text-black",children:"Digital Access"}),(0,a.jsx)("div",{className:"bg-black text-white px-3 py-1 text-xs uppercase font-bold animate-pulse",children:"Live"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("p",{className:"text-3xl md:text-4xl underline decoration-2 underline-offset-4 group-hover:text-blue-600 transition-colors",children:"Enter Viewing Room"}),(0,a.jsx)(i.Z,{className:"w-8 h-8 group-hover:translate-x-4 transition-transform"})]})]})]})]})}),F&&(0,a.jsxs)("div",{className:"mb-32",children:[(0,a.jsx)("div",{className:"w-full aspect-video bg-black p-4 md:p-8",children:(0,a.jsx)("iframe",{src:F,className:"w-full h-full opacity-80 hover:opacity-100 transition-opacity",allowFullScreen:!0})}),(0,a.jsxs)("div",{className:"flex justify-between mt-4 font-mono text-xs uppercase",children:[(0,a.jsx)("span",{children:"Motion Picture"}),(0,a.jsx)("span",{children:"Duration: Variable"})]})]})]}),(0,a.jsx)("footer",{className:"bg-black text-white py-24 px-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-end gap-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-8xl font-bold leading-none mb-4",children:[j.charAt(0),"&",b.charAt(0)]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 max-w-xs",children:"A union celebrating art, love, and the future."})]}),(0,a.jsx)("div",{className:"text-right",children:(null==B?void 0:B.name)&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-500 mb-2",children:"Captured By"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:B.name})]})})]})})]}):null}},44906:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(57437),l=t(2265),r=t(55066),i=t(40933),o=t(82755),n=t(71229),d=t(91231),c=t(47870),u=t(67159),m=t(26378);function x(e){let{weddingData:s={},layoutConfig:t={},onEnter:x}=e,[h,p]=(0,l.useState)(!1),g=(0,l.useRef)(null);(0,l.useEffect)(()=>{p(!0)},[]);let{bride_name:f="",groom_name:v="",event_date:j="",event_time:b="",venue:y="",playback_url:N="",recording_url:w=""}=s,{font:_="CINZEL",primaryColor:k="#27272a",secondaryColor:S="#71717a",welcomeMessage:C="We're Getting Married",description:Z="",couplePhoto:P=null,preciousMoments:E=[],studioDetails:M={},preWeddingVideo:z=null,borders:B={},borderMasks:F={},templateVideoWeddingId:A=null,hasTemplateVideo:T=!1}=t,U={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:1,ease:"easeOut"}}};return h?(0,a.jsxs)("div",{ref:g,className:"min-h-screen w-full overflow-x-hidden selection:bg-stone-200",style:{backgroundColor:"#f5f5f4",fontFamily:_,color:k},children:[(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none opacity-40 z-0",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/rice-paper-2.png")'}}),(0,a.jsxs)("section",{className:"relative min-h-screen flex flex-col md:flex-row z-10",children:[(0,a.jsx)("div",{className:"w-full md:w-1/3 min-h-[50vh] md:h-screen flex flex-col items-center justify-center p-8 border-r border-stone-300 bg-[#f5f5f4]",children:(0,a.jsxs)(n.E.div,{initial:"hidden",animate:"visible",variants:U,className:"flex flex-col items-center gap-12",children:[(0,a.jsxs)("div",{className:"md:writing-vertical-rl text-center md:text-left space-y-4 md:space-y-0 md:space-x-8",children:[(0,a.jsx)("h1",{className:"text-5xl md:text-7xl lg:text-8xl tracking-widest font-light",style:{color:k},children:f}),(0,a.jsx)("div",{className:"w-12 h-px md:w-px md:h-12 bg-stone-400 mx-auto"}),(0,a.jsx)("h1",{className:"text-5xl md:text-7xl lg:text-8xl tracking-widest font-light",style:{color:k},children:v})]}),j&&(0,a.jsx)("div",{className:"text-sm tracking-[0.4em] uppercase text-stone-500 mt-8",children:(0,u.WU)((0,m.D)(j),"MMMM dd, yyyy")})]})}),(0,a.jsxs)("div",{className:"w-full md:w-2/3 h-[50vh] md:h-screen relative overflow-hidden",children:[T&&A?(0,a.jsx)(n.E.div,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},transition:{duration:2},className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(c.Z,{weddingId:A,className:"w-full h-full"})}):(null==P?void 0:P.url)?(0,a.jsxs)(n.E.div,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},transition:{duration:2},className:"w-full h-full",children:[(0,a.jsx)(d.Z,{src:P.url,alt:"Couple",maskUrl:null==B?void 0:B.couple,maskData:null==F?void 0:F.couple,aspectRatio:"custom",className:"w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-1000 ease-in-out",style:{height:"100%"}}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[80%] aspect-square border border-white/20 rounded-full opacity-50"})]}):(0,a.jsx)("div",{className:"w-full h-full bg-stone-200 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-32 h-32 border border-stone-400 rounded-full"})}),(0,a.jsx)("div",{className:"absolute bottom-8 right-8 animate-bounce",children:(0,a.jsx)(r.Z,{className:"w-6 h-6 text-white mix-blend-difference"})})]})]}),(0,a.jsx)("section",{className:"py-32 px-4 md:px-20 relative z-10",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,a.jsx)(n.E.div,{initial:{height:0},whileInView:{height:80},className:"w-px bg-stone-800 mx-auto mb-12"}),(0,a.jsxs)(n.E.h2,{initial:"hidden",whileInView:"visible",variants:U,className:"text-2xl md:text-3xl font-light leading-relaxed",children:['"',Z||C,'"']}),(0,a.jsxs)("div",{className:"mt-16 flex justify-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-stone-800"}),(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-stone-400"}),(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-stone-200"})]})]})}),(0,a.jsx)("section",{className:"py-20 px-4 md:px-12 z-10 relative bg-stone-100",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-20",children:[(0,a.jsxs)("div",{className:"space-y-12 flex flex-col justify-center",children:[(0,a.jsxs)(n.E.div,{initial:{x:-50,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-widest text-stone-500 mb-2",children:"The Ceremony"}),(0,a.jsx)("h3",{className:"text-4xl font-serif mb-4",children:y}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-stone-600",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:b})]}),(0,a.jsx)("div",{className:"w-20 h-px bg-stone-800 mt-8"})]}),(N||w||x)&&(0,a.jsx)(n.E.div,{initial:{x:-50,opacity:0},whileInView:{x:0,opacity:1},transition:{delay:.2,duration:.8},children:(0,a.jsxs)("button",{onClick:x,className:"group flex items-center gap-4 text-xl tracking-widest uppercase hover:text-stone-500 transition-colors",children:["Join Live ",(0,a.jsx)(o.Z,{className:"w-6 h-6 group-hover:translate-x-2 transition-transform"})]})})]}),(0,a.jsx)("div",{className:"relative h-[400px] md:h-[600px] bg-stone-200",children:z?(0,a.jsx)("iframe",{src:z,className:"w-full h-full grayscale hover:grayscale-0 transition-all duration-700",allowFullScreen:!0}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",children:(0,a.jsx)("div",{className:"w-[150%] h-[150%] bg-[url('https://www.transparenttextures.com/patterns/shattered-island.png')] opacity-20 rotate-12"})})})]})}),(null==E?void 0:E.length)>0&&(0,a.jsx)("section",{className:"py-32 px-4 z-10 relative",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("p",{className:"text-center text-xs uppercase tracking-widest mb-16",children:"Captured Moments"}),(0,a.jsx)("div",{className:"flex flex-col md:flex-row gap-8 justify-center items-center",children:E.slice(0,3).map((e,s)=>(0,a.jsxs)(n.E.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:.2*s},className:"relative w-full md:w-1/3 aspect-[3/4] ".concat(1===s?"md:-mt-12":""),children:[(0,a.jsx)(d.Z,{src:e.url,alt:"Moment",className:"w-full h-full object-cover shadow-xl",style:{filter:"brightness(0.9) contrast(1.1)"}}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("span",{className:"text-xs font-serif italic text-stone-500",children:["0",s+1]})})]},s))})]})}),(0,a.jsxs)("footer",{className:"py-20 text-center z-10 relative border-t border-stone-200",children:[(0,a.jsx)("div",{className:"w-px h-16 bg-stone-300 mx-auto mb-8"}),(0,a.jsxs)("p",{className:"text-3xl font-light",style:{fontFamily:_},children:[f.charAt(0)," & ",v.charAt(0)]}),(null==M?void 0:M.name)&&(0,a.jsxs)("p",{className:"mt-8 text-[10px] uppercase tracking-widest text-stone-400",children:["Photography by ",M.name]})]})]}):null}},92404:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var a=t(57437),l=t(2265),r=t(77700);let i=l.forwardRef((e,s)=>{let{className:t,type:l,...i}=e;return(0,a.jsx)("input",{type:l,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},10464:function(e,s,t){"use strict";t.d(s,{_:function(){return d}});var a=t(57437),l=t(2265),r=t(38837),i=t(13027),o=t(77700);let n=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.f,{ref:s,className:(0,o.cn)(n(),t),...l})});d.displayName=r.f.displayName},32816:function(e,s,t){"use strict";t.d(s,{E:function(){return o}});var a=t(57437),l=t(2265),r=t(13993),i=t(77700);let o=l.forwardRef((e,s)=>{let{className:t,value:l,...o}=e;return(0,a.jsx)(r.fC,{ref:s,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...o,children:(0,a.jsx)(r.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});o.displayName=r.fC.displayName},25797:function(e,s,t){"use strict";t.d(s,{B:function(){return n},x:function(){return o}});var a=t(57437),l=t(2265),r=t(80023),i=t(77700);let o=l.forwardRef((e,s)=>{let{className:t,children:l,...o}=e;return(0,a.jsxs)(r.fC,{ref:s,className:(0,i.cn)("relative overflow-hidden",t),...o,children:[(0,a.jsx)(r.l_,{className:"h-full w-full rounded-[inherit]",children:l}),(0,a.jsx)(n,{}),(0,a.jsx)(r.Ns,{})]})});o.displayName=r.fC.displayName;let n=l.forwardRef((e,s)=>{let{className:t,orientation:l="vertical",...o}=e;return(0,a.jsx)(r.gb,{ref:s,orientation:l,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...o,children:(0,a.jsx)(r.q4,{className:"relative flex-1 rounded-full bg-border"})})});n.displayName=r.gb.displayName},46260:function(e,s,t){"use strict";t.d(s,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return g},i4:function(){return m},ki:function(){return u}});var a=t(57437),l=t(2265),r=t(89363),i=t(42421),o=t(14392),n=t(22468),d=t(77700);let c=r.fC;r.ZA;let u=r.B4,m=l.forwardRef((e,s)=>{let{className:t,children:l,...o}=e;return(0,a.jsxs)(r.xz,{ref:s,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap bg-transparent px-0 py-0 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-0 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 [&>span]:border-none [&>span]:outline-none [&>span]:focus:border-none [&>span]:focus:outline-none [&>span]:focus:ring-0 [&>span]:focus:ring-offset-0 [&>span]:!border-0 [&>span]:!outline-none [&>span]:!ring-0",t),...o,children:[l,(0,a.jsx)(r.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50 ml-1"})})]})});m.displayName=r.xz.displayName;let x=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.u_,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.$G,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=r.$G.displayName;let p=l.forwardRef((e,s)=>{let{className:t,children:l,position:i="popper",...o}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsxs)(r.VY,{ref:s,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...o,children:[(0,a.jsx)(x,{}),(0,a.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(h,{})]})})});p.displayName=r.VY.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.__,{ref:s,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",t),...l})}).displayName=r.__.displayName;let g=l.forwardRef((e,s)=>{let{className:t,children:l,...i}=e;return(0,a.jsxs)(r.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none border-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>span]:border-none [&>span]:outline-none [&>span]:!border-0 [&>span]:!outline-none",t),...i,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(r.eT,{children:l})]})});g.displayName=r.ck.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=r.Z0.displayName},85398:function(e,s,t){"use strict";t.d(s,{i:function(){return o}});var a=t(57437),l=t(2265),r=t(67553),i=t(77700);let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsxs)(r.fC,{ref:s,className:(0,i.cn)("relative flex w-full touch-none select-none items-center",t),...l,children:[(0,a.jsx)(r.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,a.jsx)(r.e6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(r.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});o.displayName=r.fC.displayName},80492:function(e,s,t){"use strict";t.d(s,{r:function(){return o}});var a=t(57437),l=t(2265),r=t(9646),i=t(77700);let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.fC,{className:(0,i.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...l,ref:s,children:(0,a.jsx)(r.bU,{className:(0,i.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});o.displayName=r.fC.displayName},7990:function(e,s,t){"use strict";t.d(s,{g:function(){return i}});var a=t(57437),l=t(2265),r=t(77700);let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});i.displayName="Textarea"},37854:function(e,s,t){"use strict";t.d(s,{BorderProvider:function(){return i},P:function(){return o}});var a=t(57437),l=t(2265);let r=(0,l.createContext)();function i(e){let{children:s}=e,[t,i]=(0,l.useState)({groom_border_id:null,bride_border_id:null,couple_border_id:null,cover_border_id:null,precious_moment_border_id:null});return(0,a.jsx)(r.Provider,{value:{currentBorders:t,updateBorder:(e,s)=>{i(t=>({...t,[e]:s}))},updateAllBorders:e=>{i(e)}},children:s})}let o=()=>(0,l.useContext)(r)},92898:function(e,s,t){"use strict";t.d(s,{FontProvider:function(){return i},j:function(){return o}});var a=t(57437),l=t(2265);let r=(0,l.createContext)();function i(e){let{children:s}=e,[t,i]=(0,l.useState)("Great Vibes"),[o]=(0,l.useState)({Inter:"var(--font-inter), sans-serif","Great Vibes":"var(--font-greatvibes), cursive","Playfair Display":"var(--font-playfair), serif",Cinzel:"var(--font-cinzel), serif",Montserrat:"var(--font-montserrat), sans-serif",Lato:"var(--font-lato), sans-serif",Caveat:"var(--font-caveat), cursive","Bebas Neue":"var(--font-bebas), cursive","Rozha One":"var(--font-rozha), serif","Pinyon Script":"var(--font-pinyon), cursive"});return(0,a.jsx)(r.Provider,{value:{currentFont:t,fontMappings:o,updateFont:e=>{i(e)}},children:s})}let o=()=>(0,l.useContext)(r)},71561:function(e,s,t){"use strict";function a(e){if(!e||"string"!=typeof e)return null;let s=(e=e.trim()).match(/(?:youtube\.com\/watch\?v=|youtube\.com\/watch\?.*&v=)([a-zA-Z0-9_-]{11})/);if(s)return s[1];let t=e.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/);if(t)return t[1];let a=e.match(/youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/);if(a)return a[1];let l=e.match(/youtube\.com\/v\/([a-zA-Z0-9_-]{11})/);return l?l[1]:null}function l(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a(e);if(!t)return null;let{autoplay:l=0,mute:r=0,controls:i=1,modestbranding:o=1,rel:n=0}=s,d=new URLSearchParams({autoplay:l.toString(),mute:r.toString(),controls:i.toString(),modestbranding:o.toString(),rel:n.toString()});return"https://www.youtube.com/embed/".concat(t,"?").concat(d.toString())}function r(e){return null!==a(e)}t.d(s,{Tc:function(){return l},yk:function(){return r}})}},function(e){e.O(0,[9767,4868,7776,7515,1229,2889,2151,7999,7662,5787,40,8916,7553,8861,5942,1924,9204,7601,8358,5884,6046,9178,2645,5907,508,2971,7023,1744],function(){return e(e.s=13170)}),_N_E=e.O()}]);