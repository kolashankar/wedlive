(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[673],{30355:function(e,t,s){Promise.resolve().then(s.bind(s,92669))},92669:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(57437),r=s(2265),n=s(56360),i=s(10273),l=s(79004),c=s(17953),d=s(95640),o=s(68954),m=s(40933),h=s(3274),x=s(95137),u=s(71510),g=s(24241),p=s(49321),j=s(11240),f=s(37164),y=s(87138),b=s(16463),v=s(27776),w=s(6657),_=s(67159),N=s(2645),k=s(74414);s(57818);let Z=()=>(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("p",{className:"text-gray-700 text-lg mb-4",children:"This wedding uses the legacy theme system."}),(0,a.jsx)("p",{className:"text-gray-500",children:"Please update to the new Layout system."})]})}),S={floral_garden:Z,royal_palace:Z,modern_minimalist:Z,cinema_scope:Z,premium_wedding_card:Z,romantic_pastel:Z,traditional_south_indian:Z,default_modern:Z};function M(e){var t,s;let{wedding:r,onEnter:n}=e;if(!r||"object"!=typeof r)return console.error("ThemeRenderer: Invalid wedding prop",r),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-50 via-white to-purple-50",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-red-500",children:"Invalid wedding data"})})});r.theme_settings&&"object"==typeof r.theme_settings||(console.error("ThemeRenderer: Missing or invalid theme_settings",r.theme_settings),r.theme_settings={theme_id:"layout_1",custom_font:"Playfair Display",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",cover_photos:[],studio_details:{studio_id:"",name:"",logo_url:"",website:"",email:"",phone:"",address:"",contact:""},custom_messages:{welcome_text:"Welcome to our big day",description:""}});let i=(null===(t=r.theme_settings)||void 0===t?void 0:t.theme_id)||"layout_1",l=S[i]||Z;return console.log("ThemeRenderer: Rendering theme",i,"with wedding:",r),(0,a.jsx)(l,{weddingData:r,themeSettings:r.theme_settings||{},themeAssets:(null===(s=r.theme_settings)||void 0===s?void 0:s.theme_assets)||{},onEnter:n})}var E=s(19178),z=s(67783);function L(e){let{params:t}=e,s=(0,b.useRouter)(),Z=t.id,[S,z]=(0,r.useState)(null),[L,C]=(0,r.useState)(!0),[W,I]=(0,r.useState)(0),[P,R]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(Z){O();let e=setInterval(()=>{(null==S?void 0:S.status)==="live"&&B()},1e4);return()=>clearInterval(e)}},[Z]);let O=async()=>{try{let e=(await w.default.get("/api/weddings/".concat(Z))).data;if(!e||"object"!=typeof e){console.error("Invalid wedding data received"),v.toast.error("Invalid wedding data"),C(!1);return}e.theme_settings&&"object"==typeof e.theme_settings?(e.theme_settings.studio_details&&"object"==typeof e.theme_settings.studio_details||(e.theme_settings.studio_details={studio_id:"",name:"",logo_url:"",contact:""}),e.theme_settings.custom_messages&&"object"==typeof e.theme_settings.custom_messages||(e.theme_settings.custom_messages={welcome_text:"Welcome to our big day",description:""}),Array.isArray(e.theme_settings.cover_photos)||(e.theme_settings.cover_photos=[])):e.theme_settings={theme_id:"floral_garden",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",cover_photos:[],studio_details:{studio_id:"",name:"",logo_url:"",contact:""},custom_messages:{welcome_text:"Welcome to our big day",description:""}},z(e),I(e.viewers_count||0);let t=e.creator_subscription_plan||"free",s=e.theme_settings&&"object"==typeof e.theme_settings&&Object.keys(e.theme_settings).length>0;R(("monthly"===t||"yearly"===t)&&s)}catch(e){v.toast.error("Failed to load wedding details"),console.error("Error loading wedding:",e)}finally{C(!1)}},B=async()=>{try{let e=await w.default.get("/api/weddings/".concat(Z));I(e.data.viewers_count||0)}catch(e){console.error("Failed to update viewer count:",e)}},A=()=>{let e=window.location.href;navigator.share?navigator.share({title:S.title,text:"Watch ".concat(S.bride_name," & ").concat(S.groom_name,"'s wedding live!"),url:e}).catch(()=>{T(e)}):T(e)},T=e=>{navigator.clipboard.writeText(e),v.toast.success("Link copied to clipboard!")};return L?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 animate-spin text-rose-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Loading wedding..."})]})}):S?null===P?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 animate-spin text-rose-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Loading wedding..."})]})}):P&&S&&S.theme_settings&&"object"==typeof S.theme_settings?(0,a.jsx)(M,{wedding:S,onEnter:()=>{R(!1)}}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50",children:[(0,a.jsx)("nav",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200 sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(n.z,{variant:"ghost",size:"sm",onClick:()=>s.back(),"data-testid":"back-button",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsxs)(y.default,{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-rose-500 to-purple-600 p-2 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,a.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-rose-600 to-purple-600 bg-clip-text text-transparent",children:"WedLive"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:A,"data-testid":"share-button",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Share"]})})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsx)(i.Zb,{className:"overflow-hidden",children:(0,a.jsx)("div",{className:"relative bg-black",style:{paddingTop:"56.25%"},children:"live"===S.status&&S.playback_url?(0,a.jsx)("div",{className:"absolute inset-0",children:(0,a.jsx)(k.Z,{playbackUrl:S.playback_url})}):"recorded"===S.status&&S.recording_url?(0,a.jsx)("div",{className:"absolute inset-0",children:(0,a.jsx)(k.Z,{playbackUrl:S.recording_url})}):(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-white p-8",children:[(0,a.jsx)(o.Z,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-lg font-semibold mb-2",children:"scheduled"===S.status?"Stream Not Started Yet":"Stream Ended"}),(0,a.jsx)("p",{className:"text-sm opacity-75",children:"scheduled"===S.status?"Scheduled for ".concat((0,_.WU)(new Date(S.scheduled_date),"PPP p")):"This wedding stream has ended"})]})})})}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ll,{className:"text-2xl",children:S.title}),(0,a.jsxs)(i.SZ,{className:"text-base mt-2",children:[S.bride_name," & ",S.groom_name]})]}),(e=>{switch(e){case"live":return(0,a.jsxs)(l.C,{className:"bg-red-500 text-white animate-pulse text-lg px-4 py-1","data-testid":"status-live",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"LIVE"]});case"scheduled":return(0,a.jsxs)(l.C,{variant:"secondary",className:"text-lg px-4 py-1","data-testid":"status-scheduled",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Upcoming"]});case"ended":case"recorded":return(0,a.jsx)(l.C,{variant:"outline",className:"text-lg px-4 py-1","data-testid":"status-recorded",children:"Recording Available"});default:return null}})(S.status)]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[S.description&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-gray-700",children:S.description}),(0,a.jsx)(c.Z,{})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 text-rose-500"}),(0,a.jsx)("span",{children:(0,_.WU)(new Date(S.scheduled_date),"EEEE, MMMM d, yyyy")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-rose-500"}),(0,a.jsx)("span",{children:(0,_.WU)(new Date(S.scheduled_date),"h:mm a")})]}),S.location&&(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-rose-500"}),(0,a.jsx)("span",{children:S.location})]}),"live"===S.status&&(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5 text-rose-500"}),(0,a.jsxs)("span",{children:[W," ",1===W?"viewer":"viewers"," watching"]})]})]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{children:"Photo & Video Gallery"}),(0,a.jsx)(i.SZ,{children:"Memories from the celebration"})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(N.Z,{weddingId:Z,publicView:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[S.creator_name&&(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-lg",children:"Hosted By"})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.qE,{children:(0,a.jsx)(d.Q5,{className:"bg-gradient-to-br from-rose-500 to-purple-600 text-white",children:S.creator_name.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:S.creator_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Wedding Host"})]})]})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-lg",children:"Actions"})}),(0,a.jsxs)(i.aY,{className:"space-y-3",children:[(0,a.jsxs)(n.z,{variant:"outline",className:"w-full justify-start",onClick:A,children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Share Wedding"]}),S.recording_url&&(0,a.jsx)(n.z,{variant:"outline",className:"w-full justify-start",asChild:!0,children:(0,a.jsxs)("a",{href:S.recording_url,download:!0,children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Download Recording"]})})]})]}),S.is_locked&&(0,a.jsxs)(i.Zb,{className:"border-rose-200 bg-rose-50",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-lg text-rose-900",children:"Premium Content"})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)("p",{className:"text-sm text-rose-800 mb-4",children:"This wedding content is currently locked. The host needs to upgrade to Premium to unlock streaming."})})]}),(0,a.jsx)(E.Z,{weddingId:Z})]})]})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,a.jsxs)(i.Zb,{className:"max-w-md text-center",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{children:"Wedding Not Found"}),(0,a.jsx)(i.SZ,{children:"This wedding event doesn't exist or has been removed."})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(y.default,{href:"/weddings",children:(0,a.jsx)(n.z,{children:"Browse All Weddings"})})})]})})}function C(e){let{params:t}=e;return(0,a.jsx)(z.w,{weddingId:t.id,children:(0,a.jsx)(L,{params:t})})}},74414:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(57437),r=s(2265),n=s(57818),i=s(76780),l=s(3274);let c=(0,n.default)(()=>s.e(8492).then(s.t.bind(s,88492,23)),{loadableGenerated:{webpack:()=>[88492]},ssr:!1});function d(e){let{playbackUrl:t,autoPlay:s=!0,controls:n=!0,muted:d=!1,themeId:o=null,streamBorderUrl:m=null,streamBorderMask:h=null}=e,[x,u]=(0,r.useState)(!0),[g,p]=(0,r.useState)(null),[j,f]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1);console.log("[StreamVideoPlayer] Border Debug:",{streamBorderUrl:m,hasBorderUrl:!!m,themeId:o}),(0,r.useEffect)(()=>{if(!t){p("No playback URL provided"),u(!1);return}u(!0),p(null),f(!1),b(!1)},[t]);let v=()=>{f(!0),u(!1),p(null),b(!1)},w=e=>{console.error("Stream playback error:",e),u(!1),b(!0),p("Stream is currently offline or not available")},_=()=>{},N=()=>{u(!1)};if(!t)return(0,a.jsx)("div",{className:"w-full h-full bg-black flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)(i.Z,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),(0,a.jsx)("p",{className:"text-lg",children:"No stream URL available"})]})});let k=!!m,Z={position:"relative",width:"100%",height:"100%",..."modern-minimalist"===o&&{backgroundImage:"url(/assets/images/bg2.png), url(/assets/images/bg2-2.png)",backgroundSize:"cover, cover",backgroundPosition:"center, center",backgroundRepeat:"no-repeat, no-repeat",backgroundAttachment:"scroll, fixed",opacity:1}},S=k?{position:"absolute",inset:0,backgroundImage:"url(".concat(m,")"),backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",pointerEvents:"none",zIndex:10}:null;return console.log("[StreamVideoPlayer] Styles applied:",{hasBorder:k,containerStyle:!!Z,borderOverlayStyle:!!S}),(0,a.jsxs)("div",{className:"w-full h-full relative ".concat("modern-minimalist"===o?"":"bg-black"),style:Z,children:[x&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:(0,a.jsx)(l.Z,{className:"w-12 h-12 animate-spin text-white"})}),y&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-20 bg-black",children:(0,a.jsxs)("div",{className:"text-center text-white p-8",children:[(0,a.jsx)(i.Z,{className:"w-16 h-16 mx-auto mb-4 text-yellow-500"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Stream Offline"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"The stream is currently offline. Waiting for broadcaster to start..."}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{children:"Checking for stream..."})]})]})}),"modern-minimalist"===o?(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"w-full h-full rounded-lg overflow-hidden",style:{backgroundImage:"url(/assets/images/studiobg.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-8",children:(0,a.jsx)(c,{url:t,playing:s,controls:n,muted:d,width:"100%",height:"100%",onReady:v,onError:w,onBuffer:_,onBufferEnd:N,config:{file:{forceHLS:!0,hlsOptions:{enableWorker:!0,lowLatencyMode:!0,backBufferLength:90}}},style:{backgroundColor:"#000"}})})})}):(0,a.jsx)(c,{url:t,playing:s,controls:n,muted:d,width:"100%",height:"100%",onReady:v,onError:w,onBuffer:_,onBufferEnd:N,config:{file:{forceHLS:!0,hlsOptions:{enableWorker:!0,lowLatencyMode:!0,backBufferLength:90}}},style:{backgroundColor:"#000"}}),S&&(0,a.jsx)("div",{style:S,className:"border-overlay","aria-hidden":"true"})]})}},24241:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},40933:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},23787:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},75733:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},49321:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},71510:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},11240:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9229:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]])}},function(e){e.O(0,[9767,4868,7776,7515,2889,7999,9879,6046,9178,2645,2971,7023,1744],function(){return e(e.s=30355)}),_N_E=e.O()}]);