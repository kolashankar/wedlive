(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[673],{30355:function(e,t,s){Promise.resolve().then(s.bind(s,92669))},92669:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var n=s(57437),r=s(2265),a=s(56360),i=s(10273),l=s(79004),c=s(17953),d=s(95640),o=s(68954),u=s(40933),m=s(3274),h=s(95137),x=s(71510),f=s(24241),g=s(49321),p=s(11240),j=s(37164),y=s(87138),_=s(16463),v=s(27776),b=s(6657),w=s(67159),N=s(2645),k=s(74414);s(57818);let Z=()=>(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",children:(0,n.jsxs)("div",{className:"text-center p-8",children:[(0,n.jsx)("p",{className:"text-gray-700 text-lg mb-4",children:"This wedding uses the legacy theme system."}),(0,n.jsx)("p",{className:"text-gray-500",children:"Please update to the new Layout system."})]})}),M={floral_garden:Z,royal_palace:Z,modern_minimalist:Z,cinema_scope:Z,premium_wedding_card:Z,romantic_pastel:Z,traditional_south_indian:Z,default_modern:Z};function P(e){var t,s;let{wedding:r,onEnter:a}=e;if(!r||"object"!=typeof r)return console.error("ThemeRenderer: Invalid wedding prop",r),(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-50 via-white to-purple-50",children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("p",{className:"text-red-500",children:"Invalid wedding data"})})});r.theme_settings&&"object"==typeof r.theme_settings||(console.error("ThemeRenderer: Missing or invalid theme_settings",r.theme_settings),r.theme_settings={theme_id:"layout_1",custom_font:"Playfair Display",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",cover_photos:[],studio_details:{studio_id:"",name:"",logo_url:"",website:"",email:"",phone:"",address:"",contact:""},custom_messages:{welcome_text:"Welcome to our big day",description:""}});let i=(null===(t=r.theme_settings)||void 0===t?void 0:t.theme_id)||"layout_1",l=M[i]||Z;return console.log("ThemeRenderer: Rendering theme",i,"with wedding:",r),(0,n.jsx)(l,{weddingData:r,themeSettings:r.theme_settings||{},themeAssets:(null===(s=r.theme_settings)||void 0===s?void 0:s.theme_assets)||{},onEnter:a})}var C=s(19178),O=s(67783);function S(e){let{params:t}=e,s=(0,_.useRouter)(),Z=t.id,[M,O]=(0,r.useState)(null),[S,E]=(0,r.useState)(!0),[z,W]=(0,r.useState)(0),[I,L]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(Z){T();let e=setInterval(()=>{(null==M?void 0:M.status)==="live"&&R()},1e4);return()=>clearInterval(e)}},[Z]);let T=async()=>{try{let e=(await b.default.get("/api/weddings/".concat(Z))).data;if(!e||"object"!=typeof e){console.error("Invalid wedding data received"),v.toast.error("Invalid wedding data"),E(!1);return}e.theme_settings&&"object"==typeof e.theme_settings?(e.theme_settings.studio_details&&"object"==typeof e.theme_settings.studio_details||(e.theme_settings.studio_details={studio_id:"",name:"",logo_url:"",contact:""}),e.theme_settings.custom_messages&&"object"==typeof e.theme_settings.custom_messages||(e.theme_settings.custom_messages={welcome_text:"Welcome to our big day",description:""}),Array.isArray(e.theme_settings.cover_photos)||(e.theme_settings.cover_photos=[])):e.theme_settings={theme_id:"floral_garden",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",cover_photos:[],studio_details:{studio_id:"",name:"",logo_url:"",contact:""},custom_messages:{welcome_text:"Welcome to our big day",description:""}},O(e),W(e.viewers_count||0);let t=e.creator_subscription_plan||"free",s=e.theme_settings&&"object"==typeof e.theme_settings&&Object.keys(e.theme_settings).length>0;L(("monthly"===t||"yearly"===t)&&s)}catch(e){v.toast.error("Failed to load wedding details"),console.error("Error loading wedding:",e)}finally{E(!1)}},R=async()=>{try{let e=await b.default.get("/api/weddings/".concat(Z));W(e.data.viewers_count||0)}catch(e){console.error("Failed to update viewer count:",e)}},q=()=>{let e=window.location.href;navigator.share?navigator.share({title:M.title,text:"Watch ".concat(M.bride_name," & ").concat(M.groom_name,"'s wedding live!"),url:e}).catch(()=>{A(e)}):A(e)},A=e=>{navigator.clipboard.writeText(e),v.toast.success("Link copied to clipboard!")};return S?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(m.Z,{className:"w-12 h-12 animate-spin text-rose-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-lg text-gray-600",children:"Loading wedding..."})]})}):M?null===I?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(m.Z,{className:"w-12 h-12 animate-spin text-rose-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-lg text-gray-600",children:"Loading wedding..."})]})}):I&&M&&M.theme_settings&&"object"==typeof M.theme_settings?(0,n.jsx)(P,{wedding:M,onEnter:()=>{L(!1)}}):(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50",children:[(0,n.jsx)("nav",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200 sticky top-0 z-50",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)(a.z,{variant:"ghost",size:"sm",onClick:()=>s.back(),"data-testid":"back-button",children:[(0,n.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,n.jsxs)(y.default,{href:"/",className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"bg-gradient-to-r from-rose-500 to-purple-600 p-2 rounded-lg",children:(0,n.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,n.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-rose-600 to-purple-600 bg-clip-text text-transparent",children:"WedLive"})]})]}),(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsxs)(a.z,{variant:"outline",size:"sm",onClick:q,"data-testid":"share-button",children:[(0,n.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Share"]})})]})})}),(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,n.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,n.jsx)(i.Zb,{className:"overflow-hidden",children:(0,n.jsx)("div",{className:"relative bg-black",style:{paddingTop:"56.25%"},children:"live"===M.status&&M.playback_url?(0,n.jsx)("div",{className:"absolute inset-0",children:(0,n.jsx)(k.Z,{playbackUrl:M.playback_url})}):"recorded"===M.status&&M.recording_url?(0,n.jsx)("div",{className:"absolute inset-0",children:(0,n.jsx)(k.Z,{playbackUrl:M.recording_url})}):(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center text-white p-8",children:[(0,n.jsx)(o.Z,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,n.jsx)("p",{className:"text-lg font-semibold mb-2",children:"scheduled"===M.status?"Stream Not Started Yet":"Stream Ended"}),(0,n.jsx)("p",{className:"text-sm opacity-75",children:"scheduled"===M.status?"Scheduled for ".concat((0,w.WU)(new Date(M.scheduled_date),"PPP p")):"This wedding stream has ended"})]})})})}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(i.ll,{className:"text-2xl",children:M.title}),(0,n.jsxs)(i.SZ,{className:"text-base mt-2",children:[M.bride_name," & ",M.groom_name]})]}),(e=>{switch(e){case"live":return(0,n.jsxs)(l.C,{className:"bg-red-500 text-white animate-pulse text-lg px-4 py-1","data-testid":"status-live",children:[(0,n.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"LIVE"]});case"scheduled":return(0,n.jsxs)(l.C,{variant:"secondary",className:"text-lg px-4 py-1","data-testid":"status-scheduled",children:[(0,n.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Upcoming"]});case"ended":case"recorded":return(0,n.jsx)(l.C,{variant:"outline",className:"text-lg px-4 py-1","data-testid":"status-recorded",children:"Recording Available"});default:return null}})(M.status)]})}),(0,n.jsxs)(i.aY,{className:"space-y-4",children:[M.description&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-gray-700",children:M.description}),(0,n.jsx)(c.Z,{})]}),(0,n.jsxs)("div",{className:"grid gap-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,n.jsx)(f.Z,{className:"w-5 h-5 text-rose-500"}),(0,n.jsx)("span",{children:(0,w.WU)(new Date(M.scheduled_date),"EEEE, MMMM d, yyyy")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,n.jsx)(u.Z,{className:"w-5 h-5 text-rose-500"}),(0,n.jsx)("span",{children:(0,w.WU)(new Date(M.scheduled_date),"h:mm a")})]}),M.location&&(0,n.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,n.jsx)(g.Z,{className:"w-5 h-5 text-rose-500"}),(0,n.jsx)("span",{children:M.location})]}),"live"===M.status&&(0,n.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,n.jsx)(p.Z,{className:"w-5 h-5 text-rose-500"}),(0,n.jsxs)("span",{children:[z," ",1===z?"viewer":"viewers"," watching"]})]})]})]})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:"Photo & Video Gallery"}),(0,n.jsx)(i.SZ,{children:"Memories from the celebration"})]}),(0,n.jsx)(i.aY,{children:(0,n.jsx)(N.Z,{weddingId:Z,publicView:!0})})]})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[M.creator_name&&(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{className:"text-lg",children:"Hosted By"})}),(0,n.jsx)(i.aY,{children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(d.qE,{children:(0,n.jsx)(d.Q5,{className:"bg-gradient-to-br from-rose-500 to-purple-600 text-white",children:M.creator_name.charAt(0).toUpperCase()})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold",children:M.creator_name}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Wedding Host"})]})]})})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{className:"text-lg",children:"Actions"})}),(0,n.jsxs)(i.aY,{className:"space-y-3",children:[(0,n.jsxs)(a.z,{variant:"outline",className:"w-full justify-start",onClick:q,children:[(0,n.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Share Wedding"]}),M.recording_url&&(0,n.jsx)(a.z,{variant:"outline",className:"w-full justify-start",asChild:!0,children:(0,n.jsxs)("a",{href:M.recording_url,download:!0,children:[(0,n.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Download Recording"]})})]})]}),M.is_locked&&(0,n.jsxs)(i.Zb,{className:"border-rose-200 bg-rose-50",children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{className:"text-lg text-rose-900",children:"Premium Content"})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("p",{className:"text-sm text-rose-800 mb-4",children:"This wedding content is currently locked. The host needs to upgrade to Premium to unlock streaming."})})]}),(0,n.jsx)(C.Z,{weddingId:Z})]})]})})]}):(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,n.jsxs)(i.Zb,{className:"max-w-md text-center",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:"Wedding Not Found"}),(0,n.jsx)(i.SZ,{children:"This wedding event doesn't exist or has been removed."})]}),(0,n.jsx)(i.aY,{children:(0,n.jsx)(y.default,{href:"/weddings",children:(0,n.jsx)(a.z,{children:"Browse All Weddings"})})})]})})}function E(e){let{params:t}=e;return(0,n.jsx)(O.w,{weddingId:t.id,children:(0,n.jsx)(S,{params:t})})}},74414:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(57437);function r(e){let{playbackUrl:t,autoPlay:s=!1,controls:r=!0,muted:a=!1,className:i=""}=e;return(0,n.jsx)("div",{className:"w-full ".concat(i),children:(0,n.jsx)("video",{src:t,autoPlay:s,controls:r,muted:a,playsInline:!0,className:"w-full h-full object-contain bg-black"})})}s(2265)},95137:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(78030).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},24241:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(78030).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},40933:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(78030).Z)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},23787:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(78030).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},75733:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(78030).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},49321:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(78030).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},71510:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(78030).Z)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},11240:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(78030).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9229:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(78030).Z)("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]])},57818:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var n=s(50551),r=s.n(n)},50551:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let n=s(99920);s(57437),s(2265);let r=n._(s(40148));function a(e,t){var s;let n={loading:e=>{let{error:t,isLoading:s,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let a={...n,...t};return(0,r.default)({...a,modules:null==(s=a.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10912:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let n=s(55592);function r(e){let{reason:t,children:s}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return s}},40148:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let n=s(57437),r=s(2265),a=s(10912),i=s(61481);function l(e){return{default:e&&"default"in e?e.default:e}}let c={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},d=function(e){let t={...c,...e},s=(0,r.lazy)(()=>t.loader().then(l)),d=t.loading;function o(e){let l=d?(0,n.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,c=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(i.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(s,{...e})]}):(0,n.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(s,{...e})});return(0,n.jsx)(r.Suspense,{fallback:l,children:c})}return o.displayName="LoadableComponent",o}},61481:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return a}});let n=s(57437),r=s(58512);function a(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let s=(0,r.getExpectedRequestStore)("next/dynamic css"),a=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));a.push(...t)}}return 0===a.length?null:(0,n.jsx)(n.Fragment,{children:a.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[9767,4868,7776,7515,2889,7999,8916,6046,9178,2645,2971,7023,1744],function(){return e(e.s=30355)}),_N_E=e.O()}]);