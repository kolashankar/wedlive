(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{3665:function(e,s,t){Promise.resolve().then(t.bind(t,73958))},73958:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return $}});var a=t(57437),r=t(2265),l=t(15730),n=t(56360),i=t(10273),d=t(68639),o=t(92404),c=t(10464),m=t(7990),u=t(79004),x=t(11980);t(65236);var f=t(3274),g=t(64042),h=t(68954),p=t(957),j=t(92940),N=t(92513),b=t(24241),v=t(24258),w=t(75733),y=t(87138),_=t(16463),Z=t(27776),k=t(6657),U=t(90223),C=t(38472),E=t(36127),D=t(22468),R=t(74697),S=t(20357);let B=S.env.NEXT_PUBLIC_API_URL||S.env.NEXT_PUBLIC_BACKEND_URL;function P(e){var s;let{token:t}=e,[l,d]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{t&&m()},[t]);let m=async()=>{try{let e=await C.Z.get("".concat(B,"/api/plan/plan/info"),{headers:{Authorization:"Bearer ".concat(t)}});d(e.data)}catch(e){console.error("Error fetching plan info:",e)}finally{c(!1)}};if(o)return(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{children:"Current Plan"})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"animate-pulse space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded"})]})})]});if(!l)return null;let f="monthly"===l.plan||"yearly"===l.plan,g="free"===l.plan;return(0,a.jsxs)(i.Zb,{className:f?"border-purple-500 bg-gradient-to-br from-purple-50 to-white":"",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[f&&(0,a.jsx)(p.Z,{className:"w-5 h-5 text-purple-600"}),l.plan_name," Plan"]}),(0,a.jsx)(u.C,{variant:f?"default":"secondary",className:f?"bg-purple-600":"",children:f?"Premium":"Free"})]}),(0,a.jsxs)(i.SZ,{children:[l.weddings_count," wedding",1!==l.weddings_count?"s":""," created"]})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(null===(s=l.upgrade_banner)||void 0===s?void 0:s.show)&&(0,a.jsxs)(x.bZ,{className:"border-orange-500 bg-orange-50",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 text-orange-600"}),(0,a.jsx)(x.X,{className:"text-orange-800",children:l.upgrade_banner.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Plan Features:"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l.features.media_upload?(0,a.jsx)(D.Z,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(R.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{children:"Media Uploads"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l.features.custom_branding?(0,a.jsx)(D.Z,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(R.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{children:"Custom Branding"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l.features.white_label?(0,a.jsx)(D.Z,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(R.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{children:"White Label"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l.features.analytics_dashboard?(0,a.jsx)(D.Z,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(R.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{children:"Advanced Analytics"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l.features.multi_camera?(0,a.jsx)(D.Z,{className:"w-4 h-4 text-green-600"}):(0,a.jsx)(R.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{children:"Multi-Camera Support"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Streaming Quality:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:l.allowed_resolutions.map(e=>(0,a.jsx)(u.C,{variant:"outline",className:"text-xs",children:e},e))}),g&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upgrade to Premium for 4K streaming"})]}),g&&(0,a.jsx)(y.default,{href:"/pricing",children:(0,a.jsxs)(n.z,{className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Upgrade to Premium"]})})]})]})}var z=t(86610),A=t(87592),G=t(28165),F=t(77700);let I=z.fC,L=z.xz;z.ZA,z.Uv,z.Tr,z.Ee,r.forwardRef((e,s)=>{let{className:t,inset:r,children:l,...n}=e;return(0,a.jsxs)(z.fF,{ref:s,className:(0,F.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...n,children:[l,(0,a.jsx)(A.Z,{className:"ml-auto"})]})}).displayName=z.fF.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(z.tu,{ref:s,className:(0,F.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r})}).displayName=z.tu.displayName;let W=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...l}=e;return(0,a.jsx)(z.Uv,{children:(0,a.jsx)(z.VY,{ref:s,sideOffset:r,className:(0,F.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...l})})});W.displayName=z.VY.displayName;let Y=r.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(z.ck,{ref:s,className:(0,F.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",r&&"pl-8",t),...l})});Y.displayName=z.ck.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,checked:l,...n}=e;return(0,a.jsxs)(z.oC,{ref:s,className:(0,F.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(z.wU,{children:(0,a.jsx)(D.Z,{className:"h-4 w-4"})})}),r]})}).displayName=z.oC.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(z.Rk,{ref:s,className:(0,F.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(z.wU,{children:(0,a.jsx)(G.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=z.Rk.displayName;let T=r.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(z.__,{ref:s,className:(0,F.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...l})});T.displayName=z.__.displayName;let X=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(z.Z0,{ref:s,className:(0,F.cn)("-mx-1 my-1 h-px bg-muted",t),...r})});X.displayName=z.Z0.displayName;var M=t(95640),O=t(52022),q=t(88592),V=t(89896);function K(e){var s,t;let{user:r,onLogout:l}=e,n=(0,_.useRouter)();if(!r)return null;let i="free"!==r.subscription_plan;return(0,a.jsxs)(I,{children:[(0,a.jsx)(L,{className:"focus:outline-none",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsxs)(M.qE,{className:"h-9 w-9 ring-2 ring-offset-2 ring-rose-500/20",children:[(0,a.jsx)(M.F$,{src:r.avatar_url,alt:r.full_name||r.email}),(0,a.jsx)(M.Q5,{className:"bg-gradient-to-br from-rose-500 to-purple-600 text-white text-sm",children:(s=r.full_name)?s.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):(null===(t=r.email)||void 0===t?void 0:t.charAt(0).toUpperCase())||"U"})]}),i&&(0,a.jsx)(p.Z,{className:"w-4 h-4 text-yellow-500"})]})}),(0,a.jsxs)(W,{align:"end",className:"w-56",children:[(0,a.jsx)(T,{children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:r.full_name||"User"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:r.email}),(0,a.jsx)(u.C,{variant:i?"default":"secondary",className:i?"bg-gradient-to-r from-rose-500 to-purple-600":"",children:r.subscription_plan||"free"})]})}),(0,a.jsx)(X,{}),(0,a.jsxs)(Y,{onClick:()=>n.push("/profile"),children:[(0,a.jsx)(O.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Profile"})]}),(0,a.jsxs)(Y,{onClick:()=>n.push("/settings"),children:[(0,a.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Settings"})]}),(0,a.jsxs)(Y,{onClick:()=>n.push(i?"/payment/history":"/pricing"),children:[(0,a.jsx)(q.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:i?"Billing & Plans":"Upgrade to Premium"})]}),(0,a.jsx)(X,{}),(0,a.jsxs)(Y,{onClick:l,className:"text-red-600 focus:text-red-600",children:[(0,a.jsx)(V.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Logout"})]})]})]})}function Q(){let{user:e,logout:s,loading:t}=(0,l.a)(),C=(0,_.useRouter)(),[E,D]=(0,r.useState)([]),[R,S]=(0,r.useState)(!0),[B,z]=(0,r.useState)(!1),[A,G]=(0,r.useState)(null),[F,I]=(0,r.useState)({title:"",description:"",bride_name:"",groom_name:"",scheduled_date:"",location:""}),[L,W]=(0,r.useState)(null);(0,r.useEffect)(()=>{t||e?e&&Y():C.push("/login")},[e,t,C]);let Y=async()=>{try{console.log("DEBUG: Loading weddings...");let l=localStorage.getItem("token");console.log("DEBUG: Auth token exists:",!!l),console.log("DEBUG: User object:",e);try{console.log("DEBUG: Testing public endpoint...");let e=await k.default.get("/api/weddings/public-test");console.log("DEBUG: Public test response:",e.data),e.data.success?Z.toast.success("Database OK: ".concat(e.data.total_weddings," weddings found")):Z.toast.error("Database error: ".concat(e.data.error))}catch(e){console.error("DEBUG: Public endpoint failed:",e),Z.toast.error("Database connectivity failed");return}try{console.log("DEBUG: Testing authenticated my-weddings endpoint..."),console.log("DEBUG: Request headers:",k.default.defaults.headers);let e=await k.default.get("/api/weddings/my-weddings");if(console.log("DEBUG: Auth API response:",e.data),console.log("DEBUG: Response status:",e.status),Array.isArray(e.data)){let s=e.data;console.log("SUCCESS: Found ".concat(s.length," weddings!")),Z.toast.success("Loaded ".concat(s.length," weddings successfully!")),D(s),s.forEach((e,s)=>{console.log("Wedding ".concat(s+1,": ").concat(e.title," (").concat(e.id,")"))})}else console.error("Unexpected response format:",e.data),Z.toast.error("Unexpected response format from server")}catch(l){var s,t,a,r;console.error("DEBUG: Auth endpoint failed:",l),console.error("Error details:",l.response),console.error("Error status:",null===(s=l.response)||void 0===s?void 0:s.status),console.error("Error data:",null===(t=l.response)||void 0===t?void 0:t.data);let e=(null===(r=l.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.detail)||l.message||"Unknown error";Z.toast.error("Auth failed: ".concat(e));try{console.log("DEBUG: Trying working endpoint as fallback...");let e=await k.default.get("/api/weddings/my-weddings-working");if(console.log("DEBUG: Working endpoint response:",e.data),Array.isArray(e.data)){let s=e.data;Z.toast.success("Fallback loaded ".concat(s.length," weddings!")),D(s)}}catch(e){console.error("DEBUG: Fallback also failed:",e),Z.toast.error("All endpoints failed - check server logs")}}try{let e=await k.default.get("/api/subscriptions/my-subscription");W(e.data)}catch(e){console.error("DEBUG: Subscription endpoint failed:",e)}}catch(e){console.error("DEBUG: General error in loadWeddings:",e),Z.toast.error("Failed to load weddings")}finally{S(!1)}},T=async e=>{e.preventDefault(),S(!0);try{let e=await k.default.post("/api/weddings/",{...F,scheduled_date:new Date(F.scheduled_date).toISOString()});Z.toast.success("✨ Wedding event created! Your RTMP credentials are ready."),D([e.data,...E]),z(!1),G(e.data),I({title:"",description:"",bride_name:"",groom_name:"",scheduled_date:"",location:""})}catch(e){var s,t;Z.toast.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||"Failed to create wedding")}finally{S(!1)}};return t||R?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,a.jsx)(f.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50",children:[(0,a.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)(y.default,{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"w-6 h-6 text-rose-500"}),(0,a.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-rose-500 to-purple-600 bg-clip-text text-transparent",children:"WedLive"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(y.default,{href:"/weddings",children:(0,a.jsxs)(n.z,{variant:"ghost",size:"sm",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Browse Weddings"]})}),(0,a.jsx)(K,{user:e,onLogout:s})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Weddings"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your wedding streams and get RTMP credentials"})]}),L&&"free"===L.plan&&(0,a.jsxs)(x.bZ,{className:"mb-6 bg-gradient-to-r from-rose-50 to-purple-50 border-rose-200",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-rose-600"}),(0,a.jsxs)(x.X,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold text-rose-900",children:"Unlock Premium Features!"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:"Get unlimited events, unlimited viewers, and unlimited storage"})]}),(0,a.jsx)(y.default,{href:"/pricing",children:(0,a.jsx)(n.z,{size:"sm",className:"bg-gradient-to-r from-rose-500 to-purple-600 text-white ml-4","data-testid":"upgrade-banner-button",children:"Upgrade Now"})})]})]}),L&&"free"!==L.plan&&(0,a.jsxs)(x.bZ,{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 text-green-600"}),(0,a.jsxs)(x.X,{children:[(0,a.jsx)("span",{className:"font-semibold text-green-900",children:"Premium Active!"}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 mt-1",children:["Enjoying unlimited events and features. Plan: ","monthly"===L.plan?"Monthly":"Yearly"]})]})]}),L&&"free"===L.plan&&E.length>=1&&(0,a.jsx)(x.bZ,{className:"mb-6 bg-yellow-50 border-yellow-200",children:(0,a.jsxs)(x.X,{children:[(0,a.jsx)("span",{className:"font-semibold text-yellow-900",children:"Wedding Limit Reached"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:"Free plan users can only create 1 wedding event. Upgrade to Premium to create unlimited weddings."})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsx)(U.Z,{token:(null==e?void 0:e.access_token)||localStorage.getItem("token")}),(0,a.jsx)(P,{token:(null==e?void 0:e.access_token)||localStorage.getItem("token")})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)(d.Vq,{open:B,onOpenChange:z,children:[(0,a.jsx)(d.hg,{asChild:!0,children:(0,a.jsxs)(n.z,{className:"bg-gradient-to-r from-rose-500 to-purple-600 text-white",disabled:(null==L?void 0:L.plan)==="free"&&E.length>=1,children:[(0,a.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Create New Wedding"]})}),(0,a.jsxs)(d.cZ,{className:"max-w-2xl",children:[(0,a.jsxs)(d.fK,{children:[(0,a.jsx)(d.$N,{children:"Create Wedding Event"}),(0,a.jsx)(d.Be,{children:"Set up your wedding livestream and get RTMP credentials"})]}),(0,a.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"bride_name",children:"Bride's Name"}),(0,a.jsx)(o.I,{id:"bride_name",value:F.bride_name,onChange:e=>I({...F,bride_name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"groom_name",children:"Groom's Name"}),(0,a.jsx)(o.I,{id:"groom_name",value:F.groom_name,onChange:e=>I({...F,groom_name:e.target.value}),required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"title",children:"Wedding Title"}),(0,a.jsx)(o.I,{id:"title",placeholder:"e.g., Sarah & John's Wedding",value:F.title,onChange:e=>I({...F,title:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"description",children:"Description"}),(0,a.jsx)(m.g,{id:"description",placeholder:"Share details about your special day",value:F.description,onChange:e=>I({...F,description:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"scheduled_date",children:"Wedding Date"}),(0,a.jsx)(o.I,{id:"scheduled_date",type:"datetime-local",value:F.scheduled_date,onChange:e=>I({...F,scheduled_date:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"location",children:"Location"}),(0,a.jsx)(o.I,{id:"location",placeholder:"Venue name",value:F.location,onChange:e=>I({...F,location:e.target.value})})]})]}),(0,a.jsx)(d.cN,{children:(0,a.jsx)(n.z,{type:"submit",disabled:R,children:R?"Creating...":"Create Wedding"})})]})]})]})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[console.log("DEBUG: Rendering weddings list, weddings:",E),console.log("DEBUG: Weddings length:",E.length),E.length>0?E.map(e=>(0,a.jsxs)(i.Zb,{className:e.is_locked?"opacity-75 border-yellow-200":"",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(i.ll,{className:"text-lg flex items-center gap-2",children:[e.title,e.is_locked&&(0,a.jsx)(u.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"\uD83D\uDD12 Locked"})]}),(0,a.jsxs)(i.SZ,{className:"mt-1",children:[e.bride_name," & ",e.groom_name]})]}),(0,a.jsx)(u.C,{className:"live"===e.status?"bg-red-500":"bg-gray-500",children:e.status})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),new Date(e.scheduled_date).toLocaleDateString()]}),e.location&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:["\uD83D\uDCCD ",e.location]}),(0,a.jsxs)("div",{className:"pt-3 border-t flex gap-2",children:[(0,a.jsx)(y.default,{href:"/weddings/manage/".concat(e.id),className:"flex-1",children:(0,a.jsxs)(n.z,{variant:"default",size:"sm",className:"w-full bg-gradient-to-r from-rose-500 to-purple-600 text-white",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Manage"]})}),(0,a.jsx)(y.default,{href:"/weddings/".concat(e.id),children:(0,a.jsx)(n.z,{variant:"outline",size:"sm",children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})})})]}),e.is_locked&&(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)(y.default,{href:"/pricing",children:(0,a.jsx)(n.z,{size:"sm",className:"w-full bg-gradient-to-r from-rose-500 to-purple-600 text-white",children:"Unlock with Premium"})})})]})})]},e.id)):(0,a.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,a.jsx)(g.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No weddings found"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"Create your first wedding event to get started"})]})]}),0===E.length&&!R&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(g.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No weddings yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"Create your first wedding event to get started"})]})]})]})}function $(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,a.jsx)(f.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}),children:(0,a.jsx)(Q,{})})}},90223:function(e,s,t){"use strict";t.d(s,{Z:function(){return h}});var a=t(57437),r=t(2265),l=t(38472),n=t(32816),i=t(10273),d=t(56360),o=t(46290),c=t(76780),m=t(53225),u=t(11980),x=t(87138),f=t(20357);let g=f.env.NEXT_PUBLIC_API_URL||f.env.NEXT_PUBLIC_BACKEND_URL;function h(e){let{token:s}=e,[t,f]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{s&&j()},[s]);let j=async()=>{try{let e=await l.Z.get("".concat(g,"/api/plan/storage/stats"),{headers:{Authorization:"Bearer ".concat(s)}});f(e.data)}catch(e){console.error("Error fetching storage stats:",e)}finally{p(!1)}};if(h)return(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),"Storage"]})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded w-full"})]})})]});if(!t)return null;let{storage_used_formatted:N,storage_limit_formatted:b,percentage_used:v,is_over_limit:w,plan:y}=t,_=v>80&&!w;return(0,a.jsxs)(i.Zb,{className:w?"border-red-500":_?"border-yellow-500":"",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),"Storage Usage"]}),(0,a.jsxs)(i.SZ,{children:[N," of ",b," used"]})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.E,{value:Math.min(v,100),className:"h-3 ".concat(w?"bg-red-100":_?"bg-yellow-100":"bg-gray-100")}),(0,a.jsxs)("p",{className:"text-sm text-right ".concat(w?"text-red-600 font-semibold":_?"text-yellow-600":"text-gray-500"),children:[v.toFixed(1),"% used"]})]}),w&&(0,a.jsxs)(u.bZ,{variant:"destructive",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)(u.X,{children:"You've exceeded your storage limit. Uploads are blocked until you upgrade or delete files."})]}),_&&(0,a.jsxs)(u.bZ,{className:"border-yellow-500 bg-yellow-50",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsx)(u.X,{className:"text-yellow-800",children:"You're approaching your storage limit. Consider upgrading to Premium for 200GB storage."})]}),t.breakdown&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:["• Media items: ",t.breakdown.media_items]}),(0,a.jsxs)("p",{children:["• Photobooth photos: ",t.breakdown.photobooth_photos]}),(0,a.jsxs)("p",{children:["• Recordings: ",t.breakdown.recordings]})]}),"free"===y&&(0,a.jsx)(x.default,{href:"/pricing",children:(0,a.jsx)(d.z,{className:"w-full",variant:w?"destructive":"default",children:"Upgrade to Premium - 200GB Storage"})})]})]})}},11980:function(e,s,t){"use strict";t.d(s,{X:function(){return o},bZ:function(){return d}});var a=t(57437),r=t(2265),l=t(13027),n=t(77700);let i=(0,l.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=r.forwardRef((e,s)=>{let{className:t,variant:r,...l}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(i({variant:r}),t),...l})});d.displayName="Alert",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",t),...r})}).displayName="AlertTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",t),...r})});o.displayName="AlertDescription"},95640:function(e,s,t){"use strict";t.d(s,{F$:function(){return d},Q5:function(){return o},qE:function(){return i}});var a=t(57437),r=t(2265),l=t(93269),n=t(77700);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.fC,{ref:s,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});i.displayName=l.fC.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.Ee,{ref:s,className:(0,n.cn)("aspect-square h-full w-full",t),...r})});d.displayName=l.Ee.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.NY,{ref:s,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});o.displayName=l.NY.displayName},92404:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var a=t(57437),r=t(2265),l=t(77700);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},10464:function(e,s,t){"use strict";t.d(s,{_:function(){return o}});var a=t(57437),r=t(2265),l=t(38837),n=t(13027),i=t(77700);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.f,{ref:s,className:(0,i.cn)(d(),t),...r})});o.displayName=l.f.displayName},32816:function(e,s,t){"use strict";t.d(s,{E:function(){return i}});var a=t(57437),r=t(2265),l=t(13993),n=t(77700);let i=r.forwardRef((e,s)=>{let{className:t,value:r,...i}=e;return(0,a.jsx)(l.fC,{ref:s,className:(0,n.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...i,children:(0,a.jsx)(l.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});i.displayName=l.fC.displayName},65236:function(e,s,t){"use strict";t.d(s,{SP:function(){return o},dr:function(){return d},mQ:function(){return i},nU:function(){return c}});var a=t(57437),r=t(2265),l=t(62447),n=t(77700);let i=l.fC,d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.aV,{ref:s,className:(0,n.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...r})});d.displayName=l.aV.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.xz,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...r})});o.displayName=l.xz.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});c.displayName=l.VY.displayName},7990:function(e,s,t){"use strict";t.d(s,{g:function(){return n}});var a=t(57437),r=t(2265),l=t(77700);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r})});n.displayName="Textarea"}},function(e){e.O(0,[9767,4868,7776,7515,2889,4287,7999,7090,95,6406,6046,2971,7023,1744],function(){return e(e.s=3665)}),_N_E=e.O()}]);