(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{3665:function(e,s,a){Promise.resolve().then(a.bind(a,73958))},73958:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return H}});var t=a(57437),r=a(2265),l=a(15730),n=a(56360),i=a(10273),d=a(68639),o=a(92404),c=a(10464),m=a(7990),x=a(79004),u=a(11980);a(65236);var f=a(3274),h=a(64042),g=a(68954),p=a(957),j=a(92940),N=a(92513),b=a(24241),v=a(24258),w=a(75733),y=a(87138),_=a(16463),Z=a(27776),k=a(6657),C=a(90223),U=a(38472),E=a(36127),S=a(22468),D=a(74697),z=a(20357);let P=z.env.NEXT_PUBLIC_API_URL||z.env.NEXT_PUBLIC_BACKEND_URL;function R(e){var s;let{token:a}=e,[l,d]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{a&&m()},[a]);let m=async()=>{try{let e=await U.Z.get("".concat(P,"/api/plan/plan/info"),{headers:{Authorization:"Bearer ".concat(a)}});d(e.data)}catch(e){console.error("Error fetching plan info:",e)}finally{c(!1)}};if(o)return(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{children:"Current Plan"})}),(0,t.jsx)(i.aY,{children:(0,t.jsxs)("div",{className:"animate-pulse space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded"})]})})]});if(!l)return null;let f="monthly"===l.plan||"yearly"===l.plan,h="free"===l.plan;return(0,t.jsxs)(i.Zb,{className:f?"border-purple-500 bg-gradient-to-br from-purple-50 to-white":"",children:[(0,t.jsxs)(i.Ol,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(i.ll,{className:"flex items-center gap-2",children:[f&&(0,t.jsx)(p.Z,{className:"w-5 h-5 text-purple-600"}),l.plan_name," Plan"]}),(0,t.jsx)(x.C,{variant:f?"default":"secondary",className:f?"bg-purple-600":"",children:f?"Premium":"Free"})]}),(0,t.jsxs)(i.SZ,{children:[l.weddings_count," wedding",1!==l.weddings_count?"s":""," created"]})]}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(null===(s=l.upgrade_banner)||void 0===s?void 0:s.show)&&(0,t.jsxs)(u.bZ,{className:"border-orange-500 bg-orange-50",children:[(0,t.jsx)(E.Z,{className:"h-4 w-4 text-orange-600"}),(0,t.jsx)(u.X,{className:"text-orange-800",children:l.upgrade_banner.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Plan Features:"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[l.features.media_upload?(0,t.jsx)(S.Z,{className:"w-4 h-4 text-green-600"}):(0,t.jsx)(D.Z,{className:"w-4 h-4 text-red-500"}),(0,t.jsx)("span",{children:"Media Uploads"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[l.features.custom_branding?(0,t.jsx)(S.Z,{className:"w-4 h-4 text-green-600"}):(0,t.jsx)(D.Z,{className:"w-4 h-4 text-red-500"}),(0,t.jsx)("span",{children:"Custom Branding"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[l.features.white_label?(0,t.jsx)(S.Z,{className:"w-4 h-4 text-green-600"}):(0,t.jsx)(D.Z,{className:"w-4 h-4 text-red-500"}),(0,t.jsx)("span",{children:"White Label"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[l.features.analytics_dashboard?(0,t.jsx)(S.Z,{className:"w-4 h-4 text-green-600"}):(0,t.jsx)(D.Z,{className:"w-4 h-4 text-red-500"}),(0,t.jsx)("span",{children:"Advanced Analytics"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[l.features.multi_camera?(0,t.jsx)(S.Z,{className:"w-4 h-4 text-green-600"}):(0,t.jsx)(D.Z,{className:"w-4 h-4 text-red-500"}),(0,t.jsx)("span",{children:"Multi-Camera Support"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Streaming Quality:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:l.allowed_resolutions.map(e=>(0,t.jsx)(x.C,{variant:"outline",className:"text-xs",children:e},e))}),h&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upgrade to Premium for 4K streaming"})]}),h&&(0,t.jsx)(y.default,{href:"/pricing",children:(0,t.jsxs)(n.z,{className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Upgrade to Premium"]})})]})]})}var B=a(86610),A=a(87592),G=a(28165),F=a(77700);let L=B.fC,W=B.xz;B.ZA,B.Uv,B.Tr,B.Ee,r.forwardRef((e,s)=>{let{className:a,inset:r,children:l,...n}=e;return(0,t.jsxs)(B.fF,{ref:s,className:(0,F.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n,children:[l,(0,t.jsx)(A.Z,{className:"ml-auto"})]})}).displayName=B.fF.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(B.tu,{ref:s,className:(0,F.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...r})}).displayName=B.tu.displayName;let I=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,t.jsx)(B.Uv,{children:(0,t.jsx)(B.VY,{ref:s,sideOffset:r,className:(0,F.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...l})})});I.displayName=B.VY.displayName;let T=r.forwardRef((e,s)=>{let{className:a,inset:r,...l}=e;return(0,t.jsx)(B.ck,{ref:s,className:(0,F.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",r&&"pl-8",a),...l})});T.displayName=B.ck.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,checked:l,...n}=e;return(0,t.jsxs)(B.oC,{ref:s,className:(0,F.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(B.wU,{children:(0,t.jsx)(S.Z,{className:"h-4 w-4"})})}),r]})}).displayName=B.oC.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(B.Rk,{ref:s,className:(0,F.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(B.wU,{children:(0,t.jsx)(G.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=B.Rk.displayName;let Y=r.forwardRef((e,s)=>{let{className:a,inset:r,...l}=e;return(0,t.jsx)(B.__,{ref:s,className:(0,F.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...l})});Y.displayName=B.__.displayName;let M=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(B.Z0,{ref:s,className:(0,F.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});M.displayName=B.Z0.displayName;var O=a(95640),X=a(52022),V=a(88592),q=a(89896);function K(e){var s,a;let{user:r,onLogout:l}=e,n=(0,_.useRouter)();if(!r)return null;let i="free"!==r.subscription_plan;return(0,t.jsxs)(L,{children:[(0,t.jsx)(W,{className:"focus:outline-none",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsxs)(O.qE,{className:"h-9 w-9 ring-2 ring-offset-2 ring-rose-500/20",children:[(0,t.jsx)(O.F$,{src:r.avatar_url,alt:r.full_name||r.email}),(0,t.jsx)(O.Q5,{className:"bg-gradient-to-br from-rose-500 to-purple-600 text-white text-sm",children:(s=r.full_name)?s.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):(null===(a=r.email)||void 0===a?void 0:a.charAt(0).toUpperCase())||"U"})]}),i&&(0,t.jsx)(p.Z,{className:"w-4 h-4 text-yellow-500"})]})}),(0,t.jsxs)(I,{align:"end",className:"w-56",children:[(0,t.jsx)(Y,{children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:r.full_name||"User"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:r.email}),(0,t.jsx)(x.C,{variant:i?"default":"secondary",className:i?"bg-gradient-to-r from-rose-500 to-purple-600":"",children:r.subscription_plan||"free"})]})}),(0,t.jsx)(M,{}),(0,t.jsxs)(T,{onClick:()=>n.push("/profile"),children:[(0,t.jsx)(X.Z,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Profile"})]}),(0,t.jsxs)(T,{onClick:()=>n.push("/settings"),children:[(0,t.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Settings"})]}),(0,t.jsxs)(T,{onClick:()=>n.push(i?"/payment/history":"/pricing"),children:[(0,t.jsx)(V.Z,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:i?"Billing & Plans":"Upgrade to Premium"})]}),(0,t.jsx)(M,{}),(0,t.jsxs)(T,{onClick:l,className:"text-red-600 focus:text-red-600",children:[(0,t.jsx)(q.Z,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Logout"})]})]})]})}var Q=a(15926),$=a(42873);function J(){let{user:e,logout:s,loading:a}=(0,l.a)(),U=(0,_.useRouter)(),[E,S]=(0,r.useState)([]),[D,z]=(0,r.useState)(!0),[P,B]=(0,r.useState)(!1),[A,G]=(0,r.useState)(null),[F,L]=(0,r.useState)({title:"",description:"",bride_name:"",groom_name:"",scheduled_date:"",location:""}),[W,I]=(0,r.useState)(null),[T,Y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{a||e?e&&M():U.push("/login")},[e,a,U]);let M=async()=>{try{console.log("DEBUG: Loading weddings...");let l=localStorage.getItem("token");console.log("DEBUG: Auth token exists:",!!l),console.log("DEBUG: User object:",e);try{console.log("DEBUG: Testing public endpoint...");let e=await k.default.get("/api/weddings/public-test");console.log("DEBUG: Public test response:",e.data),e.data.success?Z.toast.success("Database OK: ".concat(e.data.total_weddings," weddings found")):Z.toast.error("Database error: ".concat(e.data.error))}catch(e){console.error("DEBUG: Public endpoint failed:",e),Z.toast.error("Database connectivity failed");return}try{console.log("DEBUG: Testing authenticated my-weddings endpoint..."),console.log("DEBUG: Request headers:",k.default.defaults.headers);let e=await k.default.get("/api/weddings/my-weddings");if(console.log("DEBUG: Auth API response:",e.data),console.log("DEBUG: Response status:",e.status),Array.isArray(e.data)){let s=e.data;console.log("SUCCESS: Found ".concat(s.length," weddings!")),Z.toast.success("Loaded ".concat(s.length," weddings successfully!")),S(s),s.forEach((e,s)=>{console.log("Wedding ".concat(s+1,": ").concat(e.title," (").concat(e.id,")"))})}else console.error("Unexpected response format:",e.data),Z.toast.error("Unexpected response format from server")}catch(l){var s,a,t,r;console.error("DEBUG: Auth endpoint failed:",l),console.error("Error details:",l.response),console.error("Error status:",null===(s=l.response)||void 0===s?void 0:s.status),console.error("Error data:",null===(a=l.response)||void 0===a?void 0:a.data);let e=(null===(r=l.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.detail)||l.message||"Unknown error";Z.toast.error("Auth failed: ".concat(e));try{console.log("DEBUG: Trying working endpoint as fallback...");let e=await k.default.get("/api/weddings/my-weddings-working");if(console.log("DEBUG: Working endpoint response:",e.data),Array.isArray(e.data)){let s=e.data;Z.toast.success("Fallback loaded ".concat(s.length," weddings!")),S(s)}}catch(e){console.error("DEBUG: Fallback also failed:",e),Z.toast.error("All endpoints failed - check server logs")}}try{let e=await k.default.get("/api/subscriptions/my-subscription");I(e.data)}catch(e){console.error("DEBUG: Subscription endpoint failed:",e)}}catch(e){console.error("DEBUG: General error in loadWeddings:",e),Z.toast.error("Failed to load weddings")}finally{z(!1)}},O=async e=>{e.preventDefault(),z(!0);try{let e=await k.default.post("/api/weddings/",{...F,scheduled_date:new Date(F.scheduled_date).toISOString()});Z.toast.success("✨ Wedding event created! Your RTMP credentials are ready."),S([e.data,...E]),B(!1),G(e.data),L({title:"",description:"",bride_name:"",groom_name:"",scheduled_date:"",location:""})}catch(e){var s,a;Z.toast.error((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.detail)||"Failed to create wedding")}finally{z(!1)}};return a||D?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,t.jsx)(f.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50",children:[(0,t.jsx)(Q.Z,{isOpen:T,onToggle:()=>Y(!T),user:e}),(0,t.jsxs)("div",{className:"lg:ml-64",children:[(0,t.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(n.z,{variant:"ghost",size:"icon",onClick:()=>Y(!T),className:"lg:hidden",children:(0,t.jsx)($.Z,{className:"w-5 h-5"})}),(0,t.jsxs)(y.default,{href:"/",className:"flex items-center space-x-2",children:[(0,t.jsx)(h.Z,{className:"w-6 h-6 text-rose-500"}),(0,t.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-rose-500 to-purple-600 bg-clip-text text-transparent",children:"WedLive"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(y.default,{href:"/weddings",children:(0,t.jsxs)(n.z,{variant:"ghost",size:"sm",children:[(0,t.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Browse Weddings"]})}),(0,t.jsx)(K,{user:e,onLogout:s})]})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Weddings"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your wedding streams and get RTMP credentials"})]}),W&&"free"===W.plan&&(0,t.jsxs)(u.bZ,{className:"mb-6 bg-gradient-to-r from-rose-50 to-purple-50 border-rose-200",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4 text-rose-600"}),(0,t.jsxs)(u.X,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold text-rose-900",children:"Unlock Premium Features!"}),(0,t.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:"Get unlimited events, unlimited viewers, and unlimited storage"})]}),(0,t.jsx)(y.default,{href:"/pricing",children:(0,t.jsx)(n.z,{size:"sm",className:"bg-gradient-to-r from-rose-500 to-purple-600 text-white ml-4","data-testid":"upgrade-banner-button",children:"Upgrade Now"})})]})]}),W&&"free"!==W.plan&&(0,t.jsxs)(u.bZ,{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",children:[(0,t.jsx)(j.Z,{className:"w-4 h-4 text-green-600"}),(0,t.jsxs)(u.X,{children:[(0,t.jsx)("span",{className:"font-semibold text-green-900",children:"Premium Active!"}),(0,t.jsxs)("p",{className:"text-sm text-gray-700 mt-1",children:["Enjoying unlimited events and features. Plan: ","monthly"===W.plan?"Monthly":"Yearly"]})]})]}),W&&"free"===W.plan&&E.length>=1&&(0,t.jsx)(u.bZ,{className:"mb-6 bg-yellow-50 border-yellow-200",children:(0,t.jsxs)(u.X,{children:[(0,t.jsx)("span",{className:"font-semibold text-yellow-900",children:"Wedding Limit Reached"}),(0,t.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:"Free plan users can only create 1 wedding event. Upgrade to Premium to create unlimited weddings."})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsx)(C.Z,{token:(null==e?void 0:e.access_token)||localStorage.getItem("token")}),(0,t.jsx)(R,{token:(null==e?void 0:e.access_token)||localStorage.getItem("token")})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)(d.Vq,{open:P,onOpenChange:B,children:[(0,t.jsx)(d.hg,{asChild:!0,children:(0,t.jsxs)(n.z,{className:"bg-gradient-to-r from-rose-500 to-purple-600 text-white",disabled:(null==W?void 0:W.plan)==="free"&&E.length>=1,children:[(0,t.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Create New Wedding"]})}),(0,t.jsxs)(d.cZ,{className:"max-w-2xl",children:[(0,t.jsxs)(d.fK,{children:[(0,t.jsx)(d.$N,{children:"Create Wedding Event"}),(0,t.jsx)(d.Be,{children:"Set up your wedding livestream and get RTMP credentials"})]}),(0,t.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"bride_name",children:"Bride's Name"}),(0,t.jsx)(o.I,{id:"bride_name",value:F.bride_name,onChange:e=>L({...F,bride_name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"groom_name",children:"Groom's Name"}),(0,t.jsx)(o.I,{id:"groom_name",value:F.groom_name,onChange:e=>L({...F,groom_name:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"title",children:"Wedding Title"}),(0,t.jsx)(o.I,{id:"title",placeholder:"e.g., Sarah & John's Wedding",value:F.title,onChange:e=>L({...F,title:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"description",children:"Description"}),(0,t.jsx)(m.g,{id:"description",placeholder:"Share details about your special day",value:F.description,onChange:e=>L({...F,description:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"scheduled_date",children:"Wedding Date"}),(0,t.jsx)(o.I,{id:"scheduled_date",type:"datetime-local",value:F.scheduled_date,onChange:e=>L({...F,scheduled_date:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"location",children:"Location"}),(0,t.jsx)(o.I,{id:"location",placeholder:"Venue name",value:F.location,onChange:e=>L({...F,location:e.target.value})})]})]}),(0,t.jsx)(d.cN,{children:(0,t.jsx)(n.z,{type:"submit",disabled:D,children:D?"Creating...":"Create Wedding"})})]})]})]})}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[console.log("DEBUG: Rendering weddings list, weddings:",E),console.log("DEBUG: Weddings length:",E.length),E.length>0?E.map(e=>(0,t.jsxs)(i.Zb,{className:e.is_locked?"opacity-75 border-yellow-200":"",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(i.ll,{className:"text-lg flex items-center gap-2",children:[e.title,e.is_locked&&(0,t.jsx)(x.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"\uD83D\uDD12 Locked"})]}),(0,t.jsxs)(i.SZ,{className:"mt-1",children:[e.bride_name," & ",e.groom_name]})]}),(0,t.jsx)(x.C,{className:"live"===e.status?"bg-red-500":"bg-gray-500",children:e.status})]})}),(0,t.jsx)(i.aY,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),new Date(e.scheduled_date).toLocaleDateString()]}),e.location&&(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:["\uD83D\uDCCD ",e.location]}),(0,t.jsxs)("div",{className:"pt-3 border-t flex gap-2",children:[(0,t.jsx)(y.default,{href:"/weddings/manage/".concat(e.id),className:"flex-1",children:(0,t.jsxs)(n.z,{variant:"default",size:"sm",className:"w-full bg-gradient-to-r from-rose-500 to-purple-600 text-white",children:[(0,t.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Manage"]})}),(0,t.jsx)(y.default,{href:"/weddings/".concat(e.id),children:(0,t.jsx)(n.z,{variant:"outline",size:"sm",children:(0,t.jsx)(w.Z,{className:"w-4 h-4"})})})]}),e.is_locked&&(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(y.default,{href:"/pricing",children:(0,t.jsx)(n.z,{size:"sm",className:"w-full bg-gradient-to-r from-rose-500 to-purple-600 text-white",children:"Unlock with Premium"})})})]})})]},e.id)):(0,t.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,t.jsx)(h.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No weddings found"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:"Create your first wedding event to get started"})]})]}),0===E.length&&!D&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(h.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No weddings yet"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:"Create your first wedding event to get started"})]})]})]})," "]})}function H(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,t.jsx)(f.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}),children:(0,t.jsx)(J,{})})}},15926:function(e,s,a){"use strict";a.d(s,{Z:function(){return b}});var t=a(57437),r=a(2265),l=a(87138),n=a(16463),i=a(56360);a(79004);var d=a(32816),o=a(83852),c=a(68954),m=a(14504),x=a(4436),u=a(52022),f=a(24258),h=a(74697),g=a(87592),p=a(957),j=a(77700),N=a(6657);function b(e){let{isOpen:s,onToggle:a,user:b}=e,v=(0,n.usePathname)(),[w,y]=(0,r.useState)(null),[_,Z]=(0,r.useState)(!0);(0,r.useEffect)(()=>{k()},[]);let k=async()=>{try{let e=await N.default.get("/api/music/storage");y(e.data)}catch(e){console.error("Failed to load storage info:",e)}finally{Z(!1)}},C=[{name:"Dashboard",href:"/dashboard",icon:o.Z},{name:"My Weddings",href:"/weddings",icon:c.Z},{name:"Music Library",href:"/dashboard/music",icon:m.Z},{name:"Browse Weddings",href:"/browse",icon:x.Z},{name:"Profile",href:"/profile",icon:u.Z},{name:"Settings",href:"/settings",icon:f.Z}],U=(null==b?void 0:b.subscription_plan)==="monthly"||(null==b?void 0:b.subscription_plan)==="yearly";return(0,t.jsxs)(t.Fragment,{children:[s&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:a}),(0,t.jsx)("aside",{className:(0,j.cn)("fixed top-0 left-0 z-50 h-screen bg-white border-r border-gray-200 transition-transform duration-300 ease-in-out","w-64 lg:translate-x-0",s?"translate-x-0":"-translate-x-full"),children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.Z,{className:"w-6 h-6 text-rose-500"}),(0,t.jsx)("h2",{className:"font-semibold text-lg",children:"WedLive"})]}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:a,children:(0,t.jsx)(h.Z,{className:"w-5 h-5"})})]}),(0,t.jsx)("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:C.map(e=>{let s=v===e.href,r=e.icon;return(0,t.jsxs)(l.default,{href:e.href,className:(0,j.cn)("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors group",s?"bg-rose-50 text-rose-600":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),onClick:()=>{window.innerWidth<1024&&a()},children:[(0,t.jsx)(r,{className:(0,j.cn)("w-5 h-5",s?"text-rose-600":"text-gray-400 group-hover:text-gray-600")}),(0,t.jsx)("span",{className:"font-medium",children:e.name}),s&&(0,t.jsx)(g.Z,{className:"w-4 h-4 ml-auto"})]},e.name)})}),(0,t.jsxs)("div",{className:"p-4 border-t space-y-4",children:[!_&&w&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Storage"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[w.percentage,"%"]})]}),(0,t.jsx)(d.E,{value:w.percentage,className:"h-2 mb-2"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[w.storage_used_formatted," / ",w.storage_limit_formatted]}),w.percentage>80&&(0,t.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Storage almost full!"})]}),U?(0,t.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 rounded-lg p-3 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Premium Plan"})]}),(0,t.jsxs)("p",{className:"text-xs opacity-90 capitalize",children:[null==b?void 0:b.subscription_plan," subscription"]})]}):(0,t.jsxs)("div",{className:"bg-gradient-to-r from-rose-500 to-purple-500 rounded-lg p-3 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm font-semibold",children:"Upgrade to Premium"})]}),(0,t.jsx)("p",{className:"text-xs opacity-90 mb-2",children:"Get more storage and features"}),(0,t.jsx)(l.default,{href:"/premium",children:(0,t.jsx)(i.z,{size:"sm",className:"w-full bg-white text-rose-600 hover:bg-gray-100",children:"View Plans"})})]})]})]})})]})}},90223:function(e,s,a){"use strict";a.d(s,{Z:function(){return g}});var t=a(57437),r=a(2265),l=a(38472),n=a(32816),i=a(10273),d=a(56360),o=a(46290),c=a(76780),m=a(53225),x=a(11980),u=a(87138),f=a(20357);let h=f.env.NEXT_PUBLIC_API_URL||f.env.NEXT_PUBLIC_BACKEND_URL;function g(e){let{token:s}=e,[a,f]=(0,r.useState)(null),[g,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{s&&j()},[s]);let j=async()=>{try{let e=await l.Z.get("".concat(h,"/api/plan/storage/stats"),{headers:{Authorization:"Bearer ".concat(s)}});f(e.data)}catch(e){console.error("Error fetching storage stats:",e)}finally{p(!1)}};if(g)return(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"w-5 h-5"}),"Storage"]})}),(0,t.jsx)(i.aY,{children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-2 bg-gray-200 rounded w-full"})]})})]});if(!a)return null;let{storage_used_formatted:N,storage_limit_formatted:b,percentage_used:v,is_over_limit:w,plan:y}=a,_=v>80&&!w;return(0,t.jsxs)(i.Zb,{className:w?"border-red-500":_?"border-yellow-500":"",children:[(0,t.jsxs)(i.Ol,{children:[(0,t.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"w-5 h-5"}),"Storage Usage"]}),(0,t.jsxs)(i.SZ,{children:[N," of ",b," used"]})]}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.E,{value:Math.min(v,100),className:"h-3 ".concat(w?"bg-red-100":_?"bg-yellow-100":"bg-gray-100")}),(0,t.jsxs)("p",{className:"text-sm text-right ".concat(w?"text-red-600 font-semibold":_?"text-yellow-600":"text-gray-500"),children:[v.toFixed(1),"% used"]})]}),w&&(0,t.jsxs)(x.bZ,{variant:"destructive",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4"}),(0,t.jsx)(x.X,{children:"You've exceeded your storage limit. Uploads are blocked until you upgrade or delete files."})]}),_&&(0,t.jsxs)(x.bZ,{className:"border-yellow-500 bg-yellow-50",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 text-yellow-600"}),(0,t.jsx)(x.X,{className:"text-yellow-800",children:"You're approaching your storage limit. Consider upgrading to Premium for 200GB storage."})]}),a.breakdown&&(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsxs)("p",{children:["• Media items: ",a.breakdown.media_items]}),(0,t.jsxs)("p",{children:["• Photobooth photos: ",a.breakdown.photobooth_photos]}),(0,t.jsxs)("p",{children:["• Recordings: ",a.breakdown.recordings]})]}),"free"===y&&(0,t.jsx)(u.default,{href:"/pricing",children:(0,t.jsx)(d.z,{className:"w-full",variant:w?"destructive":"default",children:"Upgrade to Premium - 200GB Storage"})})]})]})}},11980:function(e,s,a){"use strict";a.d(s,{X:function(){return o},bZ:function(){return d}});var t=a(57437),r=a(2265),l=a(13027),n=a(77700);let i=(0,l.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=r.forwardRef((e,s)=>{let{className:a,variant:r,...l}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(i({variant:r}),a),...l})});d.displayName="Alert",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})}).displayName="AlertTitle";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",a),...r})});o.displayName="AlertDescription"},95640:function(e,s,a){"use strict";a.d(s,{F$:function(){return d},Q5:function(){return o},qE:function(){return i}});var t=a(57437),r=a(2265),l=a(93269),n=a(77700);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.fC,{ref:s,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});i.displayName=l.fC.displayName;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.Ee,{ref:s,className:(0,n.cn)("aspect-square h-full w-full",a),...r})});d.displayName=l.Ee.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.NY,{ref:s,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});o.displayName=l.NY.displayName},92404:function(e,s,a){"use strict";a.d(s,{I:function(){return n}});var t=a(57437),r=a(2265),l=a(77700);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...n})});n.displayName="Input"},10464:function(e,s,a){"use strict";a.d(s,{_:function(){return o}});var t=a(57437),r=a(2265),l=a(38837),n=a(13027),i=a(77700);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.f,{ref:s,className:(0,i.cn)(d(),a),...r})});o.displayName=l.f.displayName},32816:function(e,s,a){"use strict";a.d(s,{E:function(){return i}});var t=a(57437),r=a(2265),l=a(13993),n=a(77700);let i=r.forwardRef((e,s)=>{let{className:a,value:r,...i}=e;return(0,t.jsx)(l.fC,{ref:s,className:(0,n.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...i,children:(0,t.jsx)(l.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});i.displayName=l.fC.displayName},65236:function(e,s,a){"use strict";a.d(s,{SP:function(){return o},dr:function(){return d},mQ:function(){return i},nU:function(){return c}});var t=a(57437),r=a(2265),l=a(62447),n=a(77700);let i=l.fC,d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.aV,{ref:s,className:(0,n.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...r})});d.displayName=l.aV.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.xz,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...r})});o.displayName=l.xz.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});c.displayName=l.VY.displayName},7990:function(e,s,a){"use strict";a.d(s,{g:function(){return n}});var t=a(57437),r=a(2265),l=a(77700);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});n.displayName="Textarea"}},function(e){e.O(0,[9767,4868,7776,7515,2889,2151,7999,7662,8861,8765,6046,2971,7023,1744],function(){return e(e.s=3665)}),_N_E=e.O()}]);