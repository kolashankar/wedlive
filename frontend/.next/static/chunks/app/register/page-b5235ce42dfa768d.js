(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4011,6657],{57059:function(e,t,r){Promise.resolve().then(r.bind(r,30795))},30795:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(57437),o=r(2265),a=r(15730),s=r(56360),l=r(92404),i=r(10273),d=r(10464),c=r(11980),u=r(64042),f=r(3274),m=r(87138),p=r(16463),g=r(27776),v=r(38472);let h=(0,r(78614).bR)();function x(){let[e,t]=(0,o.useState)(""),[r,x]=(0,o.useState)(""),[w,y]=(0,o.useState)(""),[b,N]=(0,o.useState)(!1),[j,R]=(0,o.useState)(!1),[_,A]=(0,o.useState)(""),{register:I}=(0,a.a)(),E=(0,p.useRouter)(),S=async()=>{try{R(!0);let e=await v.Z.get("".concat(h,"/api/auth/google/login"));e.data.state&&localStorage.setItem("google_oauth_state",e.data.state),window.location.href=e.data.oauth_url}catch(e){console.error("Google signup error:",e),g.toast.error("Failed to initiate Google signup"),R(!1)}},P=async t=>{t.preventDefault(),A(""),N(!0);try{await I(e,r,w),g.toast.success("Account created successfully!"),E.push("/dashboard")}catch(e){var n,o;A((null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.detail)||"Registration failed"),g.toast.error("Registration failed")}finally{N(!1)}};return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"w-full max-w-md",children:[(0,n.jsxs)(m.default,{href:"/",className:"flex items-center justify-center space-x-2 mb-8",children:[(0,n.jsx)(u.Z,{className:"w-8 h-8 text-rose-500"}),(0,n.jsx)("span",{className:"text-3xl font-bold bg-gradient-to-r from-rose-500 to-purple-600 bg-clip-text text-transparent",children:"WedLive"})]}),(0,n.jsxs)(i.Zb,{className:"border-2 shadow-lg",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{className:"text-2xl",children:"Create Account"}),(0,n.jsx)(i.SZ,{children:"Start streaming your wedding today"})]}),(0,n.jsxs)("form",{onSubmit:P,children:[(0,n.jsxs)(i.aY,{className:"space-y-4",children:[_&&(0,n.jsx)(c.bZ,{variant:"destructive",children:(0,n.jsx)(c.X,{children:_})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{htmlFor:"fullName",children:"Full Name"}),(0,n.jsx)(l.I,{id:"fullName",type:"text",placeholder:"Shiva",value:w,onChange:e=>y(e.target.value),required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{htmlFor:"email",children:"Email"}),(0,n.jsx)(l.I,{id:"email",type:"email",placeholder:"your@email.com",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{htmlFor:"password",children:"Password"}),(0,n.jsx)(l.I,{id:"password",type:"password",placeholder:"••••••••",value:r,onChange:e=>x(e.target.value),required:!0,minLength:6})]})]}),(0,n.jsxs)(i.eW,{className:"flex flex-col space-y-4",children:[(0,n.jsx)(s.z,{type:"submit",className:"w-full bg-gradient-to-r from-rose-500 to-purple-600",disabled:b||j,children:b?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,n.jsx)("span",{className:"w-full border-t"})}),(0,n.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,n.jsx)("span",{className:"bg-white px-2 text-muted-foreground",children:"Or continue with"})})]}),(0,n.jsx)(s.z,{type:"button",variant:"outline",className:"w-full",onClick:S,disabled:b||j,children:j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Connecting to Google..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),(0,n.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),(0,n.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),(0,n.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})}),(0,n.jsxs)("p",{className:"text-sm text-center text-gray-600",children:["Already have an account?"," ",(0,n.jsx)(m.default,{href:"/login",className:"text-rose-500 hover:underline font-medium",children:"Sign in"})]})]})]})]})]})})}},11980:function(e,t,r){"use strict";r.d(t,{X:function(){return d},bZ:function(){return i}});var n=r(57437),o=r(2265),a=r(13027),s=r(77700);let l=(0,a.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=o.forwardRef((e,t)=>{let{className:r,variant:o,...a}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,s.cn)(l({variant:o}),r),...a})});i.displayName="Alert",o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("h5",{ref:t,className:(0,s.cn)("mb-1 font-medium leading-none tracking-tight",r),...o})}).displayName="AlertTitle";let d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-sm [&_p]:leading-relaxed",r),...o})});d.displayName="AlertDescription"},56360:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var n=r(57437),o=r(2265),a=r(71538),s=r(13027),l=r(77700);let i=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,t)=>{let{className:r,variant:o,size:s,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(i({variant:o,size:s,className:r})),ref:t,...c})});d.displayName="Button"},10273:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return s},aY:function(){return c},eW:function(){return u},ll:function(){return i}});var n=r(57437),o=r(2265),a=r(77700);let s=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...o})});s.displayName="Card";let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...o})});l.displayName="CardHeader";let i=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...o})});i.displayName="CardTitle";let d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...o})});d.displayName="CardDescription";let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...o})});c.displayName="CardContent";let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...o})});u.displayName="CardFooter"},92404:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(57437),o=r(2265),a=r(77700);let s=o.forwardRef((e,t)=>{let{className:r,type:o,...s}=e;return(0,n.jsx)("input",{type:o,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});s.displayName="Input"},10464:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var n=r(57437),o=r(2265),a=r(38837),s=r(13027),l=r(77700);let i=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,l.cn)(i(),r),...o})});d.displayName=a.f.displayName},6657:function(e,t,r){"use strict";r.r(t);var n=r(38472),o=r(78614);(0,o.ww)(),console.log("API Base URL:",(0,o.bR)());let a=n.Z.create({baseURL:(0,o.bR)(),headers:{"Content-Type":"application/json"},timeout:o.ZP.API.TIMEOUT});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),a.interceptors.response.use(e=>e,async e=>{var t,r,n,s,l,i,d;let c=e.config;if(console.error("API Error:",e),"ECONNABORTED"===e.code||"Network Error"===e.message){if(c.__retryCount||(c.__retryCount=0),c.__retryCount<o.ZP.API.RETRY_ATTEMPTS)return c.__retryCount+=1,console.warn("Retrying request (".concat(c.__retryCount,"/").concat(o.ZP.API.RETRY_ATTEMPTS,")...")),await new Promise(e=>setTimeout(e,o.ZP.API.RETRY_DELAY*c.__retryCount)),a(c);console.error("Request timeout after retries - API might be down")}if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&(console.error("❌ Authentication failed - token expired or invalid"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(s=window.toast)||void 0===s||s.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true"),(null===(r=e.response)||void 0===r?void 0:r.status)===403){console.error("❌ Access forbidden - you may not have permission or your session expired");let t=(null===(i=e.response)||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:l.detail)||"";(t.toLowerCase().includes("not authorized")||t.toLowerCase().includes("permission"))&&(console.warn("⚠️ Token may be expired - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(d=window.toast)||void 0===d||d.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true")}return(null===(n=e.response)||void 0===n?void 0:n.status)===404&&console.error("Resource not found - check API endpoint"),Promise.reject(e)}),t.default=a},15730:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return d}});var n=r(57437),o=r(2265),a=r(6657);let s=(0,o.createContext)({});function l(e){if(!e)return!0;let t=function(e){try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch(e){return console.error("Failed to decode JWT:",e),null}}(e);return!t||!t.exp||1e3*t.exp-Date.now()<3e5}let i=e=>{let{children:t}=e,[r,i]=(0,o.useState)(null),[d,c]=(0,o.useState)(null),[u,f]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&(l(e)?(console.warn("⚠️ JWT token expired - clearing auth state"),localStorage.removeItem("token"),localStorage.removeItem("user"),c(null),i(null)):(c(e),i(JSON.parse(t)))),f(!1)},[]);let m=async(e,t)=>{let{access_token:r,user:n}=(await a.default.post("/api/auth/login",{email:e,password:t})).data;return localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(n)),c(r),i(n),n},p=async(e,t,r)=>{let{access_token:n,user:o}=(await a.default.post("/api/auth/register",{email:e,password:t,full_name:r})).data;return localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify(o)),c(n),i(o),o},g=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),c(null),i(null),window.location.href="/"},v=async()=>{try{let e=(await a.default.get("/api/auth/me")).data;return localStorage.setItem("user",JSON.stringify(e)),i(e),e}catch(t){var e;return console.error("Failed to refresh user data:",t),(null===(e=t.response)||void 0===e?void 0:e.status)===401&&(console.error("❌ Token invalid - logging out"),g()),null}};return(0,o.useEffect)(()=>{if(!d)return;let e=setInterval(()=>{l(d)&&(console.warn("⚠️ JWT token expired - logging out"),g())},6e4);return()=>clearInterval(e)},[d]),(0,n.jsx)(s.Provider,{value:{user:r,token:d,setToken:c,setUser:i,login:m,register:p,logout:g,refreshUser:v,loading:u,isTokenExpired:()=>l(d)},children:t})},d=()=>(0,o.useContext)(s)},78614:function(e,t,r){"use strict";r.d(t,{bR:function(){return s},ww:function(){return l}});var n=r(20357);let o=()=>{{let e=window.location.hostname;return e.includes("vercel.app")||e.includes("wedlive.vercel.app")}},a={API:{BASE_URL:(()=>{let e=n.env.NEXT_PUBLIC_BACKEND_URL||n.env.REACT_APP_BACKEND_URL||n.env.NEXT_PUBLIC_API_URL;if(e)return e;{let e=window.location.hostname;if(e.includes("emergentagent.com")||e.includes("preview.emergentagent.com"))return window.location.origin;if(e.includes("vercel.app")||e.includes("wedlive.vercel.app"))return"https://wedlive.onrender.com";e.includes("localhost")||e.includes("127.0.0.1")}return"http://localhost:8001"})(),TIMEOUT:3e5,RETRY_ATTEMPTS:2,RETRY_DELAY:1e3},MEDIA:{PROXY_ENDPOINT:"/api/media/telegram-proxy/photos/",SUPPORTED_FORMATS:["jpg","jpeg","png","webp"],MAX_FILE_SIZE:10485760},IMAGE:{MAX_RETRIES:2,RETRY_DELAY:1e3,FALLBACK_TIMEOUT:5e3,LOADING_PLACEHOLDER:"/images/placeholder.jpg"}},s=()=>a.API.BASE_URL,l=()=>{let e=s(),t=e.includes("localhost"),r=o();return console.log("\uD83D\uDD27 Configuration Validation:",{apiBaseUrl:e,environment:r?"production":"development",isLocal:t,mediaProxy:a.MEDIA.PROXY_ENDPOINT}),r&&t&&(console.error("❌ ERROR: Production frontend using localhost backend URL!"),console.error("Update NEXT_PUBLIC_API_URL in Vercel environment variables to: https://wedlive.onrender.com")),e.includes("8000")&&console.warn("⚠️ WARNING: API base URL is using port 8000, expected 8001 for local or 443 for production"),!0};t.ZP=a},77700:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(44839),o=r(96164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}},64042:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(78030).Z)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3274:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(78030).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},38837:function(e,t,r){"use strict";r.d(t,{f:function(){return i}});var n=r(2265);r(54887);var o=r(71538),a=r(57437),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,o.Z8)(`Primitive.${t}`),s=n.forwardRef((e,n)=>{let{asChild:o,...s}=e,l=o?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(l,{...s,ref:n})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),l=n.forwardRef((e,t)=>(0,a.jsx)(s.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var i=l}},function(e){e.O(0,[9767,4868,7776,7515,2971,7023,1744],function(){return e(e.s=57059)}),_N_E=e.O()}]);