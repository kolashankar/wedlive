(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7478,6657],{5614:function(e,t,r){Promise.resolve().then(r.bind(r,68875))},68875:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(57437),s=r(2265),o=r(16463),a=r(56360),i=r(10273),l=r(3274),c=r(92940),d=r(33907),u=r(87138),m=r(15730);function f(){(0,o.useRouter)();let e=(0,o.useSearchParams)(),{user:t,refreshUser:r}=(0,m.a)(),[f,p]=(0,s.useState)(!0),h=e.get("session_id");return(0,s.useEffect)(()=>{let e=setTimeout(async()=>{r&&await r(),p(!1)},2e3);return()=>clearTimeout(e)},[r]),(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center p-4",children:(0,n.jsxs)(i.Zb,{className:"max-w-2xl w-full text-center",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)("div",{className:"mx-auto mb-6",children:f?(0,n.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-r from-rose-500 to-purple-600 flex items-center justify-center",children:(0,n.jsx)(l.Z,{className:"w-10 h-10 text-white animate-spin"})}):(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-r from-green-400 to-emerald-600 flex items-center justify-center animate-bounce",children:(0,n.jsx)(c.Z,{className:"w-10 h-10 text-white"})}),(0,n.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,n.jsx)(d.Z,{className:"w-8 h-8 text-yellow-400 animate-pulse"})})]})}),(0,n.jsx)(i.ll,{className:"text-3xl font-bold mb-2",children:f?"Processing Your Payment...":"\uD83C\uDF89 Payment Successful!"}),(0,n.jsx)(i.SZ,{className:"text-lg",children:f?"Please wait while we activate your premium subscription":"Welcome to WedLive Premium! Your account has been upgraded."})]}),(0,n.jsx)(i.aY,{className:"space-y-6",children:!f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"bg-gradient-to-r from-rose-50 to-purple-50 rounded-lg p-6",children:[(0,n.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"You now have access to:"}),(0,n.jsxs)("ul",{className:"text-left space-y-2 max-w-md mx-auto",children:[(0,n.jsxs)("li",{className:"flex items-start",children:[(0,n.jsx)(c.Z,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),(0,n.jsx)("span",{children:"Unlimited wedding events"})]}),(0,n.jsxs)("li",{className:"flex items-start",children:[(0,n.jsx)(c.Z,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),(0,n.jsx)("span",{children:"Unlimited viewers"})]}),(0,n.jsxs)("li",{className:"flex items-start",children:[(0,n.jsx)(c.Z,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),(0,n.jsx)("span",{children:"Unlimited recording storage"})]}),(0,n.jsxs)("li",{className:"flex items-start",children:[(0,n.jsx)(c.Z,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),(0,n.jsx)("span",{children:"HD streaming quality"})]}),(0,n.jsxs)("li",{className:"flex items-start",children:[(0,n.jsx)(c.Z,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),(0,n.jsx)("span",{children:"Priority support"})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,n.jsx)(u.default,{href:"/dashboard",children:(0,n.jsx)(a.z,{size:"lg",className:"bg-gradient-to-r from-rose-500 to-purple-600 text-white hover:opacity-90","data-testid":"go-to-dashboard-button",children:"Go to Dashboard"})}),(0,n.jsx)(u.default,{href:"/weddings",children:(0,n.jsx)(a.z,{size:"lg",variant:"outline","data-testid":"browse-weddings-button",children:"Browse Live Weddings"})})]}),h&&(0,n.jsxs)("p",{className:"text-sm text-gray-500 mt-4",children:["Session ID: ",h]})]})})]})})}function p(){return(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,n.jsx)(l.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}),children:(0,n.jsx)(f,{})})}},56360:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(57437),s=r(2265),o=r(71538),a=r(13027),i=r(77700);let l=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:a,asChild:c=!1,...d}=e,u=c?o.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:s,size:a,className:r})),ref:t,...d})});c.displayName="Button"},10273:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return a},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var n=r(57437),s=r(2265),o=r(77700);let a=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});a.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},6657:function(e,t,r){"use strict";r.r(t);var n=r(38472),s=r(78614);(0,s.ww)(),console.log("API Base URL:",(0,s.bR)());let o=n.Z.create({baseURL:(0,s.bR)(),headers:{"Content-Type":"application/json"},timeout:s.ZP.API.TIMEOUT});o.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),o.interceptors.response.use(e=>e,async e=>{var t,r,n,a,i,l,c;let d=e.config;if(console.error("API Error:",e),"ECONNABORTED"===e.code||"Network Error"===e.message){if(d.__retryCount||(d.__retryCount=0),d.__retryCount<s.ZP.API.RETRY_ATTEMPTS)return d.__retryCount+=1,console.warn("Retrying request (".concat(d.__retryCount,"/").concat(s.ZP.API.RETRY_ATTEMPTS,")...")),await new Promise(e=>setTimeout(e,s.ZP.API.RETRY_DELAY*d.__retryCount)),o(d);console.error("Request timeout after retries - API might be down")}if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&(console.error("❌ Authentication failed - token expired or invalid"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(a=window.toast)||void 0===a||a.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true"),(null===(r=e.response)||void 0===r?void 0:r.status)===403){console.error("❌ Access forbidden - you may not have permission or your session expired");let t=(null===(l=e.response)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.detail)||"";(t.toLowerCase().includes("not authorized")||t.toLowerCase().includes("permission"))&&(console.warn("⚠️ Token may be expired - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(c=window.toast)||void 0===c||c.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true")}return(null===(n=e.response)||void 0===n?void 0:n.status)===404&&console.error("Resource not found - check API endpoint"),Promise.reject(e)}),t.default=o},15730:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},a:function(){return c}});var n=r(57437),s=r(2265),o=r(6657);let a=(0,s.createContext)({});function i(e){if(!e)return!0;let t=function(e){try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch(e){return console.error("Failed to decode JWT:",e),null}}(e);return!t||!t.exp||1e3*t.exp-Date.now()<3e5}let l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&(i(e)?(console.warn("⚠️ JWT token expired - clearing auth state"),localStorage.removeItem("token"),localStorage.removeItem("user"),d(null),l(null)):(d(e),l(JSON.parse(t)))),m(!1)},[]);let f=async(e,t)=>{let{access_token:r,user:n}=(await o.default.post("/api/auth/login",{email:e,password:t})).data;return localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(n)),d(r),l(n),n},p=async(e,t,r)=>{let{access_token:n,user:s}=(await o.default.post("/api/auth/register",{email:e,password:t,full_name:r})).data;return localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify(s)),d(n),l(s),s},h=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),d(null),l(null),window.location.href="/"},g=async()=>{try{let e=(await o.default.get("/api/auth/me")).data;return localStorage.setItem("user",JSON.stringify(e)),l(e),e}catch(t){var e;return console.error("Failed to refresh user data:",t),(null===(e=t.response)||void 0===e?void 0:e.status)===401&&(console.error("❌ Token invalid - logging out"),h()),null}};return(0,s.useEffect)(()=>{if(!c)return;let e=setInterval(()=>{i(c)&&(console.warn("⚠️ JWT token expired - logging out"),h())},6e4);return()=>clearInterval(e)},[c]),(0,n.jsx)(a.Provider,{value:{user:r,token:c,setToken:d,setUser:l,login:f,register:p,logout:h,refreshUser:g,loading:u,isTokenExpired:()=>i(c)},children:t})},c=()=>(0,s.useContext)(a)},78614:function(e,t,r){"use strict";r.d(t,{bR:function(){return a},ww:function(){return i}});var n=r(20357);let s=()=>{{let e=window.location.hostname;return e.includes("vercel.app")||e.includes("wedlive.vercel.app")}},o={API:{BASE_URL:(()=>{let e=n.env.NEXT_PUBLIC_BACKEND_URL||n.env.REACT_APP_BACKEND_URL||n.env.NEXT_PUBLIC_API_URL;if(e)return e;{let e=window.location.hostname;if(e.includes("emergentagent.com")||e.includes("preview.emergentagent.com"))return window.location.origin;if(e.includes("vercel.app")||e.includes("wedlive.vercel.app"))return"https://wedlive.onrender.com";e.includes("localhost")||e.includes("127.0.0.1")}return"http://localhost:8001"})(),TIMEOUT:3e5,RETRY_ATTEMPTS:2,RETRY_DELAY:1e3},MEDIA:{PROXY_ENDPOINT:"/api/media/telegram-proxy/photos/",SUPPORTED_FORMATS:["jpg","jpeg","png","webp"],MAX_FILE_SIZE:10485760},IMAGE:{MAX_RETRIES:2,RETRY_DELAY:1e3,FALLBACK_TIMEOUT:5e3,LOADING_PLACEHOLDER:"/images/placeholder.jpg"}},a=()=>o.API.BASE_URL,i=()=>{let e=a(),t=e.includes("localhost"),r=s();return console.log("\uD83D\uDD27 Configuration Validation:",{apiBaseUrl:e,environment:r?"production":"development",isLocal:t,mediaProxy:o.MEDIA.PROXY_ENDPOINT}),r&&t&&(console.error("❌ ERROR: Production frontend using localhost backend URL!"),console.error("Update NEXT_PUBLIC_API_URL in Vercel environment variables to: https://wedlive.onrender.com")),e.includes("8000")&&console.warn("⚠️ WARNING: API base URL is using port 8000, expected 8001 for local or 443 for production"),!0};t.ZP=o},77700:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var n=r(44839),s=r(96164);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},92940:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(78030).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3274:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(78030).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},33907:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(78030).Z)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])}},function(e){e.O(0,[9767,4868,7515,2971,7023,1744],function(){return e(e.s=5614)}),_N_E=e.O()}]);