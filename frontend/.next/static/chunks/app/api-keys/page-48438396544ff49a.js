(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6965],{47132:function(e,t,s){Promise.resolve().then(s.bind(s,18674))},18674:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(57437),r=s(2265),n=s(16463),l=s(38472),i=s(27776),c=s(25489),o=s(92513),d=s(10883);let x=(0,s(78030).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);var m=s(76780),u=s(92940),h=s(6884);let g=(0,s(78614).bR)();function p(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(null),[p,y]=(0,r.useState)([]),[b,j]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[N,k]=(0,r.useState)(""),[w,A]=(0,r.useState)(null),[_,I]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!localStorage.getItem("token")){e.push("/login");return}P(),E(),R()},[]);let P=async()=>{try{let t=localStorage.getItem("token"),a=await l.Z.get("".concat(g,"/auth/me"),{headers:{Authorization:"Bearer ".concat(t)}});s(a.data),"free"===a.data.subscription_plan&&(i.toast.error("Premium subscription required"),e.push("/pricing"))}catch(t){console.error("Failed to fetch user data:",t),e.push("/login")}},E=async()=>{try{let e=localStorage.getItem("token"),t=await l.Z.get("".concat(g,"/premium/api-keys"),{headers:{Authorization:"Bearer ".concat(e)}});y(t.data.api_keys||[])}catch(e){console.error("Failed to fetch API keys:",e)}},R=async()=>{try{let e=localStorage.getItem("token"),t=await l.Z.get("".concat(g,"/premium/api-docs"),{headers:{Authorization:"Bearer ".concat(e)}});I(t.data)}catch(e){console.error("Failed to fetch API docs:",e)}},C=async()=>{if(!N.trim()){i.toast.error("Please enter a key name");return}j(!0);try{let e=localStorage.getItem("token"),t=await l.Z.post("".concat(g,"/premium/api-keys?name=").concat(encodeURIComponent(N)),{},{headers:{Authorization:"Bearer ".concat(e)}});A(t.data.api_key),i.toast.success("API key created successfully!"),E(),k("")}catch(s){var e,t;i.toast.error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Failed to create API key")}finally{j(!1)}},Z=async e=>{if(confirm("Are you sure you want to revoke this API key? This action cannot be undone."))try{let t=localStorage.getItem("token");await l.Z.delete("".concat(g,"/premium/api-keys/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),i.toast.success("API key revoked successfully"),E()}catch(e){var t,s;i.toast.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.detail)||"Failed to revoke API key")}},L=e=>{navigator.clipboard.writeText(e),i.toast.success("Copied to clipboard!")};return t?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)(c.Z,{className:"w-8 h-8 text-indigo-600"}),"API Keys"]}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage your API keys for programmatic access"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>e.push("/settings"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Back to Settings"}),(0,a.jsxs)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Create API Key"]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Your API Keys"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"You can have up to 5 active API keys"})]}),0===p.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No API keys yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first API key to get started"}),(0,a.jsx)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Create API Key"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:p.map(e=>(0,a.jsx)("div",{className:"p-6 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsx)("span",{className:"font-mono bg-gray-100 px-3 py-1 rounded",children:e.key_prefix}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})]}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),(0,a.jsx)("span",{className:"mx-2",children:"•"}),(0,a.jsxs)("span",{children:["Requests: ",e.request_count]}),e.last_used&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mx-2",children:"•"}),(0,a.jsxs)("span",{children:["Last used: ",new Date(e.last_used).toLocaleDateString()]})]})]})]}),(0,a.jsx)("button",{onClick:()=>Z(e.id),className:"ml-4 p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Revoke key",children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})})]})},e.id))})]}),_&&(0,a.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(x,{className:"w-6 h-6 text-indigo-600"}),"API Documentation"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Authentication"}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:_.authentication.description}),(0,a.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm",children:[(0,a.jsxs)("div",{children:["curl ",_.base_url,"/weddings \\"]}),(0,a.jsx)("div",{className:"ml-4",children:'-H "X-API-Key: your_api_key_here"'})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Endpoints"}),(0,a.jsx)("div",{className:"space-y-2",children:_.endpoints.map((e,t)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat("GET"===e.method?"bg-blue-100 text-blue-800":"POST"===e.method?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"),children:e.method}),(0,a.jsx)("span",{className:"font-mono text-sm",children:e.path})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Rate Limits"}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:_.rate_limits.requests_per_minute})," requests per minute"]}),(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:_.rate_limits.requests_per_day})," requests per day"]})]})]})})]})]})]})]}),f&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(u.Z,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"API Key Created!"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Save this key securely. You won't be able to see it again."})]}),(0,a.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm break-all mb-4",children:w}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>L(w),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center justify-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Copy"]}),(0,a.jsx)("button",{onClick:()=>{v(!1),A(null)},className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Done"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Create API Key"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Key Name"}),(0,a.jsx)("input",{type:"text",value:N,onChange:e=>k(e.target.value),placeholder:"e.g., Production API, Mobile App",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",autoFocus:!0})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{v(!1),k("")},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,a.jsx)("button",{onClick:C,disabled:b||!N.trim(),className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:b?"Creating...":"Create"})]})]})]})})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}},78614:function(e,t,s){"use strict";s.d(t,{bR:function(){return l},ww:function(){return i}});var a=s(20357);let r=()=>{{let e=window.location.hostname;return e.includes("vercel.app")||e.includes("wedlive.vercel.app")}},n={API:{BASE_URL:(()=>{let e=a.env.NEXT_PUBLIC_BACKEND_URL||a.env.REACT_APP_BACKEND_URL||a.env.NEXT_PUBLIC_API_URL;if(e)return e;{let e=window.location.hostname;if(e.includes("emergentagent.com")||e.includes("preview.emergentagent.com"))return window.location.origin;if(e.includes("vercel.app")||e.includes("wedlive.vercel.app"))return"https://wedlive.onrender.com";e.includes("localhost")||e.includes("127.0.0.1")}return"http://localhost:8001"})(),TIMEOUT:3e5,RETRY_ATTEMPTS:2,RETRY_DELAY:1e3},MEDIA:{PROXY_ENDPOINT:"/api/media/telegram-proxy/photos/",SUPPORTED_FORMATS:["jpg","jpeg","png","webp"],MAX_FILE_SIZE:10485760},IMAGE:{MAX_RETRIES:2,RETRY_DELAY:1e3,FALLBACK_TIMEOUT:5e3,LOADING_PLACEHOLDER:"/images/placeholder.jpg"}},l=()=>n.API.BASE_URL,i=()=>{let e=l(),t=e.includes("localhost"),s=r();return console.log("\uD83D\uDD27 Configuration Validation:",{apiBaseUrl:e,environment:s?"production":"development",isLocal:t,mediaProxy:n.MEDIA.PROXY_ENDPOINT}),s&&t&&(console.error("❌ ERROR: Production frontend using localhost backend URL!"),console.error("Update NEXT_PUBLIC_API_URL in Vercel environment variables to: https://wedlive.onrender.com")),e.includes("8000")&&console.warn("⚠️ WARNING: API base URL is using port 8000, expected 8001 for local or 443 for production"),!0};t.ZP=n},76780:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},92940:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6884:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},25489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},92513:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},10883:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(78030).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[9767,7776,2971,7023,1744],function(){return e(e.s=47132)}),_N_E=e.O()}]);