(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532,6657],{68135:function(e,t,r){Promise.resolve().then(r.bind(r,70590))},70590:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(57437),o=r(2265),s=r(16463),i=r(56360),a=r(92404),l=r(10273),d=r(64042),c=r(68954),u=r(3274),m=r(71976),p=r(27776),x=r(6657),f=r(87138);function h(){let e=(0,s.useRouter)(),[t,r]=(0,o.useState)(""),[h,g]=(0,o.useState)(!1),v=async r=>{if(r.preventDefault(),!t||6!==t.length){p.toast.error("Please enter a valid 6-digit wedding code");return}g(!0);try{let{wedding_id:r,title:n,bride_name:o,groom_name:s}=(await x.default.post("/api/viewer/join",{wedding_code:t})).data;p.toast.success("Welcome to ".concat(o," & ").concat(s,"'s wedding!")),e.push("/view/".concat(r))}catch(e){var n;console.error("Error joining wedding:",e),(null===(n=e.response)||void 0===n?void 0:n.status)===404?p.toast.error("Wedding not found. Please check the code and try again."):p.toast.error("Failed to join wedding. Please try again.")}finally{g(!1)}};return(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50",children:[(0,n.jsx)("header",{className:"border-b bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[(0,n.jsxs)(f.default,{href:"/",className:"flex items-center space-x-2",children:[(0,n.jsx)(d.Z,{className:"w-6 h-6 text-pink-500 fill-pink-500"}),(0,n.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"WedLive"})]}),(0,n.jsx)(f.default,{href:"/login",children:(0,n.jsx)(i.z,{variant:"outline",children:"Sign In"})})]})}),(0,n.jsx)("main",{className:"container mx-auto px-4 py-12 md:py-24",children:(0,n.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-pink-500 to-purple-600 rounded-full mb-6 shadow-lg",children:(0,n.jsx)(c.Z,{className:"w-10 h-10 text-white"})}),(0,n.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"Join a Wedding"}),(0,n.jsx)("p",{className:"text-gray-600 text-lg",children:"Enter the 6-digit wedding code to watch the live ceremony"})]}),(0,n.jsxs)(l.Zb,{className:"shadow-2xl border-0 bg-white/80 backdrop-blur-sm",children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{className:"text-2xl text-center",children:"Enter Wedding Code"}),(0,n.jsx)(l.SZ,{className:"text-center",children:"The code was shared by the wedding host"})]}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(a.I,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"123456",value:t,onChange:e=>{r(e.target.value.replace(/[^0-9]/g,"").slice(0,6))},maxLength:6,className:"text-center text-3xl font-bold tracking-widest h-16",disabled:h}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 text-center mt-2",children:[t.length,"/6 digits"]})]}),(0,n.jsx)(i.z,{type:"submit",className:"w-full h-12 text-lg bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700",disabled:h||6!==t.length,children:h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{className:"w-5 h-5 mr-2 animate-spin"}),"Joining..."]}):(0,n.jsxs)(n.Fragment,{children:["Join Wedding",(0,n.jsx)(m.Z,{className:"w-5 h-5 ml-2"})]})})]})})]}),(0,n.jsxs)("div",{className:"mt-8 text-center space-y-4",children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Don't have a wedding code?"}),(0,n.jsx)(f.default,{href:"/weddings",children:(0,n.jsx)(i.z,{variant:"ghost",className:"text-pink-600 hover:text-pink-700",children:"Browse Public Weddings"})})]}),(0,n.jsxs)("div",{className:"mt-12 grid grid-cols-3 gap-4 text-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDCFA"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"HD Streaming"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDCF8"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Photos & Videos"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-3xl mb-2",children:"\uD83C\uDFA5"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Recordings"})]})]})]})})]})}},56360:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var n=r(57437),o=r(2265),s=r(71538),i=r(13027),a=r(77700);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,t)=>{let{className:r,variant:o,size:i,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,n.jsx)(u,{className:(0,a.cn)(l({variant:o,size:i,className:r})),ref:t,...c})});d.displayName="Button"},10273:function(e,t,r){"use strict";r.d(t,{Ol:function(){return a},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var n=r(57437),o=r(2265),s=r(77700);let i=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...o})});i.displayName="Card";let a=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...o})});a.displayName="CardHeader";let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("font-semibold leading-none tracking-tight",r),...o})});l.displayName="CardTitle";let d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...o})});d.displayName="CardDescription";let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...o})});c.displayName="CardContent";let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...o})});u.displayName="CardFooter"},92404:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(57437),o=r(2265),s=r(77700);let i=o.forwardRef((e,t)=>{let{className:r,type:o,...i}=e;return(0,n.jsx)("input",{type:o,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},6657:function(e,t,r){"use strict";r.r(t);var n=r(38472),o=r(78614);(0,o.ww)(),console.log("API Base URL:",(0,o.bR)());let s=n.Z.create({baseURL:(0,o.bR)(),headers:{"Content-Type":"application/json"},timeout:o.ZP.API.TIMEOUT});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),s.interceptors.response.use(e=>e,async e=>{var t,r,n,i,a,l,d;let c=e.config;if(console.error("API Error:",e),"ECONNABORTED"===e.code||"Network Error"===e.message){if(c.__retryCount||(c.__retryCount=0),c.__retryCount<o.ZP.API.RETRY_ATTEMPTS)return c.__retryCount+=1,console.warn("Retrying request (".concat(c.__retryCount,"/").concat(o.ZP.API.RETRY_ATTEMPTS,")...")),await new Promise(e=>setTimeout(e,o.ZP.API.RETRY_DELAY*c.__retryCount)),s(c);console.error("Request timeout after retries - API might be down")}if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&(console.error("❌ Authentication failed - token expired or invalid"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(i=window.toast)||void 0===i||i.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true"),(null===(r=e.response)||void 0===r?void 0:r.status)===403){console.error("❌ Access forbidden - you may not have permission or your session expired");let t=(null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.detail)||"";(t.toLowerCase().includes("not authorized")||t.toLowerCase().includes("permission"))&&(console.warn("⚠️ Token may be expired - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(d=window.toast)||void 0===d||d.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true")}return(null===(n=e.response)||void 0===n?void 0:n.status)===404&&console.error("Resource not found - check API endpoint"),Promise.reject(e)}),t.default=s},78614:function(e,t,r){"use strict";r.d(t,{bR:function(){return i},ww:function(){return a}});var n=r(20357);let o=()=>{{let e=window.location.hostname;return e.includes("vercel.app")||e.includes("wedlive.vercel.app")}},s={API:{BASE_URL:(()=>{let e=n.env.NEXT_PUBLIC_BACKEND_URL||n.env.REACT_APP_BACKEND_URL||n.env.NEXT_PUBLIC_API_URL;if(e)return e;{let e=window.location.hostname;if(e.includes("emergentagent.com")||e.includes("preview.emergentagent.com"))return window.location.origin;if(e.includes("vercel.app")||e.includes("wedlive.vercel.app"))return"https://wedlive.onrender.com";e.includes("localhost")||e.includes("127.0.0.1")}return"http://localhost:8001"})(),TIMEOUT:3e5,RETRY_ATTEMPTS:2,RETRY_DELAY:1e3},MEDIA:{PROXY_ENDPOINT:"/api/media/telegram-proxy/photos/",SUPPORTED_FORMATS:["jpg","jpeg","png","webp"],MAX_FILE_SIZE:10485760},IMAGE:{MAX_RETRIES:2,RETRY_DELAY:1e3,FALLBACK_TIMEOUT:5e3,LOADING_PLACEHOLDER:"/images/placeholder.jpg"}},i=()=>s.API.BASE_URL,a=()=>{let e=i(),t=e.includes("localhost"),r=o();return console.log("\uD83D\uDD27 Configuration Validation:",{apiBaseUrl:e,environment:r?"production":"development",isLocal:t,mediaProxy:s.MEDIA.PROXY_ENDPOINT}),r&&t&&(console.error("❌ ERROR: Production frontend using localhost backend URL!"),console.error("Update NEXT_PUBLIC_API_URL in Vercel environment variables to: https://wedlive.onrender.com")),e.includes("8000")&&console.warn("⚠️ WARNING: API base URL is using port 8000, expected 8001 for local or 443 for production"),!0};t.ZP=s},77700:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(44839),o=r(96164);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}},71976:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(78030).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},64042:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(78030).Z)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3274:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(78030).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},68954:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(78030).Z)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])}},function(e){e.O(0,[9767,4868,7776,7515,2971,7023,1744],function(){return e(e.s=68135)}),_N_E=e.O()}]);