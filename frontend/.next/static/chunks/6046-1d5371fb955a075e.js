"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6046,6657],{79004:function(e,t,r){r.d(t,{C:function(){return i}});var o=r(57437);r(2265);var n=r(13027),a=r(77700);let s=(0,n.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...n}=e;return(0,o.jsx)("div",{className:(0,a.cn)(s({variant:r}),t),...n})}},56360:function(e,t,r){r.d(t,{z:function(){return d}});var o=r(57437),n=r(2265),a=r(71538),s=r(13027),i=r(77700);let l=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:s,asChild:d=!1,...u}=e,c=d?a.g7:"button";return(0,o.jsx)(c,{className:(0,i.cn)(l({variant:n,size:s,className:r})),ref:t,...u})});d.displayName="Button"},10273:function(e,t,r){r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return s},aY:function(){return u},eW:function(){return c},ll:function(){return l}});var o=r(57437),n=r(2265),a=r(77700);let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...n})});s.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});i.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});u.displayName="CardContent";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});c.displayName="CardFooter"},68639:function(e,t,r){r.d(t,{$N:function(){return m},Be:function(){return v},Vq:function(){return l},cN:function(){return g},cZ:function(){return f},fK:function(){return p},hg:function(){return d}});var o=r(57437),n=r(2265),a=r(32226),s=r(74697),i=r(77700);let l=a.fC,d=a.xz,u=a.h_;a.x8;let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})});c.displayName=a.aV.displayName;let f=n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,o.jsxs)(u,{children:[(0,o.jsx)(c,{}),(0,o.jsxs)(a.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[n,(0,o.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,o.jsx)(s.Z,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=a.VY.displayName;let p=e=>{let{className:t,...r}=e;return(0,o.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};p.displayName="DialogHeader";let g=e=>{let{className:t,...r}=e;return(0,o.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};g.displayName="DialogFooter";let m=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});m.displayName=a.Dx.displayName;let v=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...n})});v.displayName=a.dk.displayName},6657:function(e,t,r){r.r(t);var o=r(38472),n=r(78614);(0,n.ww)(),console.log("API Base URL:",(0,n.bR)());let a=o.Z.create({baseURL:(0,n.bR)(),headers:{"Content-Type":"application/json"},timeout:n.ZP.API.TIMEOUT});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),a.interceptors.response.use(e=>e,async e=>{var t,r,o,s,i,l,d;let u=e.config;if(console.error("API Error:",e),"ECONNABORTED"===e.code||"Network Error"===e.message){if(u.__retryCount||(u.__retryCount=0),u.__retryCount<n.ZP.API.RETRY_ATTEMPTS)return u.__retryCount+=1,console.warn("Retrying request (".concat(u.__retryCount,"/").concat(n.ZP.API.RETRY_ATTEMPTS,")...")),await new Promise(e=>setTimeout(e,n.ZP.API.RETRY_DELAY*u.__retryCount)),a(u);console.error("Request timeout after retries - API might be down")}if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&(console.error("❌ Authentication failed - token expired or invalid"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(s=window.toast)||void 0===s||s.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true"),(null===(r=e.response)||void 0===r?void 0:r.status)===403){console.error("❌ Access forbidden - you may not have permission or your session expired");let t=(null===(l=e.response)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.detail)||"";(t.toLowerCase().includes("not authorized")||t.toLowerCase().includes("permission"))&&(console.warn("⚠️ Token may be expired - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),void 0!==window.toast&&(null===(d=window.toast)||void 0===d||d.error("Your session has expired. Please log in again.")),window.location.href="/login?expired=true")}return(null===(o=e.response)||void 0===o?void 0:o.status)===404&&console.error("Resource not found - check API endpoint"),Promise.reject(e)}),t.default=a},15730:function(e,t,r){r.d(t,{AuthProvider:function(){return l},a:function(){return d}});var o=r(57437),n=r(2265),a=r(6657);let s=(0,n.createContext)({});function i(e){if(!e)return!0;let t=function(e){try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch(e){return console.error("Failed to decode JWT:",e),null}}(e);return!t||!t.exp||1e3*t.exp-Date.now()<3e5}let l=e=>{let{children:t}=e,[r,l]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[c,f]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&(i(e)?(console.warn("⚠️ JWT token expired - clearing auth state"),localStorage.removeItem("token"),localStorage.removeItem("user"),u(null),l(null)):(u(e),l(JSON.parse(t)))),f(!1)},[]);let p=async(e,t)=>{let{access_token:r,user:o}=(await a.default.post("/api/auth/login",{email:e,password:t})).data;return localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(o)),u(r),l(o),o},g=async(e,t,r)=>{let{access_token:o,user:n}=(await a.default.post("/api/auth/register",{email:e,password:t,full_name:r})).data;return localStorage.setItem("token",o),localStorage.setItem("user",JSON.stringify(n)),u(o),l(n),n},m=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),u(null),l(null),window.location.href="/"},v=async()=>{try{let e=(await a.default.get("/api/auth/me")).data;return localStorage.setItem("user",JSON.stringify(e)),l(e),e}catch(t){var e;return console.error("Failed to refresh user data:",t),(null===(e=t.response)||void 0===e?void 0:e.status)===401&&(console.error("❌ Token invalid - logging out"),m()),null}};return(0,n.useEffect)(()=>{if(!d)return;let e=setInterval(()=>{i(d)&&(console.warn("⚠️ JWT token expired - logging out"),m())},6e4);return()=>clearInterval(e)},[d]),(0,o.jsx)(s.Provider,{value:{user:r,token:d,setToken:u,setUser:l,login:p,register:g,logout:m,refreshUser:v,loading:c,isTokenExpired:()=>i(d)},children:t})},d=()=>(0,n.useContext)(s)},78614:function(e,t,r){r.d(t,{bR:function(){return s},ww:function(){return i}});var o=r(20357);let n=()=>{{let e=window.location.hostname;return e.includes("vercel.app")||e.includes("wedlive.vercel.app")}},a={API:{BASE_URL:(()=>{let e=o.env.NEXT_PUBLIC_BACKEND_URL||o.env.REACT_APP_BACKEND_URL||o.env.NEXT_PUBLIC_API_URL;if(e)return e;{let e=window.location.hostname;if(e.includes("emergentagent.com")||e.includes("preview.emergentagent.com"))return window.location.origin;if(e.includes("vercel.app")||e.includes("wedlive.vercel.app"))return"https://wedlive.onrender.com";e.includes("localhost")||e.includes("127.0.0.1")}return"http://localhost:8001"})(),TIMEOUT:3e5,RETRY_ATTEMPTS:2,RETRY_DELAY:1e3},MEDIA:{PROXY_ENDPOINT:"/api/media/telegram-proxy/photos/",SUPPORTED_FORMATS:["jpg","jpeg","png","webp"],MAX_FILE_SIZE:10485760},IMAGE:{MAX_RETRIES:2,RETRY_DELAY:1e3,FALLBACK_TIMEOUT:5e3,LOADING_PLACEHOLDER:"/images/placeholder.jpg"}},s=()=>a.API.BASE_URL,i=()=>{let e=s(),t=e.includes("localhost"),r=n();return console.log("\uD83D\uDD27 Configuration Validation:",{apiBaseUrl:e,environment:r?"production":"development",isLocal:t,mediaProxy:a.MEDIA.PROXY_ENDPOINT}),r&&t&&(console.error("❌ ERROR: Production frontend using localhost backend URL!"),console.error("Update NEXT_PUBLIC_API_URL in Vercel environment variables to: https://wedlive.onrender.com")),e.includes("8000")&&console.warn("⚠️ WARNING: API base URL is using port 8000, expected 8001 for local or 443 for production"),!0};t.ZP=a},77700:function(e,t,r){r.d(t,{cn:function(){return a}});var o=r(44839),n=r(96164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,o.W)(t))}}}]);