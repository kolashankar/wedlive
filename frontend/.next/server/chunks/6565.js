"use strict";exports.id=6565,exports.ids=[6565],exports.modules={12108:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(10326),l=i(17577),a=i(77506);function o({photoUrl:e,src:t,borderUrl:o,maskUrl:r,maskData:s,aspectRatio:d="4:5",width:u,height:c,className:h="",alt:m="Photo",onLoad:g,onError:p,shadow:x=!0,position:f="center"}){let[y,b]=(0,l.useState)(!0),[v,w]=(0,l.useState)(!1),_=(0,l.useRef)(null),k=e=>{if(!e||"string"!=typeof e||""===e.trim())return null;if(e.startsWith("/")){let t=i(61358).ZP;return`${t.API.BASE_URL}${e}`}return e},j=k(e||t),S=k(o||r),$=e=>({"4:5":"4/5","1:1":"1/1","16:9":"16/9","3:4":"3/4","2:3":"2/3"})[e]||e;return(0,n.jsxs)("div",{ref:_,className:`photo-frame relative w-full ${h}`,style:(()=>{let e={overflow:"visible",position:"relative",minWidth:0,minHeight:0,backgroundColor:"transparent",isolation:"isolate",transform:"translateZ(0)",display:"block",width:"100%",objectFit:"contain"};if(u&&c)return{...e,width:`${u}px`,height:`${c}px`,maxWidth:"100%",aspectRatio:`${u}/${c}`};let t=$(d);return{...e,aspectRatio:t,width:"100%",height:"auto",maxHeight:"100vh"}})(),children:[n.jsx("div",{className:"absolute inset-0",style:{overflow:"hidden",zIndex:1,backgroundColor:"transparent",borderRadius:"inherit"},children:j&&n.jsx("img",{src:j,alt:m,className:"absolute inset-0 w-full h-full",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:f,willChange:"auto",backfaceVisibility:"hidden"},onLoad:e=>{b(!1),w(!1),g&&g(e)},onError:e=>{b(!1),w(!0),p&&p(e)}})}),S&&n.jsx("img",{src:S,alt:"Border",className:"absolute pointer-events-none",style:{position:"absolute",top:"-25%",left:"-25%",right:"-25%",bottom:"-25%",width:"calc(100% + 50%)",height:"calc(100% + 50%)",maxWidth:"none",maxHeight:"none",zIndex:50,objectFit:"fill",objectPosition:"center",pointerEvents:"none",background:"none",backgroundColor:"transparent",mixBlendMode:"normal",opacity:1,willChange:"auto",backfaceVisibility:"hidden",display:"block"},onLoad:()=>{},onError:()=>{}}),y&&!v&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-transparent z-10",children:n.jsx(a.Z,{className:"w-8 h-8 animate-spin text-gray-400"})}),v&&n.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-transparent z-10 p-4",children:(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 mx-auto mb-2 bg-gray-200 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("span",{className:"text-gray-400 text-sm",children:"Photo unavailable"})]})})]})}},74030:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(10326),l=i(17577),a=i(77506);i(89420);var o=i(95874);function r({weddingId:e,className:t=""}){let[i,r]=(0,l.useState)(null),[s,d]=(0,l.useState)(!0),[u,c]=(0,l.useState)(null),[h,m]=(0,l.useState)({width:0,height:0}),[g,p]=(0,l.useState)({width:0,height:0}),[x,f]=(0,l.useState)({width:0,height:0,offsetX:0,offsetY:0}),[y,b]=(0,l.useState)(0),[v,w]=(0,l.useState)(0),_=(0,l.useRef)(null),k=(0,l.useRef)(null);if(s)return n.jsx("div",{className:`flex items-center justify-center ${t}`,children:n.jsx(a.Z,{className:"w-8 h-8 animate-spin text-gray-400 opacity-50"})});if(u||!i||!i.template)return null;let j=i.template,S=i.populated_overlays||[],$=j.video_data?.original_url,z=j.duration||0;if(!$)return null;let M=j.reference_resolution||(j.video_data?.width&&j.video_data?.height?{width:j.video_data.width,height:j.video_data.height}:{width:1920,height:1080});return console.log("[TemplateVideoPlayer] Render state:",{overlaysCount:S.length,renderedVideoSize:x,videoSize:h,containerSize:g,currentTime:y,duration:v,canRenderOverlays:S.length>0&&x.width>0}),(0,n.jsxs)("div",{ref:k,className:`relative ${t}`,children:[n.jsx("video",{ref:_,src:$,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:"w-full h-full object-contain",style:{backgroundColor:"transparent",mixBlendMode:"normal"},onError:e=>{console.error("[TemplateVideoPlayer] Video element error:",{videoUrl:$,error:e.currentTarget.error,networkState:e.currentTarget.networkState})},onLoadStart:()=>{console.log("[TemplateVideoPlayer] Video load started:",$)},onCanPlay:()=>{console.log("[TemplateVideoPlayer] Video can play")}}),S.length>0&&(x.width>0?n.jsx("div",{className:"absolute pointer-events-none",style:{left:`${x.offsetX}px`,top:`${x.offsetY}px`,width:`${x.width}px`,height:`${x.height}px`,position:"absolute",zIndex:10},children:S.map((e,t)=>(console.log("[TemplateVideoPlayer] Rendering overlay:",{id:e.id,text_value:e.text_value,position:e.position,timing:e.timing,currentTime:y,duration:v}),n.jsx(o.Z,{overlay:e,currentTime:y,duration:v,containerSize:x,referenceResolution:M,templateDuration:z},e.id||t)))}):n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{position:"absolute",zIndex:10,width:"100%",height:"100%"},children:S.map((e,t)=>{console.log("[TemplateVideoPlayer] Rendering overlay (fallback mode):",{id:e.id,text_value:e.text_value,currentTime:y,duration:v});let i={width:g.width||720,height:g.height||1280,offsetX:0,offsetY:0};return n.jsx(o.Z,{overlay:e,currentTime:y,duration:v,containerSize:i,referenceResolution:M,templateDuration:z},e.id||t)})}))]})}},95874:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(10326),l=i(17577);function a({overlay:e,currentTime:t,duration:i,containerSize:a,referenceResolution:o,animationState:r=null,className:s="",templateDuration:d=null}){let u=(0,l.useRef)(null),[c,h]=(0,l.useState)(1),[m,g]=(0,l.useState)(!0),p=(0,l.useMemo)(()=>{let t=e.styling?.font_size||48,i=o.height||1080;return"string"==typeof t&&t.trim().endsWith("%")?parseFloat(t):parseFloat(t)/i*100},[e.styling?.font_size,o.height]),x=(0,l.useMemo)(()=>{let t=e.styling?.font_size||48,i=e.styling?.letter_spacing||0;return t>0?i/t:0},[e.styling?.font_size,e.styling?.letter_spacing]),f=(0,l.useMemo)(()=>{let t=e.styling?.font_size||48,i=e.styling?.stroke?.width||2;return t>0?i/t:.05},[e.styling?.font_size,e.styling?.stroke?.width]),y=(0,l.useMemo)(()=>{let n=e.timing?.start_time??0,l=i||d||0,a=e.timing?.end_time??l;return 0!==l&&t>=n-.2&&t<=a+.2},[t,e.timing,i,d]),b=(0,l.useMemo)(()=>{if(r)return r;let n=e.timing?.start_time||0,l=i||d||0,a=e.timing?.end_time||l,o=e.animation?.entrance||{type:"fade-in",duration:1,easing:"ease-in-out"},s=e.animation?.exit||{type:"fade-out",duration:1,easing:"ease-in-out"},u=1,c="";if(t<n+o.duration){let e=Math.max(0,Math.min(1,(t-n)/o.duration));switch(o.type){case"fade-in":default:u=e;break;case"slide-up":u=e,c=`translateY(${(1-e)*10}%)`;break;case"slide-down":u=e,c=`translateY(${-(10*(1-e))}%)`;break;case"scale-up":case"zoom-in":u=e,c=`scale(${.5+.5*e})`}}else if(t>a-s.duration){let e=1-Math.max(0,Math.min(1,(t-(a-s.duration))/s.duration));u=e,"slide-up"===s.type&&(c=`translateY(${-(10*(1-e))}%)`)}return{opacity:u,transform:c}},[t,e.timing,e.animation,i,d,r]),v=e.position||{x:50,y:50},w=e.styling||{},_=e.dimensions||{},k=(0,l.useMemo)(()=>{let e=v.x,t=v.y;return("pixels"===v.unit||v.x>100||v.y>100)&&(e=v.x/o.width*100,t=v.y/o.height*100),{x:e,y:t}},[v,o]),j=(0,l.useMemo)(()=>{let t=e.styling?.font_size||48,i=e.styling?.text_shadow;return i&&"none"!==i?i.replace(/(\d+\.?\d*)px/g,(e,i)=>{let n=parseFloat(i)/t;return`${n.toFixed(4)}em`}):"0 0.04em 0.08em rgba(0,0,0,0.5)"},[e.styling?.font_size,e.styling?.text_shadow]),S=(0,l.useMemo)(()=>{let t=e.styling||{},i=p/100*a.height*c;return{fontSize:`${i}px`,fontFamily:t.font_family||"Playfair Display",fontWeight:t.font_weight||"bold",color:t.color||"#ffffff",textAlign:t.text_align||"center",letterSpacing:`${x}em`,lineHeight:t.line_height||1.2,textShadow:j,WebkitTextStroke:t.stroke?.enabled?`${f}em ${t.stroke.color||"#000000"}`:"none"}},[e.styling,p,x,f,j,a.height,c]),$=(0,l.useMemo)(()=>{let e=_.width?`${_.width}%`:"auto",t=_.height?`${_.height}%`:"auto";return{width:e,height:t,maxWidth:_.width?`${_.width}%`:"90%",minWidth:"auto",minHeight:"auto"!==t?t:void 0,boxSizing:"border-box"}},[_]),z=(0,l.useMemo)(()=>{let t=e.text||e.text_value||e.placeholder_text||"Sample Text",i=t.includes("\n"),n=(e.endpoint_key||"").toLowerCase(),l=(e.label||"").toLowerCase(),a=n.includes("time")||l.includes("time")||n.includes("date")||l.includes("date")||n.includes("day")||l.includes("day")||n.includes("year")||l.includes("year")||n.includes("month")||l.includes("month")||n.includes("hour")||l.includes("hour")||n.includes("minute")||l.includes("minute")||n.includes("clock")||l.includes("clock"),o=n.includes("venue")||l.includes("venue")||n.includes("address")||l.includes("address")||n.includes("location")||l.includes("location")||n.includes("place")||l.includes("place");return!i&&(!!a||!o&&t.length<20)},[e.text,e.text_value,e.placeholder_text,e.endpoint_key,e.label]);return y?n.jsx("div",{className:`absolute ${s}`,style:{left:`${k.x}%`,top:`${k.y}%`,transform:`translate(-50%, -50%) ${b.transform}`,opacity:b.opacity,zIndex:e.layer_index||1,...$,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"left"===w.text_align?"flex-start":"right"===w.text_align?"flex-end":"center",boxSizing:"border-box",margin:0,padding:z?"0.05em 0.1em":"0.2em 0.4em",willChange:"opacity, transform",transition:"none",overflow:"visible",visibility:m&&1===c?"hidden":"visible"},children:n.jsx("span",{ref:u,style:{display:"block",width:"100%",...S,whiteSpace:z?"nowrap":"pre-wrap",wordWrap:z?"normal":"break-word",overflowWrap:"normal",wordBreak:z?"keep-all":"normal",hyphens:"auto",overflow:"visible",textRendering:"optimizeLegibility",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",textOverflow:"clip",WebkitBoxDecorationBreak:"clone",boxDecorationBreak:"clone"},children:e.text||e.text_value||e.placeholder_text||"Sample Text"})}):null}}};