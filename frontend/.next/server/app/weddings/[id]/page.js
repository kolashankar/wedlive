(()=>{var e={};e.id=5085,e.ids=[5085],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},93953:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>d}),s(58052),s(73603),s(35866);var r=s(23191),a=s(88716),n=s(37922),i=s.n(n),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["weddings",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,58052)),"/app/frontend/app/weddings/[id]/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,73603)),"/app/frontend/app/layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/frontend/app/weddings/[id]/page.js"],u="/weddings/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/weddings/[id]/page",pathname:"/weddings/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},84472:(e,t,s)=>{Promise.resolve().then(s.bind(s,44710))},44710:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>B});var r=s(10326),a=s(17577),n=s.n(a),i=s(18729),o=s(50560),l=s(20835),d=s(6952),c=s(26655),u=s(49758),m=s(48998),g=s(77506),h=s(86333),x=s(76993),p=s(37358),_=s(77636),b=s(24061),y=s(31540),j=s(90434),f=s(35047),w=s(85999),v=s(89420),k=s(74990),N=s(13516),S=s(33265),P=s(15361),E=s(94893);function Z({weddingId:e,weddingStatus:t}){(0,f.useRouter)();let[s,n]=(0,a.useState)(!0),[i,o]=(0,a.useState)(!1),[l,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1);if(!l||c)return null;let m="live"===t;return(0,r.jsxs)("button",{onClick:()=>{window.location.href=`/weddings/${e}?live=true`},"data-testid":"watch-live-button",className:`
        fixed top-4 right-4 z-50
        flex items-center gap-2
        px-4 py-3 rounded-full
        font-semibold text-white
        shadow-lg hover:shadow-xl
        transition-all duration-300
        ${m?"bg-red-500 hover:bg-red-600 animate-pulse":"bg-purple-600 hover:bg-purple-700"}
        ${i?"scale-90":"scale-100"}
      `,style:{backdropFilter:"blur(10px)"},children:[m&&r.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"}),r.jsx(E.Z,{className:"w-5 h-5",fill:"white"}),r.jsx("span",{children:"Watch Wedding"})]})}s(97134);let L=(0,S.default)(()=>Promise.all([s.e(2106),s.e(6565),s.e(4839)]).then(s.bind(s,74839)),{loadableGenerated:{modules:["components/LayoutRenderer.js -> @/components/layouts/Layout1"]},loading:()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",children:r.jsx(g.Z,{className:"w-8 h-8 animate-spin text-blue-500"})})}),R=(0,S.default)(()=>Promise.all([s.e(2106),s.e(8907),s.e(7454),s.e(6565),s.e(3023),s.e(1603)]).then(s.bind(s,93023)),{loadableGenerated:{modules:["components/LayoutRenderer.js -> @/components/layouts/Layout2"]},loading:()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:r.jsx(g.Z,{className:"w-8 h-8 animate-spin text-purple-500"})})}),M=(0,S.default)(()=>Promise.all([s.e(2106),s.e(8907),s.e(6565),s.e(4620),s.e(1337)]).then(s.bind(s,4620)),{loadableGenerated:{modules:["components/LayoutRenderer.js -> @/components/layouts/Layout3"]},loading:()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-50 to-purple-50",children:r.jsx(g.Z,{className:"w-8 h-8 animate-spin text-pink-500"})})}),q=(0,S.default)(()=>Promise.all([s.e(2106),s.e(6565),s.e(3428),s.e(2163)]).then(s.bind(s,23428)),{loadableGenerated:{modules:["components/LayoutRenderer.js -> @/components/layouts/Layout4"]},loading:()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:r.jsx(g.Z,{className:"w-8 h-8 animate-spin text-gray-500"})})}),A=(0,S.default)(()=>Promise.all([s.e(2106),s.e(6565),s.e(5807),s.e(6636)]).then(s.bind(s,75807)),{loadableGenerated:{modules:["components/LayoutRenderer.js -> @/components/layouts/Layout5"]},loading:()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:r.jsx(g.Z,{className:"w-8 h-8 animate-spin text-black"})})}),C={layout_1:L,layout_2:R,layout_3:M,layout_4:q,layout_5:A,layout_6:(0,S.default)(()=>Promise.all([s.e(2106),s.e(8907),s.e(7454),s.e(6565),s.e(3722),s.e(9601)]).then(s.bind(s,53722)),{loadableGenerated:{modules:["components/LayoutRenderer.js -> @/components/layouts/Layout6"]},loading:()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:r.jsx(g.Z,{className:"w-8 h-8 animate-spin text-amber-500"})})}),layout_7:(0,S.default)(()=>Promise.all([s.e(2106),s.e(8907),s.e(6565),s.e(5459),s.e(2891)]).then(s.bind(s,5459)),{loadableGenerated:{modules:["components/LayoutRenderer.js -> @/components/layouts/Layout7"]},loading:()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:r.jsx(g.Z,{className:"w-8 h-8 animate-spin text-red-500"})})}),layout_8:(0,S.default)(()=>Promise.all([s.e(2106),s.e(6565),s.e(9357),s.e(2286)]).then(s.bind(s,49357)),{loadableGenerated:{modules:["components/LayoutRenderer.js -> @/components/layouts/Layout8"]},loading:()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:r.jsx(g.Z,{className:"w-8 h-8 animate-spin text-zinc-900"})})})};function I({wedding:e,videoTemplate:t,onEnter:s}){let[n,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0),[d,c]=(0,a.useState)({}),[u,m]=(0,a.useState)([]);if(e?.backgrounds?.layout_page_background_url,!e||"object"!=typeof e)return console.error("LayoutRenderer: Invalid wedding prop",e),r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-red-500 text-lg",children:"Invalid wedding data"})})});if(o)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(g.Z,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading layout..."})]})});e.theme_settings&&"object"==typeof e.theme_settings||(console.error("LayoutRenderer: Missing or invalid theme_settings",e.theme_settings),e.theme_settings={layout_id:"layout_1",custom_font:"Playfair Display",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:""},custom_messages:{welcome_text:"Welcome to our wedding",description:""},theme_assets:{}});let h=C[e.theme_settings?.layout_id||e.theme_settings?.theme_id||"layout_1"]||L,x=e.backgrounds?.layout_page_background_url||null,p=e.backgrounds?.stream_page_background_url||null;console.log("[LAYOUT_RENDERER] Background Debug:",{hasBackgroundsObject:!!e.backgrounds,layoutPageBackgroundUrl:x,streamPageBackgroundUrl:p,wedding_backgrounds:e.backgrounds}),x||(console.warn("[LAYOUT_RENDERER] No layout background URL found!"),console.log("[LAYOUT_RENDERER] wedding.backgrounds:",e.backgrounds)),console.log("[PHASE 3] Layout photos from API:",n);let _=n?.bridePhoto?{url:n.bridePhoto.url,type:"photo"}:null,b=n?.groomPhoto?{url:n.groomPhoto.url,type:"photo"}:null,y=n?.couplePhoto?{url:n.couplePhoto.url,type:"photo"}:null,j=Array.isArray(n?.preciousMoments)?n.preciousMoments.map(e=>({url:e.url,photo_url:e.url,cdn_url:e.url,type:"photo"})):[],f=n?.studioImage?{url:n.studioImage.url,type:"photo"}:null;console.log("[PHASE 3] Mapped photos:",{bridePhoto:!!_,groomPhoto:!!b,couplePhoto:!!y,preciousMoments:j.length,studioImage:!!f});let w=e.theme_settings?.pre_wedding_video||null,v=w?(0,P.Tc)(w)||w:null,k={font:e.theme_settings?.custom_font||"Playfair Display",primaryColor:e.theme_settings?.primary_color||"#f43f5e",secondaryColor:e.theme_settings?.secondary_color||"#a855f7",welcomeMessage:e.theme_settings?.custom_messages?.welcome_text||"Welcome to our wedding",description:e.theme_settings?.custom_messages?.description||"",bridePhoto:_,groomPhoto:b,couplePhoto:y,preciousMoments:j,studioImage:f,heroBackground:x,liveBackground:p||e.theme_settings?.theme_assets?.live_background||null,preWeddingVideo:v,templateVideoWeddingId:e.id,hasTemplateVideo:!!t?.id,videoTemplateData:t,borders:{bride:e.theme_settings?.theme_assets?.bride_border_url||null,groom:e.theme_settings?.theme_assets?.groom_border_url||null,couple:e.theme_settings?.theme_assets?.couple_border_url||null,preciousMoments:e.theme_settings?.theme_assets?.precious_moments_border_url||null},borderMasks:{bride:d[e.theme_settings?.theme_assets?.borders?.bride_border_id]?.mask_data||null,groom:d[e.theme_settings?.theme_assets?.borders?.groom_border_id]?.mask_data||null,couple:d[e.theme_settings?.theme_assets?.borders?.couple_border_id]?.mask_data||null,preciousMoments:d[e.theme_settings?.theme_assets?.borders?.precious_moments_border_id]?.mask_data||null},studioDetails:{default_image_url:e.theme_settings?.studio_details?.default_image_url||null,logo_url:e.theme_settings?.studio_details?.logo_url||null,name:e.theme_settings?.studio_details?.name||"",email:e.theme_settings?.studio_details?.email||"",phone:e.theme_settings?.studio_details?.phone||"",website:e.theme_settings?.studio_details?.website||"",address:e.theme_settings?.studio_details?.address||"",show_details:e.theme_settings?.studio_details?.show_details!==!1}};console.log("[PHASE 3] Final layoutConfig:",k);let N=x?{backgroundImage:`linear-gradient(rgba(0,0,0,0.15), rgba(0,0,0,0.15)), url(${x})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",backgroundRepeat:"no-repeat",minHeight:"100vh",width:"100%"}:{minHeight:"100vh",width:"100%"};return console.log("[LAYOUT_RENDERER] Layout Background Debug:",{hasStyle:!!N,url:x,hasBackgroundsObject:!!e.backgrounds,wedding_backgrounds:e.backgrounds}),!x&&e.backgrounds?.layout_page_background_id&&console.warn("[LAYOUT_RENDERER] Layout background ID exists but URL is missing!",{id:e.backgrounds.layout_page_background_id,backgrounds:e.backgrounds}),(0,r.jsxs)("div",{style:N,className:"min-h-screen w-full",children:[r.jsx(Z,{weddingId:e?.id,weddingStatus:e?.status}),r.jsx(h,{weddingData:e,layoutConfig:k,onEnter:s})]})}var D=s(2815),O=s(66393),T=s(41291);let U=(0,s(62881).Z)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);class z extends n().Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState(s=>({error:e,errorInfo:t,errorCount:s.errorCount+1}))}render(){if(this.state.hasError){let{error:e,errorInfo:t,errorCount:s}=this.state,a=s>2;return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 flex items-center justify-center p-4",children:(0,r.jsxs)(o.Zb,{className:"max-w-2xl w-full",children:[r.jsx(o.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:r.jsx(T.Z,{className:"w-6 h-6 text-red-600"})}),(0,r.jsxs)("div",{children:[r.jsx(o.ll,{className:"text-xl text-red-900",children:"Something went wrong"}),r.jsx(o.SZ,{className:"mt-1",children:a?"This error keeps occurring. Please try reloading the page.":"An unexpected error occurred while rendering this page."})]})]})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[e&&(0,r.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-semibold text-red-900 mb-2",children:"Error Message:"}),r.jsx("p",{className:"text-sm text-red-700 font-mono break-all",children:e.toString()})]}),t&&!1,(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[!a&&(0,r.jsxs)(i.z,{onClick:this.handleReset,variant:"outline",className:"flex-1",children:[r.jsx(U,{className:"w-4 h-4 mr-2"}),"Try Again"]}),(0,r.jsxs)(i.z,{onClick:this.handleReload,className:"flex-1",children:[r.jsx(U,{className:"w-4 h-4 mr-2"}),"Reload Page"]})]}),(0,r.jsxs)("div",{className:"pt-4 border-t",children:[r.jsx("p",{className:"text-xs text-gray-600",children:"If this problem persists, please try:"}),(0,r.jsxs)("ul",{className:"mt-2 text-xs text-gray-600 list-disc list-inside space-y-1",children:[r.jsx("li",{children:"Clearing your browser cache"}),r.jsx("li",{children:"Using a different browser"}),r.jsx("li",{children:"Checking your internet connection"}),r.jsx("li",{children:"Contacting support if the issue continues"})]})]})]})]})})}return this.props.children}}function W({params:e,searchParams:t}){let s=(0,f.useRouter)(),n=e.id,[S,P]=(0,a.useState)(null),[E,Z]=(0,a.useState)(!0),[L,R]=(0,a.useState)(0),[M,q]=(0,a.useState)(null),[A,C]=(0,a.useState)(!1),[O,T]=(0,a.useState)(null),U=t?.live==="true",z=S?.backgrounds?.stream_page_background_url||null,W=z?{backgroundImage:`linear-gradient(rgba(0,0,0,0.18), rgba(0,0,0,0.22)), url(${z})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",backgroundRepeat:"no-repeat",minHeight:"100vh",width:"100%"}:{minHeight:"100vh",width:"100%"};console.log("[STREAM_VIEW] Stream Background Debug:",{hasBackgroundsObject:!!S?.backgrounds,streamBackgroundUrl:z,hasStyle:!!W,wedding_backgrounds:S?.backgrounds}),!z&&S?.backgrounds?.stream_page_background_id?console.warn("[STREAM_VIEW] Stream background ID exists but URL is missing!",{id:S.backgrounds.stream_page_background_id,backgrounds:S.backgrounds}):z||console.info("[STREAM_VIEW] No stream background configured (this is normal if not set)"),(0,a.useCallback)(async()=>{try{console.log("Loading wedding with ID:",n);let e=(await v.default.get(`/api/weddings/${n}`)).data;if(console.log("Wedding data loaded:",e),e.backgrounds?console.log("[FIX 3] Initial backgrounds loaded:",{layout_page_background_id:e.backgrounds.layout_page_background_id,layout_page_background_url:e.backgrounds.layout_page_background_url,stream_page_background_id:e.backgrounds.stream_page_background_id,stream_page_background_url:e.backgrounds.stream_page_background_url}):console.warn("[FIX 3] No backgrounds data in wedding response"),!e||"object"!=typeof e){console.error("Invalid wedding data received:",e),w.toast.error("Invalid wedding data received"),Z(!1);return}e.theme_settings&&"object"==typeof e.theme_settings?(e.theme_settings.studio_details&&"object"==typeof e.theme_settings.studio_details||(e.theme_settings.studio_details={studio_id:"",name:"",logo_url:"",default_image_url:"",contact:""}),e.theme_settings.custom_messages&&"object"==typeof e.theme_settings.custom_messages||(e.theme_settings.custom_messages={welcome_text:"Welcome to our big day",description:""}),Array.isArray(e.theme_settings.cover_photos)||(e.theme_settings.cover_photos=[])):(console.log("Initializing default theme_settings"),e.theme_settings={theme_id:"floral_garden",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",cover_photos:[],studio_details:{studio_id:"",name:"",logo_url:"",default_image_url:"",contact:""},custom_messages:{welcome_text:"Welcome to our big day",description:""}}),P(e),R(e.viewers_count||0);try{let e=await v.default.get(`/api/viewer/wedding/${n}/all`);e.data?.video_template?(T(e.data.video_template),console.log("Video template loaded:",e.data.video_template)):(T(null),console.log("No video template assigned to this wedding"))}catch(e){console.error("Error loading video template:",e),T(null)}let t=e.theme_settings&&"object"==typeof e.theme_settings&&Object.keys(e.theme_settings).length>0,s=e.creator_subscription_plan&&"free"!==e.creator_subscription_plan;U?q(!1):q(s&&t),Z(!1)}catch(e){w.toast.error("Failed to load wedding details"),console.error("Error loading wedding:",e)}finally{Z(!1)}},[n]),(0,a.useCallback)(async()=>{try{let e=await v.default.get(`/api/weddings/${n}`);if(R(e.data.viewers_count||0),e.data.theme_settings&&P(t=>({...t,theme_settings:e.data.theme_settings})),e.data.backgrounds){let t=S?.backgrounds?.stream_page_background_url,s=e.data.backgrounds?.stream_page_background_url;t!==s&&(console.log("[FIX 3] Background change detected in updateViewerCount:",{old:t,new:s}),P(t=>({...t,backgrounds:e.data.backgrounds})),console.log("[FIX 3] Stream page background updated successfully"))}}catch(e){console.error("Error updating viewer count:",e)}},[S]);let B=()=>{let e=window.location.href;navigator.share?navigator.share({title:S.title,text:`Watch ${S.bride_name} & ${S.groom_name}'s wedding live!`,url:e}).catch(()=>{V(e)}):V(e)},V=e=>{navigator.clipboard.writeText(e),w.toast.success("Link copied to clipboard!")};return E?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(g.Z,{className:"w-12 h-12 animate-spin text-rose-500 mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Loading wedding..."})]})}):S?null===M?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(g.Z,{className:"w-12 h-12 animate-spin text-rose-500 mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Loading wedding..."})]})}):M&&S&&S.theme_settings&&"object"==typeof S.theme_settings?r.jsx(I,{wedding:S,videoTemplate:O,onEnter:()=>{q(!1)}}):(0,r.jsxs)("div",{className:"min-h-screen w-full bg-gradient-to-br from-rose-50 via-white to-purple-50",style:W,children:[r.jsx("nav",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200 sticky top-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>s.back(),"data-testid":"back-button",children:[r.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,r.jsxs)(j.default,{href:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"bg-gradient-to-r from-rose-500 to-purple-600 p-2 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),r.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-rose-600 to-purple-600 bg-clip-text text-transparent",children:"WedLive"})]})]}),r.jsx("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:B,"data-testid":"share-button",children:[r.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Share"]})})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[r.jsx(o.Zb,{className:"overflow-hidden",children:r.jsx("div",{className:"relative bg-black",style:{paddingTop:"56.25%"},children:"live"===S.status&&S.stream_call_id?r.jsx("div",{className:"absolute inset-0",children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/StreamVideoPlayer'");throw e.code="MODULE_NOT_FOUND",e}()),{playbackUrl:S.playback_url,themeId:S.theme_settings?.theme_id,streamBorderUrl:S.theme_settings?.theme_assets?.stream_border_url})}):"recorded"===S.status&&S.recording_url?r.jsx("div",{className:"absolute inset-0",children:r.jsx(Object(function(){var e=Error("Cannot find module '@/components/StreamVideoPlayer'");throw e.code="MODULE_NOT_FOUND",e}()),{playbackUrl:S.recording_url,themeId:S.theme_settings?.theme_id,streamBorderUrl:S.theme_settings?.theme_assets?.stream_border_url})}):r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center text-white p-8",children:[r.jsx(u.Z,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg font-semibold mb-2",children:"scheduled"===S.status?"Stream Not Started Yet":"Stream Ended"}),A&&r.jsx("p",{className:"text-sm opacity-75",children:"scheduled"===S.status?`Scheduled for ${(0,k.WU)(new Date(S.scheduled_date),"PPP p")}`:"This wedding stream has ended"})]})})})}),(0,r.jsxs)(o.Zb,{children:[r.jsx(o.Ol,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx(o.ll,{className:"text-2xl",children:S.title}),(0,r.jsxs)(o.SZ,{className:"text-base mt-2",children:[S.bride_name," & ",S.groom_name]})]}),(e=>{switch(e){case"live":return(0,r.jsxs)(l.C,{className:"bg-red-500 text-white animate-pulse text-lg px-4 py-1","data-testid":"status-live",children:[r.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"LIVE"]});case"scheduled":return(0,r.jsxs)(l.C,{variant:"secondary",className:"text-lg px-4 py-1","data-testid":"status-scheduled",children:[r.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"Upcoming"]});case"ended":case"recorded":return r.jsx(l.C,{variant:"outline",className:"text-lg px-4 py-1","data-testid":"status-recorded",children:"Recording Available"});default:return null}})(S.status)]})}),(0,r.jsxs)(o.aY,{className:"space-y-4",children:[S.description&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("p",{className:"text-gray-700",children:S.description}),r.jsx(d.Z,{})]}),(0,r.jsxs)("div",{className:"grid gap-3",children:[A&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[r.jsx(p.Z,{className:"w-5 h-5 text-rose-500"}),r.jsx("span",{children:(0,k.WU)(new Date(S.scheduled_date),"EEEE, MMMM d, yyyy")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[r.jsx(m.Z,{className:"w-5 h-5 text-rose-500"}),r.jsx("span",{children:(0,k.WU)(new Date(S.scheduled_date),"h:mm a")})]})]}),S.location&&(0,r.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[r.jsx(_.Z,{className:"w-5 h-5 text-rose-500"}),r.jsx("span",{children:S.location})]}),"live"===S.status&&(0,r.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[r.jsx(b.Z,{className:"w-5 h-5 text-rose-500"}),(0,r.jsxs)("span",{suppressHydrationWarning:!0,children:[L," ",1===L?"viewer":"viewers"," watching"]})]})]})]})]}),(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[r.jsx(o.ll,{children:"Photo & Video Gallery"}),r.jsx(o.SZ,{children:"Memories from the celebration"})]}),r.jsx(o.aY,{children:r.jsx(N.Z,{weddingId:n,publicView:!0})})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[S.creator_name&&(0,r.jsxs)(o.Zb,{children:[r.jsx(o.Ol,{children:r.jsx(o.ll,{className:"text-lg",children:"Hosted By"})}),r.jsx(o.aY,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(c.qE,{children:r.jsx(c.Q5,{className:"bg-gradient-to-br from-rose-500 to-purple-600 text-white",children:S.creator_name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold",children:S.creator_name}),r.jsx("p",{className:"text-sm text-gray-500",children:"Wedding Host"})]})]})})]}),(0,r.jsxs)(o.Zb,{children:[r.jsx(o.Ol,{children:r.jsx(o.ll,{className:"text-lg",children:"Actions"})}),(0,r.jsxs)(o.aY,{className:"space-y-3",children:[(0,r.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",onClick:B,children:[r.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Share Wedding"]}),S.recording_url&&r.jsx(i.z,{variant:"outline",className:"w-full justify-start",asChild:!0,children:(0,r.jsxs)("a",{href:S.recording_url,download:!0,children:[r.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Download Recording"]})})]})]}),S.is_locked&&(0,r.jsxs)(o.Zb,{className:"border-rose-200 bg-rose-50",children:[r.jsx(o.Ol,{children:r.jsx(o.ll,{className:"text-lg text-rose-900",children:"Premium Content"})}),r.jsx(o.aY,{children:r.jsx("p",{className:"text-sm text-rose-800 mb-4",children:"This wedding content is currently locked. The host needs to upgrade to Premium to unlock streaming."})})]}),r.jsx(D.Z,{weddingId:n})]})]})})]}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:(0,r.jsxs)(o.Zb,{className:"max-w-md text-center",children:[(0,r.jsxs)(o.Ol,{children:[r.jsx(o.ll,{children:"Wedding Not Found"}),r.jsx(o.SZ,{children:"This wedding event doesn't exist or has been removed."})]}),r.jsx(o.aY,{children:r.jsx(j.default,{href:"/weddings",children:r.jsx(i.z,{children:"Browse All Weddings"})})})]})})}function B({params:e,searchParams:t}){return r.jsx(z,{children:r.jsx(O.w,{weddingId:e.id,children:r.jsx(W,{params:e,searchParams:t})})})}!function(){var e=Error("Cannot find module '@/components/StreamVideoPlayer'");throw e.code="MODULE_NOT_FOUND",e}()},15361:(e,t,s)=>{"use strict";function r(e){if(!e||"string"!=typeof e)return null;let t=(e=e.trim()).match(/(?:youtube\.com\/watch\?v=|youtube\.com\/watch\?.*&v=)([a-zA-Z0-9_-]{11})/);if(t)return t[1];let s=e.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/);if(s)return s[1];let r=e.match(/youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/);if(r)return r[1];let a=e.match(/youtube\.com\/v\/([a-zA-Z0-9_-]{11})/);return a?a[1]:null}function a(e,t={}){let s=r(e);if(!s)return null;let{autoplay:a=0,mute:n=0,controls:i=1,modestbranding:o=1,rel:l=0}=t,d=new URLSearchParams({autoplay:a.toString(),mute:n.toString(),controls:i.toString(),modestbranding:o.toString(),rel:l.toString()});return`https://www.youtube.com/embed/${s}?${d.toString()}`}function n(e){return null!==r(e)}s.d(t,{Tc:()=>a,yk:()=>n})},86333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},12714:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},76993:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},24061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},58052:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var r=s(68570);let a=(0,r.createProxy)(String.raw`/app/frontend/app/weddings/[id]/page.js`),{__esModule:n,$$typeof:i}=a;a.default;let o=(0,r.createProxy)(String.raw`/app/frontend/app/weddings/[id]/page.js#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,168,434,1961,7882,5014,4342,4372,1973],()=>s(93953));module.exports=r})();