(()=>{var e={};e.id=1624,e.ids=[1624,4839],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},15910:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(76044),t(73603),t(35866);var a=t(23191),r=t(88716),l=t(37922),i=t.n(l),o=t(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(s,n);let d=["",{children:["weddings",{children:["manage",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,76044)),"/app/frontend/app/weddings/manage/[id]/page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,73603)),"/app/frontend/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/frontend/app/weddings/manage/[id]/page.js"],u="/weddings/manage/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/weddings/manage/[id]/page",pathname:"/weddings/manage/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},90816:(e,s,t)=>{Promise.resolve().then(t.bind(t,38954))},38954:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>se});var a=t(10326),r=t(17577),l=t.n(r),i=t(88646),o=t(18729),n=t(50560),d=t(6917),c=t(20835),u=t(6952),m=t(97134),p=t(77506),h=t(86333),x=t(49758),g=t(9015),y=t(7027),j=t(26092),f=t(1572),b=t(71709),v=t(88378),_=t(12714),N=t(30361),w=t(43810),k=t(67427),S=t(37358),C=t(77636),Z=t(90434),P=t(35047),M=t(85999),B=t(89420),q=t(74990),z=t(79349),$=t(92454),A=t(67516),O=t(94019),T=t(41291);function F({weddingId:e,onUploadComplete:s}){let[t,l]=(0,r.useState)(!1),[i,d]=(0,r.useState)(0),[c,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(""),[y,j]=(0,r.useState)(null),[f,v]=(0,r.useState)(null),[_,N]=(0,r.useState)({uploaded:0,total:0,failed:[]}),[w,k]=(0,r.useState)("general"),S=(0,r.useRef)(null),C=e=>{if(e<=209715200)return{chunkSize:e,totalChunks:1};let s=Math.ceil(e/209715200);return{chunkSize:Math.ceil(e/(s=Math.max(8,Math.min(15,s)))),totalChunks:s}},Z=e=>{let s=e.target.files?.[0];if(!s)return;if(!s.type.startsWith("image/")&&!s.type.startsWith("video/")){M.toast.error("Please select an image or video file");return}if(s.size>10737418240){M.toast.error("File size must be less than 10GB");return}u(s),v(s.type.startsWith("image/")?"photo":"video");let t=new FileReader;t.onload=e=>{j(e.target.result)},t.readAsDataURL(s);let{chunkSize:a,totalChunks:r}=C(s.size);r>1&&M.toast.info(`Large file detected! Will upload in ${r} chunks (${(a/1024/1024).toFixed(0)}MB each)`)},P=async(e,s,t,a=0)=>{try{let a=new FormData;return a.append("upload_id",e),a.append("chunk_index",s),a.append("chunk",t,`chunk_${s}`),await B.default.post("/api/media/upload/chunk",a,{headers:{"Content-Type":"multipart/form-data"}}),{success:!0,chunkIndex:s}}catch(r){if(console.error(`Chunk ${s} upload failed:`,r),a<3)return console.log(`Retrying chunk ${s} (attempt ${a+1}/3)`),await new Promise(e=>setTimeout(e,1e3*(a+1))),P(e,s,t,a+1);return{success:!1,chunkIndex:s,error:r}}},q=async(e,s)=>{let t=[],a=[];for(let r=0;r<s.length;r+=5){let l=s.slice(r,r+5).map(({index:s,blob:t})=>P(e,s,t));(await Promise.all(l)).forEach(e=>{e.success?(t.push(e.chunkIndex),N(e=>({...e,uploaded:e.uploaded+1})),d(Math.round(t.length/s.length*95))):(a.push(e.chunkIndex),N(s=>({...s,failed:[...s.failed,e.chunkIndex]})))})}return{results:t,failed:a}},F=async()=>{if(!c){M.toast.error("Please select a file to upload");return}l(!0),d(0),N({uploaded:0,total:0,failed:[]});try{let{chunkSize:t,totalChunks:a}=C(c.size);if(1===a){let t=new FormData;t.append("file",c),t.append("wedding_id",e),t.append("caption",h),t.append("category",w);let a="photo"===f?"/api/media/upload/photo":"/api/media/upload/video",r=await B.default.post(a,t,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5,onUploadProgress:e=>{let s=Math.round(100*e.loaded/e.total);d(s)}});M.toast.success(`${"photo"===f?"Photo":"Video"} uploaded successfully!`),U(),s&&s(r.data);return}N({uploaded:0,total:a,failed:[]});let r=(await B.default.post("/api/media/upload/init",{wedding_id:e,filename:c.name,total_size:c.size,total_chunks:a,media_type:f,caption:h,category:w})).data.upload_id;M.toast.info(`Starting chunked upload: ${a} chunks`);let l=[];for(let e=0;e<a;e++){let s=e*t,a=Math.min(s+t,c.size),r=c.slice(s,a);l.push({index:e,blob:r})}d(5);let{results:i,failed:o}=await q(r,l);if(o.length>0)throw Error(`Failed to upload ${o.length} chunks: ${o.join(", ")}`);d(95);let n=new FormData;n.append("upload_id",r);let u=await B.default.post("/api/media/upload/complete",n,{headers:{"Content-Type":"multipart/form-data"}});d(100),M.toast.success(`${"photo"===f?"Photo":"Video"} uploaded successfully! (${a} chunks)`),U(),s&&s(u.data)}catch(s){console.error("Upload error:",s);let e=s.response?.data?.detail||s.message||"Failed to upload media";M.toast.error(e),s.response?.status===403&&M.toast.error("Storage limit reached. Please upgrade your plan.",{duration:5e3})}finally{l(!1)}},U=()=>{u(null),g(""),j(null),v(null),k("general"),d(0),N({uploaded:0,total:0,failed:[]}),S.current&&(S.current.value="")};return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center",children:[a.jsx(b.Z,{className:"w-5 h-5 mr-2"}),"Upload Media"]}),a.jsx(n.SZ,{children:"Add photos and videos to your wedding gallery (up to 10GB per file)"})]}),a.jsx(n.aY,{className:"space-y-4",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative rounded-lg overflow-hidden bg-gray-100",children:["photo"===f?a.jsx("img",{src:y,alt:"Preview",className:"w-full h-64 object-cover"}):a.jsx("div",{className:"relative w-full h-64",children:a.jsx("video",{src:y,className:"w-full h-full object-cover",controls:!0})}),!t&&a.jsx("button",{onClick:U,className:"absolute top-2 right-2 bg-black/60 hover:bg-black/80 text-white rounded-full p-2 transition-colors",children:a.jsx(O.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"flex items-center",children:["photo"===f?a.jsx(b.Z,{className:"w-4 h-4 mr-2"}):a.jsx(x.Z,{className:"w-4 h-4 mr-2"}),c.name]}),(0,a.jsxs)("span",{children:[(c.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{htmlFor:"caption",children:"Caption (optional)"}),a.jsx($.g,{id:"caption",value:h,onChange:e=>g(e.target.value),placeholder:"Add a caption to your media...",disabled:t,rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{htmlFor:"category",children:"Photo Category"}),(0,a.jsxs)("select",{id:"category",value:w,onChange:e=>k(e.target.value),disabled:t,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",children:[a.jsx("option",{value:"general",children:"General Gallery"}),a.jsx("option",{value:"couple",children:"Couple Photo"}),a.jsx("option",{value:"bride",children:"Bride Photo"}),a.jsx("option",{value:"groom",children:"Groom Photo"}),a.jsx("option",{value:"moment",children:"Precious Moment"}),a.jsx("option",{value:"cover",children:"Cover Photo"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Select a category to automatically use this photo in your wedding theme"})]}),t&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:_.total>1?`Uploading chunks... ${_.uploaded}/${_.total}`:"Uploading..."}),(0,a.jsxs)("span",{className:"font-semibold text-rose-600",children:[i,"%"]})]}),a.jsx(A.E,{value:i,className:"h-2"}),_.failed.length>0&&(0,a.jsxs)(m.bZ,{className:"border-yellow-500 bg-yellow-50",children:[a.jsx(T.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsxs)(m.X,{className:"text-yellow-800",children:["Retrying failed chunks: ",_.failed.join(", ")]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(o.z,{onClick:F,disabled:t,className:"flex-1 bg-gradient-to-r from-rose-500 to-purple-600 text-white hover:from-rose-600 hover:to-purple-700",children:t?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Upload ","photo"===f?"Photo":"Video"]})}),!t&&a.jsx(o.z,{variant:"outline",onClick:U,children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-rose-500 transition-colors",onClick:()=>S.current?.click(),onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();let s=e.dataTransfer.files;s&&s[0]&&Z({target:{files:[s[0]]}})},children:[a.jsx("input",{ref:S,type:"file",accept:"image/*,video/*",onChange:Z,className:"hidden"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center",children:a.jsx(b.Z,{className:"w-8 h-8 text-rose-500"})}),a.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(x.Z,{className:"w-8 h-8 text-purple-500"})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Drop files here or click to browse"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Supports images and videos up to 10GB"}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Large files (over 200MB) will be uploaded in chunks for reliability"})]}),a.jsx(o.z,{type:"button",variant:"outline",onClick:e=>{e.stopPropagation(),S.current?.click()},children:"Select Files"})]})]}),(0,a.jsxs)(m.bZ,{children:[a.jsx(T.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{className:"text-sm",children:[a.jsx("strong",{children:"Tip:"})," Upload high-quality photos and videos to preserve precious memories. Supported formats: JPG, PNG, MP4, MOV"]})]})]})})]})}var U=t(13516),E=t(33019),L=t(26848),R=t(51896),D=t(83855),I=t(98091),Y=t(18184),G=t(38705);function V({weddingId:e,isPremium:s,rtmpUrl:t}){let[l,i]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[y,f]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1),_=async()=>{try{u(!0);let s=await B.default.get(`/api/streams/${e}/cameras`);i(s.data||[])}catch(e){console.error("Error loading cameras:",e)}finally{u(!1)}},N=async()=>{if(!y.trim()){M.toast.error("Please enter a camera name");return}try{v(!0),await B.default.post("/api/streams/camera/add",{wedding_id:e,camera_name:y}),M.toast.success("Camera added successfully!"),f(""),g(!1),_()}catch(e){console.error("Error adding camera:",e),M.toast.error(e.response?.data?.detail||"Failed to add camera")}finally{v(!1)}},k=async s=>{if(confirm("Are you sure you want to remove this camera?"))try{await B.default.delete(`/api/streams/camera/${e}/${s}`),M.toast.success("Camera removed"),_()}catch(e){console.error("Error removing camera:",e),M.toast.error("Failed to remove camera")}},S=(e,s)=>{navigator.clipboard.writeText(e),M.toast.success(`${s} copied!`)},C=e=>{let s={waiting:{variant:"secondary",label:"Waiting"},connected:{variant:"default",label:"Connected",className:"bg-green-500"},disconnected:{variant:"destructive",label:"Disconnected"}},t=s[e]||s.waiting;return a.jsx(c.C,{variant:t.variant,className:t.className,children:t.label})};return s?(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(R.Z,{className:"w-5 h-5"}),"Multi-Camera Sources"]}),a.jsx(n.SZ,{children:"Manage multiple camera streams for your wedding"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)(Y.Vq,{open:h,onOpenChange:g,children:[a.jsx(Y.hg,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"outline",className:"w-full",children:[a.jsx(D.Z,{className:"w-4 h-4 mr-2"}),"Add Camera Source"]})}),(0,a.jsxs)(Y.cZ,{children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Add Camera Source"}),a.jsx(Y.Be,{children:"Add a new camera stream for multi-angle coverage"})]}),a.jsx("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{htmlFor:"camera-name",children:"Camera Name"}),a.jsx(G.I,{id:"camera-name",placeholder:"e.g., Sony A7S III, iPhone Camera, Drone View",value:y,onChange:e=>f(e.target.value),onKeyDown:e=>"Enter"===e.key&&N()})]})}),a.jsx(Y.cN,{children:a.jsx(o.z,{onClick:N,disabled:b||!y.trim(),children:b?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"})," Adding..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(D.Z,{className:"w-4 h-4 mr-2"})," Add Camera"]})})})]})]}),d?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(p.Z,{className:"w-6 h-6 animate-spin text-gray-400"})}):0===l.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(x.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No additional cameras added yet"}),a.jsx("p",{className:"text-xs mt-1",children:'Click "Add Camera Source" to get started'})]}):a.jsx("div",{className:"space-y-3",children:l.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-3 hover:border-rose-200 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(x.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Added ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[C(e.status),a.jsx(o.z,{variant:"ghost",size:"sm",onClick:()=>k(e.camera_id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:a.jsx(I.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"password",value:e.stream_key,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-xs"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>S(e.stream_key,"Stream Key"),children:a.jsx(w.Z,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[a.jsx("strong",{children:"Server:"})," ",t||"rtmp://live.wedlive.app/live"]})})]},e.camera_id))}),l.length>0&&(0,a.jsxs)(m.bZ,{children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-xs",children:"Each camera uses its own stream key. Configure OBS Studio or your streaming software with the corresponding stream key for each camera."})]})]})]}):(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(R.Z,{className:"w-5 h-5"}),"Multi-Camera Support",(0,a.jsxs)(c.C,{className:"ml-2 bg-gradient-to-r from-yellow-500 to-orange-500",children:[a.jsx(j.Z,{className:"w-3 h-3 mr-1"}),"Premium"]})]}),a.jsx(n.SZ,{children:"Stream from multiple camera angles simultaneously"})]}),a.jsx(n.aY,{children:(0,a.jsxs)(m.bZ,{children:[a.jsx(j.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{children:["Multi-camera support is available for Premium subscribers only.",a.jsx(Z.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade to Premium"})]})]})})]})}var W=t(941),K=t(39183),H=t(62881);let X=(0,H.Z)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),Q=(0,H.Z)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var J=t(55002);let ee=(0,H.Z)("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var es=t(99598),et=t(85206),ea=t(24230);let er=e=>{if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["B","KB","MB","GB"][s]};function el({weddingId:e,onFolderSelect:s}){let[t,i]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(new Set),[p,h]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[_,N]=(0,r.useState)({name:"",description:"",parentFolderId:null}),[w,k]=(0,r.useState)(null),[S,C]=(0,r.useState)(null),Z=async()=>{try{c(!0);let s=await B.default.get(`/api/folders/wedding/${e}`);i(s.data||[])}catch(e){console.error("Error loading folders:",e),M.toast.error("Failed to load folders")}finally{c(!1)}},P=e=>{let s=new Set(u);s.has(e)?s.delete(e):s.add(e),m(s)},q=async()=>{if(!_.name.trim()){M.toast.error("Folder name is required");return}try{c(!0),await B.default.post("/api/folders/create",{wedding_id:e,name:_.name,parent_folder_id:_.parentFolderId,description:_.description}),M.toast.success("Folder created successfully!"),g(!1),N({name:"",description:"",parentFolderId:null}),Z()}catch(e){console.error("Error creating folder:",e),M.toast.error(e.response?.data?.detail||"Failed to create folder")}finally{c(!1)}},z=async()=>{if(!_.name.trim()){M.toast.error("Folder name is required");return}try{c(!0),await B.default.put(`/api/folders/${w.id}`,{name:_.name,description:_.description}),M.toast.success("Folder updated successfully!"),j(!1),k(null),N({name:"",description:"",parentFolderId:null}),Z()}catch(e){console.error("Error updating folder:",e),M.toast.error(e.response?.data?.detail||"Failed to update folder")}finally{c(!1)}},A=async e=>{let s=e.media_count>0||e.subfolder_count>0?`Are you sure you want to delete "${e.name}"? All content will be moved to ${e.parent_folder_id?"its parent folder":"root"}.`:`Are you sure you want to delete "${e.name}"?`;if(window.confirm(s))try{c(!0),await B.default.delete(`/api/folders/${e.id}`),M.toast.success("Folder deleted successfully"),Z()}catch(e){console.error("Error deleting folder:",e),M.toast.error(e.response?.data?.detail||"Failed to delete folder")}finally{c(!1)}},O=async()=>{if(w)try{c(!0),await B.default.post("/api/folders/move",{folder_id:w.id,new_parent_id:S}),M.toast.success("Folder moved successfully!"),v(!1),k(null),C(null),Z()}catch(e){console.error("Error moving folder:",e),M.toast.error(e.response?.data?.detail||"Failed to move folder")}finally{c(!1)}},T=(e=null)=>{N({name:"",description:"",parentFolderId:e}),g(!0)},F=e=>{k(e),N({name:e.name,description:e.description||"",parentFolderId:e.parent_folder_id}),j(!0)},U=e=>{k(e),C(null),v(!0)},E=(e,t=0)=>e.map(e=>{let r=u.has(e.id),l=e.children&&e.children.length>0;return(0,a.jsxs)("div",{children:[a.jsx("div",{className:`flex items-center justify-between p-3 rounded-lg hover:bg-gray-100 transition-colors group ${p===e.id?"bg-blue-50 border-2 border-blue-300":"border-2 border-transparent"}`,style:{paddingLeft:`${24*t+12}px`},children:(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[l?a.jsx("button",{onClick:()=>P(e.id),className:"p-1 hover:bg-gray-200 rounded",children:r?a.jsx(W.Z,{className:"w-4 h-4 text-gray-600"}):a.jsx(K.Z,{className:"w-4 h-4 text-gray-600"})}):a.jsx("div",{className:"w-6"}),(0,a.jsxs)("button",{onClick:()=>{h(e.id),s&&s(e.id)},className:"flex items-center gap-2 flex-1 text-left",children:[r?a.jsx(X,{className:"w-5 h-5 text-yellow-500"}):a.jsx(Q,{className:"w-5 h-5 text-blue-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(b.Z,{className:"w-3 h-3"}),e.media_count]}),e.subfolder_count>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(Q,{className:"w-3 h-3"}),e.subfolder_count]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(J.Z,{className:"w-3 h-3"}),er(e.folder_size)]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>T(e.id),title:"Create subfolder",children:a.jsx(ee,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>U(e),title:"Move folder",children:a.jsx(es.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>F(e),title:"Edit folder",children:a.jsx(et.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>A(e),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete folder",children:a.jsx(I.Z,{className:"w-4 h-4"})})]})]})}),r&&l&&a.jsx("div",{className:"mt-1",children:E(e.children,t+1)})]},e.id)}),L=(e,s=0,t=null)=>e.filter(e=>e.id!==t).map(e=>w&&R(e.id,w.id)?null:(0,a.jsxs)(l().Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>C(e.id),className:`w-full text-left p-2 rounded hover:bg-gray-100 flex items-center gap-2 ${S===e.id?"bg-blue-50 border-2 border-blue-300":""}`,style:{paddingLeft:`${16*s+8}px`},children:[a.jsx(Q,{className:"w-4 h-4 text-blue-500"}),a.jsx("span",{className:"text-sm",children:e.name})]}),e.children&&e.children.length>0&&L(e.children,s+1,t)]},e.id)),R=(e,s)=>{let a=t.find(s=>s.id===e);return!!a&&!!a.parent_folder_id&&(a.parent_folder_id===s||R(a.parent_folder_id,s))},D=(e=>{let s={},t=[];return e.forEach(e=>{s[e.id]={...e,children:[]}}),e.forEach(e=>{e.parent_folder_id&&s[e.parent_folder_id]?s[e.parent_folder_id].children.push(s[e.id]):t.push(s[e.id])}),t})(t),V=t.reduce((e,s)=>e+s.media_count,0),H=t.reduce((e,s)=>e+s.folder_size,0);return(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(Q,{className:"w-5 h-5"}),"Media Folders"]}),a.jsx(n.SZ,{className:"mt-1",children:"Organize your wedding media into nested folders"}),t.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:[t.length," folders"]}),(0,a.jsxs)("span",{children:[V," items"]}),(0,a.jsxs)("span",{children:[er(H)," total"]})]})]}),(0,a.jsxs)(o.z,{onClick:()=>T(),disabled:d,size:"sm",children:[a.jsx(ee,{className:"w-4 h-4 mr-2"}),"New Folder"]})]})}),(0,a.jsxs)(n.aY,{children:[d&&0===t.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"Loading folders..."})}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Q,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm font-medium",children:"No folders yet"}),a.jsx("p",{className:"text-xs mt-1",children:"Create folders to organize your media"})]}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>{h(null),s&&s(null)},className:`w-full flex items-center justify-between p-3 rounded-lg transition-all ${null===p?"bg-gradient-to-r from-pink-100 to-purple-100 border-2 border-pink-300":"bg-gradient-to-r from-pink-50 to-purple-50 hover:from-pink-100 hover:to-purple-100 border-2 border-transparent"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:a.jsx(b.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold",children:"All Media"}),a.jsx("p",{className:"text-xs text-gray-600",children:"View all photos and videos"})]})]}),a.jsx(ea.Z,{className:"w-5 h-5 text-gray-400"})]}),a.jsx("div",{className:"mt-2 border-t pt-2",children:E(D)})]}),a.jsx(Y.Vq,{open:x,onOpenChange:g,children:(0,a.jsxs)(Y.cZ,{children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Create New Folder"}),a.jsx(Y.Be,{children:_.parentFolderId?"Create a subfolder inside the selected folder":"Create a new root folder to organize media"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Folder Name *"}),a.jsx(G.I,{value:_.name,onChange:e=>N({..._,name:e.target.value}),placeholder:"e.g., Ceremony, Reception, Portraits",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Description (Optional)"}),a.jsx($.g,{value:_.description,onChange:e=>N({..._,description:e.target.value}),placeholder:"Add a description for this folder...",rows:3,className:"mt-1"})]})]}),(0,a.jsxs)(Y.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>{g(!1),N({name:"",description:"",parentFolderId:null})},children:"Cancel"}),a.jsx(o.z,{onClick:q,disabled:d,children:d?"Creating...":"Create Folder"})]})]})}),a.jsx(Y.Vq,{open:y,onOpenChange:j,children:(0,a.jsxs)(Y.cZ,{children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Edit Folder"}),a.jsx(Y.Be,{children:"Update folder name and description"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Folder Name *"}),a.jsx(G.I,{value:_.name,onChange:e=>N({..._,name:e.target.value}),placeholder:"Folder name",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Description (Optional)"}),a.jsx($.g,{value:_.description,onChange:e=>N({..._,description:e.target.value}),placeholder:"Add a description...",rows:3,className:"mt-1"})]})]}),(0,a.jsxs)(Y.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>{j(!1),k(null),N({name:"",description:"",parentFolderId:null})},children:"Cancel"}),a.jsx(o.z,{onClick:z,disabled:d,children:d?"Updating...":"Update Folder"})]})]})}),a.jsx(Y.Vq,{open:f,onOpenChange:v,children:(0,a.jsxs)(Y.cZ,{children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Move Folder"}),(0,a.jsxs)(Y.Be,{children:['Select a new parent folder or choose root to move "',w?.name,'"']})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("button",{onClick:()=>C(null),className:`w-full text-left p-2 rounded hover:bg-gray-100 flex items-center gap-2 ${null===S?"bg-blue-50 border-2 border-blue-300":""}`,children:[a.jsx(X,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Root (No Parent)"})]}),L(D,0,w?.id)]}),(0,a.jsxs)(Y.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>{v(!1),k(null),C(null)},children:"Cancel"}),a.jsx(o.z,{onClick:O,disabled:d||S===w?.parent_folder_id,children:d?"Moving...":"Move Folder"})]})]})})]})]})}var ei=t(240);let eo=(0,H.Z)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var en=t(94893);let ed=(0,H.Z)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),ec=(0,H.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var eu=t(63685),em=t(59734),ep=t(61358),eh=t(41476),ex=t(4291),eg=t(74839),ey=t(93023),ej=t(4620),ef=t(23428),eb=t(75807),ev=t(53722),e_=t(5459),eN=t(49357);let ew=JSON.parse('{"layout_id":"layout_1","name":"Vertical Wedding Invitation","description":"Single-column vertical layout with dynamic video template (9:16 or 16:9), couple photo with border, YouTube video, studio branding, and precious moments gallery. Fully mobile responsive.","version":"3.0","thumbnail":"/layout-previews/layout1.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Couple photo with decorative border (Section 2)","supports_border":true,"aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":12,"description":"Polaroid-style photo gallery (Section 5)","supports_border":true}},"videos":{"templateVideo":{"required":false,"description":"Dynamic template video with overlays (Section 1)","aspect_ratio":"dynamic","supports_overlays":true},"preWeddingVideo":{"required":false,"description":"YouTube video embed (Section 3)","embed_type":"youtube"}},"branding":{"studioDetails":{"required":false,"description":"Studio branding section (Section 4)","includes":["logo_url","tagline"]}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for couple photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery images"}}},"style_inputs":{"font":{"required":true,"default":"Playfair Display","description":"Primary font family"},"primaryColor":{"required":true,"default":"#1e3a8a","description":"Primary accent color"}},"layout_structure":{"sections":["template_video_section","couple_photo_section","youtube_video_section","studio_branding_section","precious_moments_gallery"],"orientation":"vertical","responsive":true,"dynamic_aspect_ratio":true}}'),ek=JSON.parse('{"layout_id":"layout_2","name":"Center Focus","description":"Large centered couple photo as hero with gallery below. Emphasizes the couple\'s unity.","version":"1.0","thumbnail":"/layout-previews/layout2.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main couple photo (hero image)","supports_border":true,"default_position":"center","aspect_ratio":"square"},"coverPhotos":{"required":false,"type":"array","max_count":5,"description":"Background carousel photos"},"preciousMoments":{"required":false,"type":"array","max_count":20,"description":"Gallery photos with precious moments","supports_border":true,"layout_style":["grid","carousel"]},"studioImage":{"required":false,"description":"Studio partner logo/photo","supports_border":false},"streamImage":{"required":false,"description":"Live stream thumbnail"}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":150,"description":"Welcome greeting text"},"description":{"required":false,"max_length":400,"description":"Love story or event description"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"},"studioLogo":{"required":false,"description":"Studio logo URL"},"studioContact":{"required":false,"description":"Studio contact information"}},"backgrounds":{"heroBackground":{"required":false,"description":"Hero section background image"},"liveBackground":{"required":false,"description":"Live streaming section background"}}},"style_inputs":{"font":{"required":true,"default":"Cormorant Garamond","description":"Primary font family"},"primaryColor":{"required":true,"default":"#3b82f6","description":"Primary brand color (hex)"},"secondaryColor":{"required":true,"default":"#8b5cf6","description":"Secondary accent color (hex)"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border style for gallery photos"}},"layout_structure":{"sections":["hero_center","couple_intro","event_details","precious_moments_gallery","live_stream","studio_details"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eS=JSON.parse('{"layout_id":"layout_3","name":"Horizontal Timeline","description":"Interactive horizontal scrolling journey on desktop, beautiful vertical timeline on mobile. Tells a chronological love story.","version":"2.0","thumbnail":"/layout-previews/layout3.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Hero photo at start of timeline","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":10,"description":"Photos scattered along the timeline","supports_border":true}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Opening tagline"},"description":{"required":false,"max_length":400,"description":"Love story narrative"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for hero photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for timeline photos"}}},"style_inputs":{"font":{"required":true,"default":"Lato","description":"Primary font family"},"primaryColor":{"required":true,"default":"#be185d","description":"Timeline connector color"}},"layout_structure":{"sections":["horizontal_scroll_container","hero_section","story_card","moments_scattered","event_details_card","media_cta"]}}'),eC=JSON.parse('{"layout_id":"layout_4","name":"Modern Scrapbook","description":"A warm, personal layout designed like a handcrafted scrapbook. Features taped photos, handwritten fonts, stickers, and a textured paper feel.","version":"2.0","thumbnail":"/layout-previews/layout4.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main Polaroid Photo","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":12,"description":"Scattered polaroid photos","supports_border":true}},"videos":{"preWeddingVideo":{"required":false,"description":"Video tape style embed","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":60,"description":"Notebook header"},"description":{"required":false,"max_length":800,"description":"Handwritten note"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for main photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery photos"}}},"style_inputs":{"font":{"required":true,"default":"Indie Flower","description":"Handwriting font family"},"primaryColor":{"required":true,"default":"#44403c","description":"Ink color"}},"layout_structure":{"sections":["polaroid_hero","notebook_story","ticket_stubs_details","scattered_gallery","video_tape","footer"]}}'),eZ=JSON.parse('{"layout_id":"layout_5","name":"Minimalist Card","description":"Ultra-clean card-based design with emphasis on negative space and elegant simplicity. Modern minimalist aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout5.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main couple photo in card","supports_border":true,"default_position":"center","aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":9,"description":"Minimal gallery (3x3 grid)","supports_border":false,"layout_style":["grid"]},"studioImage":{"required":false,"description":"Studio logo minimal","supports_border":false}},"videos":{"preWeddingVideo":{"required":false,"description":"Video in clean card","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":80,"description":"Brief welcome text"},"description":{"required":false,"max_length":300,"description":"Short description only"}},"studio_info":{"studioName":{"required":false,"description":"Studio name"}},"backgrounds":{"heroBackground":{"required":false,"description":"Subtle background"}}},"style_inputs":{"font":{"required":true,"default":"Montserrat","description":"Clean modern font"},"primaryColor":{"required":true,"default":"#000000","description":"Primary color (typically black/dark)"},"secondaryColor":{"required":true,"default":"#737373","description":"Secondary gray tone"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"}},"layout_structure":{"sections":["hero_card","info_card","gallery_card","live_card","footer_card"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eP=JSON.parse('{"layout_id":"layout_6","name":"Romantic Overlay","description":"Full-screen couple photo with elegant text overlay, floating transparent cards, and dreamy romantic aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout6.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Full-screen background couple photo","supports_border":false,"default_position":"background","aspect_ratio":"landscape"},"bridePhoto":{"required":false,"description":"Bride photo (circular overlay)","supports_border":false,"aspect_ratio":"square"},"groomPhoto":{"required":false,"description":"Groom photo (circular overlay)","supports_border":false,"aspect_ratio":"square"},"preciousMoments":{"required":false,"type":"array","max_count":6,"description":"Floating card gallery (limited to 6)","supports_border":true,"layout_style":["grid"]}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Short, impactful romantic message"},"description":{"required":false,"max_length":300,"description":"Love story in floating card"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"},"studioContact":{"required":false,"description":"Studio contact information"}},"backgrounds":{"heroBackground":{"required":false,"description":"Alternative to couple photo as background"}}},"style_inputs":{"font":{"required":true,"default":"Pinyon Script","description":"Primary font family (script recommended)"},"primaryColor":{"required":true,"default":"#fbbf24","description":"Primary accent color (hex)"},"secondaryColor":{"required":true,"default":"#f59e0b","description":"Secondary accent color (hex)"}},"border_slots":{"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border style for gallery photos"}},"layout_structure":{"sections":["hero_fullscreen_overlay","description_card","precious_moments_floating","video_story","studio_details"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eM=JSON.parse('{"layout_id":"layout_7","name":"Editorial Grid","description":"Avant-garde broken grid layout. Asymmetrical image placement, sticky hero, brutalist typography, and museum-like aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout7.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Sticky hero background image","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":8,"description":"Asymmetrical gallery images","supports_border":true}},"videos":{"preWeddingVideo":{"required":false,"description":"Full-width motion picture","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":30,"description":"Top corner label"},"description":{"required":false,"max_length":600,"description":"Exhibition note (main text)"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for hero image"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery images"}}},"style_inputs":{"font":{"required":true,"default":"Space Grotesk","description":"Primary font family (Sans Serif recommended)"},"primaryColor":{"required":true,"default":"#000000","description":"Primary text color"}},"layout_structure":{"sections":["sticky_parallax_hero","exhibition_intro","asymmetrical_gallery","brutalist_details","cinema_video","footer"]}}'),eB=JSON.parse('{"layout_id":"layout_8","name":"Zen Minimalist","description":"Ultra-minimalist vertical flow with maximum white space, large impactful typography, and single-column layout focused on essential elements.","version":"2.0","thumbnail":"/layout-previews/layout8.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Primary couple photo (full-width)","supports_border":true,"aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":3,"description":"Three-column minimal gallery (limited to 3)","supports_border":false,"layout_style":["three-column"]}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Simple, elegant message"},"description":{"required":false,"max_length":300,"description":"Minimal love story"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"}}},"style_inputs":{"font":{"required":true,"default":"CINZEL","description":"Primary font family (serif recommended)"},"primaryColor":{"required":true,"default":"#18181b","description":"Primary text color (dark recommended)"},"secondaryColor":{"required":true,"default":"#71717a","description":"Secondary text color (gray recommended)"}},"layout_structure":{"sections":["hero_minimal","couple_photo_fullwidth","description_centered","event_details_vertical","precious_moments_three_column","video_story","studio_details_minimal"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eq=(eg.default,ey.default,ej.default,ef.default,eb.default,ev.default,e_.default,eN.default,{layout_1:ew,layout_2:ek,layout_3:eS,layout_4:eC,layout_5:eZ,layout_6:eP,layout_7:eM,layout_8:eB}),ez={layout_1:{bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride's individual photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom's individual photo"},couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Gallery photos with precious moments"},studioImage:{name:"studioImage",required:!1,supports_border:!0,max_count:1,description:"Studio partner logo/photo"}},layout_2:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo (hero image)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Gallery photos"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio partner logo"}},layout_3:{bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride's individual photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom's individual photo"},couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Horizontal scrolling gallery"}},layout_4:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo for magazine cover"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!1,max_count:1,description:"Bride feature photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!1,max_count:1,description:"Groom feature photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Gallery in magazine grid layout"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio logo for credits"}},layout_5:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Main couple photo in card"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Minimal gallery (3x3 grid max)"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio logo minimal"}},layout_6:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Full-screen background couple photo"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!1,max_count:1,description:"Bride photo (circular overlay)"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!1,max_count:1,description:"Groom photo (circular overlay)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Floating card gallery"}},layout_7:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Large feature photo in grid"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride photo in offset grid position"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom photo in offset grid position"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Staggered grid gallery"}},layout_8:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Primary couple photo (full-width)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:3,description:"Three-column minimal gallery (max 3)"}}},e$={layout_1:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for bride/groom photos (shared, groom mirrored)"},coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"},studioBorder:{name:"studioBorder",applies_to:["studioImage"],description:"Border for studio image"}},layout_2:{coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"}},layout_3:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for individual photos"},coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"}},layout_4:{coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for cover photo"}},layout_5:{},layout_6:{},layout_7:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for individual photos"}},layout_8:{}},eA={layout_1:{layout_id:"layout_1",name:"Classic Split Hero",description:"Side-by-side bride and groom photos with centered couple photo below",supports_youtube:!0,supports_studio_image:!0},layout_2:{layout_id:"layout_2",name:"Center Focus",description:"Large centered couple photo as hero with gallery below",supports_youtube:!0,supports_studio_image:!0},layout_3:{layout_id:"layout_3",name:"Horizontal Timeline",description:"Journey-style layout with bride and groom photos connected by timeline",supports_youtube:!0,supports_studio_image:!0},layout_4:{layout_id:"layout_4",name:"Magazine Style",description:"Editorial magazine-inspired layout with multi-column text and images",supports_youtube:!0,supports_studio_image:!0},layout_5:{layout_id:"layout_5",name:"Minimalist Card",description:"Ultra-clean card-based design with emphasis on negative space",supports_youtube:!0,supports_studio_image:!0},layout_6:{layout_id:"layout_6",name:"Romantic Overlay",description:"Full-screen couple photo with elegant text overlay and floating cards",supports_youtube:!0,supports_studio_image:!0},layout_7:{layout_id:"layout_7",name:"Editorial Grid",description:"Asymmetric grid layout inspired by editorial design with bold typography",supports_youtube:!0,supports_studio_image:!0},layout_8:{layout_id:"layout_8",name:"Zen Minimalist",description:"Ultra-minimalist vertical flow with maximum white space",supports_youtube:!0,supports_studio_image:!0}};function eO(e){let s=ez[e]||{},t=e$[e]||{},a=eA[e]||null,r=Object.keys(s).length,l=Object.keys(t).length,i=s.preciousMoments?.max_count||0;return{photoPlaceholderCount:r,borderSlotCount:l,hasBridePhoto:!!s.bridePhoto,hasGroomPhoto:!!s.groomPhoto,hasCouplePhoto:!!s.couplePhoto,hasPreciousMoments:!!s.preciousMoments,preciousMomentsMax:i,hasStudioImage:!!s.studioImage,supportsYouTube:a?.supports_youtube||!1,supportsBorders:l>0,layoutName:a?.name||e,layoutDescription:a?.description||""}}var eT=t(15361);function eF({weddingId:e,wedding:s}){let{updateFont:t}=(0,eh.j)(),{updateBorder:l}=(0,ex.P)(),[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),g=(0,r.useRef)({}),[y,j]=(0,r.useState)({}),[f,v]=(0,r.useState)(!1),[_,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)({layout_page_background_id:null,stream_page_background_id:null}),[S,C]=(0,r.useState)([]),[Z,P]=(0,r.useState)([]),[q,A]=(0,r.useState)(!0),[F,U]=(0,r.useState)([]),[E,L]=(0,r.useState)(!1),[R,D]=(0,r.useState)("layout_1"),I=async()=>{try{let s=(await B.default.get(`/api/weddings/${e}/theme`)).data,t=s.layout_id||s.theme_id||"layout_1";D(t),h({layout_id:t,custom_font:s.custom_font||"Great Vibes",primary_color:s.primary_color||"#f43f5e",secondary_color:s.secondary_color||"#a855f7",pre_wedding_video:s.pre_wedding_video||"",studio_details:s.studio_details||{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:s.custom_messages||{welcome_text:"Welcome to our big day",description:""},theme_assets:s.theme_assets||{borders:{},background_image_id:null}})}catch(e){console.error("Error loading layout:",e),M.toast.error("Failed to load layout settings"),h({layout_id:"layout_1",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:{welcome_text:"Welcome to our big day",description:""},theme_assets:{borders:{},background_image_id:null}})}},Y=e=>{let s=[];return Object.keys(e).forEach(t=>{let a=e[t];if(Array.isArray(a))a.forEach((e,a)=>{if(e){let r=e.retryCount>=e.maxRetries,l=e.file_id&&e.file_id.startsWith("file_")&&["8","12","13","14","52","53","54","55","56","57"].includes(e.file_id.replace("file_","").replace(".jpg","")),i=e.retryCount>0&&!e.url;(r||l||i)&&s.push({slotName:t,index:a,photo:e})}});else if(a){let e=a.retryCount>=a.maxRetries,r=a.file_id&&a.file_id.startsWith("file_")&&["8","12","13","14","52","53","54","55","56","57"].includes(a.file_id.replace("file_","").replace(".jpg","")),l=a.retryCount>0&&!a.url;(e||r||l)&&s.push({slotName:t,index:0,photo:a})}}),s},V=async()=>{try{v(!0),N(!1);let s=(await B.default.get(`/api/weddings/${e}/layout-photos`)).data.photos||{},t=(0,ep.bR)();console.log("[LOAD_LAYOUT_PHOTOS] Received photos from API:",Object.keys(s)),Object.keys(s).forEach(e=>{let a=s[e];Array.isArray(a)?a.forEach((s,a)=>{s&&s.url&&(s.url.startsWith("/api/")?(s.url=`${t}${s.url}`,console.log(`[LOAD_LAYOUT_PHOTOS] ${e}[${a}]: Prepended base URL:`,s.url)):(s.url.startsWith("http://")||s.url.startsWith("https://"))&&console.log(`[LOAD_LAYOUT_PHOTOS] ${e}[${a}]: Keeping absolute URL:`,s.url),s.retryCount=0,s.maxRetries=ep.ZP.IMAGE.MAX_RETRIES||2)}):a&&a.url&&(a.url.startsWith("/api/")?(a.url=`${t}${a.url}`,console.log(`[LOAD_LAYOUT_PHOTOS] ${e}: Prepended base URL:`,a.url)):(a.url.startsWith("http://")||a.url.startsWith("https://"))&&console.log(`[LOAD_LAYOUT_PHOTOS] ${e}: Keeping absolute URL:`,a.url),a.retryCount=0,a.maxRetries=ep.ZP.IMAGE.MAX_RETRIES||2)}),j(s),console.log("[LOAD_LAYOUT_PHOTOS] Photos loaded successfully")}catch(e){console.error("[LOAD_LAYOUT_PHOTOS] Error loading layout photos:",e),j({}),("ERR_NETWORK"===e.code||e.message.includes("Network Error"))&&N(!0)}finally{v(!1)}},W=async()=>{try{console.log("[LOAD_BACKGROUNDS] Loading backgrounds for wedding:",e);let s=await B.default.get(`/api/weddings/${e}/backgrounds`);console.log("[LOAD_BACKGROUNDS] API Response:",s.data);let t={layout_page_background_id:s.data.layout_page_background_id||null,stream_page_background_id:s.data.stream_page_background_id||null,layout_page_background_url:s.data.layout_page_background_url||null,stream_page_background_url:s.data.stream_page_background_url||null};k(t),console.log("[LOAD_BACKGROUNDS] State updated:",t),console.log("[LOAD_BACKGROUNDS] Layout preview URL:",t.layout_page_background_url),console.log("[LOAD_BACKGROUNDS] Stream preview URL:",t.stream_page_background_url)}catch(e){console.error("[LOAD_BACKGROUNDS] Error:",e),console.error("[LOAD_BACKGROUNDS] Error details:",e.response?.data||e.message),k({layout_page_background_id:null,stream_page_background_id:null,layout_page_background_url:null,stream_page_background_url:null})}},K=async s=>{if(!(Object.keys(y).length>0)||window.confirm("You have existing photos. Changing the layout may affect how they are displayed. Continue?"))try{o(!0),D(s),await B.default.put(`/api/weddings/${e}/theme`,{layout_id:s}),M.toast.success("Layout changed successfully!"),I(),V()}catch(e){console.error("Error changing layout:",e),M.toast.error("Failed to change layout")}finally{o(!1)}},H=async s=>{try{o(!0),await B.default.put(`/api/weddings/${e}/theme`,s),M.toast.success("Settings updated!"),I()}catch(e){console.error("Error updating layout:",e),M.toast.error("Failed to update settings")}finally{o(!1)}},X=async(s,t,a=0)=>{console.log("handlePhotoUpload called with:",{placeholder:s,fileName:t?.name,retryCount:a});try{if(c(!0),!t){console.error("No file selected"),M.toast.error("No file selected");return}if(t.size>10485760){M.toast.error(`File too large (${(t.size/1048576).toFixed(2)}MB). Maximum size is 10MB`);return}if(!t.type.startsWith("image/")){M.toast.error("Only image files are allowed");return}let a=new FormData;a.append("placeholder",s),a.append("file",t);let r=M.toast.loading(`Uploading photo to ${s}...`);await B.default.post(`/api/weddings/${e}/layout-photos/upload`,a,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5}),M.toast.dismiss(r),M.toast.success(`Photo uploaded to ${s}!`,{duration:3e3,icon:""}),V()}catch(r){if(console.error("Error uploading photo:",r),("ECONNABORTED"===r.code||r.message.includes("timeout"))&&a<2){M.toast.warning(`Upload timeout. Retrying... (${a+1}/2)`),setTimeout(()=>X(s,t,a+1),2e3);return}let e="Failed to upload photo";if(r.response?.data?.detail){let s=r.response.data.detail;"string"==typeof s?e=s:"object"==typeof s&&s.error&&(e=s.error)}else r.message&&(e=r.message);M.toast.error(e,{duration:5e3,action:a<2?{label:"Retry",onClick:()=>X(s,t,a+1)}:void 0})}finally{c(!1)}},Q=async(s,t)=>{if(window.confirm("Are you sure you want to delete this photo?"))try{let a=M.toast.loading("Deleting photo...");await B.default.delete(`/api/weddings/${e}/layout-photos/${s}/${t}`),M.toast.dismiss(a),M.toast.success("Photo deleted!",{duration:2e3,icon:"\uD83D\uDDD1"}),V()}catch(s){console.error("Error deleting photo:",s);let e="Failed to delete photo";if(s.response?.data?.detail){let t=s.response.data.detail;"string"==typeof t?e=t:"object"==typeof t&&t.error&&(e=t.error)}M.toast.error(e,{duration:4e3})}},J=async s=>{try{o(!0),console.log("[BACKGROUND_UPDATE] Updating backgrounds:",s),await B.default.put(`/api/weddings/${e}/backgrounds`,s),console.log("[BACKGROUND_UPDATE] Background update API call successful"),M.toast.success("Background updated! Refreshing...",{duration:2e3}),await new Promise(e=>setTimeout(e,500)),await W(),console.log("[BACKGROUND_UPDATE] Backgrounds reloaded"),setTimeout(()=>{console.log("[BACKGROUND_UPDATE] Forcing page reload to apply background changes"),window.location.reload()},1e3)}catch(e){console.error("[BACKGROUND_UPDATE] Error updating backgrounds:",e),M.toast.error(e.response?.data?.detail||"Failed to update backgrounds")}finally{o(!1)}},ee=u||{layout_id:"layout_1",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:{welcome_text:"Welcome to our big day",description:""},theme_assets:{borders:{},background_image_id:null}},es=eA[R]||null,et=ez[R]||{},ea=e$[R]||{};if(eO(R),!u)return a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-rose-500"})});let er=Object.keys(eq).map(e=>({id:e,...eq[e]}));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(eo,{className:"w-5 h-5"}),"Wedding Layout"]}),a.jsx(n.SZ,{children:"Choose a layout structure for your wedding page"})]}),a.jsx(n.aY,{className:"space-y-4",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:er.map(e=>{let s=e.layout_id===R,t=eO(e.layout_id);return(0,a.jsxs)("button",{"data-testid":`layout-card-${e.layout_id}`,onClick:()=>K(e.layout_id),disabled:i,className:`relative p-4 rounded-lg border-2 text-left transition-all group ${s?"border-rose-500 bg-rose-50":"border-gray-200 hover:border-rose-300"} ${i?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("div",{className:"mb-3 aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded overflow-hidden",children:e.thumbnail?a.jsx("img",{src:e.thumbnail,alt:e.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(eo,{className:"w-12 h-12 text-gray-300"})})}),a.jsx("div",{className:"font-semibold text-sm",children:e.name}),a.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1",children:[t.supportsYouTube&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-100 text-red-700 text-[10px] rounded-full",children:[a.jsx(en.Z,{className:"w-2.5 h-2.5"}),"YouTube"]}),t.supportsBorders&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-[10px] rounded-full",children:[a.jsx(ed,{className:"w-2.5 h-2.5"}),"Borders"]}),t.photoPlaceholderCount&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] rounded-full",children:[a.jsx(b.Z,{className:"w-2.5 h-2.5"}),t.photoPlaceholderCount," slots"]})]}),s&&a.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-rose-500 rounded-full flex items-center justify-center",children:a.jsx(ec,{className:"w-4 h-4 text-white"})}),a.jsx("div",{className:"absolute inset-0 bg-black/90 rounded-lg p-3 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:(0,a.jsxs)("div",{className:"text-white text-xs space-y-1",children:[a.jsx("p",{className:"font-semibold",children:t.layoutName}),a.jsx("p",{className:"text-gray-300 text-[10px]",children:t.layoutDescription}),(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-2 mt-2 space-y-1",children:[t.hasBridePhoto&&a.jsx("p",{children:" Bride photo"}),t.hasGroomPhoto&&a.jsx("p",{children:" Groom photo"}),t.hasCouplePhoto&&a.jsx("p",{children:" Couple photo"}),t.hasPreciousMoments&&(0,a.jsxs)("p",{children:[" Gallery (max ",t.preciousMomentsMax,")"]})]})]})})]},e.layout_id)})})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Welcome Message & Description"}),a.jsx(n.SZ,{children:"Customize the text content for your wedding page"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{children:"Welcome Message"}),a.jsx(G.I,{value:ee.custom_messages?.welcome_text||"",onChange:e=>H({custom_messages:{...ee.custom_messages,welcome_text:e.target.value}}),placeholder:"Welcome to our big day",disabled:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{children:"Description"}),a.jsx($.g,{value:ee.custom_messages?.description||"",onChange:e=>H({custom_messages:{...ee.custom_messages,description:e.target.value}}),placeholder:"Share your love story...",rows:4,disabled:i})]})]})]}),es?.supports_youtube&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(en.Z,{className:"w-5 h-5"}),"Pre-Wedding Video"]}),a.jsx(n.SZ,{children:"Add a YouTube video (supported by this layout)"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{children:"YouTube URL"}),a.jsx(G.I,{value:ee.pre_wedding_video||"",onChange:e=>{let s=e.target.value;H({pre_wedding_video:((0,eT.yk)(s)?(0,eT.Tc)(s):s)||s})},placeholder:"https://youtube.com/watch?v=... or https://youtu.be/...",disabled:i}),a.jsx("p",{className:"text-xs text-gray-500",children:"Supports: youtube.com/watch?v=, youtu.be/, and embed URLs"})]}),ee.pre_wedding_video&&(0,eT.yk)(ee.pre_wedding_video)&&a.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:a.jsx("iframe",{src:(0,eT.Tc)(ee.pre_wedding_video),title:"Pre-wedding video preview",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-5 h-5"}),"Photos"]}),a.jsx(n.SZ,{children:"Upload photos based on your selected layout's placeholders"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[a.jsx("span",{className:"font-semibold",children:"Selected Layout:"})," ",es?.name]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:es?.description})]}),f?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading photos..."]}):(0,a.jsxs)(a.Fragment,{children:[(()=>{let e=Y(y);return e.length>0?(0,a.jsxs)(m.bZ,{variant:"destructive",className:"mb-4",children:[a.jsx(T.Z,{className:"h-4 w-4"}),a.jsx(m.X,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Broken Photo References Detected:"})," ",e.length," photo(s) reference files that no longer exist on Telegram."]}),a.jsx("div",{className:"space-y-1",children:e.map(({slotName:e,index:s,photo:t})=>(0,a.jsxs)("div",{className:"text-xs flex items-center justify-between",children:[(0,a.jsxs)("span",{children:[e," ",s>0?`(${s+1})`:""]}),a.jsx("button",{onClick:()=>{window.confirm(`Clear broken photo from ${e}${s>0?` (${s+1})`:""}?`)&&Q(e,s)},className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Clear"})]},`${e}-${s}`))}),a.jsx("button",{onClick:()=>{window.confirm(`Clear all ${e.length} broken photo references?`)&&e.forEach(({slotName:e,index:s})=>{Q(e,s)})},className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 mt-2",children:"Clear All Broken Photos"})]})})]}):null})(),_&&(0,a.jsxs)(m.bZ,{variant:"destructive",className:"mb-4",children:[a.jsx(T.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{children:[a.jsx("strong",{children:"Photo Loading Issue:"})," Unable to load photos from server. This may be due to network connectivity or server issues. Photos will show as placeholders until the issue is resolved."]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(et).map(([e,s])=>{let t=y[e],r="preciousMoments"===e,l=r?t?.length||0:t?1:0,i=s.max_count,o=l<i,n="border-gray-300 bg-gray-50 text-gray-600";return e.includes("bride")?n="border-pink-300 bg-pink-50 text-pink-600":e.includes("groom")?n="border-blue-300 bg-blue-50 text-blue-600":e.includes("couple")?n="border-purple-300 bg-purple-50 text-purple-600":e.includes("precious")||e.includes("Moments")?n="border-green-300 bg-green-50 text-green-600":e.includes("studio")&&(n="border-amber-300 bg-amber-50 text-amber-600"),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:`aspect-square rounded-lg border-2 border-dashed ${n} hover:border-rose-500 hover:bg-rose-50 transition-colors cursor-pointer flex flex-col items-center justify-center gap-2 group`,children:[a.jsx("input",{type:"file",accept:"image/*",className:"hidden","data-testid":`upload-${e}`,multiple:r,ref:s=>{s&&(g.current[e]=s)},disabled:d,onChange:s=>{let t=Array.from(s.target.files||[]);if(!t.length){s.target.value="";return}if(r){if(l>=i){M.toast.error("Gallery is full. Delete a photo to add more."),s.target.value="";return}let a=i-l,r=t.slice(0,a);t.length>a&&M.toast.warning(`Only ${a} photo(s) can be added. Extra files were ignored.`),(async()=>{for(let s of r)console.log("File selected for upload:",s.name,"to slot:",e),await X(e,s)})()}else{let s=t[0];console.log("File selected for upload:",s.name,"to slot:",e),X(e,s)}s.target.value=""}}),d?a.jsx(p.Z,{className:"w-6 h-6 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(eu.Z,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium text-center px-2",children:s.description.split(" ").slice(0,2).join(" ")}),s.required&&a.jsx("span",{className:"text-[10px] text-red-500 font-semibold",children:"Required"}),!o&&a.jsx("span",{className:"text-[10px] text-gray-500",children:r?"Full":"Replace"}),r&&(0,a.jsxs)("span",{className:"text-[10px] mt-0.5",children:[l,"/",i]})]})]}),t&&a.jsx("div",{className:"grid grid-cols-2 gap-1 cursor-pointer",onClick:()=>{if(d)return;let s=g.current[e];s&&s.click()},children:Array.isArray(t)?t.map((t,r)=>(0,a.jsxs)("div",{className:"relative group aspect-square","data-testid":`photo-${e}-${r}`,children:[a.jsx("img",{src:t.url||t,alt:s.description,className:"w-full h-full object-cover rounded border",onError:e=>{if(console.error("Photo failed to load:",t.url||t,e),t.fallbackUrl&&t.retryCount<t.maxRetries){console.log(`Retrying with fallback URL (attempt ${t.retryCount+1}/${t.maxRetries}):`,t.fallbackUrl),t.retryCount++,e.target.src=t.fallbackUrl;return}_||(N(!0),console.warn("Photo connectivity issue detected - showing user warning")),e.target.style.display="none",e.target.nextSibling.style.display="flex"},onLoad:e=>{console.log("Photo loaded successfully:",t.url||t),e.target.nextSibling.style.display="none"}}),a.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded border",style:{display:"none"},children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(b.Z,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),a.jsx("button",{onClick:s=>{s.stopPropagation();let a=t.photo_id||`photo-${r}`;console.log("Deleting photo:",{slotName:e,photoId:a,photo:t}),Q(e,a)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`delete-${e}-${r}`,children:a.jsx(O.Z,{className:"w-3 h-3"})})]},t.photo_id||r)):(0,a.jsxs)("div",{className:"relative group aspect-square","data-testid":`photo-${e}`,children:[a.jsx("img",{src:t.url||t,alt:s.description,className:"w-full h-full object-cover rounded border",onError:e=>{if(console.error("Photo failed to load:",t.url||t,e),t.fallbackUrl&&t.retryCount<t.maxRetries){console.log(`Retrying with fallback URL (attempt ${t.retryCount+1}/${t.maxRetries}):`,t.fallbackUrl),t.retryCount++,e.target.src=t.fallbackUrl;return}_||(N(!0),console.warn("Photo connectivity issue detected - showing user warning")),e.target.style.display="none",e.target.nextSibling.style.display="flex"},onLoad:e=>{console.log("Photo loaded successfully:",t.url||t),e.target.nextSibling.style.display="none"}}),a.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded border",style:{display:"none"},children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(b.Z,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),a.jsx("button",{onClick:s=>{s.stopPropagation(),Q(e,t.photo_id||"0")},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`delete-${e}`,children:a.jsx(O.Z,{className:"w-3 h-3"})})]})})]},e)})}),(()=>{let e=function(e,s={}){let t=ez[e]||{},a=[];for(let[e,r]of Object.entries(t))r.required&&!s[e]&&a.push({name:e,description:r.description});return{isValid:0===a.length,missingRequired:a}}(R,y);return e.isValid?(0,a.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[a.jsx(ec,{className:"w-4 h-4 text-green-600"}),a.jsx("p",{className:"text-xs text-green-800 font-medium",children:"All required photos uploaded!"})]}):(0,a.jsxs)("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-2",children:[a.jsx(T.Z,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-xs text-amber-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Missing required photos:"}),a.jsx("ul",{className:"list-disc list-inside space-y-0.5",children:e.missingRequired.map(e=>a.jsx("li",{children:e.description},e.name))})]})]})})()]})]})]}),Object.keys(ea).length>0&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(ed,{className:"w-5 h-5"}),"Photo Borders"]}),a.jsx(n.SZ,{children:"Customize borders for photos (based on layout support)"})]}),a.jsx(n.aY,{className:"space-y-4",children:q?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading borders..."]}):0===S.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[a.jsx("p",{className:"text-sm text-amber-800",children:"No borders available"}),a.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload borders first"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(ea).map(([e,s])=>{let t=null;"brideGroomBorder"===e?t="bride_groom_border_id":"coupleBorder"===e?t="couple_border_id":"preciousMomentsBorder"===e?t="precious_moments_border_id":"studioBorder"===e&&(t="studio_border_id");let r=ee.theme_assets?.borders?.[t],i=S.find(e=>e.id===r);return(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-lg border",children:[(0,a.jsxs)(z._,{className:"text-xs font-medium flex items-center justify-between",children:[a.jsx("span",{children:s.description}),"brideGroomBorder"===e&&a.jsx("span",{className:"text-[10px] text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:"Groom mirrored"})]}),(0,a.jsxs)(ei.Ph,{value:r||"none",onValueChange:e=>{H({theme_assets:{...ee.theme_assets,borders:{...ee.theme_assets?.borders,[t]:"none"===e?null:e}}}),l(t,"none"===e?null:e)},children:[a.jsx(ei.i4,{className:"text-xs bg-white","data-testid":`border-selector-${e}`,children:a.jsx(ei.ki,{placeholder:"Select border"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),S.filter(s=>"brideGroomBorder"===e||("coupleBorder"===e?s.tags?.includes("couple")||!s.tags?.includes("individual"):"preciousMomentsBorder"===e?s.tags?.includes("gallery")||!s.tags?.includes("individual"):"studioBorder"!==e||s.tags?.includes("minimal")||s.tags?.includes("studio"))).map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-8 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name}),e.tags&&e.tags.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tags.join(", "),")"]})]})},e.id))]})]}),i?.cdn_url&&a.jsx("div",{className:"mt-2 p-2 bg-white rounded border",children:a.jsx("img",{src:i.cdn_url,alt:"Preview",className:"w-full h-20 object-contain"})})]},e)})})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Stream Border"]}),a.jsx(n.SZ,{children:"Add a decorative border around the video player during live stream"})]}),a.jsx(n.aY,{className:"space-y-4",children:q?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading borders..."]}):0===S.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[a.jsx("p",{className:"text-sm text-amber-800",children:"No borders available"}),a.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload borders first"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{className:"text-sm font-medium",children:"Border for Video Player"}),(0,a.jsxs)(ei.Ph,{value:ee.theme_assets?.borders?.stream_border_id||"none",onValueChange:e=>{H({theme_assets:{...ee.theme_assets,borders:{...ee.theme_assets?.borders,stream_border_id:"none"===e?null:e}}})},children:[a.jsx(ei.i4,{className:"text-xs bg-white","data-testid":"border-selector-stream",children:a.jsx(ei.ki,{placeholder:"Select border for stream"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),S.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-8 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name}),e.tags&&e.tags.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tags.join(", "),")"]})]})},e.id))]})]}),(()=>{let e=ee.theme_assets?.borders?.stream_border_id,s=S.find(s=>s.id===e);return s?.cdn_url?(0,a.jsxs)("div",{className:"mt-2 p-2 bg-white rounded border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),a.jsx("img",{src:s.cdn_url,alt:"Stream Border Preview",className:"w-full h-20 object-contain"})]}):null})(),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This border will appear around the video player during live streaming"})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-5 h-5"}),"Background Images"]}),a.jsx(n.SZ,{children:"Set separate backgrounds for layout page and stream page"})]}),a.jsx(n.aY,{className:"space-y-4",children:q?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading backgrounds..."]}):0===Z.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[a.jsx("p",{className:"text-sm text-amber-800",children:"No backgrounds available"}),a.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload backgrounds first"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{className:"text-sm font-semibold",children:"Layout Page Background"}),(0,a.jsxs)(ei.Ph,{value:w.layout_page_background_id||"none",onValueChange:e=>{J({layout_page_background_id:"none"===e?null:e})},children:[a.jsx(ei.i4,{className:"bg-white","data-testid":"layout-background-selector",children:a.jsx(ei.ki,{placeholder:"Select background for layout page"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),Z.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-12 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name})]})},e.id))]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[w.layout_page_background_id&&!w.layout_page_background_url&&a.jsx("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-700",children:"Background selected but URL not loaded. Check console for details."}),w.layout_page_background_url&&(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),a.jsx("img",{src:w.layout_page_background_url,alt:"Layout Background",className:"w-full h-32 object-cover rounded",onError:e=>{console.error("[BACKGROUND_IMAGE_ERROR] Failed to load:",w.layout_page_background_url),e.target.style.display="none"}}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1 break-all",children:["URL: ",w.layout_page_background_url]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{className:"text-sm font-semibold",children:"Stream Page Background"}),(0,a.jsxs)(ei.Ph,{value:w.stream_page_background_id||"none",onValueChange:e=>{J({stream_page_background_id:"none"===e?null:e})},children:[a.jsx(ei.i4,{className:"bg-white","data-testid":"stream-background-selector",children:a.jsx(ei.ki,{placeholder:"Select background for stream page"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),Z.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-12 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name})]})},e.id))]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[w.stream_page_background_id&&!w.stream_page_background_url&&a.jsx("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-700",children:"Background selected but URL not loaded. Check console for details."}),w.stream_page_background_url&&(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),a.jsx("img",{src:w.stream_page_background_url,alt:"Stream Background",className:"w-full h-32 object-cover rounded",onError:e=>{console.error("[BACKGROUND_IMAGE_ERROR] Failed to load:",w.stream_page_background_url),e.target.style.display="none"}}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1 break-all",children:["URL: ",w.stream_page_background_url]})]})]})]})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(em.Z,{className:"w-5 h-5"}),"Studio Partner"]}),a.jsx(n.SZ,{children:"Select a studio from your profile (optional)"})]}),a.jsx(n.aY,{className:"space-y-4",children:E?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading studios..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(ei.Ph,{value:ee.studio_details?.studio_id||"none",onValueChange:async e=>{if("none"===e)H({studio_details:{studio_id:"",name:"",logo_url:"",default_image_url:"",website:"",email:"",phone:"",address:"",contact:"",show_details:!1}});else{let s=F.find(s=>s.id===e);s&&(H({studio_details:{studio_id:s.id,name:s.name||"",logo_url:s.logo_url||"",default_image_url:s.default_image_url||"",website:s.website||"",email:s.email||"",phone:s.phone||"",address:s.address||"",contact:s.contact||"",show_details:!0}}),s.default_image_url&&M.toast.success("Studio selected with image!"))}},disabled:i||0===F.length,children:[a.jsx(ei.i4,{className:"bg-white","data-testid":"studio-selector",children:a.jsx(ei.ki,{placeholder:0===F.length?"No studios available - Create one in Profile":"Select a studio"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),F.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.default_image_url&&a.jsx("img",{src:e.default_image_url,alt:e.name,className:"w-8 h-8 object-cover rounded"}),a.jsx("span",{children:e.name})]})},e.id))]})]}),0===F.length&&a.jsx("p",{className:"text-xs text-amber-600",children:"Go to Profile  Studios to create a studio first"})]}),ee.studio_details?.studio_id&&ee.studio_details?.studio_id!==""&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Preview:"}),ee.studio_details?.default_image_url?a.jsx("div",{className:"mb-3",children:a.jsx("img",{src:ee.studio_details.default_image_url,alt:"Studio",className:"w-full h-32 object-cover rounded"})}):(0,a.jsxs)("div",{className:"h-32 mx-auto flex flex-col items-center justify-center bg-gray-100 rounded mb-3",children:[a.jsx(em.Z,{className:"w-8 h-8 text-gray-400"}),a.jsx("span",{className:"text-gray-400 text-xs text-center mt-1",children:"No studio image"})]}),ee.studio_details?.show_details&&(0,a.jsxs)("div",{className:"text-center text-sm space-y-1",children:[ee.studio_details?.name&&a.jsx("p",{className:"font-semibold text-gray-900",children:ee.studio_details.name}),ee.studio_details?.email&&a.jsx("p",{className:"text-gray-600",children:ee.studio_details.email}),ee.studio_details?.phone&&a.jsx("p",{className:"text-gray-600",children:ee.studio_details.phone})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(z._,{className:"text-sm font-medium text-purple-900",children:"Show Studio Details"}),a.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Display contact info along with logo"})]}),a.jsx("button",{type:"button",onClick:()=>H({studio_details:{...ee.studio_details,show_details:!ee.studio_details?.show_details}}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${ee.studio_details?.show_details?"bg-purple-600":"bg-gray-300"}`,disabled:i,"data-testid":"studio-details-toggle",children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ee.studio_details?.show_details?"translate-x-6":"translate-x-1"}`})})]})]})]})})]})]})}var eU=t(66393),eE=t(2815),eL=t(81109);let eR=(0,H.Z)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),eD=(0,H.Z)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);function eI({weddingId:e,wedding:s,onStatusChange:t}){let[l,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),x=async()=>{try{h(!0);let s=await B.default.get(`/api/youtube/status/${e}`);c(s.data)}catch(e){console.error("Error fetching broadcast status:",e)}finally{h(!1)}},g=async a=>{try{if(i(!0),await B.default.post("/api/youtube/transition",{broadcast_id:s.youtube_settings.broadcast_id,status:a}),M.toast.success(`Broadcast transitioned to ${a}`),await x(),t&&t(),"complete"===a)try{await B.default.post(`/api/youtube/save-video-to-media/${e}`),M.toast.success("YouTube video saved to media gallery!")}catch(e){console.error("Error saving video to media:",e),M.toast.error("Broadcast ended but failed to save video to gallery")}}catch(e){console.error("Error transitioning broadcast:",e),M.toast.error(e.response?.data?.detail||`Failed to transition to ${a}`)}finally{i(!1)}};if(!s?.youtube_settings?.broadcast_id)return null;let j=d?.life_cycle_status||"unknown",f="complete"===j;return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(eL.Z,{className:"w-5 h-5 text-red-600"}),"YouTube Broadcast Controls"]}),a.jsx(n.SZ,{children:"Manage your YouTube Live broadcast status"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${(()=>{switch(j){case"live":return"bg-red-500 animate-pulse";case"testing":return"bg-yellow-500";case"complete":return"bg-gray-500";default:return"bg-blue-500"}})()}`}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:(()=>{switch(j){case"ready":return"Ready to Go Live";case"testing":return"Testing (Private)";case"live":return"LIVE";case"complete":return"Ended";case"revoked":return"Cancelled";default:return j}})()}),a.jsx("p",{className:"text-sm text-gray-500",children:"live"===j?"Your stream is live on YouTube":"testing"===j?"Stream is in testing mode (not visible to public)":f?"Broadcast has ended":"Broadcast is ready to start"})]})]}),u&&a.jsx(p.Z,{className:"w-4 h-4 animate-spin text-gray-400"})]}),s.youtube_settings?.youtube_video_url&&(0,a.jsxs)(m.bZ,{children:[a.jsx(eL.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"View on YouTube"}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(s.youtube_settings.youtube_video_url,"_blank"),children:[a.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Open"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 pt-4 border-t",children:["ready"===j&&(0,a.jsxs)(o.z,{onClick:()=>g("testing"),disabled:l,className:"w-full bg-yellow-500 hover:bg-yellow-600",children:[l?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(en.Z,{className:"w-4 h-4 mr-2"}),"Start Testing (Private)"]}),("testing"===j||"ready"===j)&&(0,a.jsxs)(o.z,{onClick:()=>g("live"),disabled:l,className:"w-full bg-red-600 hover:bg-red-700",children:[l?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(eR,{className:"w-4 h-4 mr-2"}),"Go Live on YouTube"]}),("live"===j||"testing"===j)&&(0,a.jsxs)(o.z,{onClick:()=>{confirm("Are you sure you want to end the YouTube broadcast? This will make it available as a video on your channel.")&&g("complete")},disabled:l,variant:"destructive",className:"w-full",children:[l?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(eD,{className:"w-4 h-4 mr-2"}),"End Broadcast"]}),f&&(0,a.jsxs)(m.bZ,{className:"bg-green-50 border-green-200",children:[a.jsx(N.Z,{className:"h-4 w-4 text-green-600"}),a.jsx(m.X,{className:"text-green-800",children:"Broadcast ended successfully. Video is now available on your YouTube channel."})]})]}),!f&&(0,a.jsxs)(m.bZ,{children:[a.jsx(T.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{className:"text-xs",children:[a.jsx("strong",{children:"How it works:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Testing:"})," Start OBS and test privately before going live"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Go Live:"})," Make your stream visible to the public on YouTube"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"End:"})," Finish the broadcast and save the recording"]})]})]})]})]})]})}var eY=t(48998);function eG({weddingId:e,wedding:s}){let[t,l]=(0,r.useState)([]),[i,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),x=async()=>{try{d(!0);let e=await B.default.get("/api/youtube/broadcasts");l(e.data.broadcasts||[])}catch(e){console.error("Error fetching broadcasts:",e),M.toast.error("Failed to load YouTube broadcasts")}finally{d(!1)}};if(!s?.youtube_settings?.auth_connected)return null;let g=e=>{let s={ready:{color:"bg-blue-500",text:"Ready"},testing:{color:"bg-yellow-500",text:"Testing"},live:{color:"bg-red-500",text:"Live"},complete:{color:"bg-green-500",text:"Completed"},revoked:{color:"bg-gray-500",text:"Cancelled"}}[e]||{color:"bg-gray-400",text:e};return a.jsx(c.C,{className:`${s.color} text-white`,children:s.text})};return(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(eL.Z,{className:"w-5 h-5 text-red-600"}),"Your YouTube Broadcasts"]}),a.jsx(n.SZ,{children:"View and manage your previous YouTube Live streams"})]}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>{h(!u),u||x()},children:[u?"Hide":"Show"," Broadcasts"]})]})}),u&&(0,a.jsxs)(n.aY,{className:"space-y-4",children:[i?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(p.Z,{className:"w-6 h-6 animate-spin text-rose-500"})}):0===t.length?(0,a.jsxs)(m.bZ,{children:[a.jsx(eL.Z,{className:"h-4 w-4"}),a.jsx(m.X,{children:"No previous broadcasts found. Create your first YouTube broadcast to get started!"})]}):a.jsx("div",{className:"space-y-3",children:t.map(s=>a.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[s.thumbnail_url&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:s.thumbnail_url,alt:s.title,className:"w-32 h-20 object-cover rounded"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:s.title}),a.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:s.description})]}),g(s.life_cycle_status)]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-xs text-gray-600",children:[s.scheduled_start_time&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(S.Z,{className:"w-3 h-3"}),(0,q.WU)(new Date(s.scheduled_start_time),"MMM d, yyyy")]}),s.actual_start_time&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(eY.Z,{className:"w-3 h-3"}),"Started: ",(0,q.WU)(new Date(s.actual_start_time),"p")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(s.youtube_video_url,"_blank"),children:[a.jsx(y.Z,{className:"w-3 h-3 mr-1"}),"View on YouTube"]}),"complete"===s.life_cycle_status&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:async()=>{try{await B.default.post(`/api/youtube/save-video-to-media/${e}`,{broadcast_id:s.broadcast_id}),M.toast.success("Video added to media gallery!")}catch(e){M.toast.error("Failed to add video to gallery")}},children:[a.jsx(eL.Z,{className:"w-3 h-3 mr-1"}),"Add to Gallery"]})]})]})]})},s.broadcast_id))}),t.length>0&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:x,disabled:i,className:"w-full",children:[i?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Refresh List"]})]})]})}var eV=t(32933),eW=t(84554),eK=t.n(eW);function eH({weddingId:e,currentTemplateId:s,onTemplateAssigned:t}){let[l,i]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[m,h]=(0,r.useState)(s||""),[g,y]=(0,r.useState)(!1),[j,f]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(null),[k,S]=(0,r.useState)([]),[C,Z]=(0,r.useState)(!1),P=async()=>{try{let s=await B.default.get(`/api/weddings/${e}/template-assignment`);console.log("Current assignment:",s.data),s.data.assignment_id&&(f(s.data),h(s.data.template?.id||""))}catch(e){console.error("Failed to load current assignment:",e)}},q=async s=>{let t=l.find(e=>e.id===s);if(t){w(t),v(!0);try{Z(!0);let t=await B.default.post(`/api/video-templates/${s}/preview`,{wedding_id:e});console.log("Preview overlays:",t.data),S(t.data.preview_data?.overlays||[])}catch(e){console.error("Failed to load preview overlays:",e),M.toast.error("Failed to load overlay preview"),S([])}finally{Z(!1)}}},z=async()=>{if(!m){M.toast.error("Please select a template");return}try{y(!0),console.log("Assigning template:",{template_id:m,slot:1,customizations:{color_overrides:{},font_overrides:{}}}),await B.default.post(`/api/weddings/${e}/assign-template`,{template_id:m,slot:1,customizations:{color_overrides:{},font_overrides:{}}}),M.toast.success("Template assigned successfully!"),P(),t&&t()}catch(e){console.error("Failed to assign template:",e),console.error("Error response:",e.response?.data),M.toast.error(e.response?.data?.detail||"Failed to assign template")}finally{y(!1)}},$=async()=>{if(confirm("Are you sure you want to remove the assigned template?"))try{y(!0),await B.default.delete(`/api/weddings/${e}/template-assignment`),M.toast.success("Template removed successfully"),f(null),h(""),t&&t()}catch(e){console.error("Failed to remove template:",e),M.toast.error(e.response?.data?.detail||"Failed to remove template")}finally{y(!1)}};return d?(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Video Template"]}),a.jsx(n.SZ,{children:"Select a video template for your wedding layout"})]}),a.jsx(n.aY,{children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(p.Z,{className:"w-6 h-6 animate-spin text-rose-500"})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Zb,{"data-testid":"template-selector-card",children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Video Template"]}),a.jsx(n.SZ,{children:"Select a video template to use for your wedding layout"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[j&&j.template&&a.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(eV.Z,{className:"w-4 h-4 text-green-600"}),a.jsx("p",{className:"font-semibold text-green-900",children:"Template Assigned"})]}),a.jsx("p",{className:"text-sm text-green-800",children:j.template.name}),a.jsx("p",{className:"text-xs text-green-600 mt-1",children:j.template.description}),j.template.tags&&j.template.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:j.template.tags.map(e=>a.jsx(c.C,{variant:"outline",className:"text-xs bg-white",children:e},e))})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx(o.z,{variant:"ghost",size:"sm",onClick:()=>q(j.template.id),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:a.jsx(_.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{variant:"ghost",size:"sm",onClick:$,disabled:g,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx(O.Z,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Template"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(ei.Ph,{value:m,onValueChange:h,"data-testid":"template-dropdown",children:[a.jsx(ei.i4,{className:"flex-1",children:a.jsx(ei.ki,{placeholder:"Choose a video template..."})}),a.jsx(ei.Bw,{children:0===l.length?a.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No templates available. Create templates in Admin panel."}):l.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"truncate",children:e.name}),e.category&&a.jsx(c.C,{variant:"secondary",className:"text-xs",children:e.category})]})},e.id))})]}),m&&a.jsx(o.z,{variant:"outline",size:"icon",onClick:()=>q(m),title:"Preview Template",children:a.jsx(_.Z,{className:"w-4 h-4"})})]})]}),m&&a.jsx("div",{className:"p-3 bg-gray-50 border rounded-lg",children:(()=>{let e=l.find(e=>e.id===m);return e?(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:e.name}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),e.video_data&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2 grid grid-cols-2 gap-2",children:[(0,a.jsxs)("p",{children:["Duration: ",e.video_data.duration_seconds,"s"]}),(0,a.jsxs)("p",{children:["Resolution: ",e.video_data.width,"x",e.video_data.height]})]}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map(e=>a.jsx(c.C,{variant:"outline",className:"text-xs",children:e},e))})]}):null})()}),a.jsx(o.z,{onClick:z,disabled:!m||g||0===l.length,className:"w-full","data-testid":"assign-template-btn",children:g?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Assigning..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(eV.Z,{className:"w-4 h-4 mr-2"}),j?"Change Template":"Assign Template"]})})]}),a.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-blue-900",children:[a.jsx("strong",{children:"Note:"})," Video templates will be used to generate personalized videos with your wedding information automatically populated."]})})]})]}),a.jsx(Y.Vq,{open:b,onOpenChange:v,children:(0,a.jsxs)(Y.cZ,{className:"max-w-4xl",children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Template Preview"}),(0,a.jsxs)(Y.Be,{children:[N?.name," - ",N?.description]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[N&&N.video_data&&(0,a.jsxs)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden relative",children:[a.jsx(eK(),{url:N.video_data.original_url,width:"100%",height:"100%",controls:!0,playing:!1,light:N.preview_thumbnail?.url||!1,playIcon:a.jsx("div",{className:"w-16 h-16 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all",children:a.jsx("svg",{className:"w-8 h-8 text-rose-500 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})}),config:{file:{attributes:{controlsList:"nodownload"}}}}),!C&&k.length>0&&a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:k.map((e,s)=>a.jsx("div",{className:"absolute",style:{left:`${e.position?.x||0}%`,top:`${e.position?.y||0}%`,transform:"translate(-50%, -50%)",fontSize:`${e.style?.font_size||24}px`,fontFamily:e.style?.font_family||"Arial",color:e.style?.color||"#FFFFFF",fontWeight:e.style?.font_weight||"normal",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",textAlign:"center",maxWidth:"80%"},children:e.text},e.id||s))}),C&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-white"})})]}),k.length>0&&(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Dynamic Overlays Preview (populated with your wedding data):"}),a.jsx("div",{className:"space-y-1",children:k.map((e,s)=>(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[" ",e.data_source,": ",a.jsx("span",{className:"font-semibold",children:e.text})]},s))})]}),N&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Category"}),a.jsx("p",{className:"font-medium",children:N.category||"General"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Duration"}),(0,a.jsxs)("p",{className:"font-medium",children:[N.video_data?.duration_seconds,"s"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Resolution"}),(0,a.jsxs)("p",{className:"font-medium",children:[N.video_data?.width,"x",N.video_data?.height]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Text Overlays"}),(0,a.jsxs)("p",{className:"font-medium",children:[N.text_overlays?.length||0," overlays"]})]})]}),N&&N.tags&&N.tags.length>0&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:N.tags.map(e=>a.jsx(c.C,{variant:"outline",children:e},e))})]})]})]})})]})}var eX=t(69508),eQ=t(11655),eJ=t(31215);let e0=(0,H.Z)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);var e1=t(88307);function e2({isOpen:e,onClose:s,onSelect:t,weddingId:l,maxSelection:i=1,allowedTypes:n=["photo","video"],selectedMedia:u=[],category:m=null,currentCategoryCount:h=0}){let[g,y]=(0,r.useState)(!1),[j,f]=(0,r.useState)([]),[v,_]=(0,r.useState)([]),[N,w]=(0,r.useState)(""),[k,S]=(0,r.useState)(u),[C,Z]=(0,r.useState)("all"),P=e=>{if(k.some(s=>s.id===e.id))S(k.filter(s=>s.id!==e.id));else{if("moment"===m&&h+k.length+1>5){M.toast.error("Maximum 5 precious moments allowed across all layouts");return}1===i?S([e]):k.length<i?S([...k,e]):M.toast.warning(`You can select up to ${i} items`)}},B=j.filter(e=>"photo"===e.media_type).length,q=j.filter(e=>"video"===e.media_type).length;return a.jsx(Y.Vq,{open:e,onOpenChange:s,children:(0,a.jsxs)(Y.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Select Media from Gallery"}),(0,a.jsxs)(Y.Be,{children:["Choose ",1===i?"a photo":`up to ${i} photos`," from your uploaded media"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(e1.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(G.I,{type:"text",placeholder:"Search by caption...",value:N,onChange:e=>w(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(d.mQ,{value:C,onValueChange:Z,children:[(0,a.jsxs)(d.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(d.SP,{value:"all",children:["All (",j.length,")"]}),(0,a.jsxs)(d.SP,{value:"photos",disabled:!n.includes("photo"),children:[a.jsx(b.Z,{className:"w-4 h-4 mr-1"}),"Photos (",B,")"]}),(0,a.jsxs)(d.SP,{value:"videos",disabled:!n.includes("video"),children:[a.jsx(x.Z,{className:"w-4 h-4 mr-1"}),"Videos (",q,")"]})]}),a.jsx(d.nU,{value:C,className:"mt-4",children:g?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}):0===v.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(b.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No media found"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Upload some photos or videos first"})]}):a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:v.map(e=>{let s=k.some(s=>s.id===e.id);return(0,a.jsxs)("div",{onClick:()=>P(e),className:`relative aspect-square cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${s?"border-rose-500 ring-2 ring-rose-200":"border-gray-200 hover:border-rose-300"}`,children:["photo"===e.media_type?a.jsx("img",{src:e.cdn_url||e.file_url||e.url,alt:e.caption||"Media",className:"w-full h-full object-cover",onError:s=>{console.error("Image load error:",s),console.error("Failed image URL:",e.cdn_url||e.file_url||e.url),s.target.style.display="none",s.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center bg-gray-100"><span class="text-gray-400 text-xs">Image Error</span></div>'}}):(0,a.jsxs)("div",{className:"relative w-full h-full bg-gray-100 flex items-center justify-center",children:[a.jsx(x.Z,{className:"w-8 h-8 text-gray-400"}),e.thumbnail_url&&a.jsx("img",{src:e.thumbnail_url,alt:e.caption||"Video",className:"absolute inset-0 w-full h-full object-cover"})]}),s&&a.jsx("div",{className:"absolute inset-0 bg-rose-500 bg-opacity-20 flex items-center justify-center",children:a.jsx("div",{className:"bg-rose-500 text-white rounded-full p-2",children:a.jsx(eV.Z,{className:"w-5 h-5"})})}),e.caption&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:a.jsx("p",{className:"text-white text-xs truncate",children:e.caption})})]},e.id)})})})]}),k.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-rose-50 rounded-lg border border-rose-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(c.C,{variant:"default",className:"bg-rose-500",children:[k.length," selected"]}),a.jsx("span",{className:"text-sm text-gray-600",children:i>1&&`(Maximum: ${i})`})]}),(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>S([]),className:"text-rose-600 hover:text-rose-700",children:[a.jsx(O.Z,{className:"w-4 h-4 mr-1"}),"Clear"]})]})]}),(0,a.jsxs)(Y.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsxs)(o.z,{onClick:()=>{t(k),s()},disabled:0===k.length,className:"bg-rose-500 hover:bg-rose-600",children:[a.jsx(eV.Z,{className:"w-4 h-4 mr-2"}),"Select ",k.length>0&&`(${k.length})`]})]})]})})}var e4=t(924);let e5=(0,H.Z)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);var e3=t(49761);function e6({value:e,onChange:s,className:t=""}){let[l,i]=(0,r.useState)(!1),[n,d]=(0,r.useState)("grid");e3.ES.find(s=>s.value===e);let c=e=>{s(e),i(!1)};return a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:`flex gap-1 ${t}`,children:[(0,a.jsxs)(ei.Ph,{value:e,onValueChange:s,children:[a.jsx(ei.i4,{children:a.jsx(ei.ki,{placeholder:"Select transition"})}),a.jsx(ei.Bw,{className:"max-h-[300px]",children:e3.Hx.map(e=>a.jsx(ei.Ql,{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)(Y.Vq,{open:l,onOpenChange:i,children:[a.jsx(Y.hg,{asChild:!0,children:a.jsx(o.z,{variant:"outline",size:"icon",title:"Browse all transitions",children:a.jsx(e4.Z,{className:"w-4 h-4"})})}),(0,a.jsxs)(Y.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsx(Y.fK,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(Y.$N,{children:"Select Transition Animation"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(o.z,{variant:"grid"===n?"default":"outline",size:"sm",onClick:()=>d("grid"),children:a.jsx(e4.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{variant:"list"===n?"default":"outline",size:"sm",onClick:()=>d("list"),children:a.jsx(e5,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Basic Transitions"}),a.jsx("div",{className:"grid"===n?"grid grid-cols-5 gap-2":"space-y-2",children:e3.Hx.map(s=>a.jsx(o.z,{variant:e===s.value?"default":"outline",className:"grid"===n?"h-auto flex-col py-2":"w-full justify-start",onClick:()=>c(s.value),children:a.jsx("span",{className:"text-xs",children:s.label})},s.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold mb-2",children:["Imagination Animations (",e3.U6.length," styles)"]}),a.jsx("div",{className:"grid"===n?"grid grid-cols-6 gap-2":"grid grid-cols-2 gap-2",children:e3.U6.map(s=>a.jsx(o.z,{variant:e===s.value?"default":"outline",className:"grid"===n?"h-auto flex-col p-1 relative":"h-auto justify-start p-2",onClick:()=>c(s.value),children:"grid"===n?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded mb-1 overflow-hidden",children:a.jsx("img",{src:s.preview,alt:s.label,className:"w-full h-full object-cover"})}),a.jsx("span",{className:"text-[10px] font-medium",children:s.value.split("-")[1]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded overflow-hidden flex-shrink-0",children:a.jsx("img",{src:s.preview,alt:s.label,className:"w-full h-full object-cover"})}),a.jsx("span",{className:"text-xs",children:s.label})]})},s.value))})]})]})]})]})]})})}function e8({albumId:e,onBack:s}){let[t,l]=(0,r.useState)(null),[i,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(!0),[m,x]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[j,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)(5),[_,N]=(0,r.useState)("fade"),[w,k]=(0,r.useState)("none"),S=async()=>{y(!0);try{await B.default.put(`/api/albums/${e}`,{slides:i,music_url:t.music_url}),M.toast.success("Album saved successfully")}catch(e){M.toast.error("Failed to save album")}finally{y(!1)}},C=e=>{let s=[...i];s.splice(e,1),d(s)},Z=(e,s,t)=>{let a=[...i];a[e]={...a[e],[s]:t},d(a)};return c?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx(p.Z,{className:"animate-spin"})}):t?(0,a.jsxs)("div",{className:"space-y-6",children:[j&&a.jsx(eQ.Z,{album:{...t,slides:i},onClose:()=>f(!1)}),(0,a.jsxs)("div",{className:"flex items-center justify-between sticky top-[64px] z-10 bg-white/80 backdrop-blur py-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(o.z,{variant:"ghost",size:"icon",onClick:s,children:a.jsx(h.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:t.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[i.length," photos"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(o.z,{variant:"secondary",onClick:()=>f(!0),children:[a.jsx(en.Z,{className:"w-4 h-4 mr-2"}),"Preview"]}),(0,a.jsxs)(o.z,{variant:"outline",onClick:()=>x(!0),children:[a.jsx(D.Z,{className:"w-4 h-4 mr-2"}),"Add Photos"]}),(0,a.jsxs)(o.z,{onClick:S,disabled:g,children:[a.jsx(eJ.Z,{className:"w-4 h-4 mr-2"}),g?"Saving...":"Save Changes"]})]})]}),a.jsx(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"p-4 flex flex-wrap items-end gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2 w-32",children:[a.jsx(z._,{children:"Duration (s)"}),a.jsx(G.I,{type:"number",value:b,onChange:e=>v(parseFloat(e.target.value))})]}),(0,a.jsxs)("div",{className:"space-y-2 w-64",children:[a.jsx(z._,{children:"Transition (71+ animations available)"}),a.jsx(e6,{value:_,onChange:N})]}),(0,a.jsxs)("div",{className:"space-y-2 w-40",children:[a.jsx(z._,{children:"Animation"}),(0,a.jsxs)(ei.Ph,{value:w,onValueChange:k,children:[a.jsx(ei.i4,{children:a.jsx(ei.ki,{})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),a.jsx(ei.Ql,{value:"ken_burns",children:"Ken Burns"}),a.jsx(ei.Ql,{value:"random",children:"Random"})]})]})]}),a.jsx(o.z,{variant:"secondary",onClick:()=>{confirm("This will apply settings to ALL slides. Continue?")&&(d(i.map(e=>({...e,duration:b,transition:_,animation:w}))),M.toast.success("Settings applied to all slides"))},children:"Apply to All"}),a.jsx("div",{className:"flex-1"}),(0,a.jsxs)("div",{className:"space-y-2 w-64",children:[a.jsx(z._,{children:"Background Music URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(G.I,{placeholder:"https://...",value:t.music_url||"",onChange:e=>l({...t,music_url:e.target.value})}),a.jsx(o.z,{size:"icon",variant:"ghost",children:a.jsx(e0,{className:"w-4 h-4"})})]})]})]})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:i.map((e,s)=>(0,a.jsxs)(n.Zb,{className:"group relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"aspect-square bg-gray-100 relative",children:[e.media_url?a.jsx("img",{src:e.media_url,className:"w-full h-full object-cover",alt:""}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-400",children:"No Preview"}),a.jsx("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:a.jsx(o.z,{variant:"destructive",size:"icon",className:"h-6 w-6",onClick:()=>C(s),children:"\xd7"})}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 p-1 text-white text-[10px] flex justify-between px-2",children:[a.jsx("span",{children:s+1}),(0,a.jsxs)("span",{children:[e.duration,"s"]})]})]}),a.jsx(n.aY,{className:"p-2 space-y-2",children:a.jsx(e6,{value:e.transition,onChange:e=>Z(s,"transition",e),className:"w-full"})})]},s))}),a.jsx(e2,{isOpen:m,onClose:()=>x(!1),weddingId:t.wedding_id,onSelect:e=>{let s=e.map((e,s)=>({media_id:e.id,media_url:e.cdn_url||e.file_url||e.url,order:i.length+s,duration:b,transition:_,transition_duration:1,animation:w}));d([...i,...s]),x(!1)},maxSelection:50,allowedTypes:["photo"]})]}):a.jsx("div",{children:"Album not found"})}function e7({weddingId:e}){let[s,t]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)(""),y=async()=>{try{i(!0);let s=await B.default.get(`/api/albums/${e}`);t(s.data)}catch(e){console.error("Error fetching albums:",e),M.toast.error("Failed to load albums")}finally{i(!1)}},j=async()=>{if(x.trim())try{await B.default.post("/api/albums/",{wedding_id:e,title:x}),M.toast.success("Album created successfully"),g(""),h(!1),y()}catch(e){console.error("Error creating album:",e),M.toast.error("Failed to create album")}},f=async e=>{if(confirm("Are you sure you want to delete this album?"))try{await B.default.delete(`/api/albums/${e}`),M.toast.success("Album deleted"),y()}catch(e){M.toast.error("Failed to delete album")}};return d?a.jsx(e8,{albumId:d.id,onBack:()=>{c(null),y()}}):(0,a.jsxs)("div",{className:"space-y-6",children:[u&&a.jsx(eQ.Z,{album:u,onClose:()=>m(null)}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Photo Albums"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Create albums to organize photos and create slideshows"})]}),(0,a.jsxs)(Y.Vq,{open:p,onOpenChange:h,children:[a.jsx(Y.hg,{asChild:!0,children:(0,a.jsxs)(o.z,{children:[a.jsx(D.Z,{className:"w-4 h-4 mr-2"}),"Create Album"]})}),(0,a.jsxs)(Y.cZ,{children:[a.jsx(Y.fK,{children:a.jsx(Y.$N,{children:"Create New Album"})}),a.jsx("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{children:"Album Title"}),a.jsx(G.I,{value:x,onChange:e=>g(e.target.value),placeholder:"e.g., Reception Highlights"})]})}),(0,a.jsxs)(Y.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),a.jsx(o.z,{onClick:j,disabled:!x.trim(),children:"Create Album"})]})]})]})]}),l?a.jsx("div",{className:"text-center py-12",children:"Loading albums..."}):0===s.length?a.jsx(n.Zb,{className:"border-dashed",children:(0,a.jsxs)(n.aY,{className:"flex flex-col items-center justify-center py-12 text-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:a.jsx(b.Z,{className:"w-6 h-6 text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No albums yet"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1 max-w-sm mx-auto",children:"Create your first album to start organizing photos and building slideshows."}),(0,a.jsxs)(o.z,{className:"mt-4",onClick:()=>h(!0),children:[a.jsx(D.Z,{className:"w-4 h-4 mr-2"}),"Create Album"]})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,a.jsxs)(n.Zb,{className:"overflow-hidden group hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"aspect-video bg-gray-100 relative",children:[e.cover_photo_url?a.jsx("img",{src:e.cover_photo_url,alt:e.title,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:a.jsx(b.Z,{className:"w-8 h-8 text-gray-300"})}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100",children:[(0,a.jsxs)(o.z,{variant:"secondary",size:"sm",onClick:()=>c(e),children:[a.jsx(eX.Z,{className:"w-4 h-4 mr-2"}),"Manage"]}),(0,a.jsxs)(o.z,{size:"sm",onClick:async()=>{try{let s=await B.default.get(`/api/albums/detail/${e.id}`);m(s.data)}catch(e){M.toast.error("Could not load preview")}},children:[a.jsx(en.Z,{className:"w-4 h-4 mr-2"}),"Play"]})]})]}),a.jsx(n.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold truncate",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.slides?.length||0," photos"]})]}),a.jsx(o.z,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-red-500",onClick:()=>f(e.id),children:a.jsx(I.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})}function e9({params:e}){let{user:s,loading:t}=(0,i.a)(),l=(0,P.useRouter)(),z=e.id,[$,A]=(0,r.useState)(null),[O,T]=(0,r.useState)(!0),[R,D]=(0,r.useState)(!1),[I,Y]=(0,r.useState)(0),[G,W]=(0,r.useState)(0),[K,H]=(0,r.useState)(null),[X,Q]=(0,r.useState)(!1),[J,ee]=(0,r.useState)("weblive"),[es,et]=(0,r.useState)(!1),ea=s?.subscription_plan==="monthly"||s?.subscription_plan==="yearly",er=async()=>{try{T(!0),console.log("DEBUG: Loading wedding with ID:",z);let e=(await B.default.get(`/api/weddings/${z}`)).data;if(console.log("DEBUG: Wedding data received:",e),!e||"object"!=typeof e){console.error("Invalid wedding data received:",e),M.toast.error("Invalid wedding data received"),l.push("/dashboard");return}if(s&&s.id&&e.creator_id!==s.id){M.toast.error("You do not have permission to manage this wedding"),l.push("/dashboard");return}console.log("DEBUG: Theme settings before processing:",e.theme_settings),e.theme_settings&&"object"==typeof e.theme_settings?(e.theme_settings.studio_details&&"object"==typeof e.theme_settings.studio_details||(e.theme_settings.studio_details={studio_id:"",name:"",logo_url:"",contact:""}),e.theme_settings.custom_messages&&"object"==typeof e.theme_settings.custom_messages||(e.theme_settings.custom_messages={welcome_text:"Welcome to our big day",description:""}),Array.isArray(e.theme_settings.cover_photos)||(e.theme_settings.cover_photos=[])):(console.log("DEBUG: Creating default theme_settings"),e.theme_settings={theme_id:"floral_garden",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",cover_photos:[],studio_details:{studio_id:"",name:"",logo_url:"",contact:""},custom_messages:{welcome_text:"Welcome to our big day",description:""}}),console.log("DEBUG: Final theme_settings:",e.theme_settings),console.log("DEBUG: Cover photos count:",e.theme_settings.cover_photos.length),console.log("DEBUG: Theme assets:",e.theme_settings.theme_assets),A(e),D("live"===e.status),Y(e.viewers_count||0);let t=e.streaming_type||"weblive";console.log("DEBUG: Wedding streaming_type:",e.streaming_type),console.log("DEBUG: Setting localStreamingType to:",t),console.log("DEBUG: skipStreamingTypeUpdate:",es),es?et(!1):ee(t)}catch(s){console.error("Error loading wedding:",s);let e=s.response?.data?.detail||s.message||"Failed to load wedding details";M.toast.error(e),(s.response?.status===401||s.response?.status===403)&&l.push("/dashboard")}finally{T(!1)}},ei=(e,s)=>{navigator.clipboard.writeText(e),M.toast.success(`${s} copied to clipboard!`)},eo=async()=>{try{let e=await B.default.get(`/api/weddings/${z}/settings`);H(e.data)}catch(e){console.error("Error loading settings:",e)}},en=async(e,s)=>{try{Q(!0),await B.default.put(`/api/weddings/${z}/settings`,{[e]:s}),M.toast.success("Settings updated"),eo()}catch(e){console.error("Error updating settings:",e),M.toast.error("Failed to update settings")}finally{Q(!1)}};if(t||O)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-rose-500"})});if(!$)return null;let ed=`${window.location.origin}/weddings/${z}`;return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50",children:[a.jsx("nav",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200 sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(Z.default,{href:"/dashboard",children:(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",children:[a.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Dashboard"]})}),a.jsx(u.Z,{orientation:"vertical",className:"h-6"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"bg-gradient-to-r from-rose-500 to-purple-600 p-2 rounded-lg",children:a.jsx(x.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-lg font-bold",children:"Manage Wedding"}),a.jsx("p",{className:"text-xs text-gray-600",children:$.title})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[$.is_locked&&(0,a.jsxs)(c.C,{variant:"destructive",className:"gap-1",children:[a.jsx(g.Z,{className:"w-3 h-3"}),"Locked"]}),a.jsx(c.C,{variant:R?"default":"secondary",className:R?"bg-red-500 animate-pulse":"",children:R?"LIVE":$.status}),a.jsx(Z.default,{href:`/weddings/${z}`,target:"_blank",children:(0,a.jsxs)(o.z,{variant:"outline",size:"sm",children:[a.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"View Public Page"]})})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[$.is_locked&&(0,a.jsxs)(m.bZ,{variant:"destructive",children:[a.jsx(j.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{children:["This wedding is locked because your premium subscription has expired.",a.jsx(Z.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade to Premium"})," to unlock and start streaming."]})]}),(0,a.jsxs)(d.mQ,{defaultValue:"stream",className:"w-full",children:[(0,a.jsxs)(d.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(d.SP,{value:"stream",children:[a.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Stream"]}),(0,a.jsxs)(d.SP,{value:"layout",children:[a.jsx(f.Z,{className:"w-4 h-4 mr-2"}),"Layout"]}),(0,a.jsxs)(d.SP,{value:"media",children:[a.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Media"]}),(0,a.jsxs)(d.SP,{value:"settings",children:[a.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),(0,a.jsxs)(d.nU,{value:"stream",className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Streaming Type"}),a.jsx(n.SZ,{children:"Choose between WebLive custom RTMP or YouTube Live Streaming"})]}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"streamingType",value:"weblive",checked:"weblive"===J,onChange:async e=>{if("live"===$.status||"paused"===$.status){M.toast.error("Cannot change streaming type during an active stream");return}ee("weblive");try{let e=await B.default.put(`/api/weddings/${z}/streaming-type?streaming_type=weblive`);console.log("DEBUG: Streaming type update response:",e.data),M.toast.success("Switched to WebLive Streaming"),et(!0),console.log("DEBUG: API call successful, keeping local state")}catch(e){console.error("DEBUG: Failed to update streaming type:",e),M.toast.error(e.response?.data?.detail||"Failed to update streaming type"),ee(J)}},disabled:"live"===$.status||"paused"===$.status,className:"w-4 h-4 text-rose-500"}),a.jsx("span",{className:"text-sm font-medium",children:"WebLive Streaming (Default)"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"streamingType",value:"youtube",checked:"youtube"===J,onChange:async e=>{if("live"===$.status||"paused"===$.status){M.toast.error("Cannot change streaming type during an active stream");return}console.log("DEBUG: Changing streaming type from",J,"to youtube"),ee("youtube");try{let e=await B.default.put(`/api/weddings/${z}/streaming-type?streaming_type=youtube`);console.log("DEBUG: Streaming type update response:",e.data),M.toast.success("Switched to YouTube Live Streaming"),et(!0),console.log("DEBUG: API call successful, keeping local state")}catch(e){console.error("DEBUG: Failed to update streaming type:",e),M.toast.error(e.response?.data?.detail||"Failed to update streaming type"),ee(J)}},disabled:"live"===$.status||"paused"===$.status,className:"w-4 h-4 text-red-600"}),a.jsx("span",{className:"text-sm font-medium",children:"YouTube Live Streaming"})]})]}),("live"===$.status||"paused"===$.status)&&(0,a.jsxs)(m.bZ,{children:[a.jsx(g.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-sm",children:"Streaming type is locked during an active stream. End the stream to switch modes."})]})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Live Stream Status"]}),a.jsx(n.SZ,{children:"Manage your wedding stream lifecycle - OBS controls stream presence, you control when it ends"})]}),(0,a.jsxs)(n.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${"live"===$.status?"bg-red-500 animate-pulse":"paused"===$.status?"bg-yellow-500":"bg-gray-400"}`}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:"live"===$.status?"LIVE":"paused"===$.status?"PAUSED":"ENDED"}),a.jsx("p",{className:"text-sm text-gray-500",children:"live"===$.status?"Streaming in progress":"paused"===$.status?"Stream paused - waiting for OBS reconnect":"Stream has ended"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Viewers"}),a.jsx("p",{className:"text-2xl font-bold",children:I})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-blue-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${R?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:"text-sm font-medium",children:"OBS Status"})]}),a.jsx("p",{className:"text-xs text-gray-600",children:R?"OBS is connected and streaming":"OBS is disconnected"}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"OBS start/stop controls stream presence only"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-purple-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(_.Z,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Viewer Experience"})]}),a.jsx("p",{className:"text-xs text-gray-600",children:"live"===$.status?"Viewers see live stream":"paused"===$.status?'Viewers see "Be Right Back" screen':"Viewers see replay and highlights"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-rose-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(v.Z,{className:"w-4 h-4 text-rose-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Host Control"})]}),a.jsx("p",{className:"text-xs text-gray-600",children:"Only you can end the live stream"})]})]}),("live"===$.status||"paused"===$.status)&&(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)(o.z,{variant:"destructive",size:"lg",className:"w-full",onClick:async()=>{if(confirm("Are you sure you want to end the live stream? This will finalize the recording and show replay to viewers. This action cannot be undone."))try{T(!0),await er(),await B.default.post(`/api/weddings/${z}/live/end`),M.toast.success("Live stream ended successfully! Recording is being processed."),er()}catch(e){console.error("Error ending live stream:",e),e.response?.data?.detail?.includes("Cannot end from")?M.toast.error("Cannot end live stream: Stream is not currently active"):M.toast.error("Failed to end live stream")}finally{T(!1)}},disabled:O,children:[a.jsx(p.Z,{className:`w-4 h-4 mr-2 ${O?"animate-spin":""}`}),"End Live Stream"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"This will merge recordings, upload to CDN, and show replay to viewers"})]}),"ended"===$.status&&a.jsx("div",{className:"pt-4 border-t",children:(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsx(N.Z,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),a.jsx("p",{className:"font-semibold text-green-800",children:"Stream Successfully Ended"}),a.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Recording has been processed and is available for replay"}),$.recording_url&&a.jsx(o.z,{variant:"outline",className:"mt-3",asChild:!0,children:(0,a.jsxs)("a",{href:$.recording_url,target:"_blank",children:[a.jsx(Play,{className:"w-4 h-4 mr-2"}),"View Recording"]})})]})})]})]}),"weblive"===J&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"WebLive - RTMP Credentials"}),a.jsx(n.SZ,{children:"Use these credentials in OBS Studio or your streaming software"})]}),a.jsx(n.aY,{className:"space-y-4",children:$.stream_credentials?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Server URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:$.stream_credentials.rtmp_url,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ei($.stream_credentials.rtmp_url,"Server URL"),children:a.jsx(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"password",value:$.stream_credentials.stream_key,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ei($.stream_credentials.stream_key,"Stream Key"),children:a.jsx(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(m.bZ,{children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-sm",children:"Keep your stream key private! Anyone with this key can stream to your wedding."})]})]}):a.jsx("p",{className:"text-sm text-gray-600",children:"Loading credentials..."})})]}),"youtube"===J&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"YouTube Account"}),a.jsx(n.SZ,{children:"Connect your YouTube account to stream live"})]}),a.jsx(n.aY,{className:"space-y-4",children:$.youtube_settings?.auth_connected?(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-green-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(N.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold text-green-800",children:"YouTube Connected"}),a.jsx("p",{className:"text-sm text-green-600",children:"Ready to stream"})]})]}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("Are you sure you want to disconnect YouTube?"))try{await B.default.get(`/api/youtube/disconnect/${z}`),M.toast.success("YouTube disconnected"),er()}catch(e){M.toast.error("Failed to disconnect YouTube")}},children:"Disconnect"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(m.bZ,{children:a.jsx(m.X,{children:"Connect your YouTube account to enable live streaming to your YouTube channel"})}),(0,a.jsxs)(o.z,{onClick:async()=>{try{T(!0);let e=await B.default.post("/api/youtube/connect",{wedding_id:z});sessionStorage.setItem("youtube_state",e.data.state),sessionStorage.setItem("youtube_wedding_id",z),window.location.href=e.data.oauth_url}catch(e){M.toast.error("Failed to initiate YouTube connection"),T(!1)}},disabled:O,className:"w-full bg-red-600 hover:bg-red-700",children:[O?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Connect YouTube Account"]})]})})]}),$.youtube_settings?.auth_connected&&$.youtube_settings?.broadcast_id&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"YouTube - RTMP Credentials"}),a.jsx(n.SZ,{children:"Use these credentials in OBS Studio to stream to YouTube"})]}),a.jsx(n.aY,{className:"space-y-4",children:$.stream_credentials&&$.youtube_settings?.stream_id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Stream Server URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:$.stream_credentials.rtmp_url||"rtmp://a.rtmp.youtube.com/live2",readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ei($.stream_credentials.rtmp_url||"rtmp://a.rtmp.youtube.com/live2","Server URL"),children:a.jsx(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"password",value:$.stream_credentials.stream_key||"",readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>{$.stream_credentials?.stream_key?ei($.stream_credentials.stream_key,"Stream Key"):M.toast.error("Stream key not available")},children:a.jsx(w.Z,{className:"w-4 h-4"})})]})]}),$.youtube_settings?.youtube_video_url&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"YouTube Video URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:$.youtube_settings.youtube_video_url,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>window.open($.youtube_settings.youtube_video_url,"_blank"),children:a.jsx(y.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(m.bZ,{children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-sm",children:"Stream to YouTube using these credentials. Your stream will be visible on your YouTube channel."})]})]}):(0,a.jsxs)("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"No broadcast created yet"}),(0,a.jsxs)(o.z,{onClick:async()=>{try{T(!0),await B.default.post(`/api/youtube/create-broadcast/${z}`),M.toast.success("YouTube broadcast created successfully"),er()}catch(e){M.toast.error(e.response?.data?.detail||"Failed to create broadcast")}finally{T(!1)}},disabled:O,children:[O?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Create YouTube Broadcast"]})]})})]}),$.youtube_settings?.auth_connected&&$.youtube_settings?.broadcast_id&&a.jsx(eI,{weddingId:z,wedding:$,onStatusChange:er}),$.youtube_settings?.auth_connected&&a.jsx(eG,{weddingId:z,wedding:$})]}),a.jsx(L.Z,{weddingId:z,isPremium:ea,isLive:R}),a.jsx(V,{weddingId:z,isPremium:ea,rtmpUrl:$?.stream_credentials?.rtmp_url}),R&&a.jsx(eE.Z,{weddingId:z})]}),(0,a.jsxs)(d.nU,{value:"layout",className:"space-y-6",children:[a.jsx(eH,{weddingId:z,currentTemplateId:$?.template_assignment?.template_id,onTemplateAssigned:()=>{M.toast.success("Template assigned! Your wedding data will be automatically populated."),er()}}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(f.Z,{className:"w-5 h-5"}),"Wedding Layout Customization"]}),a.jsx(n.SZ,{children:"Select a layout structure, upload photos by category, and customize borders & styles"})]}),a.jsx(n.aY,{children:a.jsx("p",{className:"text-sm text-gray-600",children:"Choose your layout structure and customize photos, colors, fonts, and borders below."})})]}),a.jsx(eF,{weddingId:z,wedding:$})]}),a.jsx(d.nU,{value:"media",className:"space-y-6",children:(0,a.jsxs)(d.mQ,{defaultValue:"albums",className:"w-full",children:[(0,a.jsxs)(d.dr,{className:"w-full justify-start border-b rounded-none p-0 h-auto bg-transparent gap-6",children:[a.jsx(d.SP,{value:"albums",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-rose-500 data-[state=active]:bg-transparent px-0 py-2",children:"Albums & Slideshows"}),a.jsx(d.SP,{value:"gallery",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-rose-500 data-[state=active]:bg-transparent px-0 py-2",children:"All Media Gallery"})]}),a.jsx(d.nU,{value:"albums",className:"mt-6",children:a.jsx(e7,{weddingId:z})}),(0,a.jsxs)(d.nU,{value:"gallery",className:"mt-6 space-y-6",children:[a.jsx(el,{weddingId:z,onFolderSelect:e=>{console.log("Selected folder:",e)}}),a.jsx(F,{weddingId:z,onUploadComplete:()=>{W(e=>e+1),M.toast.success("Media uploaded successfully!")}}),a.jsx(U.Z,{weddingId:z,isCreator:!0},G)]})]})}),(0,a.jsxs)(d.nU,{value:"settings",className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Wedding Details"})}),a.jsx(n.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Couple"}),(0,a.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(k.Z,{className:"w-5 h-5 text-rose-500"}),$.bride_name," & ",$.groom_name]})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date & Time"}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx(S.Z,{className:"w-4 h-4 text-gray-400"}),(0,q.WU)(new Date($.scheduled_date),"PPP")]}),a.jsx("p",{className:"text-sm text-gray-600 ml-6",children:(0,q.WU)(new Date($.scheduled_date),"p")})]}),$.location&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Location"}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx(C.Z,{className:"w-4 h-4 text-gray-400"}),$.location]})]})]}),$.description&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),a.jsx("p",{className:"text-gray-700 mt-1",children:$.description})]})]})]})})]}),K&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Media & Access Settings"}),a.jsx(n.SZ,{children:"Control how guests interact with your wedding content"})]}),(0,a.jsxs)(n.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Auto Delete Media"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Automatically delete media after a specified period"})]}),a.jsx("button",{onClick:()=>en("auto_delete_media",!K.auto_delete_media),disabled:X,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${K.auto_delete_media?"bg-rose-500":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${K.auto_delete_media?"translate-x-6":"translate-x-1"}`})})]}),K.auto_delete_media&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Delete after (days)"}),a.jsx("input",{type:"number",min:"1",max:"365",value:K.auto_delete_days,onChange:e=>en("auto_delete_days",parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-md"})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Enable Download"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Allow guests to download photos and videos"})]}),a.jsx("button",{onClick:()=>en("enable_download",!K.enable_download),disabled:X,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${K.enable_download?"bg-rose-500":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${K.enable_download?"translate-x-6":"translate-x-1"}`})})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Enable Sharing/Embed"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Allow guests to share wedding page and embed media"})]}),a.jsx("button",{onClick:()=>en("enable_sharing",!K.enable_sharing),disabled:X,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${K.enable_sharing?"bg-rose-500":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${K.enable_sharing?"translate-x-6":"translate-x-1"}`})})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Viewer Limit"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Maximum number of concurrent viewers (leave empty for unlimited)"})]})}),a.jsx("input",{type:"number",min:"0",placeholder:"Unlimited",value:K.viewer_limit||"",onChange:e=>en("viewer_limit",e.target.value?parseInt(e.target.value):null),className:"w-full px-3 py-2 border rounded-md"})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Playback Quality Options"}),a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Quality options available to viewers"}),(0,a.jsxs)("select",{value:K.playback_quality,onChange:e=>en("playback_quality",e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[a.jsx("option",{value:"auto",children:"Auto (Adaptive)"}),a.jsx("option",{value:"720p",children:"720p Maximum"}),a.jsx("option",{value:"1080p",children:"1080p Maximum"}),a.jsx("option",{value:"4K",children:"4K Maximum"})]})]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Share Your Wedding"})}),(0,a.jsxs)(n.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Public URL"}),a.jsx("p",{className:"text-sm font-mono break-all",children:ed})]}),(0,a.jsxs)(o.z,{variant:"outline",className:"w-full",onClick:()=>ei(ed,"Wedding URL"),children:[a.jsx(w.Z,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]}),a.jsx(E.Z,{token:s?.access_token||localStorage.getItem("token")}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Quick Stats"})}),(0,a.jsxs)(n.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),a.jsx(c.C,{variant:R?"default":"secondary",children:$.status})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Current Viewers"}),a.jsx("span",{className:"font-semibold",children:I})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Total Views"}),a.jsx("span",{className:"font-semibold",children:$.viewers_count||0})]})]})]})]})]})})]})}function se({params:e}){return a.jsx(eU.w,{children:a.jsx(e9,{params:e})})}},33019:(e,s,t)=>{"use strict";t.d(s,{Z:()=>p});var a=t(10326),r=t(17577);t(94464);var l=t(67516),i=t(50560),o=t(18729),n=t(55002),d=t(41291),c=t(17069),u=t(97134),m=t(90434);function p({token:e}){let[s,t]=(0,r.useState)(null),[p,h]=(0,r.useState)(!0);if(p)return(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[a.jsx(n.Z,{className:"w-5 h-5"}),"Storage"]})}),a.jsx(i.aY,{children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-2 bg-gray-200 rounded w-full"})]})})]});if(!s)return null;let{storage_used_formatted:x,storage_limit_formatted:g,percentage_used:y,is_over_limit:j,plan:f}=s,b=y>80&&!j;return(0,a.jsxs)(i.Zb,{className:j?"border-red-500":b?"border-yellow-500":"",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[a.jsx(n.Z,{className:"w-5 h-5"}),"Storage Usage"]}),(0,a.jsxs)(i.SZ,{children:[x," of ",g," used"]})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l.E,{value:Math.min(y,100),className:`h-3 ${j?"bg-red-100":b?"bg-yellow-100":"bg-gray-100"}`}),(0,a.jsxs)("p",{className:`text-sm text-right ${j?"text-red-600 font-semibold":b?"text-yellow-600":"text-gray-500"}`,children:[y.toFixed(1),"% used"]})]}),j&&(0,a.jsxs)(u.bZ,{variant:"destructive",children:[a.jsx(d.Z,{className:"h-4 w-4"}),a.jsx(u.X,{children:"You've exceeded your storage limit. Uploads are blocked until you upgrade or delete files."})]}),b&&(0,a.jsxs)(u.bZ,{className:"border-yellow-500 bg-yellow-50",children:[a.jsx(c.Z,{className:"h-4 w-4 text-yellow-600"}),a.jsx(u.X,{className:"text-yellow-800",children:"You're approaching your storage limit. Consider upgrading to Premium for 200GB storage."})]}),s.breakdown&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:[" Media items: ",s.breakdown.media_items]}),(0,a.jsxs)("p",{children:[" Photobooth photos: ",s.breakdown.photobooth_photos]}),(0,a.jsxs)("p",{children:[" Recordings: ",s.breakdown.recordings]})]}),"free"===f&&a.jsx(m.default,{href:"/pricing",children:a.jsx(o.z,{className:"w-full",variant:j?"destructive":"default",children:"Upgrade to Premium - 200GB Storage"})})]})]})}process.env.NEXT_PUBLIC_API_URL||process.env.NEXT_PUBLIC_BACKEND_URL},74839:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(10326),r=t(17577),l=t(42106),i=t(12108),o=t(74030);function n({weddingData:e={},layoutConfig:s={},onEnter:t}){let[n,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)("16:9"),{bride_name:m="",groom_name:p="",event_date:h="",event_time:x="",venue:g=""}=e,{font:y="Playfair Display",primaryColor:j="#1e3a8a",couplePhoto:f=null,preciousMoments:b=[],studioDetails:v={},preWeddingVideo:_=null,borders:N={},borderMasks:w={},templateVideoWeddingId:k=null,hasTemplateVideo:S=!1}=s,C={hidden:{y:40,opacity:0},visible:{y:0,opacity:1,transition:{duration:.8}}};return n?(0,a.jsxs)("div",{className:"min-h-screen",style:{fontFamily:y,color:j},children:[S&&k&&a.jsx("section",{className:"w-full min-h-screen flex items-center justify-center backdrop-blur-sm p-4 md:p-8",children:a.jsx("div",{className:`w-full mx-auto transition-all duration-300 ${"9:16"===c?"max-w-md aspect-[9/16]":"max-w-6xl aspect-[16/9]"}`,children:a.jsx(o.Z,{weddingId:k,className:"w-full h-full"})})}),f?.url&&a.jsx("section",{className:"w-full min-h-[50vh] md:min-h-[60vh] py-8 md:py-16 flex items-center justify-center",children:a.jsx(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-6xl mx-auto px-4 md:px-8",children:a.jsx("div",{className:"relative w-full aspect-[16/9] md:aspect-[21/9] overflow-hidden",children:a.jsx(i.Z,{src:f.url,alt:"Couple",maskUrl:N?.couple,maskData:w?.couple,aspectRatio:"custom",className:"w-full h-full object-cover"})})})}),_&&a.jsx("section",{className:"w-full min-h-[50vh] md:min-h-[60vh] backdrop-blur-sm py-8 md:py-16 flex items-center justify-center",children:a.jsx(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-6xl mx-auto px-4 md:px-8",children:a.jsx("div",{className:"aspect-video w-full bg-black/30 rounded-lg overflow-hidden shadow-2xl",children:a.jsx("iframe",{src:_,className:"w-full h-full",allowFullScreen:!0,title:"Wedding Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})})})}),v?.default_image_url&&a.jsx("section",{className:"w-full min-h-[40vh] md:min-h-[50vh] backdrop-blur-sm py-12 md:py-20 flex items-center justify-center",children:a.jsx(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-5xl mx-auto px-4 md:px-8 text-center",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-8 md:p-16 shadow-2xl border border-white/20",children:[a.jsx("img",{src:v.default_image_url,className:"w-full max-w-md mx-auto mb-6 rounded-lg filter drop-shadow-lg object-cover",alt:"Studio"}),a.jsx("h3",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold uppercase tracking-widest mb-4",children:"Stand Out With World-Class Video Production"}),a.jsx("p",{className:"text-white/90 text-sm md:text-base lg:text-lg font-light",children:"Your Story Deserves To Be Heard"})]})})}),b?.length>0&&a.jsx("section",{className:"w-full min-h-screen backdrop-blur-sm py-12 md:py-20",children:(0,a.jsxs)(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-7xl mx-auto px-4 md:px-8",children:[a.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12 md:mb-16 text-white drop-shadow-lg",style:{color:j},children:"Precious Moments"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 lg:gap-10",children:b.map((e,s)=>a.jsx(l.E.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{delay:.1*s,duration:.5},className:"relative group",children:(0,a.jsxs)("div",{className:"bg-white/95 backdrop-blur-md p-3 md:p-4 shadow-xl rounded-sm hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",children:[a.jsx("div",{className:"aspect-square overflow-hidden bg-gray-100",children:a.jsx(i.Z,{src:e.url,maskUrl:N?.preciousMoments,maskData:w?.preciousMoments,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",aspectRatio:"1:1"})}),a.jsx("div",{className:"h-8 md:h-10 bg-white"})]})},s))})]})}),a.jsx("footer",{className:"w-full bg-black/50 backdrop-blur-md text-white py-8 text-center",children:a.jsx("p",{className:"text-sm md:text-base",children:"\xa9 2025 - Crafted with "})})]}):null}},38705:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var a=t(10326),r=t(17577),l=t(46084);let i=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));i.displayName="Input"},79349:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var a=t(10326),r=t(17577),l=t(29152),i=t(79360),o=t(46084);let n=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},t)=>a.jsx(l.f,{ref:t,className:(0,o.cn)(n(),e),...s}));d.displayName=l.f.displayName},67516:(e,s,t)=>{"use strict";t.d(s,{E:()=>v});var a=t(10326),r=t(17577);t(60962);var l=t(34214),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let t=(0,l.Z8)(`Primitive.${s}`),i=r.forwardRef((e,r)=>{let{asChild:l,...i}=e,o=l?t:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o,{...i,ref:r})});return i.displayName=`Primitive.${s}`,{...e,[s]:i}},{}),o="Progress",[n,d]=function(e,s=[]){let t=[],l=()=>{let s=t.map(e=>r.createContext(e));return function(t){let a=t?.[e]||s;return r.useMemo(()=>({[`__scope${e}`]:{...t,[e]:a}}),[t,a])}};return l.scopeName=e,[function(s,l){let i=r.createContext(l);i.displayName=s+"Context";let o=t.length;t=[...t,l];let n=s=>{let{scope:t,children:l,...n}=s,d=t?.[e]?.[o]||i,c=r.useMemo(()=>n,Object.values(n));return(0,a.jsx)(d.Provider,{value:c,children:l})};return n.displayName=s+"Provider",[n,function(t,a){let n=a?.[e]?.[o]||i,d=r.useContext(n);if(d)return d;if(void 0!==l)return l;throw Error(`\`${t}\` must be used within \`${s}\``)}]},function(...e){let s=e[0];if(1===e.length)return s;let t=()=>{let t=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=t.reduce((s,{useScope:t,scopeName:a})=>{let r=t(e)[`__scope${a}`];return{...s,...r}},{});return r.useMemo(()=>({[`__scope${s.scopeName}`]:a}),[a])}};return t.scopeName=s.scopeName,t}(l,...s)]}(o),[c,u]=n(o),m=r.forwardRef((e,s)=>{var t,r;let{__scopeProgress:l,value:o=null,max:n,getValueLabel:d=x,...u}=e;(n||0===n)&&!j(n)&&console.error((t=`${n}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=j(n)?n:100;null===o||f(o,m)||console.error((r=`${o}`,`Invalid prop \`value\` of value \`${r}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let p=f(o,m)?o:null,h=y(p)?d(p,m):void 0;return(0,a.jsx)(c,{scope:l,value:p,max:m,children:(0,a.jsx)(i.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":y(p)?p:void 0,"aria-valuetext":h,role:"progressbar","data-state":g(p,m),"data-value":p??void 0,"data-max":m,...u,ref:s})})});m.displayName=o;var p="ProgressIndicator",h=r.forwardRef((e,s)=>{let{__scopeProgress:t,...r}=e,l=u(p,t);return(0,a.jsx)(i.div,{"data-state":g(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...r,ref:s})});function x(e,s){return`${Math.round(e/s*100)}%`}function g(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function y(e){return"number"==typeof e}function j(e){return y(e)&&!isNaN(e)&&e>0}function f(e,s){return y(e)&&!isNaN(e)&&e<=s&&e>=0}h.displayName=p;var b=t(46084);let v=r.forwardRef(({className:e,value:s,...t},r)=>a.jsx(m,{ref:r,className:(0,b.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...t,children:a.jsx(h,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));v.displayName=m.displayName},240:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>x,Ph:()=>c,Ql:()=>g,i4:()=>m,ki:()=>u});var a=t(10326),r=t(17577),l=t(8845),i=t(941),o=t(96633),n=t(32933),d=t(46084);let c=l.fC;l.ZA;let u=l.B4,m=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.xz,{ref:r,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap bg-transparent px-0 py-0 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-0 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 [&>span]:border-none [&>span]:outline-none [&>span]:focus:border-none [&>span]:focus:outline-none [&>span]:focus:ring-0 [&>span]:focus:ring-offset-0 [&>span]:!border-0 [&>span]:!outline-none [&>span]:!ring-0",e),...t,children:[s,a.jsx(l.JO,{asChild:!0,children:a.jsx(i.Z,{className:"h-4 w-4 opacity-50 ml-1"})})]}));m.displayName=l.xz.displayName;let p=r.forwardRef(({className:e,...s},t)=>a.jsx(l.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(o.Z,{className:"h-4 w-4"})}));p.displayName=l.u_.displayName;let h=r.forwardRef(({className:e,...s},t)=>a.jsx(l.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(i.Z,{className:"h-4 w-4"})}));h.displayName=l.$G.displayName;let x=r.forwardRef(({className:e,children:s,position:t="popper",...r},i)=>a.jsx(l.h_,{children:(0,a.jsxs)(l.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(p,{}),a.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(h,{})]})}));x.displayName=l.VY.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",e),...s})).displayName=l.__.displayName;let g=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none border-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>span]:border-none [&>span]:outline-none [&>span]:!border-0 [&>span]:!outline-none",e),...t,children:[a.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(l.wU,{children:a.jsx(n.Z,{className:"h-4 w-4"})})}),a.jsx(l.eT,{children:s})]}));g.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},92454:(e,s,t)=>{"use strict";t.d(s,{g:()=>i});var a=t(10326),r=t(17577),l=t(46084);let i=r.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));i.displayName="Textarea"},15361:(e,s,t)=>{"use strict";function a(e){if(!e||"string"!=typeof e)return null;let s=(e=e.trim()).match(/(?:youtube\.com\/watch\?v=|youtube\.com\/watch\?.*&v=)([a-zA-Z0-9_-]{11})/);if(s)return s[1];let t=e.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/);if(t)return t[1];let a=e.match(/youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/);if(a)return a[1];let r=e.match(/youtube\.com\/v\/([a-zA-Z0-9_-]{11})/);return r?r[1]:null}function r(e,s={}){let t=a(e);if(!t)return null;let{autoplay:r=0,mute:l=0,controls:i=1,modestbranding:o=1,rel:n=0}=s,d=new URLSearchParams({autoplay:r.toString(),mute:l.toString(),controls:i.toString(),modestbranding:o.toString(),rel:n.toString()});return`https://www.youtube.com/embed/${t}?${d.toString()}`}function l(e){return null!==a(e)}t.d(s,{Tc:()=>r,yk:()=>l})},59734:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},30361:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},924:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},55002:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])},99598:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]])},88307:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},88378:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},69508:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},17069:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},63685:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},76044:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var a=t(68570);let r=(0,a.createProxy)(String.raw`/app/frontend/app/weddings/manage/[id]/page.js`),{__esModule:l,$$typeof:i}=r;r.default;let o=(0,a.createProxy)(String.raw`/app/frontend/app/weddings/manage/[id]/page.js#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,168,434,2106,1961,5759,8907,7882,730,2611,4334,7131,1422,3949,4342,6565,4372,1973,3023,8194,4620,3722,5807,5459,3428,9357],()=>t(15910));module.exports=a})();