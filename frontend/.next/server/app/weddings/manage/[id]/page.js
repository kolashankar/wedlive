(()=>{var e={};e.id=1624,e.ids=[1624,4839],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},15910:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(76044),t(73603),t(35866);var a=t(23191),r=t(88716),l=t(37922),i=t.n(l),o=t(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(s,n);let d=["",{children:["weddings",{children:["manage",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,76044)),"/app/frontend/app/weddings/manage/[id]/page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,73603)),"/app/frontend/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/frontend/app/weddings/manage/[id]/page.js"],u="/weddings/manage/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/weddings/manage/[id]/page",pathname:"/weddings/manage/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},90816:(e,s,t)=>{Promise.resolve().then(t.bind(t,24276))},24276:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>e0});var a=t(10326),r=t(17577),l=t.n(r),i=t(88646),o=t(18729),n=t(50560),d=t(6917),c=t(20835),u=t(6952),m=t(97134),p=t(77506),h=t(86333),x=t(49758),g=t(9015),y=t(7027),f=t(26092),b=t(1572),j=t(71709),_=t(88378),v=t(12714),N=t(30361),w=t(43810),k=t(67427),S=t(37358),C=t(77636),P=t(90434),Z=t(35047),q=t(85999),B=t(89420),M=t(74990),F=t(79349),z=t(92454),T=t(67516),$=t(94019),O=t(41291);function A({weddingId:e,onUploadComplete:s}){let[t,l]=(0,r.useState)(!1),[i,d]=(0,r.useState)(0),[c,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(""),[y,f]=(0,r.useState)(null),[b,_]=(0,r.useState)(null),[v,N]=(0,r.useState)({uploaded:0,total:0,failed:[]}),[w,k]=(0,r.useState)("general"),S=(0,r.useRef)(null),C=e=>{if(e<=209715200)return{chunkSize:e,totalChunks:1};let s=Math.ceil(e/209715200);return{chunkSize:Math.ceil(e/(s=Math.max(8,Math.min(15,s)))),totalChunks:s}},P=e=>{let s=e.target.files?.[0];if(!s)return;if(!s.type.startsWith("image/")&&!s.type.startsWith("video/")){q.toast.error("Please select an image or video file");return}if(s.size>10737418240){q.toast.error("File size must be less than 10GB");return}u(s),_(s.type.startsWith("image/")?"photo":"video");let t=new FileReader;t.onload=e=>{f(e.target.result)},t.readAsDataURL(s);let{chunkSize:a,totalChunks:r}=C(s.size);r>1&&q.toast.info(`Large file detected! Will upload in ${r} chunks (${(a/1024/1024).toFixed(0)}MB each)`)},Z=async(e,s,t,a=0)=>{try{let a=new FormData;return a.append("upload_id",e),a.append("chunk_index",s),a.append("chunk",t,`chunk_${s}`),await B.default.post("/api/media/upload/chunk",a,{headers:{"Content-Type":"multipart/form-data"}}),{success:!0,chunkIndex:s}}catch(r){if(console.error(`Chunk ${s} upload failed:`,r),a<3)return console.log(`Retrying chunk ${s} (attempt ${a+1}/3)`),await new Promise(e=>setTimeout(e,1e3*(a+1))),Z(e,s,t,a+1);return{success:!1,chunkIndex:s,error:r}}},M=async(e,s)=>{let t=[],a=[];for(let r=0;r<s.length;r+=5){let l=s.slice(r,r+5).map(({index:s,blob:t})=>Z(e,s,t));(await Promise.all(l)).forEach(e=>{e.success?(t.push(e.chunkIndex),N(e=>({...e,uploaded:e.uploaded+1})),d(Math.round(t.length/s.length*95))):(a.push(e.chunkIndex),N(s=>({...s,failed:[...s.failed,e.chunkIndex]})))})}return{results:t,failed:a}},A=async()=>{if(!c){q.toast.error("Please select a file to upload");return}l(!0),d(0),N({uploaded:0,total:0,failed:[]});try{let{chunkSize:t,totalChunks:a}=C(c.size);if(1===a){let t=new FormData;t.append("file",c),t.append("wedding_id",e),t.append("caption",h),t.append("category",w);let a="photo"===b?"/api/media/upload/photo":"/api/media/upload/video",r=await B.default.post(a,t,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5,onUploadProgress:e=>{let s=Math.round(100*e.loaded/e.total);d(s)}});q.toast.success(`${"photo"===b?"Photo":"Video"} uploaded successfully!`),E(),s&&s(r.data);return}N({uploaded:0,total:a,failed:[]});let r=(await B.default.post("/api/media/upload/init",{wedding_id:e,filename:c.name,total_size:c.size,total_chunks:a,media_type:b,caption:h,category:w})).data.upload_id;q.toast.info(`Starting chunked upload: ${a} chunks`);let l=[];for(let e=0;e<a;e++){let s=e*t,a=Math.min(s+t,c.size),r=c.slice(s,a);l.push({index:e,blob:r})}d(5);let{results:i,failed:o}=await M(r,l);if(o.length>0)throw Error(`Failed to upload ${o.length} chunks: ${o.join(", ")}`);d(95);let n=new FormData;n.append("upload_id",r);let u=await B.default.post("/api/media/upload/complete",n,{headers:{"Content-Type":"multipart/form-data"}});d(100),q.toast.success(`${"photo"===b?"Photo":"Video"} uploaded successfully! (${a} chunks)`),E(),s&&s(u.data)}catch(s){console.error("Upload error:",s);let e=s.response?.data?.detail||s.message||"Failed to upload media";q.toast.error(e),s.response?.status===403&&q.toast.error("Storage limit reached. Please upgrade your plan.",{duration:5e3})}finally{l(!1)}},E=()=>{u(null),g(""),f(null),_(null),k("general"),d(0),N({uploaded:0,total:0,failed:[]}),S.current&&(S.current.value="")};return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center",children:[a.jsx(j.Z,{className:"w-5 h-5 mr-2"}),"Upload Media"]}),a.jsx(n.SZ,{children:"Add photos and videos to your wedding gallery (up to 10GB per file)"})]}),a.jsx(n.aY,{className:"space-y-4",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative rounded-lg overflow-hidden bg-gray-100",children:["photo"===b?a.jsx("img",{src:y,alt:"Preview",className:"w-full h-64 object-cover"}):a.jsx("div",{className:"relative w-full h-64",children:a.jsx("video",{src:y,className:"w-full h-full object-cover",controls:!0})}),!t&&a.jsx("button",{onClick:E,className:"absolute top-2 right-2 bg-black/60 hover:bg-black/80 text-white rounded-full p-2 transition-colors",children:a.jsx($.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"flex items-center",children:["photo"===b?a.jsx(j.Z,{className:"w-4 h-4 mr-2"}):a.jsx(x.Z,{className:"w-4 h-4 mr-2"}),c.name]}),(0,a.jsxs)("span",{children:[(c.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(F._,{htmlFor:"caption",children:"Caption (optional)"}),a.jsx(z.g,{id:"caption",value:h,onChange:e=>g(e.target.value),placeholder:"Add a caption to your media...",disabled:t,rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(F._,{htmlFor:"category",children:"Photo Category"}),(0,a.jsxs)("select",{id:"category",value:w,onChange:e=>k(e.target.value),disabled:t,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",children:[a.jsx("option",{value:"general",children:"General Gallery"}),a.jsx("option",{value:"couple",children:"Couple Photo"}),a.jsx("option",{value:"bride",children:"Bride Photo"}),a.jsx("option",{value:"groom",children:"Groom Photo"}),a.jsx("option",{value:"moment",children:"Precious Moment"}),a.jsx("option",{value:"cover",children:"Cover Photo"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Select a category to automatically use this photo in your wedding theme"})]}),t&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:v.total>1?`Uploading chunks... ${v.uploaded}/${v.total}`:"Uploading..."}),(0,a.jsxs)("span",{className:"font-semibold text-rose-600",children:[i,"%"]})]}),a.jsx(T.E,{value:i,className:"h-2"}),v.failed.length>0&&(0,a.jsxs)(m.bZ,{className:"border-yellow-500 bg-yellow-50",children:[a.jsx(O.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsxs)(m.X,{className:"text-yellow-800",children:["Retrying failed chunks: ",v.failed.join(", ")]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(o.z,{onClick:A,disabled:t,className:"flex-1 bg-gradient-to-r from-rose-500 to-purple-600 text-white hover:from-rose-600 hover:to-purple-700",children:t?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(j.Z,{className:"w-4 h-4 mr-2"}),"Upload ","photo"===b?"Photo":"Video"]})}),!t&&a.jsx(o.z,{variant:"outline",onClick:E,children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-rose-500 transition-colors",onClick:()=>S.current?.click(),onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();let s=e.dataTransfer.files;s&&s[0]&&P({target:{files:[s[0]]}})},children:[a.jsx("input",{ref:S,type:"file",accept:"image/*,video/*",onChange:P,className:"hidden"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center",children:a.jsx(j.Z,{className:"w-8 h-8 text-rose-500"})}),a.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(x.Z,{className:"w-8 h-8 text-purple-500"})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Drop files here or click to browse"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Supports images and videos up to 10GB"}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Large files (over 200MB) will be uploaded in chunks for reliability"})]}),a.jsx(o.z,{type:"button",variant:"outline",onClick:e=>{e.stopPropagation(),S.current?.click()},children:"Select Files"})]})]}),(0,a.jsxs)(m.bZ,{children:[a.jsx(O.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{className:"text-sm",children:[a.jsx("strong",{children:"Tip:"})," Upload high-quality photos and videos to preserve precious memories. Supported formats: JPG, PNG, MP4, MOV"]})]})]})})]})}var E=t(13516),U=t(33019),L=t(26848),D=t(62881);let R=(0,D.Z)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var I=t(83855),Y=t(98091),V=t(18184),G=t(38705);function W({weddingId:e,isPremium:s,rtmpUrl:t}){let[l,i]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),[j,_]=(0,r.useState)(!1),v=async()=>{try{u(!0);let s=await B.default.get(`/api/streams/${e}/cameras`);i(s.data||[])}catch(e){console.error("Error loading cameras:",e)}finally{u(!1)}},N=async()=>{if(!y.trim()){q.toast.error("Please enter a camera name");return}try{_(!0),await B.default.post("/api/streams/camera/add",{wedding_id:e,camera_name:y}),q.toast.success("Camera added successfully!"),b(""),g(!1),v()}catch(e){console.error("Error adding camera:",e),q.toast.error(e.response?.data?.detail||"Failed to add camera")}finally{_(!1)}},k=async s=>{if(confirm("Are you sure you want to remove this camera?"))try{await B.default.delete(`/api/streams/camera/${e}/${s}`),q.toast.success("Camera removed"),v()}catch(e){console.error("Error removing camera:",e),q.toast.error("Failed to remove camera")}},S=(e,s)=>{navigator.clipboard.writeText(e),q.toast.success(`${s} copied!`)},C=e=>{let s={waiting:{variant:"secondary",label:"Waiting"},connected:{variant:"default",label:"Connected",className:"bg-green-500"},disconnected:{variant:"destructive",label:"Disconnected"}},t=s[e]||s.waiting;return a.jsx(c.C,{variant:t.variant,className:t.className,children:t.label})};return s?(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(R,{className:"w-5 h-5"}),"Multi-Camera Sources"]}),a.jsx(n.SZ,{children:"Manage multiple camera streams for your wedding"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)(V.Vq,{open:h,onOpenChange:g,children:[a.jsx(V.hg,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"outline",className:"w-full",children:[a.jsx(I.Z,{className:"w-4 h-4 mr-2"}),"Add Camera Source"]})}),(0,a.jsxs)(V.cZ,{children:[(0,a.jsxs)(V.fK,{children:[a.jsx(V.$N,{children:"Add Camera Source"}),a.jsx(V.Be,{children:"Add a new camera stream for multi-angle coverage"})]}),a.jsx("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(F._,{htmlFor:"camera-name",children:"Camera Name"}),a.jsx(G.I,{id:"camera-name",placeholder:"e.g., Sony A7S III, iPhone Camera, Drone View",value:y,onChange:e=>b(e.target.value),onKeyDown:e=>"Enter"===e.key&&N()})]})}),a.jsx(V.cN,{children:a.jsx(o.z,{onClick:N,disabled:j||!y.trim(),children:j?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"})," Adding..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(I.Z,{className:"w-4 h-4 mr-2"})," Add Camera"]})})})]})]}),d?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(p.Z,{className:"w-6 h-6 animate-spin text-gray-400"})}):0===l.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(x.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No additional cameras added yet"}),a.jsx("p",{className:"text-xs mt-1",children:'Click "Add Camera Source" to get started'})]}):a.jsx("div",{className:"space-y-3",children:l.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-3 hover:border-rose-200 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(x.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Added ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[C(e.status),a.jsx(o.z,{variant:"ghost",size:"sm",onClick:()=>k(e.camera_id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:a.jsx(Y.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"password",value:e.stream_key,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-xs"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>S(e.stream_key,"Stream Key"),children:a.jsx(w.Z,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[a.jsx("strong",{children:"Server:"})," ",t||"rtmp://live.wedlive.app/live"]})})]},e.camera_id))}),l.length>0&&(0,a.jsxs)(m.bZ,{children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-xs",children:"Each camera uses its own stream key. Configure OBS Studio or your streaming software with the corresponding stream key for each camera."})]})]})]}):(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(R,{className:"w-5 h-5"}),"Multi-Camera Support",(0,a.jsxs)(c.C,{className:"ml-2 bg-gradient-to-r from-yellow-500 to-orange-500",children:[a.jsx(f.Z,{className:"w-3 h-3 mr-1"}),"Premium"]})]}),a.jsx(n.SZ,{children:"Stream from multiple camera angles simultaneously"})]}),a.jsx(n.aY,{children:(0,a.jsxs)(m.bZ,{children:[a.jsx(f.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{children:["Multi-camera support is available for Premium subscribers only.",a.jsx(P.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade to Premium"})]})]})})]})}var H=t(941),K=t(39183);let Q=(0,D.Z)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),X=(0,D.Z)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var J=t(55002);let ee=(0,D.Z)("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var es=t(99598),et=t(85206),ea=t(24230);let er=e=>{if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["B","KB","MB","GB"][s]};function el({weddingId:e,onFolderSelect:s}){let[t,i]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(new Set),[p,h]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!1),[b,_]=(0,r.useState)(!1),[v,N]=(0,r.useState)({name:"",description:"",parentFolderId:null}),[w,k]=(0,r.useState)(null),[S,C]=(0,r.useState)(null),P=async()=>{try{c(!0);let s=await B.default.get(`/api/folders/wedding/${e}`);i(s.data||[])}catch(e){console.error("Error loading folders:",e),q.toast.error("Failed to load folders")}finally{c(!1)}},Z=e=>{let s=new Set(u);s.has(e)?s.delete(e):s.add(e),m(s)},M=async()=>{if(!v.name.trim()){q.toast.error("Folder name is required");return}try{c(!0),await B.default.post("/api/folders/create",{wedding_id:e,name:v.name,parent_folder_id:v.parentFolderId,description:v.description}),q.toast.success("Folder created successfully!"),g(!1),N({name:"",description:"",parentFolderId:null}),P()}catch(e){console.error("Error creating folder:",e),q.toast.error(e.response?.data?.detail||"Failed to create folder")}finally{c(!1)}},F=async()=>{if(!v.name.trim()){q.toast.error("Folder name is required");return}try{c(!0),await B.default.put(`/api/folders/${w.id}`,{name:v.name,description:v.description}),q.toast.success("Folder updated successfully!"),f(!1),k(null),N({name:"",description:"",parentFolderId:null}),P()}catch(e){console.error("Error updating folder:",e),q.toast.error(e.response?.data?.detail||"Failed to update folder")}finally{c(!1)}},T=async e=>{let s=e.media_count>0||e.subfolder_count>0?`Are you sure you want to delete "${e.name}"? All content will be moved to ${e.parent_folder_id?"its parent folder":"root"}.`:`Are you sure you want to delete "${e.name}"?`;if(window.confirm(s))try{c(!0),await B.default.delete(`/api/folders/${e.id}`),q.toast.success("Folder deleted successfully"),P()}catch(e){console.error("Error deleting folder:",e),q.toast.error(e.response?.data?.detail||"Failed to delete folder")}finally{c(!1)}},$=async()=>{if(w)try{c(!0),await B.default.post("/api/folders/move",{folder_id:w.id,new_parent_id:S}),q.toast.success("Folder moved successfully!"),_(!1),k(null),C(null),P()}catch(e){console.error("Error moving folder:",e),q.toast.error(e.response?.data?.detail||"Failed to move folder")}finally{c(!1)}},O=(e=null)=>{N({name:"",description:"",parentFolderId:e}),g(!0)},A=e=>{k(e),N({name:e.name,description:e.description||"",parentFolderId:e.parent_folder_id}),f(!0)},E=e=>{k(e),C(null),_(!0)},U=(e,t=0)=>e.map(e=>{let r=u.has(e.id),l=e.children&&e.children.length>0;return(0,a.jsxs)("div",{children:[a.jsx("div",{className:`flex items-center justify-between p-3 rounded-lg hover:bg-gray-100 transition-colors group ${p===e.id?"bg-blue-50 border-2 border-blue-300":"border-2 border-transparent"}`,style:{paddingLeft:`${24*t+12}px`},children:(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[l?a.jsx("button",{onClick:()=>Z(e.id),className:"p-1 hover:bg-gray-200 rounded",children:r?a.jsx(H.Z,{className:"w-4 h-4 text-gray-600"}):a.jsx(K.Z,{className:"w-4 h-4 text-gray-600"})}):a.jsx("div",{className:"w-6"}),(0,a.jsxs)("button",{onClick:()=>{h(e.id),s&&s(e.id)},className:"flex items-center gap-2 flex-1 text-left",children:[r?a.jsx(Q,{className:"w-5 h-5 text-yellow-500"}):a.jsx(X,{className:"w-5 h-5 text-blue-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(j.Z,{className:"w-3 h-3"}),e.media_count]}),e.subfolder_count>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(X,{className:"w-3 h-3"}),e.subfolder_count]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(J.Z,{className:"w-3 h-3"}),er(e.folder_size)]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>O(e.id),title:"Create subfolder",children:a.jsx(ee,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>E(e),title:"Move folder",children:a.jsx(es.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>A(e),title:"Edit folder",children:a.jsx(et.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>T(e),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete folder",children:a.jsx(Y.Z,{className:"w-4 h-4"})})]})]})}),r&&l&&a.jsx("div",{className:"mt-1",children:U(e.children,t+1)})]},e.id)}),L=(e,s=0,t=null)=>e.filter(e=>e.id!==t).map(e=>w&&D(e.id,w.id)?null:(0,a.jsxs)(l().Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>C(e.id),className:`w-full text-left p-2 rounded hover:bg-gray-100 flex items-center gap-2 ${S===e.id?"bg-blue-50 border-2 border-blue-300":""}`,style:{paddingLeft:`${16*s+8}px`},children:[a.jsx(X,{className:"w-4 h-4 text-blue-500"}),a.jsx("span",{className:"text-sm",children:e.name})]}),e.children&&e.children.length>0&&L(e.children,s+1,t)]},e.id)),D=(e,s)=>{let a=t.find(s=>s.id===e);return!!a&&!!a.parent_folder_id&&(a.parent_folder_id===s||D(a.parent_folder_id,s))},R=(e=>{let s={},t=[];return e.forEach(e=>{s[e.id]={...e,children:[]}}),e.forEach(e=>{e.parent_folder_id&&s[e.parent_folder_id]?s[e.parent_folder_id].children.push(s[e.id]):t.push(s[e.id])}),t})(t),I=t.reduce((e,s)=>e+s.media_count,0),W=t.reduce((e,s)=>e+s.folder_size,0);return(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(X,{className:"w-5 h-5"}),"Media Folders"]}),a.jsx(n.SZ,{className:"mt-1",children:"Organize your wedding media into nested folders"}),t.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:[t.length," folders"]}),(0,a.jsxs)("span",{children:[I," items"]}),(0,a.jsxs)("span",{children:[er(W)," total"]})]})]}),(0,a.jsxs)(o.z,{onClick:()=>O(),disabled:d,size:"sm",children:[a.jsx(ee,{className:"w-4 h-4 mr-2"}),"New Folder"]})]})}),(0,a.jsxs)(n.aY,{children:[d&&0===t.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"Loading folders..."})}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(X,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm font-medium",children:"No folders yet"}),a.jsx("p",{className:"text-xs mt-1",children:"Create folders to organize your media"})]}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>{h(null),s&&s(null)},className:`w-full flex items-center justify-between p-3 rounded-lg transition-all ${null===p?"bg-gradient-to-r from-pink-100 to-purple-100 border-2 border-pink-300":"bg-gradient-to-r from-pink-50 to-purple-50 hover:from-pink-100 hover:to-purple-100 border-2 border-transparent"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:a.jsx(j.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold",children:"All Media"}),a.jsx("p",{className:"text-xs text-gray-600",children:"View all photos and videos"})]})]}),a.jsx(ea.Z,{className:"w-5 h-5 text-gray-400"})]}),a.jsx("div",{className:"mt-2 border-t pt-2",children:U(R)})]}),a.jsx(V.Vq,{open:x,onOpenChange:g,children:(0,a.jsxs)(V.cZ,{children:[(0,a.jsxs)(V.fK,{children:[a.jsx(V.$N,{children:"Create New Folder"}),a.jsx(V.Be,{children:v.parentFolderId?"Create a subfolder inside the selected folder":"Create a new root folder to organize media"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Folder Name *"}),a.jsx(G.I,{value:v.name,onChange:e=>N({...v,name:e.target.value}),placeholder:"e.g., Ceremony, Reception, Portraits",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Description (Optional)"}),a.jsx(z.g,{value:v.description,onChange:e=>N({...v,description:e.target.value}),placeholder:"Add a description for this folder...",rows:3,className:"mt-1"})]})]}),(0,a.jsxs)(V.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>{g(!1),N({name:"",description:"",parentFolderId:null})},children:"Cancel"}),a.jsx(o.z,{onClick:M,disabled:d,children:d?"Creating...":"Create Folder"})]})]})}),a.jsx(V.Vq,{open:y,onOpenChange:f,children:(0,a.jsxs)(V.cZ,{children:[(0,a.jsxs)(V.fK,{children:[a.jsx(V.$N,{children:"Edit Folder"}),a.jsx(V.Be,{children:"Update folder name and description"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Folder Name *"}),a.jsx(G.I,{value:v.name,onChange:e=>N({...v,name:e.target.value}),placeholder:"Folder name",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Description (Optional)"}),a.jsx(z.g,{value:v.description,onChange:e=>N({...v,description:e.target.value}),placeholder:"Add a description...",rows:3,className:"mt-1"})]})]}),(0,a.jsxs)(V.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>{f(!1),k(null),N({name:"",description:"",parentFolderId:null})},children:"Cancel"}),a.jsx(o.z,{onClick:F,disabled:d,children:d?"Updating...":"Update Folder"})]})]})}),a.jsx(V.Vq,{open:b,onOpenChange:_,children:(0,a.jsxs)(V.cZ,{children:[(0,a.jsxs)(V.fK,{children:[a.jsx(V.$N,{children:"Move Folder"}),(0,a.jsxs)(V.Be,{children:['Select a new parent folder or choose root to move "',w?.name,'"']})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("button",{onClick:()=>C(null),className:`w-full text-left p-2 rounded hover:bg-gray-100 flex items-center gap-2 ${null===S?"bg-blue-50 border-2 border-blue-300":""}`,children:[a.jsx(Q,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Root (No Parent)"})]}),L(R,0,w?.id)]}),(0,a.jsxs)(V.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>{_(!1),k(null),C(null)},children:"Cancel"}),a.jsx(o.z,{onClick:$,disabled:d||S===w?.parent_folder_id,children:d?"Moving...":"Move Folder"})]})]})})]})]})}var ei=t(240);let eo=(0,D.Z)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var en=t(94893);let ed=(0,D.Z)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),ec=(0,D.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),eu=(0,D.Z)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);var em=t(63685),ep=t(59734),eh=t(61358),ex=t(41476),eg=t(4291),ey=t(74839),ef=t(93023),eb=t(4620),ej=t(23428),e_=t(75807),ev=t(53722),eN=t(5459),ew=t(49357);let ek=JSON.parse('{"layout_id":"layout_1","name":"Vertical Wedding Invitation","description":"Single-column vertical layout with dynamic video template (9:16 or 16:9), couple photo with border, YouTube video, studio branding, and precious moments gallery. Fully mobile responsive.","version":"3.0","thumbnail":"/layout-previews/layout1.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Couple photo with decorative border (Section 2)","supports_border":true,"aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":12,"description":"Polaroid-style photo gallery (Section 5)","supports_border":true}},"videos":{"templateVideo":{"required":false,"description":"Dynamic template video with overlays (Section 1)","aspect_ratio":"dynamic","supports_overlays":true},"preWeddingVideo":{"required":false,"description":"YouTube video embed (Section 3)","embed_type":"youtube"}},"branding":{"studioDetails":{"required":false,"description":"Studio branding section (Section 4)","includes":["logo_url","tagline"]}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for couple photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery images"}}},"style_inputs":{"font":{"required":true,"default":"Playfair Display","description":"Primary font family"},"primaryColor":{"required":true,"default":"#1e3a8a","description":"Primary accent color"}},"layout_structure":{"sections":["template_video_section","couple_photo_section","youtube_video_section","studio_branding_section","precious_moments_gallery"],"orientation":"vertical","responsive":true,"dynamic_aspect_ratio":true}}'),eS=JSON.parse('{"layout_id":"layout_2","name":"Center Focus","description":"Large centered couple photo as hero with gallery below. Emphasizes the couple\'s unity.","version":"1.0","thumbnail":"/layout-previews/layout2.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main couple photo (hero image)","supports_border":true,"default_position":"center","aspect_ratio":"square"},"coverPhotos":{"required":false,"type":"array","max_count":5,"description":"Background carousel photos"},"preciousMoments":{"required":false,"type":"array","max_count":20,"description":"Gallery photos with precious moments","supports_border":true,"layout_style":["grid","carousel"]},"studioImage":{"required":false,"description":"Studio partner logo/photo","supports_border":false},"streamImage":{"required":false,"description":"Live stream thumbnail"}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":150,"description":"Welcome greeting text"},"description":{"required":false,"max_length":400,"description":"Love story or event description"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"},"studioLogo":{"required":false,"description":"Studio logo URL"},"studioContact":{"required":false,"description":"Studio contact information"}},"backgrounds":{"heroBackground":{"required":false,"description":"Hero section background image"},"liveBackground":{"required":false,"description":"Live streaming section background"}}},"style_inputs":{"font":{"required":true,"default":"Cormorant Garamond","description":"Primary font family"},"primaryColor":{"required":true,"default":"#3b82f6","description":"Primary brand color (hex)"},"secondaryColor":{"required":true,"default":"#8b5cf6","description":"Secondary accent color (hex)"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border style for gallery photos"}},"layout_structure":{"sections":["hero_center","couple_intro","event_details","precious_moments_gallery","live_stream","studio_details"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eC=JSON.parse('{"layout_id":"layout_3","name":"Horizontal Timeline","description":"Interactive horizontal scrolling journey on desktop, beautiful vertical timeline on mobile. Tells a chronological love story.","version":"2.0","thumbnail":"/layout-previews/layout3.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Hero photo at start of timeline","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":10,"description":"Photos scattered along the timeline","supports_border":true}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Opening tagline"},"description":{"required":false,"max_length":400,"description":"Love story narrative"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for hero photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for timeline photos"}}},"style_inputs":{"font":{"required":true,"default":"Lato","description":"Primary font family"},"primaryColor":{"required":true,"default":"#be185d","description":"Timeline connector color"}},"layout_structure":{"sections":["horizontal_scroll_container","hero_section","story_card","moments_scattered","event_details_card","media_cta"]}}'),eP=JSON.parse('{"layout_id":"layout_4","name":"Modern Scrapbook","description":"A warm, personal layout designed like a handcrafted scrapbook. Features taped photos, handwritten fonts, stickers, and a textured paper feel.","version":"2.0","thumbnail":"/layout-previews/layout4.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main Polaroid Photo","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":12,"description":"Scattered polaroid photos","supports_border":true}},"videos":{"preWeddingVideo":{"required":false,"description":"Video tape style embed","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":60,"description":"Notebook header"},"description":{"required":false,"max_length":800,"description":"Handwritten note"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for main photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery photos"}}},"style_inputs":{"font":{"required":true,"default":"Indie Flower","description":"Handwriting font family"},"primaryColor":{"required":true,"default":"#44403c","description":"Ink color"}},"layout_structure":{"sections":["polaroid_hero","notebook_story","ticket_stubs_details","scattered_gallery","video_tape","footer"]}}'),eZ=JSON.parse('{"layout_id":"layout_5","name":"Minimalist Card","description":"Ultra-clean card-based design with emphasis on negative space and elegant simplicity. Modern minimalist aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout5.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main couple photo in card","supports_border":true,"default_position":"center","aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":9,"description":"Minimal gallery (3x3 grid)","supports_border":false,"layout_style":["grid"]},"studioImage":{"required":false,"description":"Studio logo minimal","supports_border":false}},"videos":{"preWeddingVideo":{"required":false,"description":"Video in clean card","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":80,"description":"Brief welcome text"},"description":{"required":false,"max_length":300,"description":"Short description only"}},"studio_info":{"studioName":{"required":false,"description":"Studio name"}},"backgrounds":{"heroBackground":{"required":false,"description":"Subtle background"}}},"style_inputs":{"font":{"required":true,"default":"Montserrat","description":"Clean modern font"},"primaryColor":{"required":true,"default":"#000000","description":"Primary color (typically black/dark)"},"secondaryColor":{"required":true,"default":"#737373","description":"Secondary gray tone"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"}},"layout_structure":{"sections":["hero_card","info_card","gallery_card","live_card","footer_card"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eq=JSON.parse('{"layout_id":"layout_6","name":"Romantic Overlay","description":"Full-screen couple photo with elegant text overlay, floating transparent cards, and dreamy romantic aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout6.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Full-screen background couple photo","supports_border":false,"default_position":"background","aspect_ratio":"landscape"},"bridePhoto":{"required":false,"description":"Bride photo (circular overlay)","supports_border":false,"aspect_ratio":"square"},"groomPhoto":{"required":false,"description":"Groom photo (circular overlay)","supports_border":false,"aspect_ratio":"square"},"preciousMoments":{"required":false,"type":"array","max_count":6,"description":"Floating card gallery (limited to 6)","supports_border":true,"layout_style":["grid"]}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Short, impactful romantic message"},"description":{"required":false,"max_length":300,"description":"Love story in floating card"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"},"studioContact":{"required":false,"description":"Studio contact information"}},"backgrounds":{"heroBackground":{"required":false,"description":"Alternative to couple photo as background"}}},"style_inputs":{"font":{"required":true,"default":"Pinyon Script","description":"Primary font family (script recommended)"},"primaryColor":{"required":true,"default":"#fbbf24","description":"Primary accent color (hex)"},"secondaryColor":{"required":true,"default":"#f59e0b","description":"Secondary accent color (hex)"}},"border_slots":{"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border style for gallery photos"}},"layout_structure":{"sections":["hero_fullscreen_overlay","description_card","precious_moments_floating","video_story","studio_details"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eB=JSON.parse('{"layout_id":"layout_7","name":"Editorial Grid","description":"Avant-garde broken grid layout. Asymmetrical image placement, sticky hero, brutalist typography, and museum-like aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout7.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Sticky hero background image","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":8,"description":"Asymmetrical gallery images","supports_border":true}},"videos":{"preWeddingVideo":{"required":false,"description":"Full-width motion picture","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":30,"description":"Top corner label"},"description":{"required":false,"max_length":600,"description":"Exhibition note (main text)"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for hero image"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery images"}}},"style_inputs":{"font":{"required":true,"default":"Space Grotesk","description":"Primary font family (Sans Serif recommended)"},"primaryColor":{"required":true,"default":"#000000","description":"Primary text color"}},"layout_structure":{"sections":["sticky_parallax_hero","exhibition_intro","asymmetrical_gallery","brutalist_details","cinema_video","footer"]}}'),eM=JSON.parse('{"layout_id":"layout_8","name":"Zen Minimalist","description":"Ultra-minimalist vertical flow with maximum white space, large impactful typography, and single-column layout focused on essential elements.","version":"2.0","thumbnail":"/layout-previews/layout8.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Primary couple photo (full-width)","supports_border":true,"aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":3,"description":"Three-column minimal gallery (limited to 3)","supports_border":false,"layout_style":["three-column"]}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Simple, elegant message"},"description":{"required":false,"max_length":300,"description":"Minimal love story"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"}}},"style_inputs":{"font":{"required":true,"default":"CINZEL","description":"Primary font family (serif recommended)"},"primaryColor":{"required":true,"default":"#18181b","description":"Primary text color (dark recommended)"},"secondaryColor":{"required":true,"default":"#71717a","description":"Secondary text color (gray recommended)"}},"layout_structure":{"sections":["hero_minimal","couple_photo_fullwidth","description_centered","event_details_vertical","precious_moments_three_column","video_story","studio_details_minimal"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eF=(ey.default,ef.default,eb.default,ej.default,e_.default,ev.default,eN.default,ew.default,{layout_1:ek,layout_2:eS,layout_3:eC,layout_4:eP,layout_5:eZ,layout_6:eq,layout_7:eB,layout_8:eM}),ez={layout_1:{bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride's individual photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom's individual photo"},couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Gallery photos with precious moments"},studioImage:{name:"studioImage",required:!1,supports_border:!0,max_count:1,description:"Studio partner logo/photo"}},layout_2:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo (hero image)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Gallery photos"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio partner logo"}},layout_3:{bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride's individual photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom's individual photo"},couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Horizontal scrolling gallery"}},layout_4:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo for magazine cover"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!1,max_count:1,description:"Bride feature photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!1,max_count:1,description:"Groom feature photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Gallery in magazine grid layout"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio logo for credits"}},layout_5:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Main couple photo in card"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Minimal gallery (3x3 grid max)"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio logo minimal"}},layout_6:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Full-screen background couple photo"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!1,max_count:1,description:"Bride photo (circular overlay)"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!1,max_count:1,description:"Groom photo (circular overlay)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Floating card gallery"}},layout_7:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Large feature photo in grid"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride photo in offset grid position"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom photo in offset grid position"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Staggered grid gallery"}},layout_8:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Primary couple photo (full-width)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:3,description:"Three-column minimal gallery (max 3)"}}},eT={layout_1:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for bride/groom photos (shared, groom mirrored)"},coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"},studioBorder:{name:"studioBorder",applies_to:["studioImage"],description:"Border for studio image"}},layout_2:{coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"}},layout_3:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for individual photos"},coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"}},layout_4:{coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for cover photo"}},layout_5:{},layout_6:{},layout_7:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for individual photos"}},layout_8:{}},e$={layout_1:{layout_id:"layout_1",name:"Classic Split Hero",description:"Side-by-side bride and groom photos with centered couple photo below",supports_youtube:!0,supports_studio_image:!0},layout_2:{layout_id:"layout_2",name:"Center Focus",description:"Large centered couple photo as hero with gallery below",supports_youtube:!0,supports_studio_image:!0},layout_3:{layout_id:"layout_3",name:"Horizontal Timeline",description:"Journey-style layout with bride and groom photos connected by timeline",supports_youtube:!0,supports_studio_image:!0},layout_4:{layout_id:"layout_4",name:"Magazine Style",description:"Editorial magazine-inspired layout with multi-column text and images",supports_youtube:!0,supports_studio_image:!0},layout_5:{layout_id:"layout_5",name:"Minimalist Card",description:"Ultra-clean card-based design with emphasis on negative space",supports_youtube:!0,supports_studio_image:!0},layout_6:{layout_id:"layout_6",name:"Romantic Overlay",description:"Full-screen couple photo with elegant text overlay and floating cards",supports_youtube:!0,supports_studio_image:!0},layout_7:{layout_id:"layout_7",name:"Editorial Grid",description:"Asymmetric grid layout inspired by editorial design with bold typography",supports_youtube:!0,supports_studio_image:!0},layout_8:{layout_id:"layout_8",name:"Zen Minimalist",description:"Ultra-minimalist vertical flow with maximum white space",supports_youtube:!0,supports_studio_image:!0}};function eO(e){let s=ez[e]||{},t=eT[e]||{},a=e$[e]||null,r=Object.keys(s).length,l=Object.keys(t).length,i=s.preciousMoments?.max_count||0;return{photoPlaceholderCount:r,borderSlotCount:l,hasBridePhoto:!!s.bridePhoto,hasGroomPhoto:!!s.groomPhoto,hasCouplePhoto:!!s.couplePhoto,hasPreciousMoments:!!s.preciousMoments,preciousMomentsMax:i,hasStudioImage:!!s.studioImage,supportsYouTube:a?.supports_youtube||!1,supportsBorders:l>0,layoutName:a?.name||e,layoutDescription:a?.description||""}}var eA=t(15361);let eE=[{name:"Inter",fontFamily:"Inter, sans-serif",googleFont:"Inter:wght@400;600;700"},{name:"Great Vibes",fontFamily:"'Great Vibes', cursive",googleFont:"Great+Vibes"},{name:"Playfair Display",fontFamily:"'Playfair Display', serif",googleFont:"Playfair+Display:wght@400;600;700"},{name:"Cinzel",fontFamily:"'Cinzel', serif",googleFont:"Cinzel:wght@400;600;700"},{name:"Montserrat",fontFamily:"'Montserrat', sans-serif",googleFont:"Montserrat:wght@400;600;700"},{name:"Lato",fontFamily:"'Lato', sans-serif",googleFont:"Lato:wght@400;700"},{name:"Caveat",fontFamily:"'Caveat', cursive",googleFont:"Caveat:wght@400;700"},{name:"Bebas Neue",fontFamily:"'Bebas Neue', cursive",googleFont:"Bebas+Neue"},{name:"Rozha One",fontFamily:"'Rozha One', serif",googleFont:"Rozha+One"},{name:"Pinyon Script",fontFamily:"'Pinyon Script', cursive",googleFont:"Pinyon+Script"}];function eU({weddingId:e,wedding:s}){let{updateFont:t}=(0,ex.j)(),{updateBorder:l}=(0,eg.P)(),[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),g=(0,r.useRef)({}),[y,f]=(0,r.useState)({}),[b,_]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)({layout_page_background_id:null,stream_page_background_id:null}),[S,C]=(0,r.useState)([]),[P,Z]=(0,r.useState)([]),[M,T]=(0,r.useState)(!0),[A,E]=(0,r.useState)([]),[U,L]=(0,r.useState)(!1),[D,R]=(0,r.useState)("layout_1"),I=async()=>{try{let s=(await B.default.get(`/api/weddings/${e}/theme`)).data,t=s.layout_id||s.theme_id||"layout_1";R(t),h({layout_id:t,custom_font:s.custom_font||"Great Vibes",primary_color:s.primary_color||"#f43f5e",secondary_color:s.secondary_color||"#a855f7",pre_wedding_video:s.pre_wedding_video||"",studio_details:s.studio_details||{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:s.custom_messages||{welcome_text:"Welcome to our big day",description:""},theme_assets:s.theme_assets||{borders:{},background_image_id:null}})}catch(e){console.error("Error loading layout:",e),q.toast.error("Failed to load layout settings"),h({layout_id:"layout_1",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:{welcome_text:"Welcome to our big day",description:""},theme_assets:{borders:{},background_image_id:null}})}},Y=e=>{let s=[];return Object.keys(e).forEach(t=>{let a=e[t];if(Array.isArray(a))a.forEach((e,a)=>{if(e){let r=e.retryCount>=e.maxRetries,l=e.file_id&&e.file_id.startsWith("file_")&&["8","12","13","14","52","53","54","55","56","57"].includes(e.file_id.replace("file_","").replace(".jpg","")),i=e.retryCount>0&&!e.url;(r||l||i)&&s.push({slotName:t,index:a,photo:e})}});else if(a){let e=a.retryCount>=a.maxRetries,r=a.file_id&&a.file_id.startsWith("file_")&&["8","12","13","14","52","53","54","55","56","57"].includes(a.file_id.replace("file_","").replace(".jpg","")),l=a.retryCount>0&&!a.url;(e||r||l)&&s.push({slotName:t,index:0,photo:a})}}),s},V=async()=>{try{_(!0),N(!1);let s=(await B.default.get(`/api/weddings/${e}/layout-photos`)).data.photos||{},t=(0,eh.bR)();console.log("[LOAD_LAYOUT_PHOTOS] Received photos from API:",Object.keys(s)),Object.keys(s).forEach(e=>{let a=s[e];Array.isArray(a)?a.forEach((s,a)=>{s&&s.url&&(s.url.startsWith("/api/")?(s.url=`${t}${s.url}`,console.log(`[LOAD_LAYOUT_PHOTOS] ${e}[${a}]: Prepended base URL:`,s.url)):(s.url.startsWith("http://")||s.url.startsWith("https://"))&&console.log(`[LOAD_LAYOUT_PHOTOS] ${e}[${a}]: Keeping absolute URL:`,s.url),s.retryCount=0,s.maxRetries=eh.ZP.IMAGE.MAX_RETRIES||2)}):a&&a.url&&(a.url.startsWith("/api/")?(a.url=`${t}${a.url}`,console.log(`[LOAD_LAYOUT_PHOTOS] ${e}: Prepended base URL:`,a.url)):(a.url.startsWith("http://")||a.url.startsWith("https://"))&&console.log(`[LOAD_LAYOUT_PHOTOS] ${e}: Keeping absolute URL:`,a.url),a.retryCount=0,a.maxRetries=eh.ZP.IMAGE.MAX_RETRIES||2)}),f(s),console.log("[LOAD_LAYOUT_PHOTOS] Photos loaded successfully")}catch(e){console.error("[LOAD_LAYOUT_PHOTOS] Error loading layout photos:",e),f({}),("ERR_NETWORK"===e.code||e.message.includes("Network Error"))&&N(!0)}finally{_(!1)}},W=async()=>{try{console.log("[FIX 3] Loading backgrounds for wedding:",e);let s=await B.default.get(`/api/weddings/${e}/backgrounds`);console.log("[FIX 3] Backgrounds loaded from API:",s.data),k({layout_page_background_id:s.data.layout_page_background_id||null,stream_page_background_id:s.data.stream_page_background_id||null,layout_page_background_url:s.data.layout_page_background_url||null,stream_page_background_url:s.data.stream_page_background_url||null}),console.log("[FIX 3] Backgrounds state updated:",{layout_id:s.data.layout_page_background_id,layout_url:s.data.layout_page_background_url,stream_id:s.data.stream_page_background_id,stream_url:s.data.stream_page_background_url})}catch(e){console.error("[FIX 3] Error loading backgrounds:",e),k({layout_page_background_id:null,stream_page_background_id:null})}},H=async s=>{if(!(Object.keys(y).length>0)||window.confirm("You have existing photos. Changing the layout may affect how they are displayed. Continue?"))try{o(!0),R(s),await B.default.put(`/api/weddings/${e}/theme`,{layout_id:s}),q.toast.success("Layout changed successfully!"),I(),V()}catch(e){console.error("Error changing layout:",e),q.toast.error("Failed to change layout")}finally{o(!1)}},K=async s=>{try{o(!0),await B.default.put(`/api/weddings/${e}/theme`,s),q.toast.success("Settings updated!"),I()}catch(e){console.error("Error updating layout:",e),q.toast.error("Failed to update settings")}finally{o(!1)}},Q=async(s,t,a=0)=>{console.log("handlePhotoUpload called with:",{placeholder:s,fileName:t?.name,retryCount:a});try{if(c(!0),!t){console.error("No file selected"),q.toast.error("No file selected");return}if(t.size>10485760){q.toast.error(`File too large (${(t.size/1048576).toFixed(2)}MB). Maximum size is 10MB`);return}if(!t.type.startsWith("image/")){q.toast.error("Only image files are allowed");return}let a=new FormData;a.append("placeholder",s),a.append("file",t);let r=q.toast.loading(`Uploading photo to ${s}...`);await B.default.post(`/api/weddings/${e}/layout-photos/upload`,a,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5}),q.toast.dismiss(r),q.toast.success(`Photo uploaded to ${s}!`,{duration:3e3,icon:""}),V()}catch(r){if(console.error("Error uploading photo:",r),("ECONNABORTED"===r.code||r.message.includes("timeout"))&&a<2){q.toast.warning(`Upload timeout. Retrying... (${a+1}/2)`),setTimeout(()=>Q(s,t,a+1),2e3);return}let e="Failed to upload photo";if(r.response?.data?.detail){let s=r.response.data.detail;"string"==typeof s?e=s:"object"==typeof s&&s.error&&(e=s.error)}else r.message&&(e=r.message);q.toast.error(e,{duration:5e3,action:a<2?{label:"Retry",onClick:()=>Q(s,t,a+1)}:void 0})}finally{c(!1)}},X=async(s,t)=>{if(window.confirm("Are you sure you want to delete this photo?"))try{let a=q.toast.loading("Deleting photo...");await B.default.delete(`/api/weddings/${e}/layout-photos/${s}/${t}`),q.toast.dismiss(a),q.toast.success("Photo deleted!",{duration:2e3,icon:"\uD83D\uDDD1"}),V()}catch(s){console.error("Error deleting photo:",s);let e="Failed to delete photo";if(s.response?.data?.detail){let t=s.response.data.detail;"string"==typeof t?e=t:"object"==typeof t&&t.error&&(e=t.error)}q.toast.error(e,{duration:4e3})}},J=async s=>{try{o(!0),console.log("[BACKGROUND_UPDATE] Updating backgrounds:",s),await B.default.put(`/api/weddings/${e}/backgrounds`,s),console.log("[BACKGROUND_UPDATE] Background update API call successful"),q.toast.success("Background updated! Refreshing...",{duration:2e3}),await new Promise(e=>setTimeout(e,500)),await W(),console.log("[BACKGROUND_UPDATE] Backgrounds reloaded"),setTimeout(()=>{console.log("[BACKGROUND_UPDATE] Forcing page reload to apply background changes"),window.location.reload()},1e3)}catch(e){console.error("[BACKGROUND_UPDATE] Error updating backgrounds:",e),q.toast.error(e.response?.data?.detail||"Failed to update backgrounds")}finally{o(!1)}},ee=u||{layout_id:"layout_1",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:{welcome_text:"Welcome to our big day",description:""},theme_assets:{borders:{},background_image_id:null}},es=e$[D]||null,et=ez[D]||{},ea=eT[D]||{};if(eO(D),!u)return a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-rose-500"})});let er=Object.keys(eF).map(e=>({id:e,...eF[e]}));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(eo,{className:"w-5 h-5"}),"Wedding Layout"]}),a.jsx(n.SZ,{children:"Choose a layout structure for your wedding page"})]}),a.jsx(n.aY,{className:"space-y-4",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:er.map(e=>{let s=e.layout_id===D,t=eO(e.layout_id);return(0,a.jsxs)("button",{"data-testid":`layout-card-${e.layout_id}`,onClick:()=>H(e.layout_id),disabled:i,className:`relative p-4 rounded-lg border-2 text-left transition-all group ${s?"border-rose-500 bg-rose-50":"border-gray-200 hover:border-rose-300"} ${i?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("div",{className:"mb-3 aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded overflow-hidden",children:e.thumbnail?a.jsx("img",{src:e.thumbnail,alt:e.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(eo,{className:"w-12 h-12 text-gray-300"})})}),a.jsx("div",{className:"font-semibold text-sm",children:e.name}),a.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1",children:[t.supportsYouTube&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-100 text-red-700 text-[10px] rounded-full",children:[a.jsx(en.Z,{className:"w-2.5 h-2.5"}),"YouTube"]}),t.supportsBorders&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-[10px] rounded-full",children:[a.jsx(ed,{className:"w-2.5 h-2.5"}),"Borders"]}),t.photoPlaceholderCount&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] rounded-full",children:[a.jsx(j.Z,{className:"w-2.5 h-2.5"}),t.photoPlaceholderCount," slots"]})]}),s&&a.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-rose-500 rounded-full flex items-center justify-center",children:a.jsx(ec,{className:"w-4 h-4 text-white"})}),a.jsx("div",{className:"absolute inset-0 bg-black/90 rounded-lg p-3 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:(0,a.jsxs)("div",{className:"text-white text-xs space-y-1",children:[a.jsx("p",{className:"font-semibold",children:t.layoutName}),a.jsx("p",{className:"text-gray-300 text-[10px]",children:t.layoutDescription}),(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-2 mt-2 space-y-1",children:[t.hasBridePhoto&&a.jsx("p",{children:" Bride photo"}),t.hasGroomPhoto&&a.jsx("p",{children:" Groom photo"}),t.hasCouplePhoto&&a.jsx("p",{children:" Couple photo"}),t.hasPreciousMoments&&(0,a.jsxs)("p",{children:[" Gallery (max ",t.preciousMomentsMax,")"]})]})]})})]},e.layout_id)})})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(eu,{className:"w-5 h-5"}),"Typography & Colors"]}),a.jsx(n.SZ,{children:"Customize fonts and color scheme"})]}),(0,a.jsxs)(n.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(F._,{className:"flex items-center gap-2",children:[a.jsx(eu,{className:"w-4 h-4"}),"Font Family"]}),(0,a.jsxs)(ei.Ph,{value:ee.custom_font,onValueChange:e=>{K({custom_font:e}),t(e)},children:[a.jsx(ei.i4,{className:"w-full","data-testid":"font-selector",children:a.jsx(ei.ki,{})}),a.jsx(ei.Bw,{children:eE.map(e=>a.jsx(ei.Ql,{value:e.name,children:a.jsx("span",{style:{fontFamily:e.fontFamily},className:"text-lg",children:e.name})},e.name))})]}),(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Preview:"}),(0,a.jsxs)("p",{className:"text-3xl",style:{fontFamily:eE.find(e=>e.name===ee.custom_font)?.fontFamily||"Inter"},children:[s?.bride_name||"Bride"," & ",s?.groom_name||"Groom"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Primary Color"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:ee.primary_color,onChange:e=>K({primary_color:e.target.value}),className:"w-12 h-10 rounded border cursor-pointer",disabled:i}),a.jsx(G.I,{value:ee.primary_color,onChange:e=>K({primary_color:e.target.value}),className:"flex-1",placeholder:"#f43f5e",disabled:i})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Secondary Color"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:ee.secondary_color,onChange:e=>K({secondary_color:e.target.value}),className:"w-12 h-10 rounded border cursor-pointer",disabled:i}),a.jsx(G.I,{value:ee.secondary_color,onChange:e=>K({secondary_color:e.target.value}),className:"flex-1",placeholder:"#a855f7",disabled:i})]})]})]})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Welcome Message & Description"}),a.jsx(n.SZ,{children:"Customize the text content for your wedding page"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(F._,{children:"Welcome Message"}),a.jsx(G.I,{value:ee.custom_messages?.welcome_text||"",onChange:e=>K({custom_messages:{...ee.custom_messages,welcome_text:e.target.value}}),placeholder:"Welcome to our big day",disabled:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(F._,{children:"Description"}),a.jsx(z.g,{value:ee.custom_messages?.description||"",onChange:e=>K({custom_messages:{...ee.custom_messages,description:e.target.value}}),placeholder:"Share your love story...",rows:4,disabled:i})]})]})]}),es?.supports_youtube&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(en.Z,{className:"w-5 h-5"}),"Pre-Wedding Video"]}),a.jsx(n.SZ,{children:"Add a YouTube video (supported by this layout)"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(F._,{children:"YouTube URL"}),a.jsx(G.I,{value:ee.pre_wedding_video||"",onChange:e=>{let s=e.target.value;K({pre_wedding_video:((0,eA.yk)(s)?(0,eA.Tc)(s):s)||s})},placeholder:"https://youtube.com/watch?v=... or https://youtu.be/...",disabled:i}),a.jsx("p",{className:"text-xs text-gray-500",children:"Supports: youtube.com/watch?v=, youtu.be/, and embed URLs"})]}),ee.pre_wedding_video&&(0,eA.yk)(ee.pre_wedding_video)&&a.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:a.jsx("iframe",{src:(0,eA.Tc)(ee.pre_wedding_video),title:"Pre-wedding video preview",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(j.Z,{className:"w-5 h-5"}),"Photos"]}),a.jsx(n.SZ,{children:"Upload photos based on your selected layout's placeholders"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[a.jsx("span",{className:"font-semibold",children:"Selected Layout:"})," ",es?.name]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:es?.description})]}),b?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading photos..."]}):(0,a.jsxs)(a.Fragment,{children:[(()=>{let e=Y(y);return e.length>0?(0,a.jsxs)(m.bZ,{variant:"destructive",className:"mb-4",children:[a.jsx(O.Z,{className:"h-4 w-4"}),a.jsx(m.X,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Broken Photo References Detected:"})," ",e.length," photo(s) reference files that no longer exist on Telegram."]}),a.jsx("div",{className:"space-y-1",children:e.map(({slotName:e,index:s,photo:t})=>(0,a.jsxs)("div",{className:"text-xs flex items-center justify-between",children:[(0,a.jsxs)("span",{children:[e," ",s>0?`(${s+1})`:""]}),a.jsx("button",{onClick:()=>{window.confirm(`Clear broken photo from ${e}${s>0?` (${s+1})`:""}?`)&&X(e,s)},className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Clear"})]},`${e}-${s}`))}),a.jsx("button",{onClick:()=>{window.confirm(`Clear all ${e.length} broken photo references?`)&&e.forEach(({slotName:e,index:s})=>{X(e,s)})},className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 mt-2",children:"Clear All Broken Photos"})]})})]}):null})(),v&&(0,a.jsxs)(m.bZ,{variant:"destructive",className:"mb-4",children:[a.jsx(O.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{children:[a.jsx("strong",{children:"Photo Loading Issue:"})," Unable to load photos from server. This may be due to network connectivity or server issues. Photos will show as placeholders until the issue is resolved."]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(et).map(([e,s])=>{let t=y[e],r="preciousMoments"===e,l=r?t?.length||0:t?1:0,i=s.max_count,o=l<i,n="border-gray-300 bg-gray-50 text-gray-600";return e.includes("bride")?n="border-pink-300 bg-pink-50 text-pink-600":e.includes("groom")?n="border-blue-300 bg-blue-50 text-blue-600":e.includes("couple")?n="border-purple-300 bg-purple-50 text-purple-600":e.includes("precious")||e.includes("Moments")?n="border-green-300 bg-green-50 text-green-600":e.includes("studio")&&(n="border-amber-300 bg-amber-50 text-amber-600"),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:`aspect-square rounded-lg border-2 border-dashed ${n} hover:border-rose-500 hover:bg-rose-50 transition-colors cursor-pointer flex flex-col items-center justify-center gap-2 group`,children:[a.jsx("input",{type:"file",accept:"image/*",className:"hidden","data-testid":`upload-${e}`,multiple:r,ref:s=>{s&&(g.current[e]=s)},disabled:d,onChange:s=>{let t=Array.from(s.target.files||[]);if(!t.length){s.target.value="";return}if(r){if(l>=i){q.toast.error("Gallery is full. Delete a photo to add more."),s.target.value="";return}let a=i-l,r=t.slice(0,a);t.length>a&&q.toast.warning(`Only ${a} photo(s) can be added. Extra files were ignored.`),(async()=>{for(let s of r)console.log("File selected for upload:",s.name,"to slot:",e),await Q(e,s)})()}else{let s=t[0];console.log("File selected for upload:",s.name,"to slot:",e),Q(e,s)}s.target.value=""}}),d?a.jsx(p.Z,{className:"w-6 h-6 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(em.Z,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium text-center px-2",children:s.description.split(" ").slice(0,2).join(" ")}),s.required&&a.jsx("span",{className:"text-[10px] text-red-500 font-semibold",children:"Required"}),!o&&a.jsx("span",{className:"text-[10px] text-gray-500",children:r?"Full":"Replace"}),r&&(0,a.jsxs)("span",{className:"text-[10px] mt-0.5",children:[l,"/",i]})]})]}),t&&a.jsx("div",{className:"grid grid-cols-2 gap-1 cursor-pointer",onClick:()=>{if(d)return;let s=g.current[e];s&&s.click()},children:Array.isArray(t)?t.map((t,r)=>(0,a.jsxs)("div",{className:"relative group aspect-square","data-testid":`photo-${e}-${r}`,children:[a.jsx("img",{src:t.url||t,alt:s.description,className:"w-full h-full object-cover rounded border",onError:e=>{if(console.error("Photo failed to load:",t.url||t,e),t.fallbackUrl&&t.retryCount<t.maxRetries){console.log(`Retrying with fallback URL (attempt ${t.retryCount+1}/${t.maxRetries}):`,t.fallbackUrl),t.retryCount++,e.target.src=t.fallbackUrl;return}v||(N(!0),console.warn("Photo connectivity issue detected - showing user warning")),e.target.style.display="none",e.target.nextSibling.style.display="flex"},onLoad:e=>{console.log("Photo loaded successfully:",t.url||t),e.target.nextSibling.style.display="none"}}),a.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded border",style:{display:"none"},children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(j.Z,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),a.jsx("button",{onClick:s=>{s.stopPropagation();let a=t.photo_id||`photo-${r}`;console.log("Deleting photo:",{slotName:e,photoId:a,photo:t}),X(e,a)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`delete-${e}-${r}`,children:a.jsx($.Z,{className:"w-3 h-3"})})]},t.photo_id||r)):(0,a.jsxs)("div",{className:"relative group aspect-square","data-testid":`photo-${e}`,children:[a.jsx("img",{src:t.url||t,alt:s.description,className:"w-full h-full object-cover rounded border",onError:e=>{if(console.error("Photo failed to load:",t.url||t,e),t.fallbackUrl&&t.retryCount<t.maxRetries){console.log(`Retrying with fallback URL (attempt ${t.retryCount+1}/${t.maxRetries}):`,t.fallbackUrl),t.retryCount++,e.target.src=t.fallbackUrl;return}v||(N(!0),console.warn("Photo connectivity issue detected - showing user warning")),e.target.style.display="none",e.target.nextSibling.style.display="flex"},onLoad:e=>{console.log("Photo loaded successfully:",t.url||t),e.target.nextSibling.style.display="none"}}),a.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded border",style:{display:"none"},children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(j.Z,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),a.jsx("button",{onClick:s=>{s.stopPropagation(),X(e,t.photo_id||"0")},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`delete-${e}`,children:a.jsx($.Z,{className:"w-3 h-3"})})]})})]},e)})}),(()=>{let e=function(e,s={}){let t=ez[e]||{},a=[];for(let[e,r]of Object.entries(t))r.required&&!s[e]&&a.push({name:e,description:r.description});return{isValid:0===a.length,missingRequired:a}}(D,y);return e.isValid?(0,a.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[a.jsx(ec,{className:"w-4 h-4 text-green-600"}),a.jsx("p",{className:"text-xs text-green-800 font-medium",children:"All required photos uploaded!"})]}):(0,a.jsxs)("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-2",children:[a.jsx(O.Z,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-xs text-amber-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Missing required photos:"}),a.jsx("ul",{className:"list-disc list-inside space-y-0.5",children:e.missingRequired.map(e=>a.jsx("li",{children:e.description},e.name))})]})]})})()]})]})]}),Object.keys(ea).length>0&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(ed,{className:"w-5 h-5"}),"Photo Borders"]}),a.jsx(n.SZ,{children:"Customize borders for photos (based on layout support)"})]}),a.jsx(n.aY,{className:"space-y-4",children:M?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading borders..."]}):0===S.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[a.jsx("p",{className:"text-sm text-amber-800",children:"No borders available"}),a.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload borders first"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(ea).map(([e,s])=>{let t=null;"brideGroomBorder"===e?t="bride_groom_border_id":"coupleBorder"===e?t="couple_border_id":"preciousMomentsBorder"===e?t="precious_moments_border_id":"studioBorder"===e&&(t="studio_border_id");let r=ee.theme_assets?.borders?.[t],i=S.find(e=>e.id===r);return(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-lg border",children:[(0,a.jsxs)(F._,{className:"text-xs font-medium flex items-center justify-between",children:[a.jsx("span",{children:s.description}),"brideGroomBorder"===e&&a.jsx("span",{className:"text-[10px] text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:"Groom mirrored"})]}),(0,a.jsxs)(ei.Ph,{value:r||"none",onValueChange:e=>{K({theme_assets:{...ee.theme_assets,borders:{...ee.theme_assets?.borders,[t]:"none"===e?null:e}}}),l(t,"none"===e?null:e)},children:[a.jsx(ei.i4,{className:"text-xs bg-white","data-testid":`border-selector-${e}`,children:a.jsx(ei.ki,{placeholder:"Select border"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),S.filter(s=>"brideGroomBorder"===e||("coupleBorder"===e?s.tags?.includes("couple")||!s.tags?.includes("individual"):"preciousMomentsBorder"===e?s.tags?.includes("gallery")||!s.tags?.includes("individual"):"studioBorder"!==e||s.tags?.includes("minimal")||s.tags?.includes("studio"))).map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-8 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name}),e.tags&&e.tags.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tags.join(", "),")"]})]})},e.id))]})]}),i?.cdn_url&&a.jsx("div",{className:"mt-2 p-2 bg-white rounded border",children:a.jsx("img",{src:i.cdn_url,alt:"Preview",className:"w-full h-20 object-contain"})})]},e)})})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Stream Border"]}),a.jsx(n.SZ,{children:"Add a decorative border around the video player during live stream"})]}),a.jsx(n.aY,{className:"space-y-4",children:M?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading borders..."]}):0===S.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[a.jsx("p",{className:"text-sm text-amber-800",children:"No borders available"}),a.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload borders first"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(F._,{className:"text-sm font-medium",children:"Border for Video Player"}),(0,a.jsxs)(ei.Ph,{value:ee.theme_assets?.borders?.stream_border_id||"none",onValueChange:e=>{K({theme_assets:{...ee.theme_assets,borders:{...ee.theme_assets?.borders,stream_border_id:"none"===e?null:e}}})},children:[a.jsx(ei.i4,{className:"text-xs bg-white","data-testid":"border-selector-stream",children:a.jsx(ei.ki,{placeholder:"Select border for stream"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),S.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-8 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name}),e.tags&&e.tags.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tags.join(", "),")"]})]})},e.id))]})]}),(()=>{let e=ee.theme_assets?.borders?.stream_border_id,s=S.find(s=>s.id===e);return s?.cdn_url?(0,a.jsxs)("div",{className:"mt-2 p-2 bg-white rounded border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),a.jsx("img",{src:s.cdn_url,alt:"Stream Border Preview",className:"w-full h-20 object-contain"})]}):null})(),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This border will appear around the video player during live streaming"})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(j.Z,{className:"w-5 h-5"}),"Background Images"]}),a.jsx(n.SZ,{children:"Set separate backgrounds for layout page and stream page"})]}),a.jsx(n.aY,{className:"space-y-4",children:M?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading backgrounds..."]}):0===P.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[a.jsx("p",{className:"text-sm text-amber-800",children:"No backgrounds available"}),a.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload backgrounds first"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(F._,{className:"text-sm font-semibold",children:"Layout Page Background"}),(0,a.jsxs)(ei.Ph,{value:w.layout_page_background_id||"none",onValueChange:e=>{J({layout_page_background_id:"none"===e?null:e})},children:[a.jsx(ei.i4,{className:"bg-white","data-testid":"layout-background-selector",children:a.jsx(ei.ki,{placeholder:"Select background for layout page"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),P.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-12 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name})]})},e.id))]})]}),w.layout_page_background_url&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded-lg border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),a.jsx("img",{src:w.layout_page_background_url,alt:"Layout Background",className:"w-full h-32 object-cover rounded"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(F._,{className:"text-sm font-semibold",children:"Stream Page Background"}),(0,a.jsxs)(ei.Ph,{value:w.stream_page_background_id||"none",onValueChange:e=>{J({stream_page_background_id:"none"===e?null:e})},children:[a.jsx(ei.i4,{className:"bg-white","data-testid":"stream-background-selector",children:a.jsx(ei.ki,{placeholder:"Select background for stream page"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),P.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-12 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name})]})},e.id))]})]}),w.stream_page_background_url&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded-lg border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),a.jsx("img",{src:w.stream_page_background_url,alt:"Stream Background",className:"w-full h-32 object-cover rounded"})]})]})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(ep.Z,{className:"w-5 h-5"}),"Studio Partner"]}),a.jsx(n.SZ,{children:"Select a studio from your profile (optional)"})]}),a.jsx(n.aY,{className:"space-y-4",children:U?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading studios..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(ei.Ph,{value:ee.studio_details?.studio_id||"none",onValueChange:async e=>{if("none"===e)K({studio_details:{studio_id:"",name:"",logo_url:"",default_image_url:"",website:"",email:"",phone:"",address:"",contact:"",show_details:!1}});else{let s=A.find(s=>s.id===e);s&&(K({studio_details:{studio_id:s.id,name:s.name||"",logo_url:s.logo_url||"",default_image_url:s.default_image_url||"",website:s.website||"",email:s.email||"",phone:s.phone||"",address:s.address||"",contact:s.contact||"",show_details:!0}}),s.default_image_url&&q.toast.success("Studio selected with image!"))}},disabled:i||0===A.length,children:[a.jsx(ei.i4,{className:"bg-white","data-testid":"studio-selector",children:a.jsx(ei.ki,{placeholder:0===A.length?"No studios available - Create one in Profile":"Select a studio"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),A.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.default_image_url&&a.jsx("img",{src:e.default_image_url,alt:e.name,className:"w-8 h-8 object-cover rounded"}),a.jsx("span",{children:e.name})]})},e.id))]})]}),0===A.length&&a.jsx("p",{className:"text-xs text-amber-600",children:"Go to Profile  Studios to create a studio first"})]}),ee.studio_details?.studio_id&&ee.studio_details?.studio_id!==""&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Preview:"}),ee.studio_details?.default_image_url?a.jsx("div",{className:"mb-3",children:a.jsx("img",{src:ee.studio_details.default_image_url,alt:"Studio",className:"w-full h-32 object-cover rounded"})}):(0,a.jsxs)("div",{className:"h-32 mx-auto flex flex-col items-center justify-center bg-gray-100 rounded mb-3",children:[a.jsx(ep.Z,{className:"w-8 h-8 text-gray-400"}),a.jsx("span",{className:"text-gray-400 text-xs text-center mt-1",children:"No studio image"})]}),ee.studio_details?.logo_url&&a.jsx("div",{className:"mb-3",children:a.jsx("img",{src:ee.studio_details.logo_url,alt:ee.studio_details.name||"Studio logo",className:"h-16 mx-auto object-contain"})}),ee.studio_details?.show_details&&(0,a.jsxs)("div",{className:"text-center text-sm space-y-1",children:[ee.studio_details?.name&&a.jsx("p",{className:"font-semibold text-gray-900",children:ee.studio_details.name}),ee.studio_details?.email&&a.jsx("p",{className:"text-gray-600",children:ee.studio_details.email}),ee.studio_details?.phone&&a.jsx("p",{className:"text-gray-600",children:ee.studio_details.phone})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(F._,{className:"text-sm font-medium text-purple-900",children:"Show Studio Details"}),a.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Display contact info along with logo"})]}),a.jsx("button",{type:"button",onClick:()=>K({studio_details:{...ee.studio_details,show_details:!ee.studio_details?.show_details}}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${ee.studio_details?.show_details?"bg-purple-600":"bg-gray-300"}`,disabled:i,"data-testid":"studio-details-toggle",children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ee.studio_details?.show_details?"translate-x-6":"translate-x-1"}`})})]})]})]})})]})]})}var eL=t(66393),eD=t(2815),eR=t(81109);let eI=(0,D.Z)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),eY=(0,D.Z)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);function eV({weddingId:e,wedding:s,onStatusChange:t}){let[l,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),x=async()=>{try{h(!0);let s=await B.default.get(`/api/youtube/status/${e}`);c(s.data)}catch(e){console.error("Error fetching broadcast status:",e)}finally{h(!1)}},g=async a=>{try{if(i(!0),await B.default.post("/api/youtube/transition",{broadcast_id:s.youtube_settings.broadcast_id,status:a}),q.toast.success(`Broadcast transitioned to ${a}`),await x(),t&&t(),"complete"===a)try{await B.default.post(`/api/youtube/save-video-to-media/${e}`),q.toast.success("YouTube video saved to media gallery!")}catch(e){console.error("Error saving video to media:",e),q.toast.error("Broadcast ended but failed to save video to gallery")}}catch(e){console.error("Error transitioning broadcast:",e),q.toast.error(e.response?.data?.detail||`Failed to transition to ${a}`)}finally{i(!1)}};if(!s?.youtube_settings?.broadcast_id)return null;let f=d?.life_cycle_status||"unknown",b="complete"===f;return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(eR.Z,{className:"w-5 h-5 text-red-600"}),"YouTube Broadcast Controls"]}),a.jsx(n.SZ,{children:"Manage your YouTube Live broadcast status"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${(()=>{switch(f){case"live":return"bg-red-500 animate-pulse";case"testing":return"bg-yellow-500";case"complete":return"bg-gray-500";default:return"bg-blue-500"}})()}`}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:(()=>{switch(f){case"ready":return"Ready to Go Live";case"testing":return"Testing (Private)";case"live":return"LIVE";case"complete":return"Ended";case"revoked":return"Cancelled";default:return f}})()}),a.jsx("p",{className:"text-sm text-gray-500",children:"live"===f?"Your stream is live on YouTube":"testing"===f?"Stream is in testing mode (not visible to public)":b?"Broadcast has ended":"Broadcast is ready to start"})]})]}),u&&a.jsx(p.Z,{className:"w-4 h-4 animate-spin text-gray-400"})]}),s.youtube_settings?.youtube_video_url&&(0,a.jsxs)(m.bZ,{children:[a.jsx(eR.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"View on YouTube"}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(s.youtube_settings.youtube_video_url,"_blank"),children:[a.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"Open"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 pt-4 border-t",children:["ready"===f&&(0,a.jsxs)(o.z,{onClick:()=>g("testing"),disabled:l,className:"w-full bg-yellow-500 hover:bg-yellow-600",children:[l?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(en.Z,{className:"w-4 h-4 mr-2"}),"Start Testing (Private)"]}),("testing"===f||"ready"===f)&&(0,a.jsxs)(o.z,{onClick:()=>g("live"),disabled:l,className:"w-full bg-red-600 hover:bg-red-700",children:[l?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(eI,{className:"w-4 h-4 mr-2"}),"Go Live on YouTube"]}),("live"===f||"testing"===f)&&(0,a.jsxs)(o.z,{onClick:()=>{confirm("Are you sure you want to end the YouTube broadcast? This will make it available as a video on your channel.")&&g("complete")},disabled:l,variant:"destructive",className:"w-full",children:[l?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(eY,{className:"w-4 h-4 mr-2"}),"End Broadcast"]}),b&&(0,a.jsxs)(m.bZ,{className:"bg-green-50 border-green-200",children:[a.jsx(N.Z,{className:"h-4 w-4 text-green-600"}),a.jsx(m.X,{className:"text-green-800",children:"Broadcast ended successfully. Video is now available on your YouTube channel."})]})]}),!b&&(0,a.jsxs)(m.bZ,{children:[a.jsx(O.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{className:"text-xs",children:[a.jsx("strong",{children:"How it works:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Testing:"})," Start OBS and test privately before going live"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Go Live:"})," Make your stream visible to the public on YouTube"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"End:"})," Finish the broadcast and save the recording"]})]})]})]})]})]})}var eG=t(48998);function eW({weddingId:e,wedding:s}){let[t,l]=(0,r.useState)([]),[i,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),x=async()=>{try{d(!0);let e=await B.default.get("/api/youtube/broadcasts");l(e.data.broadcasts||[])}catch(e){console.error("Error fetching broadcasts:",e),q.toast.error("Failed to load YouTube broadcasts")}finally{d(!1)}};if(!s?.youtube_settings?.auth_connected)return null;let g=e=>{let s={ready:{color:"bg-blue-500",text:"Ready"},testing:{color:"bg-yellow-500",text:"Testing"},live:{color:"bg-red-500",text:"Live"},complete:{color:"bg-green-500",text:"Completed"},revoked:{color:"bg-gray-500",text:"Cancelled"}}[e]||{color:"bg-gray-400",text:e};return a.jsx(c.C,{className:`${s.color} text-white`,children:s.text})};return(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(eR.Z,{className:"w-5 h-5 text-red-600"}),"Your YouTube Broadcasts"]}),a.jsx(n.SZ,{children:"View and manage your previous YouTube Live streams"})]}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>{h(!u),u||x()},children:[u?"Hide":"Show"," Broadcasts"]})]})}),u&&(0,a.jsxs)(n.aY,{className:"space-y-4",children:[i?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(p.Z,{className:"w-6 h-6 animate-spin text-rose-500"})}):0===t.length?(0,a.jsxs)(m.bZ,{children:[a.jsx(eR.Z,{className:"h-4 w-4"}),a.jsx(m.X,{children:"No previous broadcasts found. Create your first YouTube broadcast to get started!"})]}):a.jsx("div",{className:"space-y-3",children:t.map(s=>a.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[s.thumbnail_url&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:s.thumbnail_url,alt:s.title,className:"w-32 h-20 object-cover rounded"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:s.title}),a.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:s.description})]}),g(s.life_cycle_status)]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-xs text-gray-600",children:[s.scheduled_start_time&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(S.Z,{className:"w-3 h-3"}),(0,M.WU)(new Date(s.scheduled_start_time),"MMM d, yyyy")]}),s.actual_start_time&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(eG.Z,{className:"w-3 h-3"}),"Started: ",(0,M.WU)(new Date(s.actual_start_time),"p")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(s.youtube_video_url,"_blank"),children:[a.jsx(y.Z,{className:"w-3 h-3 mr-1"}),"View on YouTube"]}),"complete"===s.life_cycle_status&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:async()=>{try{await B.default.post(`/api/youtube/save-video-to-media/${e}`,{broadcast_id:s.broadcast_id}),q.toast.success("Video added to media gallery!")}catch(e){q.toast.error("Failed to add video to gallery")}},children:[a.jsx(eR.Z,{className:"w-3 h-3 mr-1"}),"Add to Gallery"]})]})]})]})},s.broadcast_id))}),t.length>0&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:x,disabled:i,className:"w-full",children:[i?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Refresh List"]})]})]})}var eH=t(32933),eK=t(84554),eQ=t.n(eK);function eX({weddingId:e,currentTemplateId:s,onTemplateAssigned:t}){let[l,i]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[m,h]=(0,r.useState)(s||""),[g,y]=(0,r.useState)(!1),[f,b]=(0,r.useState)(null),[j,_]=(0,r.useState)(!1),[N,w]=(0,r.useState)(null),[k,S]=(0,r.useState)([]),[C,P]=(0,r.useState)(!1),Z=async()=>{try{let s=await B.default.get(`/api/weddings/${e}/template-assignment`);console.log("Current assignment:",s.data),s.data.assignment_id&&(b(s.data),h(s.data.template?.id||""))}catch(e){console.error("Failed to load current assignment:",e)}},M=async s=>{let t=l.find(e=>e.id===s);if(t){w(t),_(!0);try{P(!0);let t=await B.default.post(`/api/video-templates/${s}/preview`,{wedding_id:e});console.log("Preview overlays:",t.data),S(t.data.preview_data?.overlays||[])}catch(e){console.error("Failed to load preview overlays:",e),q.toast.error("Failed to load overlay preview"),S([])}finally{P(!1)}}},F=async()=>{if(!m){q.toast.error("Please select a template");return}try{y(!0),console.log("Assigning template:",{template_id:m,slot:1,customizations:{color_overrides:{},font_overrides:{}}}),await B.default.post(`/api/weddings/${e}/assign-template`,{template_id:m,slot:1,customizations:{color_overrides:{},font_overrides:{}}}),q.toast.success("Template assigned successfully!"),Z(),t&&t()}catch(e){console.error("Failed to assign template:",e),console.error("Error response:",e.response?.data),q.toast.error(e.response?.data?.detail||"Failed to assign template")}finally{y(!1)}},z=async()=>{if(confirm("Are you sure you want to remove the assigned template?"))try{y(!0),await B.default.delete(`/api/weddings/${e}/template-assignment`),q.toast.success("Template removed successfully"),b(null),h(""),t&&t()}catch(e){console.error("Failed to remove template:",e),q.toast.error(e.response?.data?.detail||"Failed to remove template")}finally{y(!1)}};return d?(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Video Template"]}),a.jsx(n.SZ,{children:"Select a video template for your wedding layout"})]}),a.jsx(n.aY,{children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(p.Z,{className:"w-6 h-6 animate-spin text-rose-500"})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Zb,{"data-testid":"template-selector-card",children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Video Template"]}),a.jsx(n.SZ,{children:"Select a video template to use for your wedding layout"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[f&&f.template&&a.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(eH.Z,{className:"w-4 h-4 text-green-600"}),a.jsx("p",{className:"font-semibold text-green-900",children:"Template Assigned"})]}),a.jsx("p",{className:"text-sm text-green-800",children:f.template.name}),a.jsx("p",{className:"text-xs text-green-600 mt-1",children:f.template.description}),f.template.tags&&f.template.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:f.template.tags.map(e=>a.jsx(c.C,{variant:"outline",className:"text-xs bg-white",children:e},e))})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx(o.z,{variant:"ghost",size:"sm",onClick:()=>M(f.template.id),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:a.jsx(v.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{variant:"ghost",size:"sm",onClick:z,disabled:g,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx($.Z,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Template"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(ei.Ph,{value:m,onValueChange:h,"data-testid":"template-dropdown",children:[a.jsx(ei.i4,{className:"flex-1",children:a.jsx(ei.ki,{placeholder:"Choose a video template..."})}),a.jsx(ei.Bw,{children:0===l.length?a.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No templates available. Create templates in Admin panel."}):l.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"truncate",children:e.name}),e.category&&a.jsx(c.C,{variant:"secondary",className:"text-xs",children:e.category})]})},e.id))})]}),m&&a.jsx(o.z,{variant:"outline",size:"icon",onClick:()=>M(m),title:"Preview Template",children:a.jsx(v.Z,{className:"w-4 h-4"})})]})]}),m&&a.jsx("div",{className:"p-3 bg-gray-50 border rounded-lg",children:(()=>{let e=l.find(e=>e.id===m);return e?(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:e.name}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),e.video_data&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2 grid grid-cols-2 gap-2",children:[(0,a.jsxs)("p",{children:["Duration: ",e.video_data.duration_seconds,"s"]}),(0,a.jsxs)("p",{children:["Resolution: ",e.video_data.width,"x",e.video_data.height]})]}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map(e=>a.jsx(c.C,{variant:"outline",className:"text-xs",children:e},e))})]}):null})()}),a.jsx(o.z,{onClick:F,disabled:!m||g||0===l.length,className:"w-full","data-testid":"assign-template-btn",children:g?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Assigning..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(eH.Z,{className:"w-4 h-4 mr-2"}),f?"Change Template":"Assign Template"]})})]}),a.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-blue-900",children:[a.jsx("strong",{children:"Note:"})," Video templates will be used to generate personalized videos with your wedding information automatically populated."]})})]})]}),a.jsx(V.Vq,{open:j,onOpenChange:_,children:(0,a.jsxs)(V.cZ,{className:"max-w-4xl",children:[(0,a.jsxs)(V.fK,{children:[a.jsx(V.$N,{children:"Template Preview"}),(0,a.jsxs)(V.Be,{children:[N?.name," - ",N?.description]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[N&&N.video_data&&(0,a.jsxs)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden relative",children:[a.jsx(eQ(),{url:N.video_data.original_url,width:"100%",height:"100%",controls:!0,playing:!1,light:N.preview_thumbnail?.url||!1,playIcon:a.jsx("div",{className:"w-16 h-16 bg-white/90 rounded-full flex items-center justify-center hover:bg-white transition-all",children:a.jsx("svg",{className:"w-8 h-8 text-rose-500 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})}),config:{file:{attributes:{controlsList:"nodownload"}}}}),!C&&k.length>0&&a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:k.map((e,s)=>a.jsx("div",{className:"absolute",style:{left:`${e.position?.x||0}%`,top:`${e.position?.y||0}%`,transform:"translate(-50%, -50%)",fontSize:`${e.style?.font_size||24}px`,fontFamily:e.style?.font_family||"Arial",color:e.style?.color||"#FFFFFF",fontWeight:e.style?.font_weight||"normal",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",textAlign:"center",maxWidth:"80%"},children:e.text},e.id||s))}),C&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-white"})})]}),k.length>0&&(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Dynamic Overlays Preview (populated with your wedding data):"}),a.jsx("div",{className:"space-y-1",children:k.map((e,s)=>(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[" ",e.data_source,": ",a.jsx("span",{className:"font-semibold",children:e.text})]},s))})]}),N&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Category"}),a.jsx("p",{className:"font-medium",children:N.category||"General"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Duration"}),(0,a.jsxs)("p",{className:"font-medium",children:[N.video_data?.duration_seconds,"s"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Resolution"}),(0,a.jsxs)("p",{className:"font-medium",children:[N.video_data?.width,"x",N.video_data?.height]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Text Overlays"}),(0,a.jsxs)("p",{className:"font-medium",children:[N.text_overlays?.length||0," overlays"]})]})]}),N&&N.tags&&N.tags.length>0&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:N.tags.map(e=>a.jsx(c.C,{variant:"outline",children:e},e))})]})]})]})})]})}function eJ({params:e}){let{user:s,loading:t}=(0,i.a)(),l=(0,Z.useRouter)(),F=e.id,[z,T]=(0,r.useState)(null),[$,O]=(0,r.useState)(!0),[D,R]=(0,r.useState)(!1),[I,Y]=(0,r.useState)(0),[V,G]=(0,r.useState)(0),[H,K]=(0,r.useState)(null),[Q,X]=(0,r.useState)(!1),[J,ee]=(0,r.useState)("weblive"),[es,et]=(0,r.useState)(!1),ea=s?.subscription_plan==="monthly"||s?.subscription_plan==="yearly",er=async()=>{try{O(!0),console.log("DEBUG: Loading wedding with ID:",F);let e=(await B.default.get(`/api/weddings/${F}`)).data;if(console.log("DEBUG: Wedding data received:",e),!e||"object"!=typeof e){console.error("Invalid wedding data received:",e),q.toast.error("Invalid wedding data received"),l.push("/dashboard");return}if(s&&s.id&&e.creator_id!==s.id){q.toast.error("You do not have permission to manage this wedding"),l.push("/dashboard");return}console.log("DEBUG: Theme settings before processing:",e.theme_settings),e.theme_settings&&"object"==typeof e.theme_settings?(e.theme_settings.studio_details&&"object"==typeof e.theme_settings.studio_details||(e.theme_settings.studio_details={studio_id:"",name:"",logo_url:"",contact:""}),e.theme_settings.custom_messages&&"object"==typeof e.theme_settings.custom_messages||(e.theme_settings.custom_messages={welcome_text:"Welcome to our big day",description:""}),Array.isArray(e.theme_settings.cover_photos)||(e.theme_settings.cover_photos=[])):(console.log("DEBUG: Creating default theme_settings"),e.theme_settings={theme_id:"floral_garden",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",cover_photos:[],studio_details:{studio_id:"",name:"",logo_url:"",contact:""},custom_messages:{welcome_text:"Welcome to our big day",description:""}}),console.log("DEBUG: Final theme_settings:",e.theme_settings),console.log("DEBUG: Cover photos count:",e.theme_settings.cover_photos.length),console.log("DEBUG: Theme assets:",e.theme_settings.theme_assets),T(e),R("live"===e.status),Y(e.viewers_count||0);let t=e.streaming_type||"weblive";console.log("DEBUG: Wedding streaming_type:",e.streaming_type),console.log("DEBUG: Setting localStreamingType to:",t),console.log("DEBUG: skipStreamingTypeUpdate:",es),es?et(!1):ee(t)}catch(s){console.error("Error loading wedding:",s);let e=s.response?.data?.detail||s.message||"Failed to load wedding details";q.toast.error(e),(s.response?.status===401||s.response?.status===403)&&l.push("/dashboard")}finally{O(!1)}},ei=(e,s)=>{navigator.clipboard.writeText(e),q.toast.success(`${s} copied to clipboard!`)},eo=async()=>{try{let e=await B.default.get(`/api/weddings/${F}/settings`);K(e.data)}catch(e){console.error("Error loading settings:",e)}},en=async(e,s)=>{try{X(!0),await B.default.put(`/api/weddings/${F}/settings`,{[e]:s}),q.toast.success("Settings updated"),eo()}catch(e){console.error("Error updating settings:",e),q.toast.error("Failed to update settings")}finally{X(!1)}};if(t||$)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-rose-500"})});if(!z)return null;let ed=`${window.location.origin}/weddings/${F}`;return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50",children:[a.jsx("nav",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200 sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(P.default,{href:"/dashboard",children:(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",children:[a.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Dashboard"]})}),a.jsx(u.Z,{orientation:"vertical",className:"h-6"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"bg-gradient-to-r from-rose-500 to-purple-600 p-2 rounded-lg",children:a.jsx(x.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-lg font-bold",children:"Manage Wedding"}),a.jsx("p",{className:"text-xs text-gray-600",children:z.title})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[z.is_locked&&(0,a.jsxs)(c.C,{variant:"destructive",className:"gap-1",children:[a.jsx(g.Z,{className:"w-3 h-3"}),"Locked"]}),a.jsx(c.C,{variant:D?"default":"secondary",className:D?"bg-red-500 animate-pulse":"",children:D?"LIVE":z.status}),a.jsx(P.default,{href:`/weddings/${F}`,target:"_blank",children:(0,a.jsxs)(o.z,{variant:"outline",size:"sm",children:[a.jsx(y.Z,{className:"w-4 h-4 mr-2"}),"View Public Page"]})})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[z.is_locked&&(0,a.jsxs)(m.bZ,{variant:"destructive",children:[a.jsx(f.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{children:["This wedding is locked because your premium subscription has expired.",a.jsx(P.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade to Premium"})," to unlock and start streaming."]})]}),(0,a.jsxs)(d.mQ,{defaultValue:"stream",className:"w-full",children:[(0,a.jsxs)(d.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(d.SP,{value:"stream",children:[a.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Stream"]}),(0,a.jsxs)(d.SP,{value:"layout",children:[a.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Layout"]}),(0,a.jsxs)(d.SP,{value:"media",children:[a.jsx(j.Z,{className:"w-4 h-4 mr-2"}),"Media"]}),(0,a.jsxs)(d.SP,{value:"settings",children:[a.jsx(_.Z,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),(0,a.jsxs)(d.nU,{value:"stream",className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Streaming Type"}),a.jsx(n.SZ,{children:"Choose between WebLive custom RTMP or YouTube Live Streaming"})]}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"streamingType",value:"weblive",checked:"weblive"===J,onChange:async e=>{if("live"===z.status||"paused"===z.status){q.toast.error("Cannot change streaming type during an active stream");return}ee("weblive");try{let e=await B.default.put(`/api/weddings/${F}/streaming-type?streaming_type=weblive`);console.log("DEBUG: Streaming type update response:",e.data),q.toast.success("Switched to WebLive Streaming"),et(!0),console.log("DEBUG: API call successful, keeping local state")}catch(e){console.error("DEBUG: Failed to update streaming type:",e),q.toast.error(e.response?.data?.detail||"Failed to update streaming type"),ee(J)}},disabled:"live"===z.status||"paused"===z.status,className:"w-4 h-4 text-rose-500"}),a.jsx("span",{className:"text-sm font-medium",children:"WebLive Streaming (Default)"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"streamingType",value:"youtube",checked:"youtube"===J,onChange:async e=>{if("live"===z.status||"paused"===z.status){q.toast.error("Cannot change streaming type during an active stream");return}console.log("DEBUG: Changing streaming type from",J,"to youtube"),ee("youtube");try{let e=await B.default.put(`/api/weddings/${F}/streaming-type?streaming_type=youtube`);console.log("DEBUG: Streaming type update response:",e.data),q.toast.success("Switched to YouTube Live Streaming"),et(!0),console.log("DEBUG: API call successful, keeping local state")}catch(e){console.error("DEBUG: Failed to update streaming type:",e),q.toast.error(e.response?.data?.detail||"Failed to update streaming type"),ee(J)}},disabled:"live"===z.status||"paused"===z.status,className:"w-4 h-4 text-red-600"}),a.jsx("span",{className:"text-sm font-medium",children:"YouTube Live Streaming"})]})]}),("live"===z.status||"paused"===z.status)&&(0,a.jsxs)(m.bZ,{children:[a.jsx(g.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-sm",children:"Streaming type is locked during an active stream. End the stream to switch modes."})]})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Live Stream Status"]}),a.jsx(n.SZ,{children:"Manage your wedding stream lifecycle - OBS controls stream presence, you control when it ends"})]}),(0,a.jsxs)(n.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${"live"===z.status?"bg-red-500 animate-pulse":"paused"===z.status?"bg-yellow-500":"bg-gray-400"}`}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:"live"===z.status?"LIVE":"paused"===z.status?"PAUSED":"ENDED"}),a.jsx("p",{className:"text-sm text-gray-500",children:"live"===z.status?"Streaming in progress":"paused"===z.status?"Stream paused - waiting for OBS reconnect":"Stream has ended"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Viewers"}),a.jsx("p",{className:"text-2xl font-bold",children:I})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-blue-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${D?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:"text-sm font-medium",children:"OBS Status"})]}),a.jsx("p",{className:"text-xs text-gray-600",children:D?"OBS is connected and streaming":"OBS is disconnected"}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"OBS start/stop controls stream presence only"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-purple-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(v.Z,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Viewer Experience"})]}),a.jsx("p",{className:"text-xs text-gray-600",children:"live"===z.status?"Viewers see live stream":"paused"===z.status?'Viewers see "Be Right Back" screen':"Viewers see replay and highlights"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-rose-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(_.Z,{className:"w-4 h-4 text-rose-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Host Control"})]}),a.jsx("p",{className:"text-xs text-gray-600",children:"Only you can end the live stream"})]})]}),("live"===z.status||"paused"===z.status)&&(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)(o.z,{variant:"destructive",size:"lg",className:"w-full",onClick:async()=>{if(confirm("Are you sure you want to end the live stream? This will finalize the recording and show replay to viewers. This action cannot be undone."))try{O(!0),await er(),await B.default.post(`/api/weddings/${F}/live/end`),q.toast.success("Live stream ended successfully! Recording is being processed."),er()}catch(e){console.error("Error ending live stream:",e),e.response?.data?.detail?.includes("Cannot end from")?q.toast.error("Cannot end live stream: Stream is not currently active"):q.toast.error("Failed to end live stream")}finally{O(!1)}},disabled:$,children:[a.jsx(p.Z,{className:`w-4 h-4 mr-2 ${$?"animate-spin":""}`}),"End Live Stream"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"This will merge recordings, upload to CDN, and show replay to viewers"})]}),"ended"===z.status&&a.jsx("div",{className:"pt-4 border-t",children:(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsx(N.Z,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),a.jsx("p",{className:"font-semibold text-green-800",children:"Stream Successfully Ended"}),a.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Recording has been processed and is available for replay"}),z.recording_url&&a.jsx(o.z,{variant:"outline",className:"mt-3",asChild:!0,children:(0,a.jsxs)("a",{href:z.recording_url,target:"_blank",children:[a.jsx(Play,{className:"w-4 h-4 mr-2"}),"View Recording"]})})]})})]})]}),"weblive"===J&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"WebLive - RTMP Credentials"}),a.jsx(n.SZ,{children:"Use these credentials in OBS Studio or your streaming software"})]}),a.jsx(n.aY,{className:"space-y-4",children:z.stream_credentials?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Server URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:z.stream_credentials.rtmp_url,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ei(z.stream_credentials.rtmp_url,"Server URL"),children:a.jsx(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"password",value:z.stream_credentials.stream_key,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ei(z.stream_credentials.stream_key,"Stream Key"),children:a.jsx(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(m.bZ,{children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-sm",children:"Keep your stream key private! Anyone with this key can stream to your wedding."})]})]}):a.jsx("p",{className:"text-sm text-gray-600",children:"Loading credentials..."})})]}),"youtube"===J&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"YouTube Account"}),a.jsx(n.SZ,{children:"Connect your YouTube account to stream live"})]}),a.jsx(n.aY,{className:"space-y-4",children:z.youtube_settings?.auth_connected?(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-green-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(N.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold text-green-800",children:"YouTube Connected"}),a.jsx("p",{className:"text-sm text-green-600",children:"Ready to stream"})]})]}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("Are you sure you want to disconnect YouTube?"))try{await B.default.get(`/api/youtube/disconnect/${F}`),q.toast.success("YouTube disconnected"),er()}catch(e){q.toast.error("Failed to disconnect YouTube")}},children:"Disconnect"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(m.bZ,{children:a.jsx(m.X,{children:"Connect your YouTube account to enable live streaming to your YouTube channel"})}),(0,a.jsxs)(o.z,{onClick:async()=>{try{O(!0);let e=await B.default.post("/api/youtube/connect",{wedding_id:F});sessionStorage.setItem("youtube_state",e.data.state),sessionStorage.setItem("youtube_wedding_id",F),window.location.href=e.data.oauth_url}catch(e){q.toast.error("Failed to initiate YouTube connection"),O(!1)}},disabled:$,className:"w-full bg-red-600 hover:bg-red-700",children:[$?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Connect YouTube Account"]})]})})]}),z.youtube_settings?.auth_connected&&z.youtube_settings?.broadcast_id&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"YouTube - RTMP Credentials"}),a.jsx(n.SZ,{children:"Use these credentials in OBS Studio to stream to YouTube"})]}),a.jsx(n.aY,{className:"space-y-4",children:z.stream_credentials&&z.youtube_settings?.stream_id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Stream Server URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:z.stream_credentials.rtmp_url||"rtmp://a.rtmp.youtube.com/live2",readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ei(z.stream_credentials.rtmp_url||"rtmp://a.rtmp.youtube.com/live2","Server URL"),children:a.jsx(w.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"password",value:z.stream_credentials.stream_key||"",readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>{z.stream_credentials?.stream_key?ei(z.stream_credentials.stream_key,"Stream Key"):q.toast.error("Stream key not available")},children:a.jsx(w.Z,{className:"w-4 h-4"})})]})]}),z.youtube_settings?.youtube_video_url&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"YouTube Video URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:z.youtube_settings.youtube_video_url,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(z.youtube_settings.youtube_video_url,"_blank"),children:a.jsx(y.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(m.bZ,{children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-sm",children:"Stream to YouTube using these credentials. Your stream will be visible on your YouTube channel."})]})]}):(0,a.jsxs)("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"No broadcast created yet"}),(0,a.jsxs)(o.z,{onClick:async()=>{try{O(!0),await B.default.post(`/api/youtube/create-broadcast/${F}`),q.toast.success("YouTube broadcast created successfully"),er()}catch(e){q.toast.error(e.response?.data?.detail||"Failed to create broadcast")}finally{O(!1)}},disabled:$,children:[$?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Create YouTube Broadcast"]})]})})]}),z.youtube_settings?.auth_connected&&z.youtube_settings?.broadcast_id&&a.jsx(eV,{weddingId:F,wedding:z,onStatusChange:er}),z.youtube_settings?.auth_connected&&a.jsx(eW,{weddingId:F,wedding:z})]}),a.jsx(L.Z,{weddingId:F,isPremium:ea,isLive:D}),a.jsx(W,{weddingId:F,isPremium:ea,rtmpUrl:z?.stream_credentials?.rtmp_url}),D&&a.jsx(eD.Z,{weddingId:F})]}),(0,a.jsxs)(d.nU,{value:"layout",className:"space-y-6",children:[a.jsx(eX,{weddingId:F,currentTemplateId:z?.template_assignment?.template_id,onTemplateAssigned:()=>{q.toast.success("Template assigned! Your wedding data will be automatically populated."),er()}}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-5 h-5"}),"Wedding Layout Customization"]}),a.jsx(n.SZ,{children:"Select a layout structure, upload photos by category, and customize borders & styles"})]}),a.jsx(n.aY,{children:a.jsx("p",{className:"text-sm text-gray-600",children:"Choose your layout structure and customize photos, colors, fonts, and borders below."})})]}),a.jsx(eU,{weddingId:F,wedding:z})]}),(0,a.jsxs)(d.nU,{value:"media",className:"space-y-6",children:[a.jsx(el,{weddingId:F,onFolderSelect:e=>{console.log("Selected folder:",e)}}),a.jsx(A,{weddingId:F,onUploadComplete:()=>{G(e=>e+1),q.toast.success("Media uploaded successfully!")}}),a.jsx(E.Z,{weddingId:F,isCreator:!0},V)]}),(0,a.jsxs)(d.nU,{value:"settings",className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Wedding Details"})}),a.jsx(n.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Couple"}),(0,a.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(k.Z,{className:"w-5 h-5 text-rose-500"}),z.bride_name," & ",z.groom_name]})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date & Time"}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx(S.Z,{className:"w-4 h-4 text-gray-400"}),(0,M.WU)(new Date(z.scheduled_date),"PPP")]}),a.jsx("p",{className:"text-sm text-gray-600 ml-6",children:(0,M.WU)(new Date(z.scheduled_date),"p")})]}),z.location&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Location"}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx(C.Z,{className:"w-4 h-4 text-gray-400"}),z.location]})]})]}),z.description&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),a.jsx("p",{className:"text-gray-700 mt-1",children:z.description})]})]})]})})]}),H&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Media & Access Settings"}),a.jsx(n.SZ,{children:"Control how guests interact with your wedding content"})]}),(0,a.jsxs)(n.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Auto Delete Media"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Automatically delete media after a specified period"})]}),a.jsx("button",{onClick:()=>en("auto_delete_media",!H.auto_delete_media),disabled:Q,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${H.auto_delete_media?"bg-rose-500":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${H.auto_delete_media?"translate-x-6":"translate-x-1"}`})})]}),H.auto_delete_media&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Delete after (days)"}),a.jsx("input",{type:"number",min:"1",max:"365",value:H.auto_delete_days,onChange:e=>en("auto_delete_days",parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-md"})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Enable Download"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Allow guests to download photos and videos"})]}),a.jsx("button",{onClick:()=>en("enable_download",!H.enable_download),disabled:Q,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${H.enable_download?"bg-rose-500":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${H.enable_download?"translate-x-6":"translate-x-1"}`})})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Enable Sharing/Embed"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Allow guests to share wedding page and embed media"})]}),a.jsx("button",{onClick:()=>en("enable_sharing",!H.enable_sharing),disabled:Q,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${H.enable_sharing?"bg-rose-500":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${H.enable_sharing?"translate-x-6":"translate-x-1"}`})})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Viewer Limit"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Maximum number of concurrent viewers (leave empty for unlimited)"})]})}),a.jsx("input",{type:"number",min:"0",placeholder:"Unlimited",value:H.viewer_limit||"",onChange:e=>en("viewer_limit",e.target.value?parseInt(e.target.value):null),className:"w-full px-3 py-2 border rounded-md"})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Playback Quality Options"}),a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Quality options available to viewers"}),(0,a.jsxs)("select",{value:H.playback_quality,onChange:e=>en("playback_quality",e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[a.jsx("option",{value:"auto",children:"Auto (Adaptive)"}),a.jsx("option",{value:"720p",children:"720p Maximum"}),a.jsx("option",{value:"1080p",children:"1080p Maximum"}),a.jsx("option",{value:"4K",children:"4K Maximum"})]})]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Share Your Wedding"})}),(0,a.jsxs)(n.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Public URL"}),a.jsx("p",{className:"text-sm font-mono break-all",children:ed})]}),(0,a.jsxs)(o.z,{variant:"outline",className:"w-full",onClick:()=>ei(ed,"Wedding URL"),children:[a.jsx(w.Z,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]}),a.jsx(U.Z,{token:s?.access_token||localStorage.getItem("token")}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Quick Stats"})}),(0,a.jsxs)(n.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),a.jsx(c.C,{variant:D?"default":"secondary",children:z.status})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Current Viewers"}),a.jsx("span",{className:"font-semibold",children:I})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Total Views"}),a.jsx("span",{className:"font-semibold",children:z.viewers_count||0})]})]})]})]})]})})]})}function e0({params:e}){return a.jsx(eL.w,{children:a.jsx(eJ,{params:e})})}},26848:(e,s,t)=>{"use strict";t.d(s,{Z:()=>x});var a=t(10326),r=t(17577),l=t(50560),i=t(18729),o=t(20835),n=t(97134),d=t(1572),c=t(26092),u=t(85999),m=t(89420),p=t(90434);let h=[{value:"240p",label:"240p",description:"426\xd7240"},{value:"360p",label:"360p",description:"640\xd7360"},{value:"480p",label:"480p",description:"854\xd7480"},{value:"720p",label:"720p HD",description:"1280\xd7720",premium:!0},{value:"1080p",label:"1080p Full HD",description:"1920\xd71080",premium:!0},{value:"1440p",label:"1440p 2K",description:"2560\xd71440",premium:!0},{value:"4K",label:"4K Ultra HD",description:"3840\xd72160",premium:!0}];function x({weddingId:e,isPremium:s}){let[t,x]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[f,b]=(0,r.useState)("480p"),[j,_]=(0,r.useState)("480p"),v=async()=>{try{let s=(await m.default.get(`/api/streams/quality/${e}`)).data;y(s),b(s.live_quality),_(s.recording_quality)}catch(e){console.error("Error loading quality settings:",e)}},N=async()=>{try{x(!0),await m.default.post("/api/streams/quality/update",{wedding_id:e,live_quality:f,recording_quality:j}),u.toast.success("Quality settings updated successfully!"),v()}catch(e){console.error("Error updating quality:",e),u.toast.error(e.response?.data?.detail||"Failed to update quality settings")}finally{x(!1)}},w=e=>!!g&&g.allowed_live_qualities.includes(e);return g?(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-5 h-5"}),"Stream Quality Control"]}),a.jsx(l.SZ,{children:"Configure live streaming and recording quality"})]}),(0,a.jsxs)(l.aY,{className:"space-y-6",children:[!g.is_premium&&(0,a.jsxs)(n.bZ,{children:[a.jsx(c.Z,{className:"h-4 w-4"}),(0,a.jsxs)(n.X,{children:[g.message,a.jsx(p.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade Now"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium",children:"Live Streaming Quality"}),a.jsx(o.C,{children:f})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:h.map(e=>{let s=w(e.value),t=f===e.value;return(0,a.jsxs)("button",{onClick:()=>s&&b(e.value),disabled:!s,className:`
                    relative p-3 rounded-lg border-2 text-left transition-all
                    ${t?"border-rose-500 bg-rose-50":s?"border-gray-200 hover:border-rose-300 hover:bg-rose-50/50":"border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed"}
                  `,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"font-semibold text-sm",children:e.label}),e.premium&&!g.is_premium&&a.jsx(c.Z,{className:"w-3 h-3 text-yellow-500"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:e.description})]},e.value)})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium",children:"Recording Quality"}),a.jsx(o.C,{variant:"secondary",children:j})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:h.map(e=>{let s=w(e.value),t=j===e.value,r=h.findIndex(e=>e.value===f),l=h.findIndex(s=>s.value===e.value)>r;return(0,a.jsxs)("button",{onClick:()=>s&&!l&&_(e.value),disabled:!s||l,className:`
                    relative p-3 rounded-lg border-2 text-left transition-all
                    ${t?"border-purple-500 bg-purple-50":s&&!l?"border-gray-200 hover:border-purple-300 hover:bg-purple-50/50":"border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed"}
                  `,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"font-semibold text-sm",children:e.label}),e.premium&&!g.is_premium&&a.jsx(c.Z,{className:"w-3 h-3 text-yellow-500"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:e.description}),l&&s&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Exceeds live quality"})]},e.value)})}),a.jsx("p",{className:"text-xs text-gray-500",children:"Recording quality cannot exceed live streaming quality"})]}),a.jsx(i.z,{onClick:N,disabled:t,className:"w-full",children:t?"Updating...":"Save Quality Settings"}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[a.jsx("strong",{children:"Tip:"})," Higher quality requires more bandwidth. Test your connection before going live with 4K."]})})]})]}):a.jsx(l.Zb,{children:a.jsx(l.aY,{className:"py-8",children:a.jsx("p",{className:"text-center text-gray-500",children:"Loading quality settings..."})})})}},74839:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(10326),r=t(17577),l=t(42106),i=t(12108),o=t(74030);function n({weddingData:e={},layoutConfig:s={},onEnter:t}){let[n,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)("16:9"),{bride_name:m="",groom_name:p="",event_date:h="",event_time:x="",venue:g=""}=e,{font:y="Playfair Display",primaryColor:f="#1e3a8a",couplePhoto:b=null,preciousMoments:j=[],studioDetails:_={},preWeddingVideo:v=null,borders:N={},borderMasks:w={},templateVideoWeddingId:k=null,hasTemplateVideo:S=!1}=s,C={hidden:{y:40,opacity:0},visible:{y:0,opacity:1,transition:{duration:.8}}};return n?(0,a.jsxs)("div",{className:"min-h-screen bg-white",style:{fontFamily:y,color:f},children:[S&&k&&a.jsx("section",{className:"w-full min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-50 via-pink-100 to-purple-100 p-4 md:p-8",children:a.jsx("div",{className:`w-full mx-auto transition-all duration-300 ${"9:16"===c?"max-w-md aspect-[9/16]":"max-w-6xl aspect-[16/9]"}`,children:a.jsx(o.Z,{weddingId:k,className:"w-full h-full"})})}),b?.url&&a.jsx("section",{className:"w-full min-h-[50vh] md:min-h-[60vh] bg-black py-8 md:py-16 flex items-center justify-center",children:a.jsx(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-6xl mx-auto px-4 md:px-8",children:a.jsx("div",{className:"relative w-full aspect-[16/9] md:aspect-[21/9] overflow-hidden",children:a.jsx(i.Z,{src:b.url,alt:"Couple",maskUrl:N?.couple,maskData:w?.couple,aspectRatio:"custom",className:"w-full h-full object-cover"})})})}),v&&a.jsx("section",{className:"w-full min-h-[50vh] md:min-h-[60vh] bg-gradient-to-br from-gray-900 to-black py-8 md:py-16 flex items-center justify-center",children:a.jsx(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-6xl mx-auto px-4 md:px-8",children:a.jsx("div",{className:"aspect-video w-full bg-gray-900 rounded-lg overflow-hidden shadow-2xl",children:a.jsx("iframe",{src:v,className:"w-full h-full",allowFullScreen:!0,title:"Wedding Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})})})}),_?.logo_url&&a.jsx("section",{className:"w-full min-h-[40vh] md:min-h-[50vh] bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 py-12 md:py-20 flex items-center justify-center",children:a.jsx(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-5xl mx-auto px-4 md:px-8 text-center",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-8 md:p-16 shadow-2xl border border-white/20",children:[a.jsx("img",{src:_.logo_url,className:"h-20 md:h-32 mx-auto mb-6 filter drop-shadow-lg",alt:"Studio"}),a.jsx("h3",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold uppercase tracking-widest mb-4",children:"Stand Out With World-Class Video Production"}),a.jsx("p",{className:"text-white/90 text-sm md:text-base lg:text-lg font-light",children:"Your Story Deserves To Be Heard"})]})})}),j?.length>0&&a.jsx("section",{className:"w-full min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50 py-12 md:py-20",children:(0,a.jsxs)(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-7xl mx-auto px-4 md:px-8",children:[a.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12 md:mb-16",style:{color:f},children:"Precious Moments"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 lg:gap-10",children:j.map((e,s)=>a.jsx(l.E.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{delay:.1*s,duration:.5},className:"relative group",children:(0,a.jsxs)("div",{className:"bg-white p-3 md:p-4 shadow-xl rounded-sm hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",children:[a.jsx("div",{className:"aspect-square overflow-hidden bg-gray-100",children:a.jsx(i.Z,{src:e.url,maskUrl:N?.preciousMoments,maskData:w?.preciousMoments,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",aspectRatio:"1:1"})}),a.jsx("div",{className:"h-8 md:h-10 bg-white"})]})},s))})]})}),a.jsx("footer",{className:"w-full bg-gray-900 text-white py-8 text-center",children:a.jsx("p",{className:"text-sm md:text-base",children:"\xa9 2025 - Crafted with "})})]}):null}},38705:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var a=t(10326),r=t(17577),l=t(46084);let i=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));i.displayName="Input"},79349:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var a=t(10326),r=t(17577),l=t(29152),i=t(79360),o=t(46084);let n=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},t)=>a.jsx(l.f,{ref:t,className:(0,o.cn)(n(),e),...s}));d.displayName=l.f.displayName},240:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>x,Ph:()=>c,Ql:()=>g,i4:()=>m,ki:()=>u});var a=t(10326),r=t(17577),l=t(8845),i=t(941),o=t(96633),n=t(32933),d=t(46084);let c=l.fC;l.ZA;let u=l.B4,m=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.xz,{ref:r,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap bg-transparent px-0 py-0 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-0 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 [&>span]:border-none [&>span]:outline-none [&>span]:focus:border-none [&>span]:focus:outline-none [&>span]:focus:ring-0 [&>span]:focus:ring-offset-0 [&>span]:!border-0 [&>span]:!outline-none [&>span]:!ring-0",e),...t,children:[s,a.jsx(l.JO,{asChild:!0,children:a.jsx(i.Z,{className:"h-4 w-4 opacity-50 ml-1"})})]}));m.displayName=l.xz.displayName;let p=r.forwardRef(({className:e,...s},t)=>a.jsx(l.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(o.Z,{className:"h-4 w-4"})}));p.displayName=l.u_.displayName;let h=r.forwardRef(({className:e,...s},t)=>a.jsx(l.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(i.Z,{className:"h-4 w-4"})}));h.displayName=l.$G.displayName;let x=r.forwardRef(({className:e,children:s,position:t="popper",...r},i)=>a.jsx(l.h_,{children:(0,a.jsxs)(l.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(p,{}),a.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(h,{})]})}));x.displayName=l.VY.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",e),...s})).displayName=l.__.displayName;let g=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none border-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>span]:border-none [&>span]:outline-none [&>span]:!border-0 [&>span]:!outline-none",e),...t,children:[a.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(l.wU,{children:a.jsx(n.Z,{className:"h-4 w-4"})})}),a.jsx(l.eT,{children:s})]}));g.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},6917:(e,s,t)=>{"use strict";t.d(s,{SP:()=>d,dr:()=>n,mQ:()=>o,nU:()=>c});var a=t(10326),r=t(17577),l=t(28407),i=t(46084);let o=l.fC,n=r.forwardRef(({className:e,...s},t)=>a.jsx(l.aV,{ref:t,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...s}));n.displayName=l.aV.displayName;let d=r.forwardRef(({className:e,...s},t)=>a.jsx(l.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...s}));d.displayName=l.xz.displayName;let c=r.forwardRef(({className:e,...s},t)=>a.jsx(l.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));c.displayName=l.VY.displayName},15361:(e,s,t)=>{"use strict";function a(e){if(!e||"string"!=typeof e)return null;let s=(e=e.trim()).match(/(?:youtube\.com\/watch\?v=|youtube\.com\/watch\?.*&v=)([a-zA-Z0-9_-]{11})/);if(s)return s[1];let t=e.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/);if(t)return t[1];let a=e.match(/youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/);if(a)return a[1];let r=e.match(/youtube\.com\/v\/([a-zA-Z0-9_-]{11})/);return r?r[1]:null}function r(e,s={}){let t=a(e);if(!t)return null;let{autoplay:r=0,mute:l=0,controls:i=1,modestbranding:o=1,rel:n=0}=s,d=new URLSearchParams({autoplay:r.toString(),mute:l.toString(),controls:i.toString(),modestbranding:o.toString(),rel:n.toString()});return`https://www.youtube.com/embed/${t}?${d.toString()}`}function l(e){return null!==a(e)}t.d(s,{Tc:()=>r,yk:()=>l})},59734:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},99598:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]])},88378:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},63685:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},76044:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var a=t(68570);let r=(0,a.createProxy)(String.raw`/app/frontend/app/weddings/manage/[id]/page.js`),{__esModule:l,$$typeof:i}=r;r.default;let o=(0,a.createProxy)(String.raw`/app/frontend/app/weddings/manage/[id]/page.js#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,168,434,2106,1961,6451,8907,7882,730,2611,4334,1422,5209,4342,6565,4372,1973,3023,4620,3722,5807,5459,3428,9357,1087],()=>t(15910));module.exports=a})();