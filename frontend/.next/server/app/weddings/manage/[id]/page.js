(()=>{var e={};e.id=1624,e.ids=[1624,4839],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},15910:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(76044),t(73603),t(35866);var a=t(23191),r=t(88716),l=t(37922),i=t.n(l),o=t(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(s,n);let d=["",{children:["weddings",{children:["manage",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,76044)),"/app/frontend/app/weddings/manage/[id]/page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,73603)),"/app/frontend/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/frontend/app/weddings/manage/[id]/page.js"],u="/weddings/manage/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/weddings/manage/[id]/page",pathname:"/weddings/manage/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},90816:(e,s,t)=>{Promise.resolve().then(t.bind(t,35778))},35778:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>sK});var a=t(10326),r=t(17577),l=t.n(r),i=t(88646),o=t(18729),n=t(50560),d=t(6917),c=t(20835),u=t(6952),m=t(97134),p=t(77506),h=t(86333),x=t(49758),g=t(9015),f=t(7027),y=t(26092),j=t(56562),b=t(1572),v=t(71709),N=t(88378),_=t(12714),w=t(30361),k=t(43810),S=t(67427),C=t(37358),Z=t(77636),P=t(90434),M=t(35047),B=t(85999),z=t(89420),q=t(74990),A=t(79349),O=t(92454),R=t(32316),$=t(94019),T=t(41291);function U({weddingId:e,onUploadComplete:s}){let[t,l]=(0,r.useState)(!1),[i,d]=(0,r.useState)(0),[c,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(""),[f,y]=(0,r.useState)(null),[j,b]=(0,r.useState)(null),[N,_]=(0,r.useState)({uploaded:0,total:0,failed:[]}),[w,k]=(0,r.useState)("general"),S=(0,r.useRef)(null),C=e=>{if(e<=209715200)return{chunkSize:e,totalChunks:1};let s=Math.ceil(e/209715200);return{chunkSize:Math.ceil(e/(s=Math.max(8,Math.min(15,s)))),totalChunks:s}},Z=e=>{let s=e.target.files?.[0];if(!s)return;if(!s.type.startsWith("image/")&&!s.type.startsWith("video/")){B.toast.error("Please select an image or video file");return}if(s.size>10737418240){B.toast.error("File size must be less than 10GB");return}u(s),b(s.type.startsWith("image/")?"photo":"video");let t=new FileReader;t.onload=e=>{y(e.target.result)},t.readAsDataURL(s);let{chunkSize:a,totalChunks:r}=C(s.size);r>1&&B.toast.info(`Large file detected! Will upload in ${r} chunks (${(a/1024/1024).toFixed(0)}MB each)`)},P=async(e,s,t,a=0)=>{try{let a=new FormData;return a.append("upload_id",e),a.append("chunk_index",s),a.append("chunk",t,`chunk_${s}`),await z.default.post("/api/media/upload/chunk",a,{headers:{"Content-Type":"multipart/form-data"}}),{success:!0,chunkIndex:s}}catch(r){if(console.error(`Chunk ${s} upload failed:`,r),a<3)return console.log(`Retrying chunk ${s} (attempt ${a+1}/3)`),await new Promise(e=>setTimeout(e,1e3*(a+1))),P(e,s,t,a+1);return{success:!1,chunkIndex:s,error:r}}},M=async(e,s)=>{let t=[],a=[];for(let r=0;r<s.length;r+=5){let l=s.slice(r,r+5).map(({index:s,blob:t})=>P(e,s,t));(await Promise.all(l)).forEach(e=>{e.success?(t.push(e.chunkIndex),_(e=>({...e,uploaded:e.uploaded+1})),d(Math.round(t.length/s.length*95))):(a.push(e.chunkIndex),_(s=>({...s,failed:[...s.failed,e.chunkIndex]})))})}return{results:t,failed:a}},q=async()=>{if(!c){B.toast.error("Please select a file to upload");return}l(!0),d(0),_({uploaded:0,total:0,failed:[]});try{let{chunkSize:t,totalChunks:a}=C(c.size);if(1===a){let t=new FormData;t.append("file",c),t.append("wedding_id",e),t.append("caption",h),t.append("category",w);let a="photo"===j?"/api/media/upload/photo":"/api/media/upload/video",r=await z.default.post(a,t,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5,onUploadProgress:e=>{let s=Math.round(100*e.loaded/e.total);d(s)}});B.toast.success(`${"photo"===j?"Photo":"Video"} uploaded successfully!`),U(),s&&s(r.data);return}_({uploaded:0,total:a,failed:[]});let r=(await z.default.post("/api/media/upload/init",{wedding_id:e,filename:c.name,total_size:c.size,total_chunks:a,media_type:j,caption:h,category:w})).data.upload_id;B.toast.info(`Starting chunked upload: ${a} chunks`);let l=[];for(let e=0;e<a;e++){let s=e*t,a=Math.min(s+t,c.size),r=c.slice(s,a);l.push({index:e,blob:r})}d(5);let{results:i,failed:o}=await M(r,l);if(o.length>0)throw Error(`Failed to upload ${o.length} chunks: ${o.join(", ")}`);d(95);let n=new FormData;n.append("upload_id",r);let u=await z.default.post("/api/media/upload/complete",n,{headers:{"Content-Type":"multipart/form-data"}});d(100),B.toast.success(`${"photo"===j?"Photo":"Video"} uploaded successfully! (${a} chunks)`),U(),s&&s(u.data)}catch(s){console.error("Upload error:",s);let e=s.response?.data?.detail||s.message||"Failed to upload media";B.toast.error(e),s.response?.status===403&&B.toast.error("Storage limit reached. Please upgrade your plan.",{duration:5e3})}finally{l(!1)}},U=()=>{u(null),g(""),y(null),b(null),k("general"),d(0),_({uploaded:0,total:0,failed:[]}),S.current&&(S.current.value="")};return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center",children:[a.jsx(v.Z,{className:"w-5 h-5 mr-2"}),"Upload Media"]}),a.jsx(n.SZ,{children:"Add photos and videos to your wedding gallery (up to 10GB per file)"})]}),a.jsx(n.aY,{className:"space-y-4",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative rounded-lg overflow-hidden bg-gray-100",children:["photo"===j?a.jsx("img",{src:f,alt:"Preview",className:"w-full h-64 object-cover"}):a.jsx("div",{className:"relative w-full h-64",children:a.jsx("video",{src:f,className:"w-full h-full object-cover",controls:!0})}),!t&&a.jsx("button",{onClick:U,className:"absolute top-2 right-2 bg-black/60 hover:bg-black/80 text-white rounded-full p-2 transition-colors",children:a.jsx($.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"flex items-center",children:["photo"===j?a.jsx(v.Z,{className:"w-4 h-4 mr-2"}):a.jsx(x.Z,{className:"w-4 h-4 mr-2"}),c.name]}),(0,a.jsxs)("span",{children:[(c.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{htmlFor:"caption",children:"Caption (optional)"}),a.jsx(O.g,{id:"caption",value:h,onChange:e=>g(e.target.value),placeholder:"Add a caption to your media...",disabled:t,rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{htmlFor:"category",children:"Photo Category"}),(0,a.jsxs)("select",{id:"category",value:w,onChange:e=>k(e.target.value),disabled:t,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",children:[a.jsx("option",{value:"general",children:"General Gallery"}),a.jsx("option",{value:"couple",children:"Couple Photo"}),a.jsx("option",{value:"bride",children:"Bride Photo"}),a.jsx("option",{value:"groom",children:"Groom Photo"}),a.jsx("option",{value:"moment",children:"Precious Moment"}),a.jsx("option",{value:"cover",children:"Cover Photo"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Select a category to automatically use this photo in your wedding theme"})]}),t&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:N.total>1?`Uploading chunks... ${N.uploaded}/${N.total}`:"Uploading..."}),(0,a.jsxs)("span",{className:"font-semibold text-rose-600",children:[i,"%"]})]}),a.jsx(R.E,{value:i,className:"h-2"}),N.failed.length>0&&(0,a.jsxs)(m.bZ,{className:"border-yellow-500 bg-yellow-50",children:[a.jsx(T.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsxs)(m.X,{className:"text-yellow-800",children:["Retrying failed chunks: ",N.failed.join(", ")]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(o.z,{onClick:q,disabled:t,className:"flex-1 bg-gradient-to-r from-rose-500 to-purple-600 text-white hover:from-rose-600 hover:to-purple-700",children:t?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"Upload ","photo"===j?"Photo":"Video"]})}),!t&&a.jsx(o.z,{variant:"outline",onClick:U,children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-rose-500 transition-colors",onClick:()=>S.current?.click(),onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();let s=e.dataTransfer.files;s&&s[0]&&Z({target:{files:[s[0]]}})},children:[a.jsx("input",{ref:S,type:"file",accept:"image/*,video/*",onChange:Z,className:"hidden"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center",children:a.jsx(v.Z,{className:"w-8 h-8 text-rose-500"})}),a.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(x.Z,{className:"w-8 h-8 text-purple-500"})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Drop files here or click to browse"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Supports images and videos up to 10GB"}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Large files (over 200MB) will be uploaded in chunks for reliability"})]}),a.jsx(o.z,{type:"button",variant:"outline",onClick:e=>{e.stopPropagation(),S.current?.click()},children:"Select Files"})]})]}),(0,a.jsxs)(m.bZ,{children:[a.jsx(T.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{className:"text-sm",children:[a.jsx("strong",{children:"Tip:"})," Upload high-quality photos and videos to preserve precious memories. Supported formats: JPG, PNG, MP4, MOV"]})]})]})})]})}var E=t(13516),F=t(33019),D=t(26848),L=t(51896),I=t(83855),V=t(98091),Y=t(18184),G=t(38705);function W({weddingId:e,isPremium:s,rtmpUrl:t}){let[l,i]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[f,j]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1),N=async()=>{try{u(!0);let s=await z.default.get(`/api/streams/${e}/cameras`);i(s.data||[])}catch(e){console.error("Error loading cameras:",e)}finally{u(!1)}},_=async()=>{if(!f.trim()){B.toast.error("Please enter a camera name");return}try{v(!0),await z.default.post("/api/streams/camera/add",{wedding_id:e,camera_name:f}),B.toast.success("Camera added successfully!"),j(""),g(!1),N()}catch(e){console.error("Error adding camera:",e),B.toast.error(e.response?.data?.detail||"Failed to add camera")}finally{v(!1)}},w=async s=>{if(confirm("Are you sure you want to remove this camera?"))try{await z.default.delete(`/api/streams/camera/${e}/${s}`),B.toast.success("Camera removed"),N()}catch(e){console.error("Error removing camera:",e),B.toast.error("Failed to remove camera")}},S=(e,s)=>{navigator.clipboard.writeText(e),B.toast.success(`${s} copied!`)},C=e=>{let s={waiting:{variant:"secondary",label:"Waiting"},connected:{variant:"default",label:"Connected",className:"bg-green-500"},disconnected:{variant:"destructive",label:"Disconnected"}},t=s[e]||s.waiting;return a.jsx(c.C,{variant:t.variant,className:t.className,children:t.label})};return s?(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(L.Z,{className:"w-5 h-5"}),"Multi-Camera Sources"]}),a.jsx(n.SZ,{children:"Manage multiple camera streams for your wedding"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)(Y.Vq,{open:h,onOpenChange:g,children:[a.jsx(Y.hg,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"outline",className:"w-full",children:[a.jsx(I.Z,{className:"w-4 h-4 mr-2"}),"Add Camera Source"]})}),(0,a.jsxs)(Y.cZ,{children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Add Camera Source"}),a.jsx(Y.Be,{children:"Add a new camera stream for multi-angle coverage"})]}),a.jsx("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{htmlFor:"camera-name",children:"Camera Name"}),a.jsx(G.I,{id:"camera-name",placeholder:"e.g., Sony A7S III, iPhone Camera, Drone View",value:f,onChange:e=>j(e.target.value),onKeyDown:e=>"Enter"===e.key&&_()})]})}),a.jsx(Y.cN,{children:a.jsx(o.z,{onClick:_,disabled:b||!f.trim(),children:b?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"})," Adding..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(I.Z,{className:"w-4 h-4 mr-2"})," Add Camera"]})})})]})]}),d?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(p.Z,{className:"w-6 h-6 animate-spin text-gray-400"})}):0===l.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(x.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No additional cameras added yet"}),a.jsx("p",{className:"text-xs mt-1",children:'Click "Add Camera Source" to get started'})]}):a.jsx("div",{className:"space-y-3",children:l.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-3 hover:border-rose-200 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(x.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Added ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[C(e.status),a.jsx(o.z,{variant:"ghost",size:"sm",onClick:()=>w(e.camera_id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:a.jsx(V.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-medium text-gray-500",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"password",value:e.stream_key,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-xs"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>S(e.stream_key,"Stream Key"),children:a.jsx(k.Z,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[a.jsx("strong",{children:"Server:"})," ",t||"rtmp://live.wedlive.app/live"]})})]},e.camera_id))}),l.length>0&&(0,a.jsxs)(m.bZ,{children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-xs",children:"Each camera uses its own stream key. Configure OBS Studio or your streaming software with the corresponding stream key for each camera."})]})]})]}):(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(L.Z,{className:"w-5 h-5"}),"Multi-Camera Support",(0,a.jsxs)(c.C,{className:"ml-2 bg-gradient-to-r from-yellow-500 to-orange-500",children:[a.jsx(y.Z,{className:"w-3 h-3 mr-1"}),"Premium"]})]}),a.jsx(n.SZ,{children:"Stream from multiple camera angles simultaneously"})]}),a.jsx(n.aY,{children:(0,a.jsxs)(m.bZ,{children:[a.jsx(y.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{children:["Multi-camera support is available for Premium subscribers only.",a.jsx(P.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade to Premium"})]})]})})]})}var K=t(941),H=t(39183),X=t(28932),Q=t(65983),J=t(55002),ee=t(47492),es=t(99598),et=t(85206),ea=t(24230);let er=e=>{if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["B","KB","MB","GB"][s]};function el({weddingId:e,onFolderSelect:s}){let[t,i]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(new Set),[p,h]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1),[N,_]=(0,r.useState)({name:"",description:"",parentFolderId:null}),[w,k]=(0,r.useState)(null),[S,C]=(0,r.useState)(null),Z=async()=>{try{c(!0);let s=await z.default.get(`/api/folders/wedding/${e}`);i(s.data||[])}catch(e){console.error("Error loading folders:",e),B.toast.error("Failed to load folders")}finally{c(!1)}},P=e=>{let s=new Set(u);s.has(e)?s.delete(e):s.add(e),m(s)},M=async()=>{if(!N.name.trim()){B.toast.error("Folder name is required");return}try{c(!0),await z.default.post("/api/folders/create",{wedding_id:e,name:N.name,parent_folder_id:N.parentFolderId,description:N.description}),B.toast.success("Folder created successfully!"),g(!1),_({name:"",description:"",parentFolderId:null}),Z()}catch(e){console.error("Error creating folder:",e),B.toast.error(e.response?.data?.detail||"Failed to create folder")}finally{c(!1)}},q=async()=>{if(!N.name.trim()){B.toast.error("Folder name is required");return}try{c(!0),await z.default.put(`/api/folders/${w.id}`,{name:N.name,description:N.description}),B.toast.success("Folder updated successfully!"),y(!1),k(null),_({name:"",description:"",parentFolderId:null}),Z()}catch(e){console.error("Error updating folder:",e),B.toast.error(e.response?.data?.detail||"Failed to update folder")}finally{c(!1)}},A=async e=>{let s=e.media_count>0||e.subfolder_count>0?`Are you sure you want to delete "${e.name}"? All content will be moved to ${e.parent_folder_id?"its parent folder":"root"}.`:`Are you sure you want to delete "${e.name}"?`;if(window.confirm(s))try{c(!0),await z.default.delete(`/api/folders/${e.id}`),B.toast.success("Folder deleted successfully"),Z()}catch(e){console.error("Error deleting folder:",e),B.toast.error(e.response?.data?.detail||"Failed to delete folder")}finally{c(!1)}},R=async()=>{if(w)try{c(!0),await z.default.post("/api/folders/move",{folder_id:w.id,new_parent_id:S}),B.toast.success("Folder moved successfully!"),b(!1),k(null),C(null),Z()}catch(e){console.error("Error moving folder:",e),B.toast.error(e.response?.data?.detail||"Failed to move folder")}finally{c(!1)}},$=(e=null)=>{_({name:"",description:"",parentFolderId:e}),g(!0)},T=e=>{k(e),_({name:e.name,description:e.description||"",parentFolderId:e.parent_folder_id}),y(!0)},U=e=>{k(e),C(null),b(!0)},E=(e,t=0)=>e.map(e=>{let r=u.has(e.id),l=e.children&&e.children.length>0;return(0,a.jsxs)("div",{children:[a.jsx("div",{className:`flex items-center justify-between p-3 rounded-lg hover:bg-gray-100 transition-colors group ${p===e.id?"bg-blue-50 border-2 border-blue-300":"border-2 border-transparent"}`,style:{paddingLeft:`${24*t+12}px`},children:(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[l?a.jsx("button",{onClick:()=>P(e.id),className:"p-1 hover:bg-gray-200 rounded",children:r?a.jsx(K.Z,{className:"w-4 h-4 text-gray-600"}):a.jsx(H.Z,{className:"w-4 h-4 text-gray-600"})}):a.jsx("div",{className:"w-6"}),(0,a.jsxs)("button",{onClick:()=>{h(e.id),s&&s(e.id)},className:"flex items-center gap-2 flex-1 text-left",children:[r?a.jsx(X.Z,{className:"w-5 h-5 text-yellow-500"}):a.jsx(Q.Z,{className:"w-5 h-5 text-blue-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(v.Z,{className:"w-3 h-3"}),e.media_count]}),e.subfolder_count>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(Q.Z,{className:"w-3 h-3"}),e.subfolder_count]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(J.Z,{className:"w-3 h-3"}),er(e.folder_size)]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>$(e.id),title:"Create subfolder",children:a.jsx(ee.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>U(e),title:"Move folder",children:a.jsx(es.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>T(e),title:"Edit folder",children:a.jsx(et.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"ghost",onClick:()=>A(e),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete folder",children:a.jsx(V.Z,{className:"w-4 h-4"})})]})]})}),r&&l&&a.jsx("div",{className:"mt-1",children:E(e.children,t+1)})]},e.id)}),F=(e,s=0,t=null)=>e.filter(e=>e.id!==t).map(e=>w&&D(e.id,w.id)?null:(0,a.jsxs)(l().Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>C(e.id),className:`w-full text-left p-2 rounded hover:bg-gray-100 flex items-center gap-2 ${S===e.id?"bg-blue-50 border-2 border-blue-300":""}`,style:{paddingLeft:`${16*s+8}px`},children:[a.jsx(Q.Z,{className:"w-4 h-4 text-blue-500"}),a.jsx("span",{className:"text-sm",children:e.name})]}),e.children&&e.children.length>0&&F(e.children,s+1,t)]},e.id)),D=(e,s)=>{let a=t.find(s=>s.id===e);return!!a&&!!a.parent_folder_id&&(a.parent_folder_id===s||D(a.parent_folder_id,s))},L=(e=>{let s={},t=[];return e.forEach(e=>{s[e.id]={...e,children:[]}}),e.forEach(e=>{e.parent_folder_id&&s[e.parent_folder_id]?s[e.parent_folder_id].children.push(s[e.id]):t.push(s[e.id])}),t})(t),I=t.reduce((e,s)=>e+s.media_count,0),W=t.reduce((e,s)=>e+s.folder_size,0);return(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(Q.Z,{className:"w-5 h-5"}),"Media Folders"]}),a.jsx(n.SZ,{className:"mt-1",children:"Organize your wedding media into nested folders"}),t.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:[t.length," folders"]}),(0,a.jsxs)("span",{children:[I," items"]}),(0,a.jsxs)("span",{children:[er(W)," total"]})]})]}),(0,a.jsxs)(o.z,{onClick:()=>$(),disabled:d,size:"sm",children:[a.jsx(ee.Z,{className:"w-4 h-4 mr-2"}),"New Folder"]})]})}),(0,a.jsxs)(n.aY,{children:[d&&0===t.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"Loading folders..."})}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Q.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm font-medium",children:"No folders yet"}),a.jsx("p",{className:"text-xs mt-1",children:"Create folders to organize your media"})]}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>{h(null),s&&s(null)},className:`w-full flex items-center justify-between p-3 rounded-lg transition-all ${null===p?"bg-gradient-to-r from-pink-100 to-purple-100 border-2 border-pink-300":"bg-gradient-to-r from-pink-50 to-purple-50 hover:from-pink-100 hover:to-purple-100 border-2 border-transparent"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:a.jsx(v.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold",children:"All Media"}),a.jsx("p",{className:"text-xs text-gray-600",children:"View all photos and videos"})]})]}),a.jsx(ea.Z,{className:"w-5 h-5 text-gray-400"})]}),a.jsx("div",{className:"mt-2 border-t pt-2",children:E(L)})]}),a.jsx(Y.Vq,{open:x,onOpenChange:g,children:(0,a.jsxs)(Y.cZ,{children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Create New Folder"}),a.jsx(Y.Be,{children:N.parentFolderId?"Create a subfolder inside the selected folder":"Create a new root folder to organize media"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Folder Name *"}),a.jsx(G.I,{value:N.name,onChange:e=>_({...N,name:e.target.value}),placeholder:"e.g., Ceremony, Reception, Portraits",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Description (Optional)"}),a.jsx(O.g,{value:N.description,onChange:e=>_({...N,description:e.target.value}),placeholder:"Add a description for this folder...",rows:3,className:"mt-1"})]})]}),(0,a.jsxs)(Y.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>{g(!1),_({name:"",description:"",parentFolderId:null})},children:"Cancel"}),a.jsx(o.z,{onClick:M,disabled:d,children:d?"Creating...":"Create Folder"})]})]})}),a.jsx(Y.Vq,{open:f,onOpenChange:y,children:(0,a.jsxs)(Y.cZ,{children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Edit Folder"}),a.jsx(Y.Be,{children:"Update folder name and description"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Folder Name *"}),a.jsx(G.I,{value:N.name,onChange:e=>_({...N,name:e.target.value}),placeholder:"Folder name",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Description (Optional)"}),a.jsx(O.g,{value:N.description,onChange:e=>_({...N,description:e.target.value}),placeholder:"Add a description...",rows:3,className:"mt-1"})]})]}),(0,a.jsxs)(Y.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>{y(!1),k(null),_({name:"",description:"",parentFolderId:null})},children:"Cancel"}),a.jsx(o.z,{onClick:q,disabled:d,children:d?"Updating...":"Update Folder"})]})]})}),a.jsx(Y.Vq,{open:j,onOpenChange:b,children:(0,a.jsxs)(Y.cZ,{children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Move Folder"}),(0,a.jsxs)(Y.Be,{children:['Select a new parent folder or choose root to move "',w?.name,'"']})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("button",{onClick:()=>C(null),className:`w-full text-left p-2 rounded hover:bg-gray-100 flex items-center gap-2 ${null===S?"bg-blue-50 border-2 border-blue-300":""}`,children:[a.jsx(X.Z,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Root (No Parent)"})]}),F(L,0,w?.id)]}),(0,a.jsxs)(Y.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>{b(!1),k(null),C(null)},children:"Cancel"}),a.jsx(o.z,{onClick:R,disabled:d||S===w?.parent_folder_id,children:d?"Moving...":"Move Folder"})]})]})})]})]})}var ei=t(240),eo=t(62881);let en=(0,eo.Z)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var ed=t(94893);let ec=(0,eo.Z)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),eu=(0,eo.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var em=t(63685),ep=t(59734),eh=t(61358),ex=t(41476),eg=t(4291),ef=t(74839),ey=t(93023),ej=t(4620),eb=t(23428),ev=t(75807),eN=t(53722),e_=t(5459),ew=t(49357);let ek=JSON.parse('{"layout_id":"layout_1","name":"Vertical Wedding Invitation","description":"Single-column vertical layout with dynamic video template (9:16 or 16:9), couple photo with border, YouTube video, studio branding, and precious moments gallery. Fully mobile responsive.","version":"3.0","thumbnail":"/layout-previews/layout1.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Couple photo with decorative border (Section 2)","supports_border":true,"aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":12,"description":"Polaroid-style photo gallery (Section 5)","supports_border":true}},"videos":{"templateVideo":{"required":false,"description":"Dynamic template video with overlays (Section 1)","aspect_ratio":"dynamic","supports_overlays":true},"preWeddingVideo":{"required":false,"description":"YouTube video embed (Section 3)","embed_type":"youtube"}},"branding":{"studioDetails":{"required":false,"description":"Studio branding section (Section 4)","includes":["logo_url","tagline"]}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for couple photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery images"}}},"style_inputs":{"font":{"required":true,"default":"Playfair Display","description":"Primary font family"},"primaryColor":{"required":true,"default":"#1e3a8a","description":"Primary accent color"}},"layout_structure":{"sections":["template_video_section","couple_photo_section","youtube_video_section","studio_branding_section","precious_moments_gallery"],"orientation":"vertical","responsive":true,"dynamic_aspect_ratio":true}}'),eS=JSON.parse('{"layout_id":"layout_2","name":"Center Focus","description":"Large centered couple photo as hero with gallery below. Emphasizes the couple\'s unity.","version":"1.0","thumbnail":"/layout-previews/layout2.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main couple photo (hero image)","supports_border":true,"default_position":"center","aspect_ratio":"square"},"coverPhotos":{"required":false,"type":"array","max_count":5,"description":"Background carousel photos"},"preciousMoments":{"required":false,"type":"array","max_count":20,"description":"Gallery photos with precious moments","supports_border":true,"layout_style":["grid","carousel"]},"studioImage":{"required":false,"description":"Studio partner logo/photo","supports_border":false},"streamImage":{"required":false,"description":"Live stream thumbnail"}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":150,"description":"Welcome greeting text"},"description":{"required":false,"max_length":400,"description":"Love story or event description"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"},"studioLogo":{"required":false,"description":"Studio logo URL"},"studioContact":{"required":false,"description":"Studio contact information"}},"backgrounds":{"heroBackground":{"required":false,"description":"Hero section background image"},"liveBackground":{"required":false,"description":"Live streaming section background"}}},"style_inputs":{"font":{"required":true,"default":"Cormorant Garamond","description":"Primary font family"},"primaryColor":{"required":true,"default":"#3b82f6","description":"Primary brand color (hex)"},"secondaryColor":{"required":true,"default":"#8b5cf6","description":"Secondary accent color (hex)"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border style for gallery photos"}},"layout_structure":{"sections":["hero_center","couple_intro","event_details","precious_moments_gallery","live_stream","studio_details"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eC=JSON.parse('{"layout_id":"layout_3","name":"Horizontal Timeline","description":"Interactive horizontal scrolling journey on desktop, beautiful vertical timeline on mobile. Tells a chronological love story.","version":"2.0","thumbnail":"/layout-previews/layout3.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Hero photo at start of timeline","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":10,"description":"Photos scattered along the timeline","supports_border":true}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Opening tagline"},"description":{"required":false,"max_length":400,"description":"Love story narrative"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for hero photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for timeline photos"}}},"style_inputs":{"font":{"required":true,"default":"Lato","description":"Primary font family"},"primaryColor":{"required":true,"default":"#be185d","description":"Timeline connector color"}},"layout_structure":{"sections":["horizontal_scroll_container","hero_section","story_card","moments_scattered","event_details_card","media_cta"]}}'),eZ=JSON.parse('{"layout_id":"layout_4","name":"Modern Scrapbook","description":"A warm, personal layout designed like a handcrafted scrapbook. Features taped photos, handwritten fonts, stickers, and a textured paper feel.","version":"2.0","thumbnail":"/layout-previews/layout4.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main Polaroid Photo","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":12,"description":"Scattered polaroid photos","supports_border":true}},"videos":{"preWeddingVideo":{"required":false,"description":"Video tape style embed","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":60,"description":"Notebook header"},"description":{"required":false,"max_length":800,"description":"Handwritten note"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for main photo"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery photos"}}},"style_inputs":{"font":{"required":true,"default":"Indie Flower","description":"Handwriting font family"},"primaryColor":{"required":true,"default":"#44403c","description":"Ink color"}},"layout_structure":{"sections":["polaroid_hero","notebook_story","ticket_stubs_details","scattered_gallery","video_tape","footer"]}}'),eP=JSON.parse('{"layout_id":"layout_5","name":"Minimalist Card","description":"Ultra-clean card-based design with emphasis on negative space and elegant simplicity. Modern minimalist aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout5.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Main couple photo in card","supports_border":true,"default_position":"center","aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":9,"description":"Minimal gallery (3x3 grid)","supports_border":false,"layout_style":["grid"]},"studioImage":{"required":false,"description":"Studio logo minimal","supports_border":false}},"videos":{"preWeddingVideo":{"required":false,"description":"Video in clean card","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":80,"description":"Brief welcome text"},"description":{"required":false,"max_length":300,"description":"Short description only"}},"studio_info":{"studioName":{"required":false,"description":"Studio name"}},"backgrounds":{"heroBackground":{"required":false,"description":"Subtle background"}}},"style_inputs":{"font":{"required":true,"default":"Montserrat","description":"Clean modern font"},"primaryColor":{"required":true,"default":"#000000","description":"Primary color (typically black/dark)"},"secondaryColor":{"required":true,"default":"#737373","description":"Secondary gray tone"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"}},"layout_structure":{"sections":["hero_card","info_card","gallery_card","live_card","footer_card"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eM=JSON.parse('{"layout_id":"layout_6","name":"Romantic Overlay","description":"Full-screen couple photo with elegant text overlay, floating transparent cards, and dreamy romantic aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout6.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Full-screen background couple photo","supports_border":false,"default_position":"background","aspect_ratio":"landscape"},"bridePhoto":{"required":false,"description":"Bride photo (circular overlay)","supports_border":false,"aspect_ratio":"square"},"groomPhoto":{"required":false,"description":"Groom photo (circular overlay)","supports_border":false,"aspect_ratio":"square"},"preciousMoments":{"required":false,"type":"array","max_count":6,"description":"Floating card gallery (limited to 6)","supports_border":true,"layout_style":["grid"]}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Short, impactful romantic message"},"description":{"required":false,"max_length":300,"description":"Love story in floating card"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"},"studioContact":{"required":false,"description":"Studio contact information"}},"backgrounds":{"heroBackground":{"required":false,"description":"Alternative to couple photo as background"}}},"style_inputs":{"font":{"required":true,"default":"Pinyon Script","description":"Primary font family (script recommended)"},"primaryColor":{"required":true,"default":"#fbbf24","description":"Primary accent color (hex)"},"secondaryColor":{"required":true,"default":"#f59e0b","description":"Secondary accent color (hex)"}},"border_slots":{"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border style for gallery photos"}},"layout_structure":{"sections":["hero_fullscreen_overlay","description_card","precious_moments_floating","video_story","studio_details"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eB=JSON.parse('{"layout_id":"layout_7","name":"Editorial Grid","description":"Avant-garde broken grid layout. Asymmetrical image placement, sticky hero, brutalist typography, and museum-like aesthetic.","version":"2.0","thumbnail":"/layout-previews/layout7.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Sticky hero background image","supports_border":true,"aspect_ratio":"portrait"},"preciousMoments":{"required":false,"type":"array","max_count":8,"description":"Asymmetrical gallery images","supports_border":true}},"videos":{"preWeddingVideo":{"required":false,"description":"Full-width motion picture","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":30,"description":"Top corner label"},"description":{"required":false,"max_length":600,"description":"Exhibition note (main text)"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border for hero image"},"preciousMomentsBorder":{"applies_to":["preciousMoments"],"required":false,"description":"Border for gallery images"}}},"style_inputs":{"font":{"required":true,"default":"Space Grotesk","description":"Primary font family (Sans Serif recommended)"},"primaryColor":{"required":true,"default":"#000000","description":"Primary text color"}},"layout_structure":{"sections":["sticky_parallax_hero","exhibition_intro","asymmetrical_gallery","brutalist_details","cinema_video","footer"]}}'),ez=JSON.parse('{"layout_id":"layout_8","name":"Zen Minimalist","description":"Ultra-minimalist vertical flow with maximum white space, large impactful typography, and single-column layout focused on essential elements.","version":"2.0","thumbnail":"/layout-previews/layout8.jpg","supported_slots":{"photos":{"couplePhoto":{"required":true,"description":"Primary couple photo (full-width)","supports_border":true,"aspect_ratio":"landscape"},"preciousMoments":{"required":false,"type":"array","max_count":3,"description":"Three-column minimal gallery (limited to 3)","supports_border":false,"layout_style":["three-column"]}},"videos":{"preWeddingVideo":{"required":false,"description":"YouTube embed URL for pre-wedding video","embed_type":"youtube"}},"text_content":{"welcomeMessage":{"required":true,"max_length":50,"description":"Simple, elegant message"},"description":{"required":false,"max_length":300,"description":"Minimal love story"}},"studio_info":{"studioName":{"required":false,"description":"Photography studio name"}},"border_slots":{"coupleBorder":{"applies_to":["couplePhoto"],"required":false,"description":"Border style for couple photo"}}},"style_inputs":{"font":{"required":true,"default":"CINZEL","description":"Primary font family (serif recommended)"},"primaryColor":{"required":true,"default":"#18181b","description":"Primary text color (dark recommended)"},"secondaryColor":{"required":true,"default":"#71717a","description":"Secondary text color (gray recommended)"}},"layout_structure":{"sections":["hero_minimal","couple_photo_fullwidth","description_centered","event_details_vertical","precious_moments_three_column","video_story","studio_details_minimal"],"responsive_breakpoints":{"mobile":"640px","tablet":"768px","desktop":"1024px"}}}'),eq=(ef.default,ey.default,ej.default,eb.default,ev.default,eN.default,e_.default,ew.default,{layout_1:ek,layout_2:eS,layout_3:eC,layout_4:eZ,layout_5:eP,layout_6:eM,layout_7:eB,layout_8:ez}),eA={layout_1:{bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride's individual photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom's individual photo"},couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Gallery photos with precious moments"},studioImage:{name:"studioImage",required:!1,supports_border:!0,max_count:1,description:"Studio partner logo/photo"}},layout_2:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo (hero image)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Gallery photos"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio partner logo"}},layout_3:{bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride's individual photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom's individual photo"},couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!0,max_count:5,description:"Horizontal scrolling gallery"}},layout_4:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!0,max_count:1,description:"Main couple photo for magazine cover"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!1,max_count:1,description:"Bride feature photo"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!1,max_count:1,description:"Groom feature photo"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Gallery in magazine grid layout"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio logo for credits"}},layout_5:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Main couple photo in card"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Minimal gallery (3x3 grid max)"},studioImage:{name:"studioImage",required:!1,supports_border:!1,max_count:1,description:"Studio logo minimal"}},layout_6:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Full-screen background couple photo"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!1,max_count:1,description:"Bride photo (circular overlay)"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!1,max_count:1,description:"Groom photo (circular overlay)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Floating card gallery"}},layout_7:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Large feature photo in grid"},bridePhoto:{name:"bridePhoto",required:!1,supports_border:!0,max_count:1,description:"Bride photo in offset grid position"},groomPhoto:{name:"groomPhoto",required:!1,supports_border:!0,max_count:1,description:"Groom photo in offset grid position"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:5,description:"Staggered grid gallery"}},layout_8:{couplePhoto:{name:"couplePhoto",required:!0,supports_border:!1,max_count:1,description:"Primary couple photo (full-width)"},preciousMoments:{name:"preciousMoments",required:!1,supports_border:!1,max_count:3,description:"Three-column minimal gallery (max 3)"}}},eO={layout_1:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for bride/groom photos (shared, groom mirrored)"},coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"},studioBorder:{name:"studioBorder",applies_to:["studioImage"],description:"Border for studio image"}},layout_2:{coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"}},layout_3:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for individual photos"},coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for couple photo"},preciousMomentsBorder:{name:"preciousMomentsBorder",applies_to:["preciousMoments"],description:"Border for gallery photos"}},layout_4:{coupleBorder:{name:"coupleBorder",applies_to:["couplePhoto"],description:"Border for cover photo"}},layout_5:{},layout_6:{},layout_7:{brideGroomBorder:{name:"brideGroomBorder",applies_to:["bridePhoto","groomPhoto"],description:"Border for individual photos"}},layout_8:{}},eR={layout_1:{layout_id:"layout_1",name:"Classic Split Hero",description:"Side-by-side bride and groom photos with centered couple photo below",supports_youtube:!0,supports_studio_image:!0},layout_2:{layout_id:"layout_2",name:"Center Focus",description:"Large centered couple photo as hero with gallery below",supports_youtube:!0,supports_studio_image:!0},layout_3:{layout_id:"layout_3",name:"Horizontal Timeline",description:"Journey-style layout with bride and groom photos connected by timeline",supports_youtube:!0,supports_studio_image:!0},layout_4:{layout_id:"layout_4",name:"Magazine Style",description:"Editorial magazine-inspired layout with multi-column text and images",supports_youtube:!0,supports_studio_image:!0},layout_5:{layout_id:"layout_5",name:"Minimalist Card",description:"Ultra-clean card-based design with emphasis on negative space",supports_youtube:!0,supports_studio_image:!0},layout_6:{layout_id:"layout_6",name:"Romantic Overlay",description:"Full-screen couple photo with elegant text overlay and floating cards",supports_youtube:!0,supports_studio_image:!0},layout_7:{layout_id:"layout_7",name:"Editorial Grid",description:"Asymmetric grid layout inspired by editorial design with bold typography",supports_youtube:!0,supports_studio_image:!0},layout_8:{layout_id:"layout_8",name:"Zen Minimalist",description:"Ultra-minimalist vertical flow with maximum white space",supports_youtube:!0,supports_studio_image:!0}};function e$(e){let s=eA[e]||{},t=eO[e]||{},a=eR[e]||null,r=Object.keys(s).length,l=Object.keys(t).length,i=s.preciousMoments?.max_count||0;return{photoPlaceholderCount:r,borderSlotCount:l,hasBridePhoto:!!s.bridePhoto,hasGroomPhoto:!!s.groomPhoto,hasCouplePhoto:!!s.couplePhoto,hasPreciousMoments:!!s.preciousMoments,preciousMomentsMax:i,hasStudioImage:!!s.studioImage,supportsYouTube:a?.supports_youtube||!1,supportsBorders:l>0,layoutName:a?.name||e,layoutDescription:a?.description||""}}var eT=t(15361);function eU({weddingId:e,wedding:s}){let{updateFont:t}=(0,ex.j)(),{updateBorder:l}=(0,eg.P)(),[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),g=(0,r.useRef)({}),[f,y]=(0,r.useState)({}),[j,b]=(0,r.useState)(!1),[N,_]=(0,r.useState)(!1),[w,k]=(0,r.useState)({layout_page_background_id:null,stream_page_background_id:null}),[S,C]=(0,r.useState)([]),[Z,P]=(0,r.useState)([]),[M,q]=(0,r.useState)(!0),[R,U]=(0,r.useState)([]),[E,F]=(0,r.useState)(!1),[D,L]=(0,r.useState)("layout_1"),I=async()=>{try{let s=(await z.default.get(`/api/weddings/${e}/theme`)).data,t=s.layout_id||s.theme_id||"layout_1";L(t),h({layout_id:t,custom_font:s.custom_font||"Great Vibes",primary_color:s.primary_color||"#f43f5e",secondary_color:s.secondary_color||"#a855f7",pre_wedding_video:s.pre_wedding_video||"",studio_details:s.studio_details||{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:s.custom_messages||{welcome_text:"Welcome to our big day",description:""},theme_assets:s.theme_assets||{borders:{},background_image_id:null}})}catch(e){console.error("Error loading layout:",e),B.toast.error("Failed to load layout settings"),h({layout_id:"layout_1",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:{welcome_text:"Welcome to our big day",description:""},theme_assets:{borders:{},background_image_id:null}})}},V=e=>{let s=[];return Object.keys(e).forEach(t=>{let a=e[t];if(Array.isArray(a))a.forEach((e,a)=>{if(e){let r=e.retryCount>=e.maxRetries,l=e.file_id&&e.file_id.startsWith("file_")&&["8","12","13","14","52","53","54","55","56","57"].includes(e.file_id.replace("file_","").replace(".jpg","")),i=e.retryCount>0&&!e.url;(r||l||i)&&s.push({slotName:t,index:a,photo:e})}});else if(a){let e=a.retryCount>=a.maxRetries,r=a.file_id&&a.file_id.startsWith("file_")&&["8","12","13","14","52","53","54","55","56","57"].includes(a.file_id.replace("file_","").replace(".jpg","")),l=a.retryCount>0&&!a.url;(e||r||l)&&s.push({slotName:t,index:0,photo:a})}}),s},Y=async()=>{try{b(!0),_(!1);let s=(await z.default.get(`/api/weddings/${e}/layout-photos`)).data.photos||{},t=(0,eh.bR)();console.log("[LOAD_LAYOUT_PHOTOS] Received photos from API:",Object.keys(s)),Object.keys(s).forEach(e=>{let a=s[e];Array.isArray(a)?a.forEach((s,a)=>{s&&s.url&&(s.url.startsWith("/api/")?(s.url=`${t}${s.url}`,console.log(`[LOAD_LAYOUT_PHOTOS] ${e}[${a}]: Prepended base URL:`,s.url)):(s.url.startsWith("http://")||s.url.startsWith("https://"))&&console.log(`[LOAD_LAYOUT_PHOTOS] ${e}[${a}]: Keeping absolute URL:`,s.url),s.retryCount=0,s.maxRetries=eh.ZP.IMAGE.MAX_RETRIES||2)}):a&&a.url&&(a.url.startsWith("/api/")?(a.url=`${t}${a.url}`,console.log(`[LOAD_LAYOUT_PHOTOS] ${e}: Prepended base URL:`,a.url)):(a.url.startsWith("http://")||a.url.startsWith("https://"))&&console.log(`[LOAD_LAYOUT_PHOTOS] ${e}: Keeping absolute URL:`,a.url),a.retryCount=0,a.maxRetries=eh.ZP.IMAGE.MAX_RETRIES||2)}),y(s),console.log("[LOAD_LAYOUT_PHOTOS] Photos loaded successfully")}catch(e){console.error("[LOAD_LAYOUT_PHOTOS] Error loading layout photos:",e),y({}),("ERR_NETWORK"===e.code||e.message.includes("Network Error"))&&_(!0)}finally{b(!1)}},W=async()=>{try{console.log("[LOAD_BACKGROUNDS] Loading backgrounds for wedding:",e);let s=await z.default.get(`/api/weddings/${e}/backgrounds`);console.log("[LOAD_BACKGROUNDS] API Response:",s.data);let t={layout_page_background_id:s.data.layout_page_background_id||null,stream_page_background_id:s.data.stream_page_background_id||null,layout_page_background_url:s.data.layout_page_background_url||null,stream_page_background_url:s.data.stream_page_background_url||null};k(t),console.log("[LOAD_BACKGROUNDS] State updated:",t),console.log("[LOAD_BACKGROUNDS] Layout preview URL:",t.layout_page_background_url),console.log("[LOAD_BACKGROUNDS] Stream preview URL:",t.stream_page_background_url)}catch(e){console.error("[LOAD_BACKGROUNDS] Error:",e),console.error("[LOAD_BACKGROUNDS] Error details:",e.response?.data||e.message),k({layout_page_background_id:null,stream_page_background_id:null,layout_page_background_url:null,stream_page_background_url:null})}},K=async s=>{if(!(Object.keys(f).length>0)||window.confirm("You have existing photos. Changing the layout may affect how they are displayed. Continue?"))try{o(!0),L(s),await z.default.put(`/api/weddings/${e}/theme`,{layout_id:s}),B.toast.success("Layout changed successfully!"),I(),Y()}catch(e){console.error("Error changing layout:",e),B.toast.error("Failed to change layout")}finally{o(!1)}},H=async s=>{try{o(!0),await z.default.put(`/api/weddings/${e}/theme`,s),B.toast.success("Settings updated!"),I()}catch(e){console.error("Error updating layout:",e),B.toast.error("Failed to update settings")}finally{o(!1)}},X=async(s,t,a=0)=>{console.log("handlePhotoUpload called with:",{placeholder:s,fileName:t?.name,retryCount:a});try{if(c(!0),!t){console.error("No file selected"),B.toast.error("No file selected");return}if(t.size>10485760){B.toast.error(`File too large (${(t.size/1048576).toFixed(2)}MB). Maximum size is 10MB`);return}if(!t.type.startsWith("image/")){B.toast.error("Only image files are allowed");return}let a=new FormData;a.append("placeholder",s),a.append("file",t);let r=B.toast.loading(`Uploading photo to ${s}...`);await z.default.post(`/api/weddings/${e}/layout-photos/upload`,a,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5}),B.toast.dismiss(r),B.toast.success(`Photo uploaded to ${s}!`,{duration:3e3,icon:""}),Y()}catch(r){if(console.error("Error uploading photo:",r),("ECONNABORTED"===r.code||r.message.includes("timeout"))&&a<2){B.toast.warning(`Upload timeout. Retrying... (${a+1}/2)`),setTimeout(()=>X(s,t,a+1),2e3);return}let e="Failed to upload photo";if(r.response?.data?.detail){let s=r.response.data.detail;"string"==typeof s?e=s:"object"==typeof s&&s.error&&(e=s.error)}else r.message&&(e=r.message);B.toast.error(e,{duration:5e3,action:a<2?{label:"Retry",onClick:()=>X(s,t,a+1)}:void 0})}finally{c(!1)}},Q=async(s,t)=>{if(window.confirm("Are you sure you want to delete this photo?"))try{let a=B.toast.loading("Deleting photo...");await z.default.delete(`/api/weddings/${e}/layout-photos/${s}/${t}`),B.toast.dismiss(a),B.toast.success("Photo deleted!",{duration:2e3,icon:"\uD83D\uDDD1"}),Y()}catch(s){console.error("Error deleting photo:",s);let e="Failed to delete photo";if(s.response?.data?.detail){let t=s.response.data.detail;"string"==typeof t?e=t:"object"==typeof t&&t.error&&(e=t.error)}B.toast.error(e,{duration:4e3})}},J=async s=>{try{o(!0),console.log("[BACKGROUND_UPDATE] Updating backgrounds:",s),await z.default.put(`/api/weddings/${e}/backgrounds`,s),console.log("[BACKGROUND_UPDATE] Background update API call successful"),B.toast.success("Background updated! Refreshing...",{duration:2e3}),await new Promise(e=>setTimeout(e,500)),await W(),console.log("[BACKGROUND_UPDATE] Backgrounds reloaded"),setTimeout(()=>{console.log("[BACKGROUND_UPDATE] Forcing page reload to apply background changes"),window.location.reload()},1e3)}catch(e){console.error("[BACKGROUND_UPDATE] Error updating backgrounds:",e),B.toast.error(e.response?.data?.detail||"Failed to update backgrounds")}finally{o(!1)}},ee=u||{layout_id:"layout_1",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",studio_details:{studio_id:"",logo_url:"",studio_image_url:"",default_image_url:""},custom_messages:{welcome_text:"Welcome to our big day",description:""},theme_assets:{borders:{},background_image_id:null}},es=eR[D]||null,et=eA[D]||{},ea=eO[D]||{};if(e$(D),!u)return a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-rose-500"})});let er=Object.keys(eq).map(e=>({id:e,...eq[e]}));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(en,{className:"w-5 h-5"}),"Wedding Layout"]}),a.jsx(n.SZ,{children:"Choose a layout structure for your wedding page"})]}),a.jsx(n.aY,{className:"space-y-4",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:er.map(e=>{let s=e.layout_id===D,t=e$(e.layout_id);return(0,a.jsxs)("button",{"data-testid":`layout-card-${e.layout_id}`,onClick:()=>K(e.layout_id),disabled:i,className:`relative p-4 rounded-lg border-2 text-left transition-all group ${s?"border-rose-500 bg-rose-50":"border-gray-200 hover:border-rose-300"} ${i?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("div",{className:"mb-3 aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded overflow-hidden",children:e.thumbnail?a.jsx("img",{src:e.thumbnail,alt:e.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(en,{className:"w-12 h-12 text-gray-300"})})}),a.jsx("div",{className:"font-semibold text-sm",children:e.name}),a.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1",children:[t.supportsYouTube&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-100 text-red-700 text-[10px] rounded-full",children:[a.jsx(ed.Z,{className:"w-2.5 h-2.5"}),"YouTube"]}),t.supportsBorders&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-[10px] rounded-full",children:[a.jsx(ec,{className:"w-2.5 h-2.5"}),"Borders"]}),t.photoPlaceholderCount&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] rounded-full",children:[a.jsx(v.Z,{className:"w-2.5 h-2.5"}),t.photoPlaceholderCount," slots"]})]}),s&&a.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-rose-500 rounded-full flex items-center justify-center",children:a.jsx(eu,{className:"w-4 h-4 text-white"})}),a.jsx("div",{className:"absolute inset-0 bg-black/90 rounded-lg p-3 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:(0,a.jsxs)("div",{className:"text-white text-xs space-y-1",children:[a.jsx("p",{className:"font-semibold",children:t.layoutName}),a.jsx("p",{className:"text-gray-300 text-[10px]",children:t.layoutDescription}),(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-2 mt-2 space-y-1",children:[t.hasBridePhoto&&a.jsx("p",{children:" Bride photo"}),t.hasGroomPhoto&&a.jsx("p",{children:" Groom photo"}),t.hasCouplePhoto&&a.jsx("p",{children:" Couple photo"}),t.hasPreciousMoments&&(0,a.jsxs)("p",{children:[" Gallery (max ",t.preciousMomentsMax,")"]})]})]})})]},e.layout_id)})})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Welcome Message & Description"}),a.jsx(n.SZ,{children:"Customize the text content for your wedding page"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{children:"Welcome Message"}),a.jsx(G.I,{value:ee.custom_messages?.welcome_text||"",onChange:e=>H({custom_messages:{...ee.custom_messages,welcome_text:e.target.value}}),placeholder:"Welcome to our big day",disabled:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{children:"Description"}),a.jsx(O.g,{value:ee.custom_messages?.description||"",onChange:e=>H({custom_messages:{...ee.custom_messages,description:e.target.value}}),placeholder:"Share your love story...",rows:4,disabled:i})]})]})]}),es?.supports_youtube&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(ed.Z,{className:"w-5 h-5"}),"Pre-Wedding Video"]}),a.jsx(n.SZ,{children:"Add a YouTube video (supported by this layout)"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{children:"YouTube URL"}),a.jsx(G.I,{value:ee.pre_wedding_video||"",onChange:e=>{let s=e.target.value;H({pre_wedding_video:((0,eT.yk)(s)?(0,eT.Tc)(s):s)||s})},placeholder:"https://youtube.com/watch?v=... or https://youtu.be/...",disabled:i}),a.jsx("p",{className:"text-xs text-gray-500",children:"Supports: youtube.com/watch?v=, youtu.be/, and embed URLs"})]}),ee.pre_wedding_video&&(0,eT.yk)(ee.pre_wedding_video)&&a.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:a.jsx("iframe",{src:(0,eT.Tc)(ee.pre_wedding_video),title:"Pre-wedding video preview",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(v.Z,{className:"w-5 h-5"}),"Photos"]}),a.jsx(n.SZ,{children:"Upload photos based on your selected layout's placeholders"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[a.jsx("span",{className:"font-semibold",children:"Selected Layout:"})," ",es?.name]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:es?.description})]}),j?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading photos..."]}):(0,a.jsxs)(a.Fragment,{children:[(()=>{let e=V(f);return e.length>0?(0,a.jsxs)(m.bZ,{variant:"destructive",className:"mb-4",children:[a.jsx(T.Z,{className:"h-4 w-4"}),a.jsx(m.X,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Broken Photo References Detected:"})," ",e.length," photo(s) reference files that no longer exist on Telegram."]}),a.jsx("div",{className:"space-y-1",children:e.map(({slotName:e,index:s,photo:t})=>(0,a.jsxs)("div",{className:"text-xs flex items-center justify-between",children:[(0,a.jsxs)("span",{children:[e," ",s>0?`(${s+1})`:""]}),a.jsx("button",{onClick:()=>{window.confirm(`Clear broken photo from ${e}${s>0?` (${s+1})`:""}?`)&&Q(e,s)},className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Clear"})]},`${e}-${s}`))}),a.jsx("button",{onClick:()=>{window.confirm(`Clear all ${e.length} broken photo references?`)&&e.forEach(({slotName:e,index:s})=>{Q(e,s)})},className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 mt-2",children:"Clear All Broken Photos"})]})})]}):null})(),N&&(0,a.jsxs)(m.bZ,{variant:"destructive",className:"mb-4",children:[a.jsx(T.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{children:[a.jsx("strong",{children:"Photo Loading Issue:"})," Unable to load photos from server. This may be due to network connectivity or server issues. Photos will show as placeholders until the issue is resolved."]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(et).map(([e,s])=>{let t=f[e],r="preciousMoments"===e,l=r?t?.length||0:t?1:0,i=s.max_count,o=l<i,n="border-gray-300 bg-gray-50 text-gray-600";return e.includes("bride")?n="border-pink-300 bg-pink-50 text-pink-600":e.includes("groom")?n="border-blue-300 bg-blue-50 text-blue-600":e.includes("couple")?n="border-purple-300 bg-purple-50 text-purple-600":e.includes("precious")||e.includes("Moments")?n="border-green-300 bg-green-50 text-green-600":e.includes("studio")&&(n="border-amber-300 bg-amber-50 text-amber-600"),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:`aspect-square rounded-lg border-2 border-dashed ${n} hover:border-rose-500 hover:bg-rose-50 transition-colors cursor-pointer flex flex-col items-center justify-center gap-2 group`,children:[a.jsx("input",{type:"file",accept:"image/*",className:"hidden","data-testid":`upload-${e}`,multiple:r,ref:s=>{s&&(g.current[e]=s)},disabled:d,onChange:s=>{let t=Array.from(s.target.files||[]);if(!t.length){s.target.value="";return}if(r){if(l>=i){B.toast.error("Gallery is full. Delete a photo to add more."),s.target.value="";return}let a=i-l,r=t.slice(0,a);t.length>a&&B.toast.warning(`Only ${a} photo(s) can be added. Extra files were ignored.`),(async()=>{for(let s of r)console.log("File selected for upload:",s.name,"to slot:",e),await X(e,s)})()}else{let s=t[0];console.log("File selected for upload:",s.name,"to slot:",e),X(e,s)}s.target.value=""}}),d?a.jsx(p.Z,{className:"w-6 h-6 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(em.Z,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium text-center px-2",children:s.description.split(" ").slice(0,2).join(" ")}),s.required&&a.jsx("span",{className:"text-[10px] text-red-500 font-semibold",children:"Required"}),!o&&a.jsx("span",{className:"text-[10px] text-gray-500",children:r?"Full":"Replace"}),r&&(0,a.jsxs)("span",{className:"text-[10px] mt-0.5",children:[l,"/",i]})]})]}),t&&a.jsx("div",{className:"grid grid-cols-2 gap-1 cursor-pointer",onClick:()=>{if(d)return;let s=g.current[e];s&&s.click()},children:Array.isArray(t)?t.map((t,r)=>(0,a.jsxs)("div",{className:"relative group aspect-square","data-testid":`photo-${e}-${r}`,children:[a.jsx("img",{src:t.url||t,alt:s.description,className:"w-full h-full object-cover rounded border",onError:e=>{if(console.error("Photo failed to load:",t.url||t,e),t.fallbackUrl&&t.retryCount<t.maxRetries){console.log(`Retrying with fallback URL (attempt ${t.retryCount+1}/${t.maxRetries}):`,t.fallbackUrl),t.retryCount++,e.target.src=t.fallbackUrl;return}N||(_(!0),console.warn("Photo connectivity issue detected - showing user warning")),e.target.style.display="none",e.target.nextSibling.style.display="flex"},onLoad:e=>{console.log("Photo loaded successfully:",t.url||t),e.target.nextSibling.style.display="none"}}),a.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded border",style:{display:"none"},children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(v.Z,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),a.jsx("button",{onClick:s=>{s.stopPropagation();let a=t.photo_id||`photo-${r}`;console.log("Deleting photo:",{slotName:e,photoId:a,photo:t}),Q(e,a)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`delete-${e}-${r}`,children:a.jsx($.Z,{className:"w-3 h-3"})})]},t.photo_id||r)):(0,a.jsxs)("div",{className:"relative group aspect-square","data-testid":`photo-${e}`,children:[a.jsx("img",{src:t.url||t,alt:s.description,className:"w-full h-full object-cover rounded border",onError:e=>{if(console.error("Photo failed to load:",t.url||t,e),t.fallbackUrl&&t.retryCount<t.maxRetries){console.log(`Retrying with fallback URL (attempt ${t.retryCount+1}/${t.maxRetries}):`,t.fallbackUrl),t.retryCount++,e.target.src=t.fallbackUrl;return}N||(_(!0),console.warn("Photo connectivity issue detected - showing user warning")),e.target.style.display="none",e.target.nextSibling.style.display="flex"},onLoad:e=>{console.log("Photo loaded successfully:",t.url||t),e.target.nextSibling.style.display="none"}}),a.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded border",style:{display:"none"},children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(v.Z,{className:"w-4 h-4 text-gray-400 mx-auto mb-1"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),a.jsx("button",{onClick:s=>{s.stopPropagation(),Q(e,t.photo_id||"0")},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`delete-${e}`,children:a.jsx($.Z,{className:"w-3 h-3"})})]})})]},e)})}),(()=>{let e=function(e,s={}){let t=eA[e]||{},a=[];for(let[e,r]of Object.entries(t))r.required&&!s[e]&&a.push({name:e,description:r.description});return{isValid:0===a.length,missingRequired:a}}(D,f);return e.isValid?(0,a.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[a.jsx(eu,{className:"w-4 h-4 text-green-600"}),a.jsx("p",{className:"text-xs text-green-800 font-medium",children:"All required photos uploaded!"})]}):(0,a.jsxs)("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-2",children:[a.jsx(T.Z,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-xs text-amber-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Missing required photos:"}),a.jsx("ul",{className:"list-disc list-inside space-y-0.5",children:e.missingRequired.map(e=>a.jsx("li",{children:e.description},e.name))})]})]})})()]})]})]}),Object.keys(ea).length>0&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(ec,{className:"w-5 h-5"}),"Photo Borders"]}),a.jsx(n.SZ,{children:"Customize borders for photos (based on layout support)"})]}),a.jsx(n.aY,{className:"space-y-4",children:M?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading borders..."]}):0===S.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[a.jsx("p",{className:"text-sm text-amber-800",children:"No borders available"}),a.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload borders first"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(ea).map(([e,s])=>{let t=null;"brideGroomBorder"===e?t="bride_groom_border_id":"coupleBorder"===e?t="couple_border_id":"preciousMomentsBorder"===e?t="precious_moments_border_id":"studioBorder"===e&&(t="studio_border_id");let r=ee.theme_assets?.borders?.[t],i=S.find(e=>e.id===r);return(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-lg border",children:[(0,a.jsxs)(A._,{className:"text-xs font-medium flex items-center justify-between",children:[a.jsx("span",{children:s.description}),"brideGroomBorder"===e&&a.jsx("span",{className:"text-[10px] text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full",children:"Groom mirrored"})]}),(0,a.jsxs)(ei.Ph,{value:r||"none",onValueChange:e=>{H({theme_assets:{...ee.theme_assets,borders:{...ee.theme_assets?.borders,[t]:"none"===e?null:e}}}),l(t,"none"===e?null:e)},children:[a.jsx(ei.i4,{className:"text-xs bg-white","data-testid":`border-selector-${e}`,children:a.jsx(ei.ki,{placeholder:"Select border"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),S.filter(s=>"brideGroomBorder"===e||("coupleBorder"===e?s.tags?.includes("couple")||!s.tags?.includes("individual"):"preciousMomentsBorder"===e?s.tags?.includes("gallery")||!s.tags?.includes("individual"):"studioBorder"!==e||s.tags?.includes("minimal")||s.tags?.includes("studio"))).map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-8 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name}),e.tags&&e.tags.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tags.join(", "),")"]})]})},e.id))]})]}),i?.cdn_url&&a.jsx("div",{className:"mt-2 p-2 bg-white rounded border",children:a.jsx("img",{src:i.cdn_url,alt:"Preview",className:"w-full h-20 object-contain"})})]},e)})})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Stream Border"]}),a.jsx(n.SZ,{children:"Add a decorative border around the video player during live stream"})]}),a.jsx(n.aY,{className:"space-y-4",children:M?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading borders..."]}):0===S.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[a.jsx("p",{className:"text-sm text-amber-800",children:"No borders available"}),a.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload borders first"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{className:"text-sm font-medium",children:"Border for Video Player"}),(0,a.jsxs)(ei.Ph,{value:ee.theme_assets?.borders?.stream_border_id||"none",onValueChange:e=>{H({theme_assets:{...ee.theme_assets,borders:{...ee.theme_assets?.borders,stream_border_id:"none"===e?null:e}}})},children:[a.jsx(ei.i4,{className:"text-xs bg-white","data-testid":"border-selector-stream",children:a.jsx(ei.ki,{placeholder:"Select border for stream"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),S.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-8 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name}),e.tags&&e.tags.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tags.join(", "),")"]})]})},e.id))]})]}),(()=>{let e=ee.theme_assets?.borders?.stream_border_id,s=S.find(s=>s.id===e);return s?.cdn_url?(0,a.jsxs)("div",{className:"mt-2 p-2 bg-white rounded border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),a.jsx("img",{src:s.cdn_url,alt:"Stream Border Preview",className:"w-full h-20 object-contain"})]}):null})(),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This border will appear around the video player during live streaming"})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(v.Z,{className:"w-5 h-5"}),"Background Images"]}),a.jsx(n.SZ,{children:"Set separate backgrounds for layout page and stream page"})]}),a.jsx(n.aY,{className:"space-y-4",children:M?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading backgrounds..."]}):0===Z.length?(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-center",children:[a.jsx("p",{className:"text-sm text-amber-800",children:"No backgrounds available"}),a.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Admin needs to upload backgrounds first"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{className:"text-sm font-semibold",children:"Layout Page Background"}),(0,a.jsxs)(ei.Ph,{value:w.layout_page_background_id||"none",onValueChange:e=>{J({layout_page_background_id:"none"===e?null:e})},children:[a.jsx(ei.i4,{className:"bg-white","data-testid":"layout-background-selector",children:a.jsx(ei.ki,{placeholder:"Select background for layout page"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),Z.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-12 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name})]})},e.id))]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[w.layout_page_background_id&&!w.layout_page_background_url&&a.jsx("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-700",children:"Background selected but URL not loaded. Check console for details."}),w.layout_page_background_url&&(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),a.jsx("img",{src:w.layout_page_background_url,alt:"Layout Background",className:"w-full h-32 object-cover rounded",onError:e=>{console.error("[BACKGROUND_IMAGE_ERROR] Failed to load:",w.layout_page_background_url),e.target.style.display="none"}}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1 break-all",children:["URL: ",w.layout_page_background_url]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{className:"text-sm font-semibold",children:"Stream Page Background"}),(0,a.jsxs)(ei.Ph,{value:w.stream_page_background_id||"none",onValueChange:e=>{J({stream_page_background_id:"none"===e?null:e})},children:[a.jsx(ei.i4,{className:"bg-white","data-testid":"stream-background-selector",children:a.jsx(ei.ki,{placeholder:"Select background for stream page"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),Z.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.cdn_url&&a.jsx("img",{src:e.cdn_url,alt:e.name,className:"w-12 h-8 object-cover rounded border"}),a.jsx("span",{children:e.name})]})},e.id))]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[w.stream_page_background_id&&!w.stream_page_background_url&&a.jsx("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-700",children:"Background selected but URL not loaded. Check console for details."}),w.stream_page_background_url&&(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Preview:"}),a.jsx("img",{src:w.stream_page_background_url,alt:"Stream Background",className:"w-full h-32 object-cover rounded",onError:e=>{console.error("[BACKGROUND_IMAGE_ERROR] Failed to load:",w.stream_page_background_url),e.target.style.display="none"}}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-400 mt-1 break-all",children:["URL: ",w.stream_page_background_url]})]})]})]})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(ep.Z,{className:"w-5 h-5"}),"Studio Partner"]}),a.jsx(n.SZ,{children:"Select a studio from your profile (optional)"})]}),a.jsx(n.aY,{className:"space-y-4",children:E?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx(p.Z,{className:"w-4 h-4 animate-spin"}),"Loading studios..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(ei.Ph,{value:ee.studio_details?.studio_id||"none",onValueChange:async e=>{if("none"===e)H({studio_details:{studio_id:"",name:"",logo_url:"",default_image_url:"",website:"",email:"",phone:"",address:"",contact:"",show_details:!1}});else{let s=R.find(s=>s.id===e);s&&(H({studio_details:{studio_id:s.id,name:s.name||"",logo_url:s.logo_url||"",default_image_url:s.default_image_url||"",website:s.website||"",email:s.email||"",phone:s.phone||"",address:s.address||"",contact:s.contact||"",show_details:!0}}),s.default_image_url&&B.toast.success("Studio selected with image!"))}},disabled:i||0===R.length,children:[a.jsx(ei.i4,{className:"bg-white","data-testid":"studio-selector",children:a.jsx(ei.ki,{placeholder:0===R.length?"No studios available - Create one in Profile":"Select a studio"})}),(0,a.jsxs)(ei.Bw,{children:[a.jsx(ei.Ql,{value:"none",children:"None"}),R.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.default_image_url&&a.jsx("img",{src:e.default_image_url,alt:e.name,className:"w-8 h-8 object-cover rounded"}),a.jsx("span",{children:e.name})]})},e.id))]})]}),0===R.length&&a.jsx("p",{className:"text-xs text-amber-600",children:"Go to Profile  Studios to create a studio first"})]}),ee.studio_details?.studio_id&&ee.studio_details?.studio_id!==""&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Preview:"}),ee.studio_details?.default_image_url?a.jsx("div",{className:"mb-3",children:a.jsx("img",{src:ee.studio_details.default_image_url,alt:"Studio",className:"w-full h-32 object-cover rounded"})}):(0,a.jsxs)("div",{className:"h-32 mx-auto flex flex-col items-center justify-center bg-gray-100 rounded mb-3",children:[a.jsx(ep.Z,{className:"w-8 h-8 text-gray-400"}),a.jsx("span",{className:"text-gray-400 text-xs text-center mt-1",children:"No studio image"})]}),ee.studio_details?.show_details&&(0,a.jsxs)("div",{className:"text-center text-sm space-y-1",children:[ee.studio_details?.name&&a.jsx("p",{className:"font-semibold text-gray-900",children:ee.studio_details.name}),ee.studio_details?.email&&a.jsx("p",{className:"text-gray-600",children:ee.studio_details.email}),ee.studio_details?.phone&&a.jsx("p",{className:"text-gray-600",children:ee.studio_details.phone})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(A._,{className:"text-sm font-medium text-purple-900",children:"Show Studio Details"}),a.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Display contact info along with logo"})]}),a.jsx("button",{type:"button",onClick:()=>H({studio_details:{...ee.studio_details,show_details:!ee.studio_details?.show_details}}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${ee.studio_details?.show_details?"bg-purple-600":"bg-gray-300"}`,disabled:i,"data-testid":"studio-details-toggle",children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ee.studio_details?.show_details?"translate-x-6":"translate-x-1"}`})})]})]})]})})]})]})}var eE=t(66393),eF=t(2815),eD=t(81109);let eL=(0,eo.Z)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),eI=(0,eo.Z)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);function eV({weddingId:e,wedding:s,onStatusChange:t}){let[l,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),x=async()=>{try{h(!0);let s=await z.default.get(`/api/youtube/status/${e}`);c(s.data)}catch(e){console.error("Error fetching broadcast status:",e)}finally{h(!1)}},g=async a=>{try{if(i(!0),await z.default.post("/api/youtube/transition",{broadcast_id:s.youtube_settings.broadcast_id,status:a}),B.toast.success(`Broadcast transitioned to ${a}`),await x(),t&&t(),"complete"===a)try{await z.default.post(`/api/youtube/save-video-to-media/${e}`),B.toast.success("YouTube video saved to media gallery!")}catch(e){console.error("Error saving video to media:",e),B.toast.error("Broadcast ended but failed to save video to gallery")}}catch(e){console.error("Error transitioning broadcast:",e),B.toast.error(e.response?.data?.detail||`Failed to transition to ${a}`)}finally{i(!1)}};if(!s?.youtube_settings?.broadcast_id)return null;let y=d?.life_cycle_status||"unknown",j="complete"===y;return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(eD.Z,{className:"w-5 h-5 text-red-600"}),"YouTube Broadcast Controls"]}),a.jsx(n.SZ,{children:"Manage your YouTube Live broadcast status"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${(()=>{switch(y){case"live":return"bg-red-500 animate-pulse";case"testing":return"bg-yellow-500";case"complete":return"bg-gray-500";default:return"bg-blue-500"}})()}`}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:(()=>{switch(y){case"ready":return"Ready to Go Live";case"testing":return"Testing (Private)";case"live":return"LIVE";case"complete":return"Ended";case"revoked":return"Cancelled";default:return y}})()}),a.jsx("p",{className:"text-sm text-gray-500",children:"live"===y?"Your stream is live on YouTube":"testing"===y?"Stream is in testing mode (not visible to public)":j?"Broadcast has ended":"Broadcast is ready to start"})]})]}),u&&a.jsx(p.Z,{className:"w-4 h-4 animate-spin text-gray-400"})]}),s.youtube_settings?.youtube_video_url&&(0,a.jsxs)(m.bZ,{children:[a.jsx(eD.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"View on YouTube"}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(s.youtube_settings.youtube_video_url,"_blank"),children:[a.jsx(f.Z,{className:"w-4 h-4 mr-2"}),"Open"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 pt-4 border-t",children:["ready"===y&&(0,a.jsxs)(o.z,{onClick:()=>g("testing"),disabled:l,className:"w-full bg-yellow-500 hover:bg-yellow-600",children:[l?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(ed.Z,{className:"w-4 h-4 mr-2"}),"Start Testing (Private)"]}),("testing"===y||"ready"===y)&&(0,a.jsxs)(o.z,{onClick:()=>g("live"),disabled:l,className:"w-full bg-red-600 hover:bg-red-700",children:[l?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(eL,{className:"w-4 h-4 mr-2"}),"Go Live on YouTube"]}),("live"===y||"testing"===y)&&(0,a.jsxs)(o.z,{onClick:()=>{confirm("Are you sure you want to end the YouTube broadcast? This will make it available as a video on your channel.")&&g("complete")},disabled:l,variant:"destructive",className:"w-full",children:[l?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(eI,{className:"w-4 h-4 mr-2"}),"End Broadcast"]}),j&&(0,a.jsxs)(m.bZ,{className:"bg-green-50 border-green-200",children:[a.jsx(w.Z,{className:"h-4 w-4 text-green-600"}),a.jsx(m.X,{className:"text-green-800",children:"Broadcast ended successfully. Video is now available on your YouTube channel."})]})]}),!j&&(0,a.jsxs)(m.bZ,{children:[a.jsx(T.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{className:"text-xs",children:[a.jsx("strong",{children:"How it works:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Testing:"})," Start OBS and test privately before going live"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Go Live:"})," Make your stream visible to the public on YouTube"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"End:"})," Finish the broadcast and save the recording"]})]})]})]})]})]})}var eY=t(48998);function eG({weddingId:e,wedding:s}){let[t,l]=(0,r.useState)([]),[i,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),x=async()=>{try{d(!0);let e=await z.default.get("/api/youtube/broadcasts");l(e.data.broadcasts||[])}catch(e){console.error("Error fetching broadcasts:",e),B.toast.error("Failed to load YouTube broadcasts")}finally{d(!1)}};if(!s?.youtube_settings?.auth_connected)return null;let g=e=>{let s={ready:{color:"bg-blue-500",text:"Ready"},testing:{color:"bg-yellow-500",text:"Testing"},live:{color:"bg-red-500",text:"Live"},complete:{color:"bg-green-500",text:"Completed"},revoked:{color:"bg-gray-500",text:"Cancelled"}}[e]||{color:"bg-gray-400",text:e};return a.jsx(c.C,{className:`${s.color} text-white`,children:s.text})};return(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(eD.Z,{className:"w-5 h-5 text-red-600"}),"Your YouTube Broadcasts"]}),a.jsx(n.SZ,{children:"View and manage your previous YouTube Live streams"})]}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>{h(!u),u||x()},children:[u?"Hide":"Show"," Broadcasts"]})]})}),u&&(0,a.jsxs)(n.aY,{className:"space-y-4",children:[i?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(p.Z,{className:"w-6 h-6 animate-spin text-rose-500"})}):0===t.length?(0,a.jsxs)(m.bZ,{children:[a.jsx(eD.Z,{className:"h-4 w-4"}),a.jsx(m.X,{children:"No previous broadcasts found. Create your first YouTube broadcast to get started!"})]}):a.jsx("div",{className:"space-y-3",children:t.map(s=>a.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[s.thumbnail_url&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:s.thumbnail_url,alt:s.title,className:"w-32 h-20 object-cover rounded"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:s.title}),a.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:s.description})]}),g(s.life_cycle_status)]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-xs text-gray-600",children:[s.scheduled_start_time&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(C.Z,{className:"w-3 h-3"}),(0,q.WU)(new Date(s.scheduled_start_time),"MMM d, yyyy")]}),s.actual_start_time&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(eY.Z,{className:"w-3 h-3"}),"Started: ",(0,q.WU)(new Date(s.actual_start_time),"p")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(s.youtube_video_url,"_blank"),children:[a.jsx(f.Z,{className:"w-3 h-3 mr-1"}),"View on YouTube"]}),"complete"===s.life_cycle_status&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:async()=>{try{await z.default.post(`/api/youtube/save-video-to-media/${e}`,{broadcast_id:s.broadcast_id}),B.toast.success("Video added to media gallery!")}catch(e){B.toast.error("Failed to add video to gallery")}},children:[a.jsx(eD.Z,{className:"w-3 h-3 mr-1"}),"Add to Gallery"]})]})]})]})},s.broadcast_id))}),t.length>0&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:x,disabled:i,className:"w-full",children:[i?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Refresh List"]})]})]})}var eW=t(32933);function eK({weddingId:e,currentTemplateId:s,onTemplateAssigned:t}){let[l,i]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[m,h]=(0,r.useState)(s||""),[g,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(null),[k,S]=(0,r.useState)([]),[C,Z]=(0,r.useState)(!1),P=async()=>{try{let s=await z.default.get(`/api/weddings/${e}/template-assignment`);console.log("Current assignment:",s.data),s.data.assignment_id&&(j(s.data),h(s.data.template?.id||""))}catch(e){console.error("Failed to load current assignment:",e)}},M=async s=>{let t=l.find(e=>e.id===s);if(t){w(t),v(!0);try{Z(!0);let t=await z.default.post(`/api/video-templates/${s}/preview`,{wedding_id:e});console.log("Preview overlays:",t.data),S(t.data.preview_data?.overlays||[])}catch(e){console.error("Failed to load preview overlays:",e),B.toast.error("Failed to load overlay preview"),S([])}finally{Z(!1)}}},q=async()=>{if(!m){B.toast.error("Please select a template");return}try{f(!0),console.log("Assigning template:",{template_id:m,slot:1,customizations:{color_overrides:{},font_overrides:{}}}),await z.default.post(`/api/weddings/${e}/assign-template`,{template_id:m,slot:1,customizations:{color_overrides:{},font_overrides:{}}}),B.toast.success("Template assigned successfully!"),P(),t&&t()}catch(e){console.error("Failed to assign template:",e),console.error("Error response:",e.response?.data),B.toast.error(e.response?.data?.detail||"Failed to assign template")}finally{f(!1)}},A=async()=>{if(confirm("Are you sure you want to remove the assigned template?"))try{f(!0),await z.default.delete(`/api/weddings/${e}/template-assignment`),B.toast.success("Template removed successfully"),j(null),h(""),t&&t()}catch(e){console.error("Failed to remove template:",e),B.toast.error(e.response?.data?.detail||"Failed to remove template")}finally{f(!1)}};return d?(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Video Template"]}),a.jsx(n.SZ,{children:"Select a video template for your wedding layout"})]}),a.jsx(n.aY,{children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(p.Z,{className:"w-6 h-6 animate-spin text-rose-500"})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Zb,{"data-testid":"template-selector-card",children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Video Template"]}),a.jsx(n.SZ,{children:"Select a video template to use for your wedding layout"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[y&&y.template&&a.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(eW.Z,{className:"w-4 h-4 text-green-600"}),a.jsx("p",{className:"font-semibold text-green-900",children:"Template Assigned"})]}),a.jsx("p",{className:"text-sm text-green-800",children:y.template.name}),a.jsx("p",{className:"text-xs text-green-600 mt-1",children:y.template.description}),y.template.tags&&y.template.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:y.template.tags.map(e=>a.jsx(c.C,{variant:"outline",className:"text-xs bg-white",children:e},e))})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx(o.z,{variant:"ghost",size:"sm",onClick:()=>M(y.template.id),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:a.jsx(_.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{variant:"ghost",size:"sm",onClick:A,disabled:g,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx($.Z,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Template"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(ei.Ph,{value:m,onValueChange:h,"data-testid":"template-dropdown",children:[a.jsx(ei.i4,{className:"flex-1",children:a.jsx(ei.ki,{placeholder:"Choose a video template..."})}),a.jsx(ei.Bw,{children:0===l.length?a.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No templates available. Create templates in Admin panel."}):l.map(e=>a.jsx(ei.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"truncate",children:e.name}),e.category&&a.jsx(c.C,{variant:"secondary",className:"text-xs",children:e.category})]})},e.id))})]}),m&&a.jsx(o.z,{variant:"outline",size:"icon",onClick:()=>M(m),title:"Preview Template",children:a.jsx(_.Z,{className:"w-4 h-4"})})]})]}),m&&a.jsx("div",{className:"p-3 bg-gray-50 border rounded-lg",children:(()=>{let e=l.find(e=>e.id===m);return e?(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:e.name}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),e.video_data&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2 grid grid-cols-2 gap-2",children:[(0,a.jsxs)("p",{children:["Duration: ",e.video_data.duration_seconds,"s"]}),(0,a.jsxs)("p",{children:["Resolution: ",e.video_data.width,"x",e.video_data.height]})]}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map(e=>a.jsx(c.C,{variant:"outline",className:"text-xs",children:e},e))})]}):null})()}),a.jsx(o.z,{onClick:q,disabled:!m||g||0===l.length,className:"w-full","data-testid":"assign-template-btn",children:g?(0,a.jsxs)(a.Fragment,{children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Assigning..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(eW.Z,{className:"w-4 h-4 mr-2"}),y?"Change Template":"Assign Template"]})})]}),a.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-blue-900",children:[a.jsx("strong",{children:"Note:"})," Video templates will be used to generate personalized videos with your wedding information automatically populated."]})})]})]}),a.jsx(Y.Vq,{open:b,onOpenChange:v,children:(0,a.jsxs)(Y.cZ,{className:"max-w-4xl",children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Template Preview"}),(0,a.jsxs)(Y.Be,{children:[N?.name," - ",N?.description]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[N&&N.video_data&&(0,a.jsxs)("div",{className:"aspect-video bg-black rounded-lg overflow-hidden relative",children:[a.jsx("video",{src:N.video_data.original_url,poster:N.preview_thumbnail?.url,width:"100%",height:"100%",controls:!0,playsInline:!0,controlsList:"nodownload",className:"w-full h-full object-contain"}),!C&&k.length>0&&a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:k.map((e,s)=>a.jsx("div",{className:"absolute",style:{left:`${e.position?.x||0}%`,top:`${e.position?.y||0}%`,transform:"translate(-50%, -50%)",fontSize:`${e.style?.font_size||24}px`,fontFamily:e.style?.font_family||"Arial",color:e.style?.color||"#FFFFFF",fontWeight:e.style?.font_weight||"normal",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",textAlign:"center",maxWidth:"80%"},children:e.text},e.id||s))}),C&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-white"})})]}),k.length>0&&(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Dynamic Overlays Preview (populated with your wedding data):"}),a.jsx("div",{className:"space-y-1",children:k.map((e,s)=>(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[" ",e.data_source,": ",a.jsx("span",{className:"font-semibold",children:e.text})]},s))})]}),N&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Category"}),a.jsx("p",{className:"font-medium",children:N.category||"General"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Duration"}),(0,a.jsxs)("p",{className:"font-medium",children:[N.video_data?.duration_seconds,"s"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Resolution"}),(0,a.jsxs)("p",{className:"font-medium",children:[N.video_data?.width,"x",N.video_data?.height]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Text Overlays"}),(0,a.jsxs)("p",{className:"font-medium",children:[N.text_overlays?.length||0," overlays"]})]})]}),N&&N.tags&&N.tags.length>0&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:N.tags.map(e=>a.jsx(c.C,{variant:"outline",children:e},e))})]})]})]})})]})}var eH=t(64745),eX=t(15128),eQ=t(69145);let eJ=(0,eo.Z)("volume-1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),e0=(0,eo.Z)("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]),e1=(0,eo.Z)("skip-back",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);var e2=t(71059);let e4=(0,eo.Z)("skip-forward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),e5=(0,eo.Z)("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);function e3({weddingId:e}){let[s,t]=(0,r.useState)(!0),[l,i]=(0,r.useState)([]),[u,m]=(0,r.useState)([]),[p,h]=(0,r.useState)([]),[x,g]=(0,r.useState)([]),[f,y]=(0,r.useState)([]),[b,v]=(0,r.useState)(null),[N,_]=(0,r.useState)(!1),[w,k]=(0,r.useState)(0),[S,C]=(0,r.useState)(0),[Z,P]=(0,r.useState)(70),[M,z]=(0,r.useState)(85),[q,A]=(0,r.useState)(80),[O,R]=(0,r.useState)(!1),[$,T]=(0,r.useState)(!1),[U,E]=(0,r.useState)(!1),F=(0,r.useRef)(null),D=e=>{F.current&&(F.current.src=e.file_url,F.current.play(),v(e),_(!0))},L=()=>{let e=l.findIndex(e=>e.id===b?.id);e<l.length-1&&D(l[e+1])},I=e=>{let s=new Audio(e.file_url);s.volume=q/100*(M/100),s.play(),B.toast.success(`Playing: ${e.title}`)},V=e=>!e||isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return(0,a.jsxs)(n.Zb,{className:"h-full",children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(j.Z,{className:"w-5 h-5"}),"Music & Audio Control"]}),a.jsx(n.SZ,{children:"Control background music and sound effects for your stream"})]}),(0,a.jsxs)(n.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-rose-50 to-purple-50 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"text-sm font-semibold",children:"Master Audio"}),a.jsx(o.z,{size:"sm",variant:"outline",onClick:()=>R(!O),children:O?a.jsx(eX.Z,{className:"w-4 h-4"}):a.jsx(eQ.Z,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(eJ,{className:"w-4 h-4 text-gray-500"}),a.jsx(eH.i,{value:[M],onValueChange:e=>z(e[0]),max:100,step:1,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium w-12 text-right",children:[M,"%"]})]})})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:"Background Music"}),(0,a.jsxs)(c.C,{variant:"outline",children:[l.length," tracks"]})]}),b?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md",children:[a.jsx("p",{className:"font-medium",children:b.title}),a.jsx("p",{className:"text-sm text-gray-500",children:b.artist||"Unknown Artist"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx(eH.i,{value:[w],onValueChange:e=>{F.current&&(F.current.currentTime=e[0],k(e[0]))},max:S||100,step:1,className:"w-full"}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsx("span",{children:V(w)}),a.jsx("span",{children:V(S)})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(o.z,{size:"sm",variant:"outline",onClick:()=>T(!$),className:$?"bg-rose-100":"",children:a.jsx(e0,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"outline",onClick:()=>{let e=l.findIndex(e=>e.id===b?.id);e>0&&D(l[e-1])},children:a.jsx(e1,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",onClick:()=>{F.current&&(N?F.current.pause():F.current.play(),_(!N))},className:"bg-rose-500 hover:bg-rose-600",children:N?a.jsx(e2.Z,{className:"w-4 h-4"}):a.jsx(ed.Z,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"outline",onClick:L,children:a.jsx(e4,{className:"w-4 h-4"})}),a.jsx(o.z,{size:"sm",variant:"outline",onClick:()=>E(!U),className:U?"bg-rose-100":"",children:a.jsx(e5,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(eQ.Z,{className:"w-4 h-4 text-gray-500"}),a.jsx(eH.i,{value:[Z],onValueChange:e=>P(e[0]),max:100,step:1,className:"flex-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium w-12 text-right",children:[Z,"%"]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(j.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"No track playing"})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:"Available Tracks"}),a.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:l.slice(0,10).map(e=>(0,a.jsxs)("button",{onClick:()=>D(e),className:`w-full text-left p-2 rounded hover:bg-gray-100 transition-colors ${b?.id===e.id?"bg-rose-50 border border-rose-200":""}`,children:[a.jsx("p",{className:"text-sm font-medium truncate",children:e.title}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.artist||"Unknown"})]},e.id))})]})]}),(0,a.jsxs)(d.mQ,{defaultValue:"effects",className:"w-full",children:[(0,a.jsxs)(d.dr,{className:"grid w-full grid-cols-3",children:[a.jsx(d.SP,{value:"effects",children:"Effects"}),a.jsx(d.SP,{value:"transitions",children:"Transitions"}),a.jsx(d.SP,{value:"emotions",children:"Emotions"})]}),(0,a.jsxs)(d.nU,{value:"effects",className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Sound Effects"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(eJ,{className:"w-3 h-3 text-gray-500"}),a.jsx(eH.i,{value:[q],onValueChange:e=>A(e[0]),max:100,step:1,className:"w-24"}),(0,a.jsxs)("span",{className:"text-xs w-8",children:[q,"%"]})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:u.slice(0,8).map(e=>(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>I(e),className:"justify-start",children:[a.jsx(ed.Z,{className:"w-3 h-3 mr-2"}),e.title]},e.id))})]}),a.jsx(d.nU,{value:"transitions",className:"space-y-3",children:a.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.slice(0,8).map(e=>(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>I(e),className:"justify-start",children:[a.jsx(ed.Z,{className:"w-3 h-3 mr-2"}),e.title]},e.id))})}),a.jsx(d.nU,{value:"emotions",className:"space-y-3",children:a.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.slice(0,8).map(e=>(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>I(e),className:"justify-start",children:[a.jsx(ed.Z,{className:"w-3 h-3 mr-2"}),e.title]},e.id))})})]}),a.jsx("audio",{ref:F,onTimeUpdate:()=>{F.current&&(k(F.current.currentTime),C(F.current.duration))},onEnded:()=>{_(!1),U?(F.current.play(),_(!0)):L()}})]})]})}var e6=t(69508),e8=t(37909),e7=t(31215),e9=t(88307);function se({isOpen:e,onClose:s,onSelect:t,weddingId:l,maxSelection:i=1,allowedTypes:n=["photo","video"],selectedMedia:u=[],category:m=null,currentCategoryCount:h=0}){let[g,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)([]),[b,N]=(0,r.useState)([]),[_,w]=(0,r.useState)(""),[k,S]=(0,r.useState)(u),[C,Z]=(0,r.useState)("all"),P=async()=>{try{f(!0);let e=await z.default.get(`/api/media/gallery/${l}`);if(!e.data){console.error("No media data received:",e),B.toast.error("No media data received"),j([]);return}let s=Array.isArray(e.data)?e.data:e.data.media||[];if(!Array.isArray(s)){console.error("Invalid media data format:",e.data),B.toast.error("Invalid media data format"),j([]);return}let t=s.filter(e=>n.includes(e.media_type));j(t)}catch(s){console.error("Error loading media:",s);let e=s.response?.data?.detail||s.message||"Failed to load media gallery";B.toast.error(e),j([])}finally{f(!1)}},M=e=>{if(k.some(s=>s.id===e.id))S(k.filter(s=>s.id!==e.id));else{if("moment"===m&&h+k.length+1>5){B.toast.error("Maximum 5 precious moments allowed across all layouts");return}1===i?S([e]):k.length<i?S([...k,e]):B.toast.warning(`You can select up to ${i} items`)}},q=y.filter(e=>"photo"===e.media_type).length,A=y.filter(e=>"video"===e.media_type).length;return a.jsx(Y.Vq,{open:e,onOpenChange:s,children:(0,a.jsxs)(Y.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(Y.fK,{children:[a.jsx(Y.$N,{children:"Select Media from Gallery"}),(0,a.jsxs)(Y.Be,{children:["Choose ",1===i?"a photo":`up to ${i} photos`," from your uploaded media"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(e9.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(G.I,{type:"text",placeholder:"Search by caption...",value:_,onChange:e=>w(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(d.mQ,{value:C,onValueChange:Z,children:[(0,a.jsxs)(d.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(d.SP,{value:"all",children:["All (",y.length,")"]}),(0,a.jsxs)(d.SP,{value:"photos",disabled:!n.includes("photo"),children:[a.jsx(v.Z,{className:"w-4 h-4 mr-1"}),"Photos (",q,")"]}),(0,a.jsxs)(d.SP,{value:"videos",disabled:!n.includes("video"),children:[a.jsx(x.Z,{className:"w-4 h-4 mr-1"}),"Videos (",A,")"]}),(0,a.jsxs)(d.SP,{value:"upload",children:[a.jsx(em.Z,{className:"w-4 h-4 mr-1"}),"Upload New"]})]}),a.jsx(d.nU,{value:"upload",className:"mt-4",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsx(U,{weddingId:l,onUploadComplete:e=>{P(),Z("all"),B.toast.success("Media uploaded! Select it from the gallery.")}})})}),a.jsx(d.nU,{value:"all",className:"mt-4",children:g?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}):0===b.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(v.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No media found"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Upload some photos or videos first"})]}):a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:b.map(e=>{let s=k.some(s=>s.id===e.id);return(0,a.jsxs)("div",{onClick:()=>M(e),className:`relative aspect-square cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${s?"border-rose-500 ring-2 ring-rose-200":"border-gray-200 hover:border-rose-300"}`,children:["photo"===e.media_type?a.jsx("img",{src:e.cdn_url||e.file_url||e.url,alt:e.caption||"Media",className:"w-full h-full object-cover",onError:s=>{console.error("Image load error:",s),console.error("Failed image URL:",e.cdn_url||e.file_url||e.url),s.target.style.display="none",s.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center bg-gray-100"><span class="text-gray-400 text-xs">Image Error</span></div>'}}):(0,a.jsxs)("div",{className:"relative w-full h-full bg-gray-100 flex items-center justify-center",children:[a.jsx(x.Z,{className:"w-8 h-8 text-gray-400"}),e.thumbnail_url&&a.jsx("img",{src:e.thumbnail_url,alt:e.caption||"Video",className:"absolute inset-0 w-full h-full object-cover"})]}),s&&a.jsx("div",{className:"absolute inset-0 bg-rose-500 bg-opacity-20 flex items-center justify-center",children:a.jsx("div",{className:"bg-rose-500 text-white rounded-full p-2",children:a.jsx(eW.Z,{className:"w-5 h-5"})})}),e.caption&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:a.jsx("p",{className:"text-white text-xs truncate",children:e.caption})})]},e.id)})})})]}),k.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-rose-50 rounded-lg border border-rose-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(c.C,{variant:"default",className:"bg-rose-500",children:[k.length," selected"]}),a.jsx("span",{className:"text-sm text-gray-600",children:i>1&&`(Maximum: ${i})`})]}),(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>S([]),className:"text-rose-600 hover:text-rose-700",children:[a.jsx($.Z,{className:"w-4 h-4 mr-1"}),"Clear"]})]})]}),(0,a.jsxs)(Y.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsxs)(o.z,{onClick:()=>{t(k),s()},disabled:0===k.length,className:"bg-rose-500 hover:bg-rose-600",children:[a.jsx(eW.Z,{className:"w-4 h-4 mr-2"}),"Select ",k.length>0&&`(${k.length})`]})]})]})})}var ss=t(99597),st=t(3634),sa=t(46084),sr=t(49761);function sl({slides:e,selectedIndex:s,onSelect:t,onAddPhotos:r,onDeleteSlide:l}){return(0,a.jsxs)("div",{className:"w-64 border-r bg-white flex flex-col h-full flex-shrink-0",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"font-semibold text-sm",children:["Slides (",e.length,")"]}),(0,a.jsxs)(o.z,{size:"sm",variant:"outline",onClick:r,children:[a.jsx(I.Z,{className:"w-4 h-4 mr-1"})," Add"]})]}),a.jsx(ss.x,{className:"flex-1",children:(0,a.jsxs)("div",{className:"p-2 space-y-2",children:[e.map((e,r)=>{let i=s===r,n=(0,sr.Pc)(e.transition),d=e.animation&&"none"!==e.animation;return(0,a.jsxs)("div",{className:(0,sa.cn)("relative group flex gap-3 p-2 rounded-lg cursor-pointer border transition-all",i?"bg-blue-50 border-blue-500 shadow-sm":"hover:bg-gray-50 border-transparent hover:border-gray-200"),onClick:()=>t(r),children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1 min-w-[20px]",children:[a.jsx("span",{className:"text-xs font-medium text-gray-500",children:r+1}),n&&a.jsx("div",{title:"Has Transition",className:"w-4 h-4 rounded-full bg-purple-100 flex items-center justify-center",children:a.jsx(st.Z,{className:"w-2.5 h-2.5 text-purple-600"})}),d&&a.jsx("div",{title:"Has Effect",className:"w-4 h-4 rounded-full bg-orange-100 flex items-center justify-center",children:a.jsx(N.Z,{className:"w-2.5 h-2.5 text-orange-600"})})]}),a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded overflow-hidden flex-shrink-0 border",children:e.media_url?a.jsx("img",{src:e.media_url,alt:`Slide ${r+1}`,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-300",children:"No Img"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[a.jsx("p",{className:"text-xs font-medium truncate",children:"none"===e.transition?"No Transition":e.transition}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-500 truncate",children:[e.duration,"s  ","none"!==e.animation?e.animation:"No Effect"]})]}),a.jsx(o.z,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 text-red-500 hover:bg-red-50 absolute top-1 right-1",onClick:e=>{e.stopPropagation(),l(r)},children:a.jsx(V.Z,{className:"w-3 h-3"})})]},r)}),0===e.length&&a.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:'No slides yet. Click "Add" to start.'})]})})]})}var si=t(82561),so=t(48051),sn=t(93095),sd=t(825),sc=t(80699),su=t(10441),sm=t(88957),sp=t(94509),sh=t(83078),sx=t(9815),sg=t(77335),sf=Symbol("radix.slottable");function sy(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===sf}var sj=t(52067),sb=t(35664),sv=t(95011),sN="Popover",[s_,sw]=(0,sn.b)(sN,[sp.D7]),sk=(0,sp.D7)(),[sS,sC]=s_(sN),sZ=e=>{let{__scopePopover:s,children:t,open:l,defaultOpen:i,onOpenChange:o,modal:n=!1}=e,d=sk(s),c=r.useRef(null),[u,m]=r.useState(!1),[p,h]=(0,sj.T)({prop:l,defaultProp:i??!1,onChange:o,caller:sN});return(0,a.jsx)(sp.fC,{...d,children:(0,a.jsx)(sS,{scope:s,contentId:(0,sm.M)(),triggerRef:c,open:p,onOpenChange:h,onOpenToggle:r.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:u,onCustomAnchorAdd:r.useCallback(()=>m(!0),[]),onCustomAnchorRemove:r.useCallback(()=>m(!1),[]),modal:n,children:t})})};sZ.displayName=sN;var sP="PopoverAnchor";r.forwardRef((e,s)=>{let{__scopePopover:t,...l}=e,i=sC(sP,t),o=sk(t),{onCustomAnchorAdd:n,onCustomAnchorRemove:d}=i;return r.useEffect(()=>(n(),()=>d()),[n,d]),(0,a.jsx)(sp.ee,{...o,...l,ref:s})}).displayName=sP;var sM="PopoverTrigger",sB=r.forwardRef((e,s)=>{let{__scopePopover:t,...r}=e,l=sC(sM,t),i=sk(t),o=(0,so.e)(s,l.triggerRef),n=(0,a.jsx)(sg.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":sL(l.open),...r,ref:o,onClick:(0,si.Mj)(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?n:(0,a.jsx)(sp.ee,{asChild:!0,...i,children:n})});sB.displayName=sM;var sz="PopoverPortal",[sq,sA]=s_(sz,{forceMount:void 0}),sO=e=>{let{__scopePopover:s,forceMount:t,children:r,container:l}=e,i=sC(sz,s);return(0,a.jsx)(sq,{scope:s,forceMount:t,children:(0,a.jsx)(sx.z,{present:t||i.open,children:(0,a.jsx)(sh.h,{asChild:!0,container:l,children:r})})})};sO.displayName=sz;var sR="PopoverContent",s$=r.forwardRef((e,s)=>{let t=sA(sR,e.__scopePopover),{forceMount:r=t.forceMount,...l}=e,i=sC(sR,e.__scopePopover);return(0,a.jsx)(sx.z,{present:r||i.open,children:i.modal?(0,a.jsx)(sU,{...l,ref:s}):(0,a.jsx)(sE,{...l,ref:s})})});s$.displayName=sR;var sT=function(e){let s=function(e){let s=r.forwardRef((e,s)=>{let{children:t,...a}=e;if(r.isValidElement(t)){let e,l;let i=(e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?t.props.ref:t.props.ref||t.ref,o=function(e,s){let t={...s};for(let a in s){let r=e[a],l=s[a];/^on[A-Z]/.test(a)?r&&l?t[a]=(...e)=>{let s=l(...e);return r(...e),s}:r&&(t[a]=r):"style"===a?t[a]={...r,...l}:"className"===a&&(t[a]=[r,l].filter(Boolean).join(" "))}return{...e,...t}}(a,t.props);return t.type!==r.Fragment&&(o.ref=s?(0,so.F)(s,i):i),r.cloneElement(t,o)}return r.Children.count(t)>1?r.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}(e),t=r.forwardRef((e,t)=>{let{children:l,...i}=e,o=r.Children.toArray(l),n=o.find(sy);if(n){let e=n.props.children,l=o.map(s=>s!==n?s:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,a.jsx)(s,{...i,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,l):null})}return(0,a.jsx)(s,{...i,ref:t,children:l})});return t.displayName=`${e}.Slot`,t}("PopoverContent.RemoveScroll"),sU=r.forwardRef((e,s)=>{let t=sC(sR,e.__scopePopover),l=r.useRef(null),i=(0,so.e)(s,l),o=r.useRef(!1);return r.useEffect(()=>{let e=l.current;if(e)return(0,sb.Ry)(e)},[]),(0,a.jsx)(sv.Z,{as:sT,allowPinchZoom:!0,children:(0,a.jsx)(sF,{...e,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,si.Mj)(e.onCloseAutoFocus,e=>{e.preventDefault(),o.current||t.triggerRef.current?.focus()}),onPointerDownOutside:(0,si.Mj)(e.onPointerDownOutside,e=>{let s=e.detail.originalEvent,t=0===s.button&&!0===s.ctrlKey,a=2===s.button||t;o.current=a},{checkForDefaultPrevented:!1}),onFocusOutside:(0,si.Mj)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),sE=r.forwardRef((e,s)=>{let t=sC(sR,e.__scopePopover),l=r.useRef(!1),i=r.useRef(!1);return(0,a.jsx)(sF,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(l.current||t.triggerRef.current?.focus(),s.preventDefault()),l.current=!1,i.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(l.current=!0,"pointerdown"!==s.detail.originalEvent.type||(i.current=!0));let a=s.target;t.triggerRef.current?.contains(a)&&s.preventDefault(),"focusin"===s.detail.originalEvent.type&&i.current&&s.preventDefault()}})}),sF=r.forwardRef((e,s)=>{let{__scopePopover:t,trapFocus:r,onOpenAutoFocus:l,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:n,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:u,...m}=e,p=sC(sR,t),h=sk(t);return(0,sc.EW)(),(0,a.jsx)(su.M,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:l,onUnmountAutoFocus:i,children:(0,a.jsx)(sd.XB,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:n,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:(0,a.jsx)(sp.VY,{"data-state":sL(p.open),role:"dialog",id:p.contentId,...h,...m,ref:s,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),sD="PopoverClose";function sL(e){return e?"open":"closed"}r.forwardRef((e,s)=>{let{__scopePopover:t,...r}=e,l=sC(sD,t);return(0,a.jsx)(sg.WV.button,{type:"button",...r,ref:s,onClick:(0,si.Mj)(e.onClick,()=>l.onOpenChange(!1))})}).displayName=sD,r.forwardRef((e,s)=>{let{__scopePopover:t,...r}=e,l=sk(t);return(0,a.jsx)(sp.Eh,{...l,...r,ref:s})}).displayName="PopoverArrow";let sI=r.forwardRef(({className:e,align:s="center",sideOffset:t=4,...r},l)=>a.jsx(sO,{children:a.jsx(s$,{ref:l,align:s,sideOffset:t,className:(0,sa.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...r})}));function sV({selectedSlide:e,onUpdateSlide:s,onApplyToAll:t,onApplyRandom:l,musicUrl:i,onSelectMusic:n}){let[c,u]=(0,r.useState)("transitions"),m=[{id:"entrance",label:"Entrance",icon:ed.Z},{id:"exit",label:"Exit",icon:st.Z},{id:"transitions",label:"Transitions",icon:N.Z},{id:"effects",label:"Special Effects",icon:N.Z}],p=sr.Hx,h=(t,r)=>{let l="transition"===r?e?.transition===t.value:e?.animation===t.value;return(0,a.jsxs)(o.z,{variant:l?"default":"outline",className:"w-[140px] h-[60px] flex flex-col items-center justify-center gap-1 relative overflow-hidden shrink-0 p-0",onClick:()=>s(r,t.value),title:t.label,children:[t.preview?a.jsx("img",{src:t.preview,alt:t.label,className:"absolute inset-0 w-full h-full object-cover opacity-100"}):a.jsx("span",{className:"relative z-10 text-xs font-medium truncate w-full text-center px-1",children:t.label}),l&&a.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full z-20 shadow-sm border border-white"})]},t.value)};return(0,a.jsxs)("div",{className:"border-b bg-white shadow-sm z-20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b",children:[a.jsx(d.mQ,{value:c,onValueChange:u,className:"w-auto",children:a.jsx(d.dr,{children:m.map(e=>(0,a.jsxs)(d.SP,{value:e.id,className:"gap-2",children:[a.jsx(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 border-r pr-4",children:[a.jsx(j.Z,{className:"w-4 h-4 text-gray-500"}),a.jsx(o.z,{variant:"ghost",size:"sm",onClick:n,className:"text-sm truncate max-w-[150px]",children:i?"Change Music":"Select Background Music"}),i&&a.jsx(o.z,{variant:"ghost",size:"icon",onClick:()=>{},children:a.jsx(ed.Z,{className:"w-3 h-3"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(eY.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("div",{className:"w-24",children:[(0,a.jsxs)(A._,{className:"text-[10px] text-gray-500 mb-1 block",children:["Duration: ",e?.duration||5,"s"]}),a.jsx(eH.i,{value:[e?.duration||5],min:1,max:30,step:.5,onValueChange:([e])=>s("duration",e)})]})]}),(0,a.jsxs)(sZ,{children:[a.jsx(sB,{asChild:!0,children:a.jsx(o.z,{variant:"outline",size:"sm",children:"Settings"})}),(0,a.jsxs)(sI,{className:"w-64 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{children:"Transition Duration"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(eH.i,{value:[e?.transition_duration||1],min:.1,max:5,step:.1,onValueChange:([e])=>s("transition_duration",e)}),(0,a.jsxs)("span",{className:"text-xs w-8",children:[e?.transition_duration||1,"s"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(A._,{children:"Apply to All"}),a.jsx(o.z,{size:"sm",onClick:t,children:"Apply"})]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"h-[160px] bg-gray-50/50 p-4 flex gap-4",children:[(0,a.jsxs)(ss.x,{className:"flex-1 whitespace-nowrap",children:[a.jsx("div",{className:"flex gap-2 h-full",children:a.jsx("div",{className:"grid grid-rows-2 grid-flow-col gap-2 min-w-max",style:{gridTemplateRows:"repeat(2, 60px)"},children:"entrance"===c||"exit"===c?p.map(e=>h(e,"transition")):"transitions"===c?sr.U6.map(e=>h(e,"transition")):"effects"===c?[{value:"none",label:"None"},{value:"ken_burns",label:"Ken Burns"},{value:"random",label:"Random"}].map(e=>h(e,"animation")):null})}),a.jsx(ss.B,{orientation:"horizontal"})]}),"transitions"===c&&a.jsx("div",{className:"flex flex-col justify-center border-l pl-4 shrink-0",children:(0,a.jsxs)(o.z,{variant:"outline",className:"h-full flex flex-col gap-2 w-24 border-dashed",onClick:l,title:"Apply Random Transitions to All Slides",children:[a.jsx(e0,{className:"w-6 h-6 text-purple-600"}),a.jsx("span",{className:"text-xs font-medium text-center whitespace-normal",children:"Apply Random"})]})})]})]})}function sY({albumId:e,onBack:s}){let[t,l]=(0,r.useState)(null),[i,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(!0),[m,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)(0),[y,b]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[_,w]=(0,r.useState)(!1),[k,S]=(0,r.useState)([]),C=async()=>{x(!0);try{await z.default.put(`/api/albums/${e}`,{slides:i,music_url:t.music_url}),B.toast.success("Album saved successfully")}catch(e){B.toast.error("Failed to save album")}finally{x(!1)}},Z=async()=>{try{let e=await z.default.get("/api/music/library");S(e.data.music||[]),w(!0)}catch(e){B.toast.error("Failed to load music library")}},P=e=>{l({...t,music_url:e}),w(!1),B.toast.success("Music selected!")};return c?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx(p.Z,{className:"animate-spin"})}):t?(0,a.jsxs)("div",{className:"flex flex-col h-[calc(100vh-64px)] bg-gray-50 overflow-hidden",children:[y&&a.jsx(e8.Z,{album:{...t,slides:i},onClose:()=>b(!1)}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-white border-b shrink-0 z-30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(o.z,{variant:"ghost",size:"icon",onClick:s,children:a.jsx(h.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-sm font-bold",children:t.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[i.length," photos"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>b(!0),children:[a.jsx(ed.Z,{className:"w-3 h-3 mr-2"}),"Full Preview"]}),(0,a.jsxs)(o.z,{size:"sm",onClick:C,disabled:m,children:[a.jsx(e7.Z,{className:"w-3 h-3 mr-2"}),m?"Saving...":"Save"]})]})]}),a.jsx("div",{className:"shrink-0",children:a.jsx(sV,{selectedSlide:i[g],onUpdateSlide:(e,s)=>{if(g<0||g>=i.length)return;let t=[...i];t[g]={...t[g],[e]:s},d(t)},onApplyToAll:()=>{if(g<0)return;let e=i[g];confirm("Apply current slide settings (Duration, Transition, Animation) to ALL slides?")&&(d(i.map(s=>({...s,duration:e.duration,transition:e.transition,transition_duration:e.transition_duration,animation:e.animation}))),B.toast.success("Settings applied to all slides"))},onApplyRandom:()=>{confirm("Randomize transitions for all slides? This will overwrite existing transitions.")&&(d(i.map(e=>{let s=sr.U6[Math.floor(Math.random()*sr.U6.length)];return{...e,transition:s.value}})),B.toast.success("Random transitions applied to all slides!"))},musicUrl:t.music_url,onSelectMusic:Z})}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[a.jsx(sl,{slides:i,selectedIndex:g,onSelect:f,onAddPhotos:()=>N(!0),onDeleteSlide:e=>{let s=[...i];s.splice(e,1),d(s),g>=s.length&&f(Math.max(0,s.length-1))}}),(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 flex items-center justify-center relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px"}}),i.length>0?a.jsx("div",{className:"w-full h-full relative",children:a.jsx(e8.Z,{album:{...t,slides:i},autoPlay:!1,embedded:!0,controlledIndex:g,onIndexChange:f,showControls:!0})}):(0,a.jsxs)("div",{className:"text-gray-500 flex flex-col items-center",children:[a.jsx("p",{children:"No photos added yet"}),a.jsx(o.z,{variant:"outline",className:"mt-4",onClick:()=>N(!0),children:"Add Photos"})]})]})]}),a.jsx(se,{isOpen:v,onClose:()=>N(!1),weddingId:t.wedding_id,onSelect:e=>{let s=e.map((e,s)=>({media_id:e.id,media_url:e.cdn_url||e.file_url||e.url,order:i.length+s,duration:5,transition:"fade",transition_duration:1,animation:"none"}));d([...i,...s]),N(!1)},maxSelection:50,allowedTypes:["photo"]}),a.jsx(Y.Vq,{open:_,onOpenChange:w,children:(0,a.jsxs)(Y.cZ,{className:"max-w-2xl max-h-[600px]",children:[a.jsx(Y.fK,{children:a.jsx(Y.$N,{children:"Select Music from Library"})}),a.jsx("div",{className:"overflow-y-auto space-y-2 max-h-[500px]",children:0===k.length?a.jsx("p",{className:"text-center text-gray-500 py-8",children:"No music available in library"}):k.map(e=>a.jsx(n.Zb,{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>P(e.file_url),children:(0,a.jsxs)(n.aY,{className:"p-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:e.title||"Untitled"}),a.jsx("p",{className:"text-xs text-gray-500",children:e.duration?`${Math.floor(e.duration/60)}:${String(Math.floor(e.duration%60)).padStart(2,"0")}`:"Unknown duration"})]}),t.music_url===e.file_url&&a.jsx(eW.Z,{className:"w-5 h-5 text-green-500"}),a.jsx(j.Z,{className:"w-5 h-5 text-gray-400"})]})},e.id))})]})})]}):a.jsx("div",{children:"Album not found"})}function sG({weddingId:e}){let[s,t]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)(""),f=async()=>{try{i(!0);let s=await z.default.get(`/api/albums/${e}`);t(s.data)}catch(e){console.error("Error fetching albums:",e),B.toast.error("Failed to load albums")}finally{i(!1)}},y=async()=>{if(x.trim())try{await z.default.post("/api/albums/",{wedding_id:e,title:x}),B.toast.success("Album created successfully"),g(""),h(!1),f()}catch(e){console.error("Error creating album:",e),B.toast.error("Failed to create album")}},j=async e=>{if(confirm("Are you sure you want to delete this album?"))try{await z.default.delete(`/api/albums/${e}`),B.toast.success("Album deleted"),f()}catch(e){B.toast.error("Failed to delete album")}};return d?a.jsx(sY,{albumId:d.id,onBack:()=>{c(null),f()}}):(0,a.jsxs)("div",{className:"space-y-6",children:[u&&a.jsx(e8.Z,{album:u,onClose:()=>m(null)}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Photo Albums"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Create albums to organize photos and create slideshows"})]}),(0,a.jsxs)(Y.Vq,{open:p,onOpenChange:h,children:[a.jsx(Y.hg,{asChild:!0,children:(0,a.jsxs)(o.z,{children:[a.jsx(I.Z,{className:"w-4 h-4 mr-2"}),"Create Album"]})}),(0,a.jsxs)(Y.cZ,{children:[a.jsx(Y.fK,{children:a.jsx(Y.$N,{children:"Create New Album"})}),a.jsx("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(A._,{children:"Album Title"}),a.jsx(G.I,{value:x,onChange:e=>g(e.target.value),placeholder:"e.g., Reception Highlights"})]})}),(0,a.jsxs)(Y.cN,{children:[a.jsx(o.z,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),a.jsx(o.z,{onClick:y,disabled:!x.trim(),children:"Create Album"})]})]})]})]}),l?a.jsx("div",{className:"text-center py-12",children:"Loading albums..."}):0===s.length?a.jsx(n.Zb,{className:"border-dashed",children:(0,a.jsxs)(n.aY,{className:"flex flex-col items-center justify-center py-12 text-center",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:a.jsx(v.Z,{className:"w-6 h-6 text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No albums yet"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1 max-w-sm mx-auto",children:"Create your first album to start organizing photos and building slideshows."}),(0,a.jsxs)(o.z,{className:"mt-4",onClick:()=>h(!0),children:[a.jsx(I.Z,{className:"w-4 h-4 mr-2"}),"Create Album"]})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,a.jsxs)(n.Zb,{className:"overflow-hidden group hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"aspect-video bg-gray-100 relative",children:[e.cover_photo_url?a.jsx("img",{src:e.cover_photo_url,alt:e.title,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:a.jsx(v.Z,{className:"w-8 h-8 text-gray-300"})}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100",children:[(0,a.jsxs)(o.z,{variant:"secondary",size:"sm",onClick:()=>c(e),children:[a.jsx(e6.Z,{className:"w-4 h-4 mr-2"}),"Manage"]}),(0,a.jsxs)(o.z,{size:"sm",onClick:async()=>{try{let s=await z.default.get(`/api/albums/detail/${e.id}`);m(s.data)}catch(e){B.toast.error("Could not load preview")}},children:[a.jsx(ed.Z,{className:"w-4 h-4 mr-2"}),"Play"]})]})]}),a.jsx(n.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold truncate",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.slides?.length||0," photos"]})]}),a.jsx(o.z,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-red-500",onClick:()=>j(e.id),children:a.jsx(V.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})}function sW({params:e}){let{user:s,loading:t}=(0,i.a)(),l=(0,M.useRouter)(),A=e.id,[O,R]=(0,r.useState)(null),[$,T]=(0,r.useState)(!0),[L,I]=(0,r.useState)(!1),[V,Y]=(0,r.useState)(0),[G,K]=(0,r.useState)(0),[H,X]=(0,r.useState)(null),[Q,J]=(0,r.useState)(!1),[ee,es]=(0,r.useState)("weblive"),[et,ea]=(0,r.useState)(!1),er=(0,M.useSearchParams)(),ei=(0,M.usePathname)(),eo=er.get("tab")||"stream",en=s?.subscription_plan==="monthly"||s?.subscription_plan==="yearly",ed=async()=>{try{T(!0),console.log("DEBUG: Loading wedding with ID:",A);let e=(await z.default.get(`/api/weddings/${A}`)).data;if(console.log("DEBUG: Wedding data received:",e),!e||"object"!=typeof e){console.error("Invalid wedding data received:",e),B.toast.error("Invalid wedding data received"),l.push("/dashboard");return}if(s&&s.id&&e.creator_id!==s.id){B.toast.error("You do not have permission to manage this wedding"),l.push("/dashboard");return}console.log("DEBUG: Theme settings before processing:",e.theme_settings),e.theme_settings&&"object"==typeof e.theme_settings?(e.theme_settings.studio_details&&"object"==typeof e.theme_settings.studio_details||(e.theme_settings.studio_details={studio_id:"",name:"",logo_url:"",contact:""}),e.theme_settings.custom_messages&&"object"==typeof e.theme_settings.custom_messages||(e.theme_settings.custom_messages={welcome_text:"Welcome to our big day",description:""}),Array.isArray(e.theme_settings.cover_photos)||(e.theme_settings.cover_photos=[])):(console.log("DEBUG: Creating default theme_settings"),e.theme_settings={theme_id:"floral_garden",custom_font:"Great Vibes",primary_color:"#f43f5e",secondary_color:"#a855f7",pre_wedding_video:"",cover_photos:[],studio_details:{studio_id:"",name:"",logo_url:"",contact:""},custom_messages:{welcome_text:"Welcome to our big day",description:""}}),console.log("DEBUG: Final theme_settings:",e.theme_settings),console.log("DEBUG: Cover photos count:",e.theme_settings.cover_photos.length),console.log("DEBUG: Theme assets:",e.theme_settings.theme_assets),R(e),I("live"===e.status),Y(e.viewers_count||0);let t=e.streaming_type||"weblive";console.log("DEBUG: Wedding streaming_type:",e.streaming_type),console.log("DEBUG: Setting localStreamingType to:",t),console.log("DEBUG: skipStreamingTypeUpdate:",et),et?ea(!1):es(t)}catch(s){console.error("Error loading wedding:",s);let e=s.response?.data?.detail||s.message||"Failed to load wedding details";B.toast.error(e),(s.response?.status===401||s.response?.status===403)&&l.push("/dashboard")}finally{T(!1)}},ec=(e,s)=>{navigator.clipboard.writeText(e),B.toast.success(`${s} copied to clipboard!`)},eu=async()=>{try{let e=await z.default.get(`/api/weddings/${A}/settings`);X(e.data)}catch(e){console.error("Error loading settings:",e)}},em=async(e,s)=>{try{J(!0),await z.default.put(`/api/weddings/${A}/settings`,{[e]:s}),B.toast.success("Settings updated"),eu()}catch(e){console.error("Error updating settings:",e),B.toast.error("Failed to update settings")}finally{J(!1)}};if(t||$)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50 flex items-center justify-center",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-rose-500"})});if(!O)return null;let ep=`${window.location.origin}/weddings/${A}`;return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-purple-50",children:[a.jsx("nav",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200 sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(P.default,{href:"/dashboard",children:(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",children:[a.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Dashboard"]})}),a.jsx(u.Z,{orientation:"vertical",className:"h-6"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"bg-gradient-to-r from-rose-500 to-purple-600 p-2 rounded-lg",children:a.jsx(x.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-lg font-bold",children:"Manage Wedding"}),a.jsx("p",{className:"text-xs text-gray-600",children:O.title})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[O.is_locked&&(0,a.jsxs)(c.C,{variant:"destructive",className:"gap-1",children:[a.jsx(g.Z,{className:"w-3 h-3"}),"Locked"]}),a.jsx(c.C,{variant:L?"default":"secondary",className:L?"bg-red-500 animate-pulse":"",children:L?"LIVE":O.status}),a.jsx(P.default,{href:`/weddings/${A}`,target:"_blank",children:(0,a.jsxs)(o.z,{variant:"outline",size:"sm",children:[a.jsx(f.Z,{className:"w-4 h-4 mr-2"}),"View Public Page"]})})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:`space-y-6 ${"stream"===eo?"lg:col-span-2":"lg:col-span-3"}`,children:[O.is_locked&&(0,a.jsxs)(m.bZ,{variant:"destructive",children:[a.jsx(y.Z,{className:"h-4 w-4"}),(0,a.jsxs)(m.X,{children:["This wedding is locked because your premium subscription has expired.",a.jsx(P.default,{href:"/pricing",className:"font-semibold underline ml-1",children:"Upgrade to Premium"})," to unlock and start streaming."]})]}),(0,a.jsxs)(d.mQ,{value:eo,onValueChange:e=>{let s=new URLSearchParams(er);s.set("tab",e),l.push(`${ei}?${s.toString()}`)},className:"w-full",children:[(0,a.jsxs)(d.dr,{className:"grid w-full grid-cols-5",children:[(0,a.jsxs)(d.SP,{value:"stream",children:[a.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Stream"]}),(0,a.jsxs)(d.SP,{value:"stream-view",children:[a.jsx(j.Z,{className:"w-4 h-4 mr-2"}),"Stream View"]}),(0,a.jsxs)(d.SP,{value:"layout",children:[a.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Layout"]}),(0,a.jsxs)(d.SP,{value:"media",children:[a.jsx(v.Z,{className:"w-4 h-4 mr-2"}),"Media"]}),(0,a.jsxs)(d.SP,{value:"settings",children:[a.jsx(N.Z,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),(0,a.jsxs)(d.nU,{value:"stream",className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Streaming Type"}),a.jsx(n.SZ,{children:"Choose between WebLive custom RTMP or YouTube Live Streaming"})]}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"streamingType",value:"weblive",checked:"weblive"===ee,onChange:async e=>{if("live"===O.status||"paused"===O.status){B.toast.error("Cannot change streaming type during an active stream");return}es("weblive");try{let e=await z.default.put(`/api/weddings/${A}/streaming-type?streaming_type=weblive`);console.log("DEBUG: Streaming type update response:",e.data),B.toast.success("Switched to WebLive Streaming"),ea(!0),console.log("DEBUG: API call successful, keeping local state")}catch(e){console.error("DEBUG: Failed to update streaming type:",e),B.toast.error(e.response?.data?.detail||"Failed to update streaming type"),es(ee)}},disabled:"live"===O.status||"paused"===O.status,className:"w-4 h-4 text-rose-500"}),a.jsx("span",{className:"text-sm font-medium",children:"WebLive Streaming (Default)"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"streamingType",value:"youtube",checked:"youtube"===ee,onChange:async e=>{if("live"===O.status||"paused"===O.status){B.toast.error("Cannot change streaming type during an active stream");return}console.log("DEBUG: Changing streaming type from",ee,"to youtube"),es("youtube");try{let e=await z.default.put(`/api/weddings/${A}/streaming-type?streaming_type=youtube`);console.log("DEBUG: Streaming type update response:",e.data),B.toast.success("Switched to YouTube Live Streaming"),ea(!0),console.log("DEBUG: API call successful, keeping local state")}catch(e){console.error("DEBUG: Failed to update streaming type:",e),B.toast.error(e.response?.data?.detail||"Failed to update streaming type"),es(ee)}},disabled:"live"===O.status||"paused"===O.status,className:"w-4 h-4 text-red-600"}),a.jsx("span",{className:"text-sm font-medium",children:"YouTube Live Streaming"})]})]}),("live"===O.status||"paused"===O.status)&&(0,a.jsxs)(m.bZ,{children:[a.jsx(g.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-sm",children:"Streaming type is locked during an active stream. End the stream to switch modes."})]})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Live Stream Status"]}),a.jsx(n.SZ,{children:"Manage your wedding stream lifecycle - OBS controls stream presence, you control when it ends"})]}),(0,a.jsxs)(n.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${"live"===O.status?"bg-red-500 animate-pulse":"paused"===O.status?"bg-yellow-500":"bg-gray-400"}`}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:"live"===O.status?"LIVE":"paused"===O.status?"PAUSED":"ENDED"}),a.jsx("p",{className:"text-sm text-gray-500",children:"live"===O.status?"Streaming in progress":"paused"===O.status?"Stream paused - waiting for OBS reconnect":"Stream has ended"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Viewers"}),a.jsx("p",{className:"text-2xl font-bold",children:V})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-blue-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${L?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:"text-sm font-medium",children:"OBS Status"})]}),a.jsx("p",{className:"text-xs text-gray-600",children:L?"OBS is connected and streaming":"OBS is disconnected"}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"OBS start/stop controls stream presence only"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-purple-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(_.Z,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Viewer Experience"})]}),a.jsx("p",{className:"text-xs text-gray-600",children:"live"===O.status?"Viewers see live stream":"paused"===O.status?'Viewers see "Be Right Back" screen':"Viewers see replay and highlights"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-rose-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(N.Z,{className:"w-4 h-4 text-rose-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Host Control"})]}),a.jsx("p",{className:"text-xs text-gray-600",children:"Only you can end the live stream"})]})]}),("live"===O.status||"paused"===O.status)&&(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)(o.z,{variant:"destructive",size:"lg",className:"w-full",onClick:async()=>{if(confirm("Are you sure you want to end the live stream? This will finalize the recording and show replay to viewers. This action cannot be undone."))try{T(!0),await ed(),await z.default.post(`/api/weddings/${A}/live/end`),B.toast.success("Live stream ended successfully! Recording is being processed."),ed()}catch(e){console.error("Error ending live stream:",e),e.response?.data?.detail?.includes("Cannot end from")?B.toast.error("Cannot end live stream: Stream is not currently active"):B.toast.error("Failed to end live stream")}finally{T(!1)}},disabled:$,children:[a.jsx(p.Z,{className:`w-4 h-4 mr-2 ${$?"animate-spin":""}`}),"End Live Stream"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"This will merge recordings, upload to CDN, and show replay to viewers"})]}),"ended"===O.status&&a.jsx("div",{className:"pt-4 border-t",children:(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsx(w.Z,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),a.jsx("p",{className:"font-semibold text-green-800",children:"Stream Successfully Ended"}),a.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Recording has been processed and is available for replay"}),O.recording_url&&a.jsx(o.z,{variant:"outline",className:"mt-3",asChild:!0,children:(0,a.jsxs)("a",{href:O.recording_url,target:"_blank",children:[a.jsx(Play,{className:"w-4 h-4 mr-2"}),"View Recording"]})})]})})]})]}),"weblive"===ee&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"WebLive - RTMP Credentials"}),a.jsx(n.SZ,{children:"Use these credentials in OBS Studio or your streaming software"})]}),a.jsx(n.aY,{className:"space-y-4",children:O.stream_credentials?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Server URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:O.stream_credentials.rtmp_url,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ec(O.stream_credentials.rtmp_url,"Server URL"),children:a.jsx(k.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"password",value:O.stream_credentials.stream_key,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ec(O.stream_credentials.stream_key,"Stream Key"),children:a.jsx(k.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(m.bZ,{children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-sm",children:"Keep your stream key private! Anyone with this key can stream to your wedding."})]})]}):a.jsx("p",{className:"text-sm text-gray-600",children:"Loading credentials..."})})]}),"youtube"===ee&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"YouTube Account"}),a.jsx(n.SZ,{children:"Connect your YouTube account to stream live"})]}),a.jsx(n.aY,{className:"space-y-4",children:O.youtube_settings?.auth_connected?(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-green-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(w.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold text-green-800",children:"YouTube Connected"}),a.jsx("p",{className:"text-sm text-green-600",children:"Ready to stream"})]})]}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("Are you sure you want to disconnect YouTube?"))try{await z.default.get(`/api/youtube/disconnect/${A}`),B.toast.success("YouTube disconnected"),ed()}catch(e){B.toast.error("Failed to disconnect YouTube")}},children:"Disconnect"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(m.bZ,{children:a.jsx(m.X,{children:"Connect your YouTube account to enable live streaming to your YouTube channel"})}),(0,a.jsxs)(o.z,{onClick:async()=>{try{T(!0);let e=await z.default.post("/api/youtube/connect",{wedding_id:A});sessionStorage.setItem("youtube_state",e.data.state),sessionStorage.setItem("youtube_wedding_id",A),window.location.href=e.data.oauth_url}catch(e){B.toast.error("Failed to initiate YouTube connection"),T(!1)}},disabled:$,className:"w-full bg-red-600 hover:bg-red-700",children:[$?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Connect YouTube Account"]})]})})]}),O.youtube_settings?.auth_connected&&O.youtube_settings?.broadcast_id&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"YouTube - RTMP Credentials"}),a.jsx(n.SZ,{children:"Use these credentials in OBS Studio to stream to YouTube"})]}),a.jsx(n.aY,{className:"space-y-4",children:O.stream_credentials&&O.youtube_settings?.stream_id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Stream Server URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:O.stream_credentials.rtmp_url||"rtmp://a.rtmp.youtube.com/live2",readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>ec(O.stream_credentials.rtmp_url||"rtmp://a.rtmp.youtube.com/live2","Server URL"),children:a.jsx(k.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Stream Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"password",value:O.stream_credentials.stream_key||"",readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>{O.stream_credentials?.stream_key?ec(O.stream_credentials.stream_key,"Stream Key"):B.toast.error("Stream key not available")},children:a.jsx(k.Z,{className:"w-4 h-4"})})]})]}),O.youtube_settings?.youtube_video_url&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"YouTube Video URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:O.youtube_settings.youtube_video_url,readOnly:!0,className:"flex-1 px-3 py-2 border rounded-md bg-gray-50 font-mono text-sm"}),a.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>window.open(O.youtube_settings.youtube_video_url,"_blank"),children:a.jsx(f.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)(m.bZ,{children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx(m.X,{className:"text-sm",children:"Stream to YouTube using these credentials. Your stream will be visible on your YouTube channel."})]})]}):(0,a.jsxs)("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"No broadcast created yet"}),(0,a.jsxs)(o.z,{onClick:async()=>{try{T(!0),await z.default.post(`/api/youtube/create-broadcast/${A}`),B.toast.success("YouTube broadcast created successfully"),ed()}catch(e){B.toast.error(e.response?.data?.detail||"Failed to create broadcast")}finally{T(!1)}},disabled:$,children:[$?a.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Create YouTube Broadcast"]})]})})]}),O.youtube_settings?.auth_connected&&O.youtube_settings?.broadcast_id&&a.jsx(eV,{weddingId:A,wedding:O,onStatusChange:ed}),O.youtube_settings?.auth_connected&&a.jsx(eG,{weddingId:A,wedding:O})]}),a.jsx(D.Z,{weddingId:A,isPremium:en,isLive:L}),a.jsx(W,{weddingId:A,isPremium:en,rtmpUrl:O?.stream_credentials?.rtmp_url}),L&&a.jsx(eF.Z,{weddingId:A})]}),(0,a.jsxs)(d.nU,{value:"stream-view",className:"space-y-6",children:[a.jsx(n.Zb,{children:(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Stream View - Multi-Camera & Music Control"]}),a.jsx(n.SZ,{children:"Manage cameras and control music/audio for your live stream"})]})}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[a.jsx("div",{className:"space-y-6",children:a.jsx(W,{weddingId:A,isPremium:en,rtmpUrl:O?.stream_credentials?.rtmp_url})}),a.jsx("div",{children:a.jsx(e3,{weddingId:A})})]})]}),(0,a.jsxs)(d.nU,{value:"layout",className:"space-y-6",children:[a.jsx(eK,{weddingId:A,currentTemplateId:O?.template_assignment?.template_id,onTemplateAssigned:()=>{B.toast.success("Template assigned! Your wedding data will be automatically populated."),ed()}}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-5 h-5"}),"Wedding Layout Customization"]}),a.jsx(n.SZ,{children:"Select a layout structure, upload photos by category, and customize borders & styles"})]}),a.jsx(n.aY,{children:a.jsx("p",{className:"text-sm text-gray-600",children:"Choose your layout structure and customize photos, colors, fonts, and borders below."})})]}),a.jsx(eU,{weddingId:A,wedding:O})]}),a.jsx(d.nU,{value:"media",className:"space-y-6",children:(0,a.jsxs)(d.mQ,{defaultValue:"albums",className:"w-full",children:[(0,a.jsxs)(d.dr,{className:"w-full justify-start border-b rounded-none p-0 h-auto bg-transparent gap-6",children:[a.jsx(d.SP,{value:"albums",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-rose-500 data-[state=active]:bg-transparent px-0 py-2",children:"Albums & Slideshows"}),a.jsx(d.SP,{value:"gallery",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-rose-500 data-[state=active]:bg-transparent px-0 py-2",children:"All Media Gallery"})]}),a.jsx(d.nU,{value:"albums",className:"mt-6",children:a.jsx(sG,{weddingId:A})}),(0,a.jsxs)(d.nU,{value:"gallery",className:"mt-6 space-y-6",children:[a.jsx(el,{weddingId:A,onFolderSelect:e=>{console.log("Selected folder:",e)}}),a.jsx(U,{weddingId:A,onUploadComplete:()=>{K(e=>e+1),B.toast.success("Media uploaded successfully!")}}),a.jsx(E.Z,{weddingId:A,isCreator:!0},G)]})]})}),(0,a.jsxs)(d.nU,{value:"settings",className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Wedding Details"})}),a.jsx(n.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Couple"}),(0,a.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(S.Z,{className:"w-5 h-5 text-rose-500"}),O.bride_name," & ",O.groom_name]})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date & Time"}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx(C.Z,{className:"w-4 h-4 text-gray-400"}),(0,q.WU)(new Date(O.scheduled_date),"PPP")]}),a.jsx("p",{className:"text-sm text-gray-600 ml-6",children:(0,q.WU)(new Date(O.scheduled_date),"p")})]}),O.location&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Location"}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx(Z.Z,{className:"w-4 h-4 text-gray-400"}),O.location]})]})]}),O.description&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),a.jsx("p",{className:"text-gray-700 mt-1",children:O.description})]})]})]})})]}),H&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Media & Access Settings"}),a.jsx(n.SZ,{children:"Control how guests interact with your wedding content"})]}),(0,a.jsxs)(n.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Auto Delete Media"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Automatically delete media after a specified period"})]}),a.jsx("button",{onClick:()=>em("auto_delete_media",!H.auto_delete_media),disabled:Q,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${H.auto_delete_media?"bg-rose-500":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${H.auto_delete_media?"translate-x-6":"translate-x-1"}`})})]}),H.auto_delete_media&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Delete after (days)"}),a.jsx("input",{type:"number",min:"1",max:"365",value:H.auto_delete_days,onChange:e=>em("auto_delete_days",parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-md"})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Enable Download"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Allow guests to download photos and videos"})]}),a.jsx("button",{onClick:()=>em("enable_download",!H.enable_download),disabled:Q,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${H.enable_download?"bg-rose-500":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${H.enable_download?"translate-x-6":"translate-x-1"}`})})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Enable Sharing/Embed"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Allow guests to share wedding page and embed media"})]}),a.jsx("button",{onClick:()=>em("enable_sharing",!H.enable_sharing),disabled:Q,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${H.enable_sharing?"bg-rose-500":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${H.enable_sharing?"translate-x-6":"translate-x-1"}`})})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-medium",children:"Viewer Limit"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Maximum number of concurrent viewers (leave empty for unlimited)"})]})}),a.jsx("input",{type:"number",min:"0",placeholder:"Unlimited",value:H.viewer_limit||"",onChange:e=>em("viewer_limit",e.target.value?parseInt(e.target.value):null),className:"w-full px-3 py-2 border rounded-md"})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Playback Quality Options"}),a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Quality options available to viewers"}),(0,a.jsxs)("select",{value:H.playback_quality,onChange:e=>em("playback_quality",e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[a.jsx("option",{value:"auto",children:"Auto (Adaptive)"}),a.jsx("option",{value:"720p",children:"720p Maximum"}),a.jsx("option",{value:"1080p",children:"1080p Maximum"}),a.jsx("option",{value:"4K",children:"4K Maximum"})]})]})]})]})]})]})]}),"stream"===eo&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Share Your Wedding"})}),(0,a.jsxs)(n.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Public URL"}),a.jsx("p",{className:"text-sm font-mono break-all",children:ep})]}),(0,a.jsxs)(o.z,{variant:"outline",className:"w-full",onClick:()=>ec(ep,"Wedding URL"),children:[a.jsx(k.Z,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]}),a.jsx(F.Z,{token:s?.access_token||localStorage.getItem("token")}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-lg",children:"Quick Stats"})}),(0,a.jsxs)(n.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),a.jsx(c.C,{variant:L?"default":"secondary",children:O.status})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Current Viewers"}),a.jsx("span",{className:"font-semibold",children:V})]}),a.jsx(u.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Total Views"}),a.jsx("span",{className:"font-semibold",children:O.viewers_count||0})]})]})]})]})]})})]})}function sK({params:e}){return a.jsx(eE.w,{children:a.jsx(r.Suspense,{fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(p.Z,{className:"w-8 h-8 animate-spin text-rose-500"})}),children:a.jsx(sW,{params:e})})})}sI.displayName=s$.displayName,t(63096)},33019:(e,s,t)=>{"use strict";t.d(s,{Z:()=>p});var a=t(10326),r=t(17577);t(94464);var l=t(32316),i=t(50560),o=t(18729),n=t(55002),d=t(41291),c=t(17069),u=t(97134),m=t(90434);function p({token:e}){let[s,t]=(0,r.useState)(null),[p,h]=(0,r.useState)(!0);if(p)return(0,a.jsxs)(i.Zb,{children:[a.jsx(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[a.jsx(n.Z,{className:"w-5 h-5"}),"Storage"]})}),a.jsx(i.aY,{children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-2 bg-gray-200 rounded w-full"})]})})]});if(!s)return null;let{storage_used_formatted:x,storage_limit_formatted:g,percentage_used:f,is_over_limit:y,plan:j}=s,b=f>80&&!y;return(0,a.jsxs)(i.Zb,{className:y?"border-red-500":b?"border-yellow-500":"",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[a.jsx(n.Z,{className:"w-5 h-5"}),"Storage Usage"]}),(0,a.jsxs)(i.SZ,{children:[x," of ",g," used"]})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l.E,{value:Math.min(f,100),className:`h-3 ${y?"bg-red-100":b?"bg-yellow-100":"bg-gray-100"}`}),(0,a.jsxs)("p",{className:`text-sm text-right ${y?"text-red-600 font-semibold":b?"text-yellow-600":"text-gray-500"}`,children:[f.toFixed(1),"% used"]})]}),y&&(0,a.jsxs)(u.bZ,{variant:"destructive",children:[a.jsx(d.Z,{className:"h-4 w-4"}),a.jsx(u.X,{children:"You've exceeded your storage limit. Uploads are blocked until you upgrade or delete files."})]}),b&&(0,a.jsxs)(u.bZ,{className:"border-yellow-500 bg-yellow-50",children:[a.jsx(c.Z,{className:"h-4 w-4 text-yellow-600"}),a.jsx(u.X,{className:"text-yellow-800",children:"You're approaching your storage limit. Consider upgrading to Premium for 200GB storage."})]}),s.breakdown&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:[" Media items: ",s.breakdown.media_items]}),(0,a.jsxs)("p",{children:[" Photobooth photos: ",s.breakdown.photobooth_photos]}),(0,a.jsxs)("p",{children:[" Recordings: ",s.breakdown.recordings]})]}),"free"===j&&a.jsx(m.default,{href:"/pricing",children:a.jsx(o.z,{className:"w-full",variant:y?"destructive":"default",children:"Upgrade to Premium - 200GB Storage"})})]})]})}process.env.NEXT_PUBLIC_API_URL||process.env.NEXT_PUBLIC_BACKEND_URL},74839:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(10326),r=t(17577),l=t(42106),i=t(12108),o=t(74030);function n({weddingData:e={},layoutConfig:s={},onEnter:t}){let[n,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)("16:9"),{bride_name:m="",groom_name:p="",event_date:h="",event_time:x="",venue:g=""}=e,{font:f="Playfair Display",primaryColor:y="#1e3a8a",couplePhoto:j=null,preciousMoments:b=[],studioDetails:v={},preWeddingVideo:N=null,borders:_={},borderMasks:w={},templateVideoWeddingId:k=null,hasTemplateVideo:S=!1}=s,C={hidden:{y:40,opacity:0},visible:{y:0,opacity:1,transition:{duration:.8}}};return n?(0,a.jsxs)("div",{className:"min-h-screen",style:{fontFamily:f,color:y},children:[S&&k&&a.jsx("section",{className:"w-full min-h-screen flex items-center justify-center backdrop-blur-sm p-4 md:p-8",children:a.jsx("div",{className:`w-full mx-auto transition-all duration-300 ${"9:16"===c?"max-w-md aspect-[9/16]":"max-w-6xl aspect-[16/9]"}`,children:a.jsx(o.Z,{weddingId:k,className:"w-full h-full"})})}),j?.url&&a.jsx("section",{className:"w-full min-h-[50vh] md:min-h-[60vh] py-8 md:py-16 flex items-center justify-center",children:a.jsx(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-6xl mx-auto px-4 md:px-8",children:a.jsx("div",{className:"relative w-full aspect-[16/9] md:aspect-[21/9] overflow-hidden",children:a.jsx(i.Z,{src:j.url,alt:"Couple",maskUrl:_?.couple,maskData:w?.couple,aspectRatio:"custom",className:"w-full h-full object-cover"})})})}),N&&a.jsx("section",{className:"w-full min-h-[50vh] md:min-h-[60vh] backdrop-blur-sm py-8 md:py-16 flex items-center justify-center",children:a.jsx(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-6xl mx-auto px-4 md:px-8",children:a.jsx("div",{className:"aspect-video w-full bg-black/30 rounded-lg overflow-hidden shadow-2xl",children:a.jsx("iframe",{src:N,className:"w-full h-full",allowFullScreen:!0,title:"Wedding Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})})})}),v?.default_image_url&&a.jsx("section",{className:"w-full min-h-[40vh] md:min-h-[50vh] backdrop-blur-sm py-12 md:py-20 flex items-center justify-center",children:a.jsx(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-5xl mx-auto px-4 md:px-8 text-center",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-8 md:p-16 shadow-2xl border border-white/20",children:[a.jsx("img",{src:v.default_image_url,className:"w-full max-w-md mx-auto mb-6 rounded-lg filter drop-shadow-lg object-cover",alt:"Studio"}),a.jsx("h3",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold uppercase tracking-widest mb-4",children:"Stand Out With World-Class Video Production"}),a.jsx("p",{className:"text-white/90 text-sm md:text-base lg:text-lg font-light",children:"Your Story Deserves To Be Heard"})]})})}),b?.length>0&&a.jsx("section",{className:"w-full min-h-screen backdrop-blur-sm py-12 md:py-20",children:(0,a.jsxs)(l.E.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:C,className:"w-full max-w-7xl mx-auto px-4 md:px-8",children:[a.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12 md:mb-16 text-white drop-shadow-lg",style:{color:y},children:"Precious Moments"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 lg:gap-10",children:b.map((e,s)=>a.jsx(l.E.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{delay:.1*s,duration:.5},className:"relative group",children:(0,a.jsxs)("div",{className:"bg-white/95 backdrop-blur-md p-3 md:p-4 shadow-xl rounded-sm hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",children:[a.jsx("div",{className:"aspect-square overflow-hidden bg-gray-100",children:a.jsx(i.Z,{src:e.url,maskUrl:_?.preciousMoments,maskData:w?.preciousMoments,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",aspectRatio:"1:1"})}),a.jsx("div",{className:"h-8 md:h-10 bg-white"})]})},s))})]})}),a.jsx("footer",{className:"w-full bg-black/50 backdrop-blur-md text-white py-8 text-center",children:a.jsx("p",{className:"text-sm md:text-base",children:"\xa9 2025 - Crafted with "})})]}):null}},38705:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var a=t(10326),r=t(17577),l=t(46084);let i=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));i.displayName="Input"},79349:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var a=t(10326),r=t(17577),l=t(29152),i=t(79360),o=t(46084);let n=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},t)=>a.jsx(l.f,{ref:t,className:(0,o.cn)(n(),e),...s}));d.displayName=l.f.displayName},32316:(e,s,t)=>{"use strict";t.d(s,{E:()=>o});var a=t(10326),r=t(17577),l=t(70612),i=t(46084);let o=r.forwardRef(({className:e,value:s,...t},r)=>a.jsx(l.fC,{ref:r,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...t,children:a.jsx(l.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));o.displayName=l.fC.displayName},99597:(e,s,t)=>{"use strict";t.d(s,{B:()=>n,x:()=>o});var a=t(10326),r=t(17577),l=t(16999),i=t(46084);let o=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.fC,{ref:r,className:(0,i.cn)("relative overflow-hidden",e),...t,children:[a.jsx(l.l_,{className:"h-full w-full rounded-[inherit]",children:s}),a.jsx(n,{}),a.jsx(l.Ns,{})]}));o.displayName=l.fC.displayName;let n=r.forwardRef(({className:e,orientation:s="vertical",...t},r)=>a.jsx(l.gb,{ref:r,orientation:s,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...t,children:a.jsx(l.q4,{className:"relative flex-1 rounded-full bg-border"})}));n.displayName=l.gb.displayName},240:(e,s,t)=>{"use strict";t.d(s,{Bw:()=>x,Ph:()=>c,Ql:()=>g,i4:()=>m,ki:()=>u});var a=t(10326),r=t(17577),l=t(8845),i=t(941),o=t(96633),n=t(32933),d=t(46084);let c=l.fC;l.ZA;let u=l.B4,m=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.xz,{ref:r,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap bg-transparent px-0 py-0 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-0 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 [&>span]:border-none [&>span]:outline-none [&>span]:focus:border-none [&>span]:focus:outline-none [&>span]:focus:ring-0 [&>span]:focus:ring-offset-0 [&>span]:!border-0 [&>span]:!outline-none [&>span]:!ring-0",e),...t,children:[s,a.jsx(l.JO,{asChild:!0,children:a.jsx(i.Z,{className:"h-4 w-4 opacity-50 ml-1"})})]}));m.displayName=l.xz.displayName;let p=r.forwardRef(({className:e,...s},t)=>a.jsx(l.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(o.Z,{className:"h-4 w-4"})}));p.displayName=l.u_.displayName;let h=r.forwardRef(({className:e,...s},t)=>a.jsx(l.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(i.Z,{className:"h-4 w-4"})}));h.displayName=l.$G.displayName;let x=r.forwardRef(({className:e,children:s,position:t="popper",...r},i)=>a.jsx(l.h_,{children:(0,a.jsxs)(l.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(p,{}),a.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(h,{})]})}));x.displayName=l.VY.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",e),...s})).displayName=l.__.displayName;let g=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none border-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>span]:border-none [&>span]:outline-none [&>span]:!border-0 [&>span]:!outline-none",e),...t,children:[a.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(l.wU,{children:a.jsx(n.Z,{className:"h-4 w-4"})})}),a.jsx(l.eT,{children:s})]}));g.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},64745:(e,s,t)=>{"use strict";t.d(s,{i:()=>o});var a=t(10326),r=t(17577),l=t(87131),i=t(46084);let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsxs)(l.fC,{ref:t,className:(0,i.cn)("relative flex w-full touch-none select-none items-center",e),...s,children:[a.jsx(l.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:a.jsx(l.e6,{className:"absolute h-full bg-primary"})}),a.jsx(l.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));o.displayName=l.fC.displayName},63096:(e,s,t)=>{"use strict";t.d(s,{r:()=>o});var a=t(10326),r=t(17577),l=t(41959),i=t(46084);let o=r.forwardRef(({className:e,...s},t)=>a.jsx(l.fC,{className:(0,i.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:t,children:a.jsx(l.bU,{className:(0,i.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));o.displayName=l.fC.displayName},92454:(e,s,t)=>{"use strict";t.d(s,{g:()=>i});var a=t(10326),r=t(17577),l=t(46084);let i=r.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));i.displayName="Textarea"},15361:(e,s,t)=>{"use strict";function a(e){if(!e||"string"!=typeof e)return null;let s=(e=e.trim()).match(/(?:youtube\.com\/watch\?v=|youtube\.com\/watch\?.*&v=)([a-zA-Z0-9_-]{11})/);if(s)return s[1];let t=e.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/);if(t)return t[1];let a=e.match(/youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/);if(a)return a[1];let r=e.match(/youtube\.com\/v\/([a-zA-Z0-9_-]{11})/);return r?r[1]:null}function r(e,s={}){let t=a(e);if(!t)return null;let{autoplay:r=0,mute:l=0,controls:i=1,modestbranding:o=1,rel:n=0}=s,d=new URLSearchParams({autoplay:r.toString(),mute:l.toString(),controls:i.toString(),modestbranding:o.toString(),rel:n.toString()});return`https://www.youtube.com/embed/${t}?${d.toString()}`}function l(e){return null!==a(e)}t.d(s,{Tc:()=>r,yk:()=>l})},59734:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},28932:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},47492:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},65983:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},99598:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]])},88307:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},69508:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},17069:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},63685:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},3634:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},76044:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var a=t(68570);let r=(0,a.createProxy)(String.raw`/app/frontend/app/weddings/manage/[id]/page.js`),{__esModule:l,$$typeof:i}=r;r.default;let o=(0,a.createProxy)(String.raw`/app/frontend/app/weddings/manage/[id]/page.js#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,168,434,2106,1961,6451,7882,3789,8907,4596,5014,7131,5830,7454,9622,1717,4342,6565,4372,1973,3023,7180,4620,3722,5807,5459,3428,9357],()=>t(15910));module.exports=a})();