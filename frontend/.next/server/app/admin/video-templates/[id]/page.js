(()=>{var e={};e.id=2609,e.ids=[2609],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},86996:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),a(33140),a(73603),a(35866);var i=a(23191),s=a(88716),l=a(37922),n=a.n(l),r=a(95231),o={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>r[e]);a.d(t,o);let d=["",{children:["admin",{children:["video-templates",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,33140)),"/app/frontend/app/admin/video-templates/[id]/page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,73603)),"/app/frontend/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/frontend/app/admin/video-templates/[id]/page.js"],u="/admin/video-templates/[id]/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/video-templates/[id]/page",pathname:"/admin/video-templates/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},37292:(e,t,a)=>{Promise.resolve().then(a.bind(a,50814))},50814:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eV});var i=a(10326),s=a(17577),l=a(35047),n=a(94464),r=a(84554),o=a.n(r),d=a(50560),c=a(18729),u=a(240),m=a(6917),p=a(77335),h=a(9815),x=a(93095),f=a(48051),g=a(55049),v=a(17124),y=a(65819),b=a(37125),j=a(82561),w="ScrollArea",[_,N]=(0,x.b)(w),[k,S]=_(w),C=s.forwardRef((e,t)=>{let{__scopeScrollArea:a,type:l="hover",dir:n,scrollHideDelay:r=600,...o}=e,[d,c]=s.useState(null),[u,m]=s.useState(null),[h,x]=s.useState(null),[g,y]=s.useState(null),[b,j]=s.useState(null),[w,_]=s.useState(0),[N,S]=s.useState(0),[C,T]=s.useState(!1),[E,P]=s.useState(!1),z=(0,f.e)(t,e=>c(e)),R=(0,v.gm)(n);return(0,i.jsx)(k,{scope:a,type:l,dir:R,scrollHideDelay:r,scrollArea:d,viewport:u,onViewportChange:m,content:h,onContentChange:x,scrollbarX:g,onScrollbarXChange:y,scrollbarXEnabled:C,onScrollbarXEnabledChange:T,scrollbarY:b,onScrollbarYChange:j,scrollbarYEnabled:E,onScrollbarYEnabledChange:P,onCornerWidthChange:_,onCornerHeightChange:S,children:(0,i.jsx)(p.WV.div,{dir:R,...o,ref:z,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});C.displayName=w;var T="ScrollAreaViewport",E=s.forwardRef((e,t)=>{let{__scopeScrollArea:a,children:l,nonce:n,...r}=e,o=S(T,a),d=s.useRef(null),c=(0,f.e)(t,d,o.onViewportChange);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,i.jsx)(p.WV.div,{"data-radix-scroll-area-viewport":"",...r,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,i.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});E.displayName=T;var P="ScrollAreaScrollbar",z=s.forwardRef((e,t)=>{let{forceMount:a,...l}=e,n=S(P,e.__scopeScrollArea),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:o}=n,d="horizontal"===e.orientation;return s.useEffect(()=>(d?r(!0):o(!0),()=>{d?r(!1):o(!1)}),[d,r,o]),"hover"===n.type?(0,i.jsx)(R,{...l,ref:t,forceMount:a}):"scroll"===n.type?(0,i.jsx)(M,{...l,ref:t,forceMount:a}):"auto"===n.type?(0,i.jsx)(D,{...l,ref:t,forceMount:a}):"always"===n.type?(0,i.jsx)(A,{...l,ref:t}):null});z.displayName=P;var R=s.forwardRef((e,t)=>{let{forceMount:a,...l}=e,n=S(P,e.__scopeScrollArea),[r,o]=s.useState(!1);return s.useEffect(()=>{let e=n.scrollArea,t=0;if(e){let a=()=>{window.clearTimeout(t),o(!0)},i=()=>{t=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",a),e.addEventListener("pointerleave",i),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",a),e.removeEventListener("pointerleave",i)}}},[n.scrollArea,n.scrollHideDelay]),(0,i.jsx)(h.z,{present:a||r,children:(0,i.jsx)(D,{"data-state":r?"visible":"hidden",...l,ref:t})})}),M=s.forwardRef((e,t)=>{var a,l;let{forceMount:n,...r}=e,o=S(P,e.__scopeScrollArea),d="horizontal"===e.orientation,c=K(()=>m("SCROLL_END"),100),[u,m]=(a="hidden",l={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},s.useReducer((e,t)=>l[e][t]??e,a));return s.useEffect(()=>{if("idle"===u){let e=window.setTimeout(()=>m("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(e)}},[u,o.scrollHideDelay,m]),s.useEffect(()=>{let e=o.viewport,t=d?"scrollLeft":"scrollTop";if(e){let a=e[t],i=()=>{let i=e[t];a!==i&&(m("SCROLL"),c()),a=i};return e.addEventListener("scroll",i),()=>e.removeEventListener("scroll",i)}},[o.viewport,d,m,c]),(0,i.jsx)(h.z,{present:n||"hidden"!==u,children:(0,i.jsx)(A,{"data-state":"hidden"===u?"hidden":"visible",...r,ref:t,onPointerEnter:(0,j.Mj)(e.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:(0,j.Mj)(e.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),D=s.forwardRef((e,t)=>{let a=S(P,e.__scopeScrollArea),{forceMount:l,...n}=e,[r,o]=s.useState(!1),d="horizontal"===e.orientation,c=K(()=>{if(a.viewport){let e=a.viewport.offsetWidth<a.viewport.scrollWidth,t=a.viewport.offsetHeight<a.viewport.scrollHeight;o(d?e:t)}},10);return ee(a.viewport,c),ee(a.content,c),(0,i.jsx)(h.z,{present:l||r,children:(0,i.jsx)(A,{"data-state":r?"visible":"hidden",...n,ref:t})})}),A=s.forwardRef((e,t)=>{let{orientation:a="vertical",...l}=e,n=S(P,e.__scopeScrollArea),r=s.useRef(null),o=s.useRef(0),[d,c]=s.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=q(d.viewport,d.content),m={...l,sizes:d,onSizesChange:c,hasThumb:!!(u>0&&u<1),onThumbChange:e=>r.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function p(e,t){return function(e,t,a,i="ltr"){let s=H(a),l=t||s/2,n=a.scrollbar.paddingStart+l,r=a.scrollbar.size-a.scrollbar.paddingEnd-(s-l),o=a.content-a.viewport;return G([n,r],"ltr"===i?[0,o]:[-1*o,0])(e)}(e,o.current,d,t)}return"horizontal"===a?(0,i.jsx)(O,{...m,ref:t,onThumbPositionChange:()=>{if(n.viewport&&r.current){let e=X(n.viewport.scrollLeft,d,n.dir);r.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=p(e,n.dir))}}):"vertical"===a?(0,i.jsx)(I,{...m,ref:t,onThumbPositionChange:()=>{if(n.viewport&&r.current){let e=X(n.viewport.scrollTop,d);r.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=p(e))}}):null}),O=s.forwardRef((e,t)=>{let{sizes:a,onSizesChange:l,...n}=e,r=S(P,e.__scopeScrollArea),[o,d]=s.useState(),c=s.useRef(null),u=(0,f.e)(t,c,r.onScrollbarXChange);return s.useEffect(()=>{c.current&&d(getComputedStyle(c.current))},[c]),(0,i.jsx)(F,{"data-orientation":"horizontal",...n,ref:u,sizes:a,style:{bottom:0,left:"rtl"===r.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===r.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":H(a)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,a)=>{if(r.viewport){let i=r.viewport.scrollLeft+t.deltaX;e.onWheelScroll(i),function(e,t){return e>0&&e<t}(i,a)&&t.preventDefault()}},onResize:()=>{c.current&&r.viewport&&o&&l({content:r.viewport.scrollWidth,viewport:r.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Y(o.paddingLeft),paddingEnd:Y(o.paddingRight)}})}})}),I=s.forwardRef((e,t)=>{let{sizes:a,onSizesChange:l,...n}=e,r=S(P,e.__scopeScrollArea),[o,d]=s.useState(),c=s.useRef(null),u=(0,f.e)(t,c,r.onScrollbarYChange);return s.useEffect(()=>{c.current&&d(getComputedStyle(c.current))},[c]),(0,i.jsx)(F,{"data-orientation":"vertical",...n,ref:u,sizes:a,style:{top:0,right:"ltr"===r.dir?0:void 0,left:"rtl"===r.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":H(a)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,a)=>{if(r.viewport){let i=r.viewport.scrollTop+t.deltaY;e.onWheelScroll(i),function(e,t){return e>0&&e<t}(i,a)&&t.preventDefault()}},onResize:()=>{c.current&&r.viewport&&o&&l({content:r.viewport.scrollHeight,viewport:r.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Y(o.paddingTop),paddingEnd:Y(o.paddingBottom)}})}})}),[L,V]=_(P),F=s.forwardRef((e,t)=>{let{__scopeScrollArea:a,sizes:l,hasThumb:n,onThumbChange:r,onThumbPointerUp:o,onThumbPointerDown:d,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:m,onResize:h,...x}=e,v=S(P,a),[y,b]=s.useState(null),w=(0,f.e)(t,e=>b(e)),_=s.useRef(null),N=s.useRef(""),k=v.viewport,C=l.content-l.viewport,T=(0,g.W)(m),E=(0,g.W)(c),z=K(h,10);function R(e){_.current&&u({x:e.clientX-_.current.left,y:e.clientY-_.current.top})}return s.useEffect(()=>{let e=e=>{let t=e.target;y?.contains(t)&&T(e,C)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[k,y,C,T]),s.useEffect(E,[l,E]),ee(y,z),ee(v.content,z),(0,i.jsx)(L,{scope:a,scrollbar:y,hasThumb:n,onThumbChange:(0,g.W)(r),onThumbPointerUp:(0,g.W)(o),onThumbPositionChange:E,onThumbPointerDown:(0,g.W)(d),children:(0,i.jsx)(p.WV.div,{...x,ref:w,style:{position:"absolute",...x.style},onPointerDown:(0,j.Mj)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),_.current=y.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),R(e))}),onPointerMove:(0,j.Mj)(e.onPointerMove,R),onPointerUp:(0,j.Mj)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=N.current,v.viewport&&(v.viewport.style.scrollBehavior=""),_.current=null})})})}),$="ScrollAreaThumb",Z=s.forwardRef((e,t)=>{let{forceMount:a,...s}=e,l=V($,e.__scopeScrollArea);return(0,i.jsx)(h.z,{present:a||l.hasThumb,children:(0,i.jsx)(B,{ref:t,...s})})}),B=s.forwardRef((e,t)=>{let{__scopeScrollArea:a,style:l,...n}=e,r=S($,a),o=V($,a),{onThumbPositionChange:d}=o,c=(0,f.e)(t,e=>o.onThumbChange(e)),u=s.useRef(void 0),m=K(()=>{u.current&&(u.current(),u.current=void 0)},100);return s.useEffect(()=>{let e=r.viewport;if(e){let t=()=>{if(m(),!u.current){let t=J(e,d);u.current=t,d()}};return d(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[r.viewport,m,d]),(0,i.jsx)(p.WV.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:(0,j.Mj)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),a=e.clientX-t.left,i=e.clientY-t.top;o.onThumbPointerDown({x:a,y:i})}),onPointerUp:(0,j.Mj)(e.onPointerUp,o.onThumbPointerUp)})});Z.displayName=$;var U="ScrollAreaCorner",W=s.forwardRef((e,t)=>{let a=S(U,e.__scopeScrollArea),s=!!(a.scrollbarX&&a.scrollbarY);return"scroll"!==a.type&&s?(0,i.jsx)(Q,{...e,ref:t}):null});W.displayName=U;var Q=s.forwardRef((e,t)=>{let{__scopeScrollArea:a,...l}=e,n=S(U,a),[r,o]=s.useState(0),[d,c]=s.useState(0),u=!!(r&&d);return ee(n.scrollbarX,()=>{let e=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(e),c(e)}),ee(n.scrollbarY,()=>{let e=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(e),o(e)}),u?(0,i.jsx)(p.WV.div,{...l,ref:t,style:{width:r,height:d,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null});function Y(e){return e?parseInt(e,10):0}function q(e,t){let a=e/t;return isNaN(a)?0:a}function H(e){let t=q(e.viewport,e.content),a=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-a)*t,18)}function X(e,t,a="ltr"){let i=H(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-s,n=t.content-t.viewport,r=(0,b.u)(e,"ltr"===a?[0,n]:[-1*n,0]);return G([0,n],[0,l-i])(r)}function G(e,t){return a=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let i=(t[1]-t[0])/(e[1]-e[0]);return t[0]+i*(a-e[0])}}var J=(e,t=()=>{})=>{let a={left:e.scrollLeft,top:e.scrollTop},i=0;return function s(){let l={left:e.scrollLeft,top:e.scrollTop},n=a.left!==l.left,r=a.top!==l.top;(n||r)&&t(),a=l,i=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(i)};function K(e,t){let a=(0,g.W)(e),i=s.useRef(0);return s.useEffect(()=>()=>window.clearTimeout(i.current),[]),s.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(a,t)},[a,t])}function ee(e,t){let a=(0,g.W)(t);(0,y.b)(()=>{let t=0;if(e){let i=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(a)});return i.observe(e),()=>{window.cancelAnimationFrame(t),i.unobserve(e)}}},[e,a])}var et=a(46084);let ea=s.forwardRef(({className:e,children:t,...a},s)=>(0,i.jsxs)(C,{ref:s,className:(0,et.cn)("relative overflow-hidden",e),...a,children:[i.jsx(E,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(ei,{}),i.jsx(W,{})]}));ea.displayName=C.displayName;let ei=s.forwardRef(({className:e,orientation:t="vertical",...a},s)=>i.jsx(z,{ref:s,orientation:t,className:(0,et.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:i.jsx(Z,{className:"relative flex-1 rounded-full bg-border"})}));ei.displayName=z.displayName;var es=a(20835),el=a(79349),en=a(38705),er=a(64745),eo=a(21519),ed=a(1572),ec=a(31215);let eu=[{value:"bride_name",label:"Bride's Name"},{value:"groom_name",label:"Groom's Name"},{value:"bride_first_name",label:"Bride's First Name"},{value:"groom_first_name",label:"Groom's First Name"},{value:"couple_names",label:"Couple Names"},{value:"event_date",label:"Event Date (Day)"},{value:"event_date_full",label:"Event Date (Full)"},{value:"event_month",label:"Event Month"},{value:"event_year",label:"Event Year"},{value:"event_day",label:"Event Day"},{value:"event_time",label:"Event Time"},{value:"venue",label:"Venue"},{value:"venue_address",label:"Venue Address"},{value:"city",label:"City"},{value:"welcome_message",label:"Welcome Message"},{value:"description",label:"Description"},{value:"countdown_days",label:"Countdown Days"},{value:"custom_text_1",label:"Custom Text 1"},{value:"custom_text_2",label:"Custom Text 2"},{value:"custom_text_3",label:"Custom Text 3"},{value:"custom_text_4",label:"Custom Text 4"},{value:"custom_text_5",label:"Custom Text 5"}],em=[{value:"fade-in",label:"Fade In"},{value:"fade-out",label:"Fade Out"},{value:"slide-up",label:"Slide Up"},{value:"slide-down",label:"Slide Down"},{value:"slide-left",label:"Slide Left"},{value:"slide-right",label:"Slide Right"},{value:"scale-up",label:"Scale Up"},{value:"scale-down",label:"Scale Down"},{value:"zoom-in",label:"Zoom In"},{value:"bounce-in",label:"Bounce In"},{value:"bounce-out",label:"Bounce Out"},{value:"rotate-in",label:"Rotate In"},{value:"spin",label:"Spin"},{value:"typewriter",label:"Typewriter"},{value:"blur-in",label:"Blur In"},{value:"blur-out",label:"Blur Out"},{value:"fade-slide-up",label:"Fade + Slide Up"},{value:"scale-fade",label:"Scale + Fade"}],ep=["Playfair Display","Montserrat","Roboto","Open Sans","Lato","Arial","Helvetica","Times New Roman","Georgia","Courier New","Verdana","Trebuchet MS","Palatino","Garamond","Impact"],eh=[{value:"normal",label:"Normal"},{value:"bold",label:"Bold"},{value:"100",label:"Thin"},{value:"300",label:"Light"},{value:"500",label:"Medium"},{value:"700",label:"Bold"},{value:"900",label:"Black"}],ex=[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}],ef=[{value:"ease-in-out",label:"Ease In-Out"},{value:"ease-in",label:"Ease In"},{value:"ease-out",label:"Ease Out"},{value:"linear",label:"Linear"},{value:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",label:"Bounce"}];function eg({overlay:e,duration:t,currentTime:a,onUpdate:l,onSeek:n}){let[r,o]=(0,s.useState)({endpoint_key:e?.endpoint_key??"couple_names",label:e?.label??"Couple Names",placeholder_text:e?.placeholder_text??"Sample Text",position:e?.position??{x:50,y:50,alignment:"center",anchor_point:"center",unit:"percent"},dimensions:e?.dimensions??{width:50,height:null,unit:"percent"},timing:e?.timing??{start_time:0,end_time:t||10},styling:{font_family:e?.styling?.font_family??"Playfair Display",font_size:e?.styling?.font_size??72,font_weight:e?.styling?.font_weight??"bold",color:e?.styling?.color??"#ffffff",text_align:e?.styling?.text_align??"center",letter_spacing:e?.styling?.letter_spacing??2,line_height:e?.styling?.line_height??1.2,text_shadow:e?.styling?.text_shadow??"0 2px 4px rgba(0,0,0,0.3)",stroke:e?.styling?.stroke??{enabled:!1,color:"#000000",width:2}},animation:{type:e?.animation?.type??"fade-in",duration:e?.animation?.duration??1,easing:e?.animation?.easing??"ease-in-out",entrance:e?.animation?.entrance??{type:"fade-in",duration:1,easing:"ease-in-out"},exit:e?.animation?.exit??{type:"fade-out",duration:1,easing:"ease-in-out"}},responsive:e?.responsive??{mobile_font_size:48,mobile_position:{x:50,y:30,unit:"percent"}}}),[d,p]=(0,s.useState)({}),h=(0,s.useRef)(!1),x=e?.template?.reference_resolution||{width:1920,height:1080},f=e=>(e/(x.height||1080)*100).toFixed(2),g=(e,t)=>t&&0!==t?(e/t).toFixed(3):0,v=(e,t)=>t&&0!==t?(e/t).toFixed(3):0,y=(e,t)=>{o(a=>{let i={...a},s=e.split("."),l=i;for(let e=0;e<s.length-1;e++)l[s[e]]?l[s[e]]={...l[s[e]]}:l[s[e]]={},l=l[s[e]];return l[s[s.length-1]]=t,i}),p(a=>{let i={...a},s=e.split("."),l=i;for(let e=0;e<s.length-1;e++)l[s[e]]||(l[s[e]]={}),l=l[s[e]];return l[s[s.length-1]]=t,i}),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{j()},100)},b=(0,s.useRef)(null),j=async()=>{if(0===Object.keys(d).length)return;h.current=!0;let e={};void 0!==d.endpoint_key&&(e.endpoint_key=r.endpoint_key),void 0!==d.label&&(e.label=r.label),void 0!==d.placeholder_text&&(e.placeholder_text=r.placeholder_text),d.position&&(e.position=r.position),d.dimensions&&(e.dimensions=r.dimensions),d.timing&&(e.timing=r.timing),d.responsive&&(e.responsive=r.responsive),void 0!==d.layer_index&&(e.layer_index=r.layer_index),d.styling&&(e.styling={font_family:r.styling.font_family,font_size:r.styling.font_size,font_weight:r.styling.font_weight,color:r.styling.color,text_align:r.styling.text_align,letter_spacing:r.styling.letter_spacing,line_height:r.styling.line_height,text_shadow:r.styling.text_shadow,stroke:{enabled:r.styling.stroke.enabled,color:r.styling.stroke.color,width:r.styling.stroke.width}}),d.animation&&(e.animation={type:r.animation.type,duration:r.animation.duration,easing:r.animation.easing,entrance:{type:r.animation.entrance.type,duration:r.animation.entrance.duration,easing:r.animation.entrance.easing},exit:{type:r.animation.exit.type,duration:r.animation.exit.duration,easing:r.animation.exit.easing}}),console.log("Saving overlay update with changes:",e);try{await l(e),p({})}finally{setTimeout(()=>{h.current=!1},100)}};return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[i.jsx(ed.Z,{className:"w-4 h-4 text-blue-500"}),"Configure Overlay"]}),i.jsx(c.z,{size:"sm",onClick:j,"data-testid":"save-overlay-btn",children:i.jsx(ec.Z,{className:"w-4 h-4"})})]}),(0,i.jsxs)("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[i.jsx("p",{className:"text-xs font-semibold text-blue-900 mb-1",children:"\uD83D\uDCA1 Interactive Controls"}),(0,i.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,i.jsxs)("li",{children:["• ",i.jsx("strong",{children:"Drag"})," the overlay on the video to reposition"]}),(0,i.jsxs)("li",{children:["• ",i.jsx("strong",{children:"Resize"})," using the corner/edge handles"]}),(0,i.jsxs)("li",{children:["• Hold ",i.jsx("strong",{children:"Shift"})," while resizing for proportional scaling"]})]})]}),i.jsx(ea,{className:"h-[calc(100vh-280px)]",children:(0,i.jsxs)(m.mQ,{defaultValue:"content",className:"w-full",children:[(0,i.jsxs)(m.dr,{className:"grid w-full grid-cols-4",children:[i.jsx(m.SP,{value:"content",children:"Content"}),i.jsx(m.SP,{value:"style",children:"Style"}),i.jsx(m.SP,{value:"timing",children:"Timing"}),i.jsx(m.SP,{value:"animation",children:"Animation"})]}),(0,i.jsxs)(m.nU,{value:"content",className:"space-y-4 mt-4",children:[(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Data Source"}),(0,i.jsxs)(u.Ph,{value:r.endpoint_key,onValueChange:e=>{y("endpoint_key",e);let t=eu.find(t=>t.value===e);t&&y("label",t.label)},children:[i.jsx(u.i4,{className:"mt-1","data-testid":"endpoint-select",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:eu.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Preview Text"}),i.jsx(en.I,{value:r.placeholder_text,onChange:e=>y("placeholder_text",e.target.value),placeholder:"Sample text for preview",className:"mt-1","data-testid":"placeholder-text-input"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This text will be shown in preview. Real wedding data will populate automatically."})]}),(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Position (Drag on video or use inputs)"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[(0,i.jsxs)("div",{children:[i.jsx(el._,{className:"text-xs",children:"X (%)"}),i.jsx(en.I,{type:"number",min:"0",max:"100",step:"0.1",value:r.position.x,onChange:e=>y("position.x",parseFloat(e.target.value)||0),className:"mt-1","data-testid":"position-x-input"})]}),(0,i.jsxs)("div",{children:[i.jsx(el._,{className:"text-xs",children:"Y (%)"}),i.jsx(en.I,{type:"number",min:"0",max:"100",step:"0.1",value:r.position.y,onChange:e=>y("position.y",parseFloat(e.target.value)||0),className:"mt-1","data-testid":"position-y-input"})]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Percentage-based positioning (0-100%). Center: (50%, 50%)"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(el._,{children:["Text Box Width: ",r.dimensions?.width||"Auto","%"]}),i.jsx(er.i,{value:[r.dimensions?.width||50],onValueChange:([e])=>y("dimensions.width",e),min:10,max:100,step:1,className:"mt-2","data-testid":"textbox-width-slider"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Controls text wrapping width. Text will automatically wrap to new lines when it exceeds this width."})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(el._,{children:["Text Box Height: ",r.dimensions?.height?`${r.dimensions.height}%`:"Auto"]}),i.jsx(er.i,{value:[r.dimensions?.height||20],onValueChange:([e])=>y("dimensions.height",e),min:5,max:100,step:1,className:"mt-2","data-testid":"textbox-height-slider"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Controls text box height. Set to control vertical space for text. Text will wrap within this box."})]})]}),(0,i.jsxs)(m.nU,{value:"style",className:"space-y-4 mt-4",children:[(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Font Family"}),(0,i.jsxs)(u.Ph,{value:r.styling.font_family,onValueChange:e=>y("styling.font_family",e),children:[i.jsx(u.i4,{className:"mt-1","data-testid":"font-family-select",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:ep.map(e=>i.jsx(u.Ql,{value:e,children:i.jsx("span",{style:{fontFamily:e},children:e})},e))})]}),(0,i.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md border",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Preview:"}),i.jsx("p",{className:"text-2xl font-medium",style:{fontFamily:r.styling.font_family},children:e?.placeholder_text||r.placeholder_text||"Sample Text"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(el._,{children:["Font Size: ",r.styling.font_size,"px (",f(r.styling.font_size),"% of video height)"]}),i.jsx(er.i,{value:[r.styling.font_size],onValueChange:([e])=>y("styling.font_size",e),min:12,max:200,step:1,className:"mt-2","data-testid":"font-size-slider"}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Font will automatically scale on all devices. ",f(r.styling.font_size),"% = ",r.styling.font_size,"px on ",x.height,"px video"]})]}),(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Font Weight"}),(0,i.jsxs)(u.Ph,{value:r.styling.font_weight,onValueChange:e=>y("styling.font_weight",e),children:[i.jsx(u.i4,{className:"mt-1",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:eh.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Text Color"}),(0,i.jsxs)("div",{className:"flex gap-2 mt-1",children:[i.jsx(en.I,{type:"color",value:r.styling.color,onChange:e=>{y("styling.color",e.target.value),setTimeout(()=>j(),10)},onInput:e=>{y("styling.color",e.target.value)},className:"w-20 h-10 p-1","data-testid":"text-color-input"}),i.jsx(en.I,{type:"text",value:r.styling.color,onChange:e=>{y("styling.color",e.target.value)},onBlur:()=>{j()},placeholder:"#ffffff",className:"flex-1"})]})]}),(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Text Alignment"}),(0,i.jsxs)(u.Ph,{value:r.styling.text_align,onValueChange:e=>y("styling.text_align",e),children:[i.jsx(u.i4,{className:"mt-1",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:ex.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(el._,{children:["Letter Spacing: ",r.styling.letter_spacing,"px (",g(r.styling.letter_spacing,r.styling.font_size),"em)"]}),i.jsx(er.i,{value:[r.styling.letter_spacing],onValueChange:([e])=>y("styling.letter_spacing",e),min:0,max:20,step:1,className:"mt-2"}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Responsive unit: ",g(r.styling.letter_spacing,r.styling.font_size),"em scales automatically with font size"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(el._,{children:["Line Height: ",r.styling.line_height]}),i.jsx(er.i,{value:[r.styling.line_height],onValueChange:([e])=>y("styling.line_height",e),min:.8,max:3,step:.1,className:"mt-2"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Already using responsive ratio (1.0 = normal, 1.5 = 1.5x spacing). Scales automatically with all screen sizes."})]}),(0,i.jsxs)("div",{className:"border-t pt-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(el._,{children:"Text Stroke/Outline"}),i.jsx(eo.r,{checked:r.styling.stroke.enabled,onCheckedChange:e=>y("styling.stroke.enabled",e),"data-testid":"stroke-enabled-switch"})]}),r.styling.stroke.enabled&&(0,i.jsxs)("div",{className:"space-y-3 pl-4 border-l-2 border-blue-200",children:[(0,i.jsxs)("div",{children:[i.jsx(el._,{className:"text-xs",children:"Stroke Color"}),(0,i.jsxs)("div",{className:"flex gap-2 mt-1",children:[i.jsx(en.I,{type:"color",value:r.styling.stroke.color,onChange:e=>y("styling.stroke.color",e.target.value),className:"w-16 h-8 p-1"}),i.jsx(en.I,{type:"text",value:r.styling.stroke.color,onChange:e=>y("styling.stroke.color",e.target.value),className:"flex-1"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(el._,{className:"text-xs",children:["Stroke Width: ",r.styling.stroke.width,"px (",v(r.styling.stroke.width,r.styling.font_size),"em)"]}),i.jsx(er.i,{value:[r.styling.stroke.width],onValueChange:([e])=>y("styling.stroke.width",e),min:1,max:10,step:1,className:"mt-2"}),(0,i.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[v(r.styling.stroke.width,r.styling.font_size),"em scales proportionally with font size"]})]})]})]})]}),(0,i.jsxs)(m.nU,{value:"timing",className:"space-y-4 mt-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(el._,{children:["Start Time: ",ev(r.timing.start_time)]}),i.jsx(er.i,{value:[r.timing.start_time],onValueChange:([e])=>y("timing.start_time",e),max:t||100,step:.1,className:"mt-2","data-testid":"start-time-slider"}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>{y("timing.start_time",a),n(a)},className:"mt-2 w-full",children:["Set to Current Time (",ev(a),")"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(el._,{children:["End Time: ",ev(r.timing.end_time)]}),i.jsx(er.i,{value:[r.timing.end_time],onValueChange:([e])=>y("timing.end_time",e),max:t||100,step:.1,className:"mt-2","data-testid":"end-time-slider"}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>{y("timing.end_time",a),n(a)},className:"mt-2 w-full",children:["Set to Current Time (",ev(a),")"]})]}),i.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,i.jsxs)("p",{className:"text-xs text-blue-900",children:[i.jsx("strong",{children:"Duration:"})," ",ev(r.timing.end_time-r.timing.start_time)]})})]}),(0,i.jsxs)(m.nU,{value:"animation",className:"space-y-4 mt-4",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-medium text-sm",children:"Entrance Animation"}),(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Animation Type"}),(0,i.jsxs)(u.Ph,{value:r.animation.entrance.type,onValueChange:e=>y("animation.entrance.type",e),children:[i.jsx(u.i4,{className:"mt-1","data-testid":"entrance-animation-select",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:em.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(el._,{children:["Duration: ",r.animation.entrance.duration,"s"]}),i.jsx(er.i,{value:[r.animation.entrance.duration],onValueChange:([e])=>y("animation.entrance.duration",e),min:.1,max:5,step:.1,className:"mt-2"})]}),(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Easing"}),(0,i.jsxs)(u.Ph,{value:r.animation.entrance.easing,onValueChange:e=>y("animation.entrance.easing",e),children:[i.jsx(u.i4,{className:"mt-1",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:ef.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,i.jsxs)("div",{className:"border-t pt-4 space-y-4",children:[i.jsx("h4",{className:"font-medium text-sm",children:"Exit Animation"}),(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Animation Type"}),(0,i.jsxs)(u.Ph,{value:r.animation.exit.type,onValueChange:e=>y("animation.exit.type",e),children:[i.jsx(u.i4,{className:"mt-1","data-testid":"exit-animation-select",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:em.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(el._,{children:["Duration: ",r.animation.exit.duration,"s"]}),i.jsx(er.i,{value:[r.animation.exit.duration],onValueChange:([e])=>y("animation.exit.duration",e),min:.1,max:5,step:.1,className:"mt-2"})]}),(0,i.jsxs)("div",{children:[i.jsx(el._,{children:"Easing"}),(0,i.jsxs)(u.Ph,{value:r.animation.exit.easing,onValueChange:e=>y("animation.exit.easing",e),children:[i.jsx(u.i4,{className:"mt-1",children:i.jsx(u.ki,{})}),i.jsx(u.Bw,{children:ef.map(e=>i.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),i.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:(0,i.jsxs)("p",{className:"text-xs text-purple-900",children:[i.jsx("strong",{children:"Tip:"})," Entrance plays when text appears, exit when it disappears"]})})]})]})})]})}function ev(e){return!e||isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}var ey=a(62881);let eb=(0,ey.Z)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var ej=a(98091);let ew=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#14b8a6","#f97316","#6366f1","#84cc16"];function e_({overlays:e,duration:t,currentTime:a,selectedOverlay:l,onSelectOverlay:n,onUpdateOverlay:r,onDeleteOverlay:o,onReorder:d,onSeek:u}){let m=(0,s.useRef)(null),[p,h]=(0,s.useState)(!1),[x,f]=(0,s.useState)(null),[g,v]=(0,s.useState)(null),y=(e,t)=>{t.stopPropagation(),n(e)},b=(e,t,a)=>{a.stopPropagation(),h(!0),f(e),v(t)},j=e=>ew[e%ew.length],w=e=>!e||isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{ref:m,className:"relative bg-gray-100 rounded-lg p-4 min-h-[300px] cursor-pointer",onClick:e=>{if(p)return;let a=e.currentTarget.getBoundingClientRect();u((e.clientX-a.left)/a.width*t)},"data-testid":"timeline-canvas",children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-between text-xs text-gray-500 px-4 py-2",children:Array.from({length:11},(e,a)=>i.jsx("span",{children:w(t/10*a)},a))}),i.jsx("div",{className:"absolute top-8 bottom-0 w-0.5 bg-red-500 z-20",style:{left:`${a/t*100}%`},children:i.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-red-500 rounded-full"})}),i.jsx("div",{className:"mt-12 space-y-3",children:0===e.length?i.jsx("div",{className:"text-center py-12 text-gray-500",children:'No overlays yet. Click "Add Overlay" to get started.'}):e.map((e,a)=>{let s=(e.timing?.start_time||0)/t*100,n=(e.timing?.end_time||t)/t*100,r=j(a),d=l?.id===e.id;return(0,i.jsxs)("div",{className:"relative h-12","data-testid":`timeline-overlay-${a}`,children:[i.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded"}),(0,i.jsxs)("div",{className:`absolute h-full rounded cursor-move transition-all ${d?"ring-2 ring-offset-2 ring-blue-500":""}`,style:{left:`${s}%`,width:`${n-s}%`,backgroundColor:r,opacity:d?1:.8},onClick:t=>y(e,t),onMouseDown:t=>b(e,"move",t),children:[i.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-black bg-opacity-30 cursor-ew-resize hover:bg-opacity-50",onMouseDown:t=>b(e,"start",t),onClick:e=>e.stopPropagation()}),(0,i.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between h-full",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-white text-sm font-medium truncate",children:[i.jsx(eb,{className:"w-3 h-3 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:e.label||e.endpoint_key})]}),i.jsx(c.z,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-white hover:bg-white hover:bg-opacity-20",onClick:t=>{t.stopPropagation(),o(e.id)},children:i.jsx(ej.Z,{className:"w-3 h-3"})})]}),i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-2 bg-black bg-opacity-30 cursor-ew-resize hover:bg-opacity-50",onMouseDown:t=>b(e,"end",t),onClick:e=>e.stopPropagation()})]}),i.jsx("div",{className:"absolute -bottom-5 left-0 text-xs text-gray-500",children:w(e.timing?.start_time||0)}),i.jsx("div",{className:"absolute -bottom-5 right-0 text-xs text-gray-500",children:w(e.timing?.end_time||0)})]},e.id||a)})})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((e,t)=>i.jsx(es.C,{className:"cursor-pointer",style:{backgroundColor:j(t)},onClick:()=>n(e),"data-testid":`overlay-badge-${t}`,children:e.label||e.endpoint_key},e.id||t))}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 bg-blue-50 border border-blue-200 rounded p-3",children:[i.jsx("p",{className:"font-medium mb-1",children:"Timeline Controls:"}),(0,i.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Click on timeline to seek to that position"}),i.jsx("li",{children:"Drag overlay bars to move them"}),i.jsx("li",{children:"Drag edges to adjust start/end times"}),i.jsx("li",{children:"Click overlay to select and edit details"})]})]})]})}function eN({overlays:e=[],currentTime:t,duration:a,selectedOverlay:l,showOverlays:n=!0,onSelectOverlay:r,onUpdateOverlay:o,containerRef:d,videoResolution:c=null}){let u=c?.width||1920,m=c?.height||1080,p=(0,s.useRef)(null),[h,x]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[v,y]=(0,s.useState)(null),[b,j]=(0,s.useState)({x:0,y:0}),[w,_]=(0,s.useState)({x:0,y:0}),[N,k]=(0,s.useState)(null),[S,C]=(0,s.useState)({}),[T,E]=(0,s.useState)(!1),[P,z]=(0,s.useState)([]),[R,M]=(0,s.useState)(-1),[D,A]=(0,s.useState)(!1),O=(0,s.useCallback)(e=>({x:(void 0!==e.x?e.x:50)/100*u,y:(void 0!==e.y?e.y:50)/100*m}),[u,m]),I=(0,s.useCallback)(e=>({x:Math.round(e.x/u*1e4)/100,y:Math.round(e.y/m*1e4)/100,unit:"percent"}),[u,m]),L=(0,s.useCallback)((e,t,a,i)=>[{x:e,y:t,cursor:"nw-resize",position:"nw"},{x:e+a/2,y:t,cursor:"n-resize",position:"n"},{x:e+a,y:t,cursor:"ne-resize",position:"ne"},{x:e+a,y:t+i/2,cursor:"e-resize",position:"e"},{x:e+a,y:t+i,cursor:"se-resize",position:"se"},{x:e+a/2,y:t+i,cursor:"s-resize",position:"s"},{x:e,y:t+i,cursor:"sw-resize",position:"sw"},{x:e,y:t+i/2,cursor:"w-resize",position:"w"}],[]);(0,s.useCallback)(()=>{R>0&&M(R-1)},[R]),(0,s.useCallback)(()=>{R<P.length-1&&M(R+1)},[R,P.length]),(0,s.useCallback)((e,t,a,i=0)=>{let s=t.split(" "),l=[],n="";for(let t=0;t<s.length;t++){let r=n?n+" "+s[t]:s[t],o=e.measureText(r).width;i>0&&(o+=i*(r.length-1)),o>a&&n?(l.push(n),n=s[t]):n=r}return n&&l.push(n),l.length>0?l:[t]},[]);let V=(0,s.useCallback)((e,t,a,i,s,l)=>{let n=t.split(""),r=a,o=n.reduce((t,a)=>t+e.measureText(a).width+s,-s);"center"===e.textAlign?r=a-o/2:"right"===e.textAlign&&(r=a-o),n.forEach(t=>{l?e.strokeText(t,r,i):e.fillText(t,r,i),r+=e.measureText(t).width+s})},[]),F=(0,s.useCallback)((e,t)=>{switch(t){case"linear":default:return e;case"ease-in":return e*e;case"ease-out":return e*(2-e);case"ease-in-out":return e<.5?2*e*e:-1+(4-2*e)*e;case"cubic-bezier(0.68, -0.55, 0.265, 1.55)":return(1-e)*(1-e)*(1-e)*0+-(3*(1-e)*(1-e)*e*.55)+3*(1-e)*e*e*1.55+e*e*e*1}},[]),$=(0,s.useCallback)((e,t,a)=>{let i={opacity:1,scale:1,rotation:0,translateX:0,translateY:0},s=1-t,l=a?t:s;switch(e){case"fade-in":case"fade-out":default:i.opacity=l;break;case"slide-up":i.opacity=l,i.translateY=a?-(100*s):100*t;break;case"slide-down":i.opacity=l,i.translateY=a?100*s:-(100*t);break;case"slide-left":i.opacity=l,i.translateX=a?-(100*s):100*t;break;case"slide-right":i.opacity=l,i.translateX=a?100*s:-(100*t);break;case"scale-up":i.opacity=l,i.scale=a?.5+.5*t:.5+.5*s;break;case"scale-down":i.opacity=l,i.scale=a?1.5-.5*t:1.5-.5*s;break;case"zoom-in":i.opacity=l,i.scale=a?t:s;break;case"bounce-in":case"bounce-out":i.opacity=l;let n=a?t:s;i.scale=1+.1*Math.sin(n*Math.PI*3)*(1-n);break;case"rotate-in":i.opacity=l,i.rotation=a?2*Math.PI*s:2*Math.PI*t,i.scale=l;break;case"spin":i.opacity=l,i.rotation=a?4*Math.PI*s:4*Math.PI*t;break;case"blur-in":case"blur-out":i.opacity=l,i.scale=1-.05*s;break;case"fade-slide-up":i.opacity=l,i.translateY=a?-(50*s):50*t;break;case"scale-fade":i.opacity=l,i.scale=a?.8+.2*t:.8+.2*s;break;case"typewriter":i.opacity=1}return i},[]),Z=(0,s.useCallback)((e,t)=>{let i=e.timing?.start_time||0,s=e.timing?.end_time||a,l=e.animation?.entrance||{type:"fade-in",duration:1,easing:"ease-in-out"},n=e.animation?.exit||{type:"fade-out",duration:1,easing:"ease-in-out"},r={opacity:1,scale:1,rotation:0,translateX:0,translateY:0};if(t<i+l.duration){let e=F(Math.min(1,(t-i)/l.duration),l.easing);r=$(l.type,e,!0)}else if(t>s-n.duration){let e=F(Math.min(1,(t-(s-n.duration))/n.duration),n.easing);r=$(n.type,e,!1)}return r},[a,F,$]),B=(0,s.useCallback)((e,a)=>{let i=a.placeholder_text||a.endpoint_key||"Sample Text",s=a.position||{x:50,y:50,unit:"percent"},l=a.styling||{},n=S[a.id],r=O(s),o=l.font_size||48,d=l.font_weight||"normal",c=l.font_family||"Arial",u=l.letter_spacing||0,m=l.line_height||1.2,p=l.text_align||"center",h=c.includes(" ")?`"${c}"`:c;e.font=`${d} ${o}px ${h}`,e.fillStyle=l.color||"#ffffff",e.textAlign=p,e.textBaseline="middle";let x=Z(a,t),f=n?.lines||[i],g=n?.height||o*m,v=o*m;e.save(),e.translate(r.x,r.y),e.globalAlpha=x.opacity,e.scale(x.scale,x.scale),e.rotate(x.rotation),e.translate(x.translateX,x.translateY);let y=-(g/2)+v/2;f.forEach((t,a)=>{let i=y+a*v;l.stroke?.enabled&&(e.strokeStyle=l.stroke.color||"#000000",e.lineWidth=l.stroke.width||2,u>0?V(e,t,0,i,u,!0):e.strokeText(t,0,i)),l.text_shadow&&(e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=4,e.shadowOffsetX=0,e.shadowOffsetY=2),u>0?V(e,t,0,i,u,!1):e.fillText(t,0,i)}),e.restore()},[t,Z,V,O,S]),U=(0,s.useCallback)((e,t)=>{let a=S[t.id];if(!a)return;let i=t.position||{x:50,y:50,unit:"percent"},s=O(i),l=s.x-a.width/2-10,n=s.y-a.height/2-10,r=a.width+20,o=a.height+20;e.fillStyle="rgba(59, 130, 246, 0.1)",e.fillRect(l,n,r,o),e.strokeStyle="#3b82f6",e.lineWidth=2,e.setLineDash([5,5]),e.strokeRect(l,n,r,o),e.setLineDash([]),L(l,n,r,o).forEach(t=>{e.fillStyle="#ffffff",e.fillRect(t.x-6,t.y-6,12,12),e.strokeStyle="#3b82f6",e.lineWidth=2,e.strokeRect(t.x-6,t.y-6,12,12)});let d=t.dimensions||{},c=d.width?d.width.toFixed(1):"auto";e.fillStyle="rgba(59, 130, 246, 0.9)",e.fillRect(l,n-25,180,20),e.fillStyle="#ffffff",e.font="12px Arial",e.textAlign="left",e.textBaseline="top",e.fillText(`(${i.x?.toFixed(1)}%, ${i.y?.toFixed(1)}%) W:${c}%`,l+5,n-23)},[S,L,O]),W=(0,s.useCallback)((e,t)=>{let a=S[t.id];if(!a)return;let i=O(t.position||{x:50,y:50,unit:"percent"}),s=i.x-a.width/2-10,l=i.y-a.height/2-10,n=a.width+20,r=a.height+20;e.strokeStyle="#60a5fa",e.lineWidth=1,e.setLineDash([3,3]),e.strokeRect(s,l,n,r),e.setLineDash([])},[S,O]);(0,s.useCallback)(()=>{let i=p.current;if(!i)return;let s=i.getContext("2d");s.clearRect(0,0,i.width,i.height);let n=e.filter(e=>{let i=e.timing?.start_time||0,s=e.timing?.end_time||a;return t>=i-.016&&t<=s+.016});n.sort((e,t)=>(e.layer_index||0)-(t.layer_index||0)),n.forEach(e=>{B(s,e)}),l&&S[l.id]&&U(s,l),N&&N.id!==l?.id&&S[N.id]&&W(s,N)},[t,e,a,l,N,S,B,U,W]);let Q=e=>{let t=p.current;if(!t)return{x:0,y:0};let a=t.getBoundingClientRect(),i=u/a.width,s=m/a.height;return{x:(e.clientX-a.left)*i,y:(e.clientY-a.top)*s}},Y=(i,s)=>{for(let l of e.filter(e=>{let i=e.timing?.start_time||0,s=e.timing?.end_time||a;return t>=i-.016&&t<=s+.016}).sort((e,t)=>(t.layer_index||0)-(e.layer_index||0))){let e=S[l.id];if(!e)continue;let t=O(l.position||{x:50,y:50,unit:"percent"}),a=t.x-e.width/2-10,n=t.y-e.height/2-10,r=e.width+20,o=e.height+20;if(i>=a&&i<=a+r&&s>=n&&s<=n+o)return l}return null},q=(e,t,a)=>{let i=S[a.id];if(!i)return null;let s=O(a.position||{x:50,y:50,unit:"percent"}),l=s.x-i.width/2-10;for(let a of L(l,s.y-i.height/2-10,i.width+20,i.height+20))if(12>=Math.sqrt(Math.pow(e-a.x,2)+Math.pow(t-a.y,2)))return a;return null},H=()=>{x(!1),g(!1),y(null)};return i.jsx("canvas",{ref:p,width:u,height:m,className:"absolute top-0 left-0 w-full h-full cursor-default",style:{display:n?"block":"none"},onMouseDown:e=>{let t=Q(e);if(l){let e=q(t.x,t.y,l);if(e){let a=O(l.position),i=S[l.id],s=l.dimensions||{};g(!0),y(e),j(t),_({x:a.x,y:a.y,fontSize:l.styling?.font_size||48,width:i?.width||200,height:i?.height||100,widthPercent:s.width||(i?.width||200)/u*100,heightPercent:s.height||(i?.height||100)/m*100,percentX:l.position.x,percentY:l.position.y});return}}let a=Y(t.x,t.y);if(a){r(a);let e=O(a.position);x(!0),j(t),_({x:e.x,y:e.y,percentX:a.position.x,percentY:a.position.y})}else r(null)},onMouseMove:e=>{let t=Q(e),a=p.current;if(!a)return;if(f&&l&&v){let e=t.x-b.x,i=t.y-b.y;if(!S[l.id])return;let s=v.position,n=w.width,r=w.height;if(T){let t=(e+i)/2;n=Math.max(50,w.width+t),r=Math.max(20,w.height+t)}else s.includes("e")?n=Math.max(50,w.width+e):s.includes("w")&&(n=Math.max(50,w.width-e)),s.includes("s")?r=Math.max(20,w.height+i):s.includes("n")&&(r=Math.max(20,w.height-i));let d=n/u*100,c=r/m*100;o(l.id,{dimensions:{width:Math.round(100*d)/100,height:Math.round(100*c)/100,unit:"percent"}}),a.style.cursor=v.cursor;return}if(h&&l){let e=t.x-b.x,i=t.y-b.y,s=I({x:Math.max(0,Math.min(u,w.x+e)),y:Math.max(0,Math.min(m,w.y+i))});o(l.id,{position:{...l.position,...s}}),a.style.cursor="move";return}if(l){let e=q(t.x,t.y,l);if(e){a.style.cursor=e.cursor;return}}let i=Y(t.x,t.y);k(i),a.style.cursor=i?"move":"default"},onMouseUp:H,onMouseLeave:H,"data-testid":"interactive-overlay-canvas"})}var ek=a(9015);let eS=(0,ey.Z)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var eC=a(43810);let eT=(0,ey.Z)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);var eE=a(12714),eP=a(91216),ez=a(71059),eR=a(94893),eM=a(83855),eD=a(78364);let eA=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8001";function eO({template:e,onSave:t}){let{toast:a}=(0,eD.pm)(),l=(0,s.useRef)(null);(0,s.useRef)(null);let r=(0,s.useRef)(null),[m,p]=(0,s.useState)(!1),[h,x]=(0,s.useState)(0),[f,g]=(0,s.useState)(0),[v,y]=(0,s.useState)(e?.text_overlays||[]),[b,j]=(0,s.useState)(null),[w,_]=(0,s.useState)(!0),[N,k]=(0,s.useState)(!1),[S,C]=(0,s.useState)("timeline"),[T,E]=(0,s.useState)(new Set),[P,z]=(0,s.useState)(!1),[R,M]=(0,s.useState)("couple_names"),[D,A]=(0,s.useState)(e?.video_data?.aspect_ratio||"16:9"),O=async()=>{let t={bride_name:{label:"Bride's Name",placeholder:"Sarah"},groom_name:{label:"Groom's Name",placeholder:"Michael"},bride_first_name:{label:"Bride's First Name",placeholder:"Sarah"},groom_first_name:{label:"Groom's First Name",placeholder:"Michael"},couple_names:{label:"Couple Names",placeholder:"John & Jane"},event_date:{label:"Event Date (Day)",placeholder:"15"},event_date_full:{label:"Event Date (Full)",placeholder:"June 15, 2025"},event_month:{label:"Event Month",placeholder:"June"},event_year:{label:"Event Year",placeholder:"2025"},event_day:{label:"Event Day",placeholder:"Monday"},event_time:{label:"Event Time",placeholder:"3:00 PM"},venue:{label:"Venue",placeholder:"Grand Hotel"},venue_address:{label:"Venue Address",placeholder:"123 Main St"},city:{label:"City",placeholder:"New York"},welcome_message:{label:"Welcome Message",placeholder:"Welcome to Our Wedding"},description:{label:"Description",placeholder:"Join us for our special day"},countdown_days:{label:"Countdown Days",placeholder:"30 Days"},custom_text_1:{label:"Custom Text 1",placeholder:"Custom Text"},custom_text_2:{label:"Custom Text 2",placeholder:"Custom Text"},custom_text_3:{label:"Custom Text 3",placeholder:"Custom Text"},custom_text_4:{label:"Custom Text 4",placeholder:"Custom Text"},custom_text_5:{label:"Custom Text 5",placeholder:"Custom Text"}},i=t[R]||t.couple_names,s={endpoint_key:R,label:i.label,placeholder_text:i.placeholder,position:{x:50,y:50,alignment:"center",anchor_point:"center",unit:"percent"},dimensions:{width:50,height:null,unit:"percent"},timing:{start_time:0,end_time:f||10},styling:{font_family:"Playfair Display",font_size:72,font_weight:"bold",color:"#ffffff",text_align:"center",letter_spacing:2,line_height:1.2,text_shadow:"0 2px 4px rgba(0,0,0,0.3)",stroke:{enabled:!1,color:"#000000",width:2}},animation:{type:"fade-in",duration:1,easing:"ease-in-out",entrance:{type:"fade-in",duration:1,easing:"ease-in-out"},exit:{type:"fade-out",duration:1,easing:"ease-in-out"}},responsive:{mobile_font_size:48,mobile_position:{x:50,y:30,unit:"percent"}},layer_index:v.length};try{let t=localStorage.getItem("token"),l=await n.Z.post(`${eA}/api/admin/video-templates/${e.id}/overlays`,s,{headers:{Authorization:`Bearer ${t}`}});y(l.data.text_overlays),a({title:"Success",description:`${i.label} overlay added successfully`})}catch(e){console.error("Failed to add overlay:",e),a({title:"Error",description:e.response?.data?.detail||"Failed to add overlay",variant:"destructive"})}},I=async(t,i)=>{if(T.has(t)){a({title:"Overlay Locked",description:"Unlock the overlay to make changes",variant:"destructive"});return}try{console.log("Updating overlay:",t,"with updates:",i),y(e=>e.map(e=>{if(e.id===t){let t={...e};return i.styling&&(t.styling={...e.styling,...i.styling,stroke:i.styling.stroke?{...e.styling?.stroke,...i.styling.stroke}:e.styling?.stroke}),i.animation&&(t.animation={...e.animation,...i.animation,entrance:i.animation.entrance?{...e.animation?.entrance,...i.animation.entrance}:e.animation?.entrance,exit:i.animation.exit?{...e.animation?.exit,...i.animation.exit}:e.animation?.exit}),i.position&&(t.position={...e.position,...i.position}),i.dimensions&&(t.dimensions={...e.dimensions,...i.dimensions}),i.timing&&(t.timing={...e.timing,...i.timing}),Object.keys(i).forEach(e=>{["styling","animation","position","dimensions","timing"].includes(e)||(t[e]=i[e])}),t}return e})),b?.id===t&&j(e=>{let t={...e};return i.styling&&(t.styling={...e.styling,...i.styling,stroke:i.styling.stroke?{...e.styling?.stroke,...i.styling.stroke}:e.styling?.stroke}),i.animation&&(t.animation={...e.animation,...i.animation,entrance:i.animation.entrance?{...e.animation?.entrance,...i.animation.entrance}:e.animation?.entrance,exit:i.animation.exit?{...e.animation?.exit,...i.animation.exit}:e.animation?.exit}),i.position&&(t.position={...e.position,...i.position}),i.dimensions&&(t.dimensions={...e.dimensions,...i.dimensions}),i.timing&&(t.timing={...e.timing,...i.timing}),Object.keys(i).forEach(e=>{["styling","animation","position","dimensions","timing"].includes(e)||(t[e]=i[e])}),t});let s=localStorage.getItem("token"),l=await n.Z.put(`${eA}/api/admin/video-templates/${e.id}/overlays/${t}`,i,{headers:{Authorization:`Bearer ${s}`}});console.log("Update response:",l.data),console.log("Returned overlays:",l.data.text_overlays);let r=l.data.text_overlays;if(y(r),b?.id===t){let e=r.find(e=>e.id===t);e&&(console.log("Updated overlay data from server:",JSON.stringify(e.styling,null,2)),console.log("Updated overlay animation from server:",JSON.stringify(e.animation,null,2)),j(e))}(!i.position||Object.keys(i).length>1)&&a({title:"Success",description:"Overlay updated successfully"})}catch(i){if(console.error("Failed to update overlay:",i),console.error("Error details:",i.response?.data),y(e?.text_overlays||[]),b?.id===t){let a=e?.text_overlays?.find(e=>e.id===t);a&&j(a)}throw a({title:"Error",description:i.response?.data?.detail||"Failed to update overlay",variant:"destructive"}),i}},L=async t=>{if(confirm("Are you sure you want to delete this overlay?"))try{let i=localStorage.getItem("token"),s=await n.Z.delete(`${eA}/api/admin/video-templates/${e.id}/overlays/${t}`,{headers:{Authorization:`Bearer ${i}`}});y(s.data.text_overlays),j(null),a({title:"Success",description:"Overlay deleted"})}catch(e){console.error("Failed to delete overlay:",e),a({title:"Error",description:"Failed to delete overlay",variant:"destructive"})}},V=async t=>{try{let a=localStorage.getItem("token");await n.Z.put(`${eA}/api/admin/video-templates/${e.id}/overlays/reorder`,t,{headers:{Authorization:`Bearer ${a}`}});let i=t.map(e=>v.find(t=>t.id===e)).filter(Boolean);y(i)}catch(e){console.error("Failed to reorder overlays:",e)}},F=async()=>{k(!0);try{t&&await t(),a({title:"Success",description:"Template saved successfully"})}catch(e){a({title:"Error",description:"Failed to save template",variant:"destructive"})}finally{k(!1)}},$=async()=>{if(!b)return;let t={...b,position:{...b.position,x:b.position.x+50,y:b.position.y+50},label:`${b.label} (Copy)`,layer_index:v.length};delete t.id;try{let i=localStorage.getItem("token"),s=await n.Z.post(`${eA}/api/admin/video-templates/${e.id}/overlays`,t,{headers:{Authorization:`Bearer ${i}`}});y(s.data.text_overlays),a({title:"Success",description:"Overlay duplicated successfully"})}catch(e){console.error("Failed to duplicate overlay:",e),a({title:"Error",description:"Failed to duplicate overlay",variant:"destructive"})}},Z=async t=>{if(confirm(`Changing aspect ratio from ${D} to ${t} may affect overlay positioning. Continue?`))try{let i=localStorage.getItem("token");await n.Z.put(`${eA}/api/admin/video-templates/${e.id}/aspect-ratio`,{aspect_ratio:t},{headers:{Authorization:`Bearer ${i}`}}),A(t),a({title:"Success",description:`Aspect ratio changed to ${t}. Please review overlay positions.`}),window.location.reload()}catch(e){console.error("Failed to change aspect ratio:",e),a({title:"Error",description:e.response?.data?.detail||"Failed to change aspect ratio",variant:"destructive"})}};return(0,i.jsxs)("div",{className:"space-y-6",children:[i.jsx(d.Zb,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),i.jsx(es.C,{className:"ml-2",variant:"default",children:"In Progress"})]}),(0,i.jsxs)("div",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:v.length})," overlays configured"]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 pl-4 border-l",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Aspect Ratio:"}),(0,i.jsxs)(u.Ph,{value:D,onValueChange:Z,children:[i.jsx(u.i4,{className:"w-[120px]","data-testid":"aspect-ratio-select",children:i.jsx(u.ki,{})}),(0,i.jsxs)(u.Bw,{children:[i.jsx(u.Ql,{value:"16:9",children:"16:9 (Landscape)"}),i.jsx(u.Ql,{value:"9:16",children:"9:16 (Portrait)"})]})]})]}),b&&(0,i.jsxs)("div",{className:"flex items-center gap-2 ml-4 pl-4 border-l",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Selected:"}),i.jsx(es.C,{variant:"secondary",children:b.label||b.endpoint_key}),(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>{b&&E(e=>{let t=new Set(e);return t.has(b.id)?(t.delete(b.id),a({title:"Overlay Unlocked",description:"You can now edit this overlay"})):(t.add(b.id),a({title:"Overlay Locked",description:"This overlay is now protected from changes"})),t})},"data-testid":"toggle-lock-btn",children:[T.has(b.id)?i.jsx(ek.Z,{className:"w-4 h-4 mr-1"}):i.jsx(eS,{className:"w-4 h-4 mr-1"}),T.has(b.id)?"Unlock":"Lock"]}),(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:$,"data-testid":"duplicate-overlay-btn",children:[i.jsx(eC.Z,{className:"w-4 h-4 mr-1"}),"Duplicate"]}),(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>{b&&L(b.id)},className:"text-red-600 hover:text-red-700","data-testid":"delete-selected-btn",children:[i.jsx(ej.Z,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),i.jsx("div",{className:"flex gap-2",children:(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>C("timeline"===S?"list":"timeline"),"data-testid":"toggle-editor-mode-btn",children:[i.jsx(eT,{className:"w-4 h-4 mr-2"}),"timeline"===S?"List View":"Timeline View"]})})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,i.jsxs)(d.Zb,{className:"p-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-semibold",children:"Video Preview"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>z(!P),"data-testid":"toggle-grid-snap-btn",className:P?"bg-blue-100":"",children:["Grid Snap ",P?"ON":"OFF"]}),(0,i.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>_(!w),"data-testid":"toggle-overlays-btn",children:[w?i.jsx(eE.Z,{className:"w-4 h-4 mr-1"}):i.jsx(eP.Z,{className:"w-4 h-4 mr-1"}),w?"Hide":"Show"," Overlays"]}),(0,i.jsxs)(c.z,{size:"sm",onClick:()=>p(!m),"data-testid":"play-pause-btn",children:[m?i.jsx(ez.Z,{className:"w-4 h-4 mr-1"}):i.jsx(eR.Z,{className:"w-4 h-4 mr-1"}),m?"Pause":"Play"]})]})]}),(0,i.jsxs)("div",{className:`relative bg-black rounded-lg overflow-hidden ${"9:16"===D?"aspect-[9/16] max-w-md mx-auto":"aspect-video"}`,ref:r,children:[i.jsx(o(),{ref:l,url:e?.video_data?.original_url,playing:m,controls:!1,width:"100%",height:"100%",onProgress:({playedSeconds:e})=>x(e),onDuration:g,onPlay:()=>p(!0),onPause:()=>p(!1),config:{file:{attributes:{controlsList:"nodownload",disablePictureInPicture:!0}}}}),i.jsx(eN,{overlays:v,currentTime:h,duration:f,selectedOverlay:b,showOverlays:w,onSelectOverlay:j,onUpdateOverlay:I,containerRef:r,videoResolution:{width:e?.video_data?.width||1920,height:e?.video_data?.height||1080}})]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[i.jsx("span",{children:eI(h)}),i.jsx("span",{children:eI(f)})]}),i.jsx("input",{type:"range",min:0,max:f||100,value:h,onChange:e=>{let t=parseFloat(e.target.value);x(t),l.current&&l.current.seekTo(t)},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer","data-testid":"timeline-slider"})]})]}),(0,i.jsxs)(d.Zb,{className:"p-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-wrap gap-2",children:[(0,i.jsxs)("h3",{className:"font-semibold",children:["Text Overlays (",v.length,")"]}),(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsxs)(u.Ph,{value:R,onValueChange:M,children:[i.jsx(u.i4,{className:"w-[180px]","data-testid":"overlay-type-select",children:i.jsx(u.ki,{placeholder:"Select overlay type"})}),(0,i.jsxs)(u.Bw,{children:[i.jsx(u.Ql,{value:"bride_name",children:"Bride's Name"}),i.jsx(u.Ql,{value:"groom_name",children:"Groom's Name"}),i.jsx(u.Ql,{value:"bride_first_name",children:"Bride's First Name"}),i.jsx(u.Ql,{value:"groom_first_name",children:"Groom's First Name"}),i.jsx(u.Ql,{value:"couple_names",children:"Couple Names"}),i.jsx(u.Ql,{value:"event_date",children:"Event Date (Day)"}),i.jsx(u.Ql,{value:"event_date_full",children:"Event Date (Full)"}),i.jsx(u.Ql,{value:"event_month",children:"Event Month"}),i.jsx(u.Ql,{value:"event_year",children:"Event Year"}),i.jsx(u.Ql,{value:"event_day",children:"Event Day"}),i.jsx(u.Ql,{value:"event_time",children:"Event Time"}),i.jsx(u.Ql,{value:"venue",children:"Venue"}),i.jsx(u.Ql,{value:"venue_address",children:"Venue Address"}),i.jsx(u.Ql,{value:"city",children:"City"}),i.jsx(u.Ql,{value:"welcome_message",children:"Welcome Message"}),i.jsx(u.Ql,{value:"description",children:"Description"}),i.jsx(u.Ql,{value:"countdown_days",children:"Countdown Days"}),i.jsx(u.Ql,{value:"custom_text_1",children:"Custom Text 1"}),i.jsx(u.Ql,{value:"custom_text_2",children:"Custom Text 2"}),i.jsx(u.Ql,{value:"custom_text_3",children:"Custom Text 3"}),i.jsx(u.Ql,{value:"custom_text_4",children:"Custom Text 4"}),i.jsx(u.Ql,{value:"custom_text_5",children:"Custom Text 5"})]})]}),(0,i.jsxs)(c.z,{size:"sm",onClick:O,"data-testid":"add-overlay-btn",children:[i.jsx(eM.Z,{className:"w-4 h-4 mr-1"}),"Add Overlay"]})]})]}),"timeline"===S?i.jsx(e_,{overlays:v,duration:f,currentTime:h,selectedOverlay:b,onSelectOverlay:j,onUpdateOverlay:I,onDeleteOverlay:L,onReorder:V,onSeek:e=>{x(e),l.current&&l.current.seekTo(e)}}):i.jsx(ea,{className:"h-64",children:0===v.length?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No overlays added yet"}):i.jsx("div",{className:"space-y-2",children:v.map((e,t)=>i.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${b?.id===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>j(e),"data-testid":`overlay-item-${t}`,children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm",children:e.label||e.endpoint_key}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[eI(e.timing?.start_time||0)," - ",eI(e.timing?.end_time||0)]})]}),i.jsx(c.z,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),L(e.id)},className:"text-red-600 hover:text-red-700",children:i.jsx(ej.Z,{className:"w-4 h-4"})})]})},e.id||t))})})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsx(d.Zb,{className:"p-4 sticky top-6",children:b?i.jsx(eg,{overlay:b,duration:f,currentTime:h,onUpdate:e=>I(b.id,e),onSeek:e=>{x(e),l.current&&l.current.seekTo(e)}}):i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-500",children:"Select an overlay to configure"})})})})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)(d.Zb,{className:"p-4 flex-1 mr-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Keyboard Shortcuts"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Delete"})," - Delete selected overlay"]}),(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Ctrl/Cmd + D"})," - Duplicate overlay"]}),(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Arrow Keys"})," - Move overlay (1px)"]}),(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Shift + Arrow"})," - Move overlay (10px)"]}),(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Ctrl/Cmd + L"})," - Lock/Unlock overlay"]}),(0,i.jsxs)("div",{children:[i.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Shift + Drag"})," - Proportional resize"]})]})]}),(0,i.jsxs)(c.z,{onClick:F,disabled:N,size:"lg","data-testid":"save-template-btn",children:[i.jsx(ec.Z,{className:"w-4 h-4 mr-2"}),N?"Saving...":"Save Template"]})]})]})}function eI(e){return!e||isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}var eL=a(86333);function eV(){let e=(0,l.useRouter)();(0,l.useParams)();let{toast:t}=(0,eD.pm)(),[a,n]=(0,s.useState)(null),[r,o]=(0,s.useState)(!0),d=async()=>{try{t({title:"Success",description:"Template saved successfully"}),await new Promise(e=>setTimeout(e,500)),e.push("/admin/video-templates")}catch(e){console.error("Error during save:",e),t({title:"Error",description:"Failed to save template",variant:"destructive"})}};return r?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Loading template..."})]})}):a?(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"border-b bg-white px-6 py-4",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,i.jsxs)(c.z,{variant:"ghost",onClick:()=>e.push("/admin/video-templates"),className:"mb-2","data-testid":"back-to-templates-btn",children:[i.jsx(eL.Z,{className:"w-4 h-4 mr-2"}),"Back to Templates"]}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.name}),i.jsx("p",{className:"text-gray-600 text-sm mt-1",children:a.description})]})}),i.jsx("div",{className:"max-w-7xl mx-auto p-6",children:i.jsx(eO,{template:a,onSave:d})})]}):null}a(89420)},20835:(e,t,a)=>{"use strict";a.d(t,{C:()=>r});var i=a(10326);a(17577);var s=a(79360),l=a(46084);let n=(0,s.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function r({className:e,variant:t,...a}){return i.jsx("div",{className:(0,l.cn)(n({variant:t}),e),...a})}},50560:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>r,SZ:()=>d,Zb:()=>n,aY:()=>c,eW:()=>u,ll:()=>o});var i=a(10326),s=a(17577),l=a(46084);let n=s.forwardRef(({className:e,...t},a)=>i.jsx("div",{ref:a,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));n.displayName="Card";let r=s.forwardRef(({className:e,...t},a)=>i.jsx("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...t}));r.displayName="CardHeader";let o=s.forwardRef(({className:e,...t},a)=>i.jsx("div",{ref:a,className:(0,l.cn)("font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},a)=>i.jsx("div",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},a)=>i.jsx("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=s.forwardRef(({className:e,...t},a)=>i.jsx("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},38705:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var i=a(10326),s=a(17577),l=a(46084);let n=s.forwardRef(({className:e,type:t,...a},s)=>i.jsx("input",{type:t,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...a}));n.displayName="Input"},79349:(e,t,a)=>{"use strict";a.d(t,{_:()=>d});var i=a(10326),s=a(17577),l=a(29152),n=a(79360),r=a(46084);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...t},a)=>i.jsx(l.f,{ref:a,className:(0,r.cn)(o(),e),...t}));d.displayName=l.f.displayName},240:(e,t,a)=>{"use strict";a.d(t,{Bw:()=>x,Ph:()=>c,Ql:()=>f,i4:()=>m,ki:()=>u});var i=a(10326),s=a(17577),l=a(8845),n=a(941),r=a(96633),o=a(32933),d=a(46084);let c=l.fC;l.ZA;let u=l.B4,m=s.forwardRef(({className:e,children:t,...a},s)=>(0,i.jsxs)(l.xz,{ref:s,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap bg-transparent px-0 py-0 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-0 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 [&>span]:border-none [&>span]:outline-none [&>span]:focus:border-none [&>span]:focus:outline-none [&>span]:focus:ring-0 [&>span]:focus:ring-offset-0 [&>span]:!border-0 [&>span]:!outline-none [&>span]:!ring-0",e),...a,children:[t,i.jsx(l.JO,{asChild:!0,children:i.jsx(n.Z,{className:"h-4 w-4 opacity-50 ml-1"})})]}));m.displayName=l.xz.displayName;let p=s.forwardRef(({className:e,...t},a)=>i.jsx(l.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(r.Z,{className:"h-4 w-4"})}));p.displayName=l.u_.displayName;let h=s.forwardRef(({className:e,...t},a)=>i.jsx(l.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(n.Z,{className:"h-4 w-4"})}));h.displayName=l.$G.displayName;let x=s.forwardRef(({className:e,children:t,position:a="popper",...s},n)=>i.jsx(l.h_,{children:(0,i.jsxs)(l.VY,{ref:n,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[i.jsx(p,{}),i.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(h,{})]})}));x.displayName=l.VY.displayName,s.forwardRef(({className:e,...t},a)=>i.jsx(l.__,{ref:a,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",e),...t})).displayName=l.__.displayName;let f=s.forwardRef(({className:e,children:t,...a},s)=>(0,i.jsxs)(l.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none border-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>span]:border-none [&>span]:outline-none [&>span]:!border-0 [&>span]:!outline-none",e),...a,children:[i.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(l.wU,{children:i.jsx(o.Z,{className:"h-4 w-4"})})}),i.jsx(l.eT,{children:t})]}));f.displayName=l.ck.displayName,s.forwardRef(({className:e,...t},a)=>i.jsx(l.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=l.Z0.displayName},64745:(e,t,a)=>{"use strict";a.d(t,{i:()=>r});var i=a(10326),s=a(17577),l=a(87131),n=a(46084);let r=s.forwardRef(({className:e,...t},a)=>(0,i.jsxs)(l.fC,{ref:a,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",e),...t,children:[i.jsx(l.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:i.jsx(l.e6,{className:"absolute h-full bg-primary"})}),i.jsx(l.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));r.displayName=l.fC.displayName},21519:(e,t,a)=>{"use strict";a.d(t,{r:()=>_});var i=a(10326),s=a(17577),l=a(82561),n=a(48051),r=a(93095),o=a(52067),d=a(53405),c=a(2566),u=a(77335),m="Switch",[p,h]=(0,r.b)(m),[x,f]=p(m),g=s.forwardRef((e,t)=>{let{__scopeSwitch:a,name:r,checked:d,defaultChecked:c,required:p,disabled:h,value:f="on",onCheckedChange:g,form:v,...y}=e,[w,_]=s.useState(null),N=(0,n.e)(t,e=>_(e)),k=s.useRef(!1),S=!w||v||!!w.closest("form"),[C,T]=(0,o.T)({prop:d,defaultProp:c??!1,onChange:g,caller:m});return(0,i.jsxs)(x,{scope:a,checked:C,disabled:h,children:[(0,i.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":C,"aria-required":p,"data-state":j(C),"data-disabled":h?"":void 0,disabled:h,value:f,...y,ref:N,onClick:(0,l.Mj)(e.onClick,e=>{T(e=>!e),S&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),S&&(0,i.jsx)(b,{control:w,bubbles:!k.current,name:r,value:f,checked:C,required:p,disabled:h,form:v,style:{transform:"translateX(-100%)"}})]})});g.displayName=m;var v="SwitchThumb",y=s.forwardRef((e,t)=>{let{__scopeSwitch:a,...s}=e,l=f(v,a);return(0,i.jsx)(u.WV.span,{"data-state":j(l.checked),"data-disabled":l.disabled?"":void 0,...s,ref:t})});y.displayName=v;var b=s.forwardRef(({__scopeSwitch:e,control:t,checked:a,bubbles:l=!0,...r},o)=>{let u=s.useRef(null),m=(0,n.e)(u,o),p=(0,d.D)(a),h=(0,c.t)(t);return s.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==a&&t){let i=new Event("click",{bubbles:l});t.call(e,a),e.dispatchEvent(i)}},[p,a,l]),(0,i.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...r,tabIndex:-1,ref:m,style:{...r.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function j(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var w=a(46084);let _=s.forwardRef(({className:e,...t},a)=>i.jsx(g,{className:(0,w.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:i.jsx(y,{className:(0,w.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));_.displayName=g.displayName},6917:(e,t,a)=>{"use strict";a.d(t,{SP:()=>d,dr:()=>o,mQ:()=>r,nU:()=>c});var i=a(10326),s=a(17577),l=a(28407),n=a(46084);let r=l.fC,o=s.forwardRef(({className:e,...t},a)=>i.jsx(l.aV,{ref:a,className:(0,n.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));o.displayName=l.aV.displayName;let d=s.forwardRef(({className:e,...t},a)=>i.jsx(l.xz,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));d.displayName=l.xz.displayName;let c=s.forwardRef(({className:e,...t},a)=>i.jsx(l.VY,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=l.VY.displayName},78364:(e,t,a)=>{"use strict";a.d(t,{pm:()=>m});var i=a(17577);let s=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},r=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=r(d,e),o.forEach(e=>{e(d)})}function u({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=i.useState(d);return i.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},86333:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(0,a(62881).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},91216:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(0,a(62881).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},94893:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(0,a(62881).Z)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},31215:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(0,a(62881).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},1572:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(0,a(62881).Z)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},98091:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=(0,a(62881).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},33140:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>r});var i=a(68570);let s=(0,i.createProxy)(String.raw`/app/frontend/app/admin/video-templates/[id]/page.js`),{__esModule:l,$$typeof:n}=s;s.default;let r=(0,i.createProxy)(String.raw`/app/frontend/app/admin/video-templates/[id]/page.js#default`)},9815:(e,t,a)=>{"use strict";a.d(t,{z:()=>n});var i=a(17577),s=a(48051),l=a(65819),n=e=>{let{present:t,children:a}=e,n=function(e){var t,a;let[s,n]=i.useState(),o=i.useRef(null),d=i.useRef(e),c=i.useRef("none"),[u,m]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},i.useReducer((e,t)=>a[e][t]??e,t));return i.useEffect(()=>{let e=r(o.current);c.current="mounted"===u?e:"none"},[u]),(0,l.b)(()=>{let t=o.current,a=d.current;if(a!==e){let i=c.current,s=r(t);e?m("MOUNT"):"none"===s||t?.display==="none"?m("UNMOUNT"):a&&i!==s?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,l.b)(()=>{if(s){let e;let t=s.ownerDocument.defaultView??window,a=a=>{let i=r(o.current).includes(CSS.escape(a.animationName));if(a.target===s&&i&&(m("ANIMATION_END"),!d.current)){let a=s.style.animationFillMode;s.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=a)})}},i=e=>{e.target===s&&(c.current=r(o.current))};return s.addEventListener("animationstart",i),s.addEventListener("animationcancel",a),s.addEventListener("animationend",a),()=>{t.clearTimeout(e),s.removeEventListener("animationstart",i),s.removeEventListener("animationcancel",a),s.removeEventListener("animationend",a)}}m("ANIMATION_END")},[s,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:i.useCallback(e=>{o.current=e?getComputedStyle(e):null,n(e)},[])}}(t),o="function"==typeof a?a({present:n.isPresent}):i.Children.only(a),d=(0,s.e)(n.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(a=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(o));return"function"==typeof a||n.isPresent?i.cloneElement(o,{ref:d}):null};function r(e){return e?.animationName||"none"}n.displayName="Presence"}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[8948,168,1961,5759,730,4334,7131,4874,4342],()=>a(86996));module.exports=i})();